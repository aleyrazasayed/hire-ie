(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(on,pt,V)=>{"use strict";V.d(pt,{nm:()=>Xr});var c=V(5813);V(4650),V(5867);var ut=V(5861),st=V(9681),it=V(4859),He=V(2090),ze=V(1877);const re=new Map,Ze={activated:!1,tokenObservers:[]},ce={initialized:!1,enabled:!1};function ge(Je){return re.get(Je)||Object.assign({},Ze)}function ie(){return ce}class Ue{constructor(at,wt,Gt,tn,_n){if(this.operation=at,this.retryPolicy=wt,this.getWaitDuration=Gt,this.lowerBound=tn,this.upperBound=_n,this.pending=null,this.nextErrorWaitInterval=tn,tn>_n)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(at){var wt=this;return(0,ut.Z)(function*(){wt.stop();try{wt.pending=new He.BH,yield function Ne(Je){return new Promise(at=>{setTimeout(at,Je)})}(wt.getNextRun(at)),wt.pending.resolve(),yield wt.pending.promise,wt.pending=new He.BH,yield wt.operation(),wt.pending.resolve(),yield wt.pending.promise,wt.process(!0).catch(()=>{})}catch(Gt){wt.retryPolicy(Gt)?wt.process(!1).catch(()=>{}):wt.stop()}})()}getNextRun(at){if(at)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const wt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),wt}}}const _t=new He.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ut(Je){if(!ge(Je).activated)throw _t.create("use-before-activation",{appName:Je.name})}function er(Je,at){return tr.apply(this,arguments)}function tr(){return(tr=(0,ut.Z)(function*({url:Je,body:at},wt){var Gt,tn;const _n={"Content-Type":"application/json"},or=wt.getImmediate({optional:!0});if(or){const Mi=yield or.getHeartbeatsHeader();Mi&&(_n["X-Firebase-Client"]=Mi)}const li={method:"POST",body:JSON.stringify(at),headers:_n};let ar,Es;try{ar=yield fetch(Je,li)}catch(Mi){throw _t.create("fetch-network-error",{originalErrorMessage:null===(Gt=Mi)||void 0===Gt?void 0:Gt.message})}if(200!==ar.status)throw _t.create("fetch-status-error",{httpStatus:ar.status});try{Es=yield ar.json()}catch(Mi){throw _t.create("fetch-parse-error",{originalErrorMessage:null===(tn=Mi)||void 0===tn?void 0:tn.message})}const _i=Es.ttl.match(/^([\d.]+)(s)$/);if(!_i||!_i[2]||isNaN(Number(_i[1])))throw _t.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Es.ttl}`});const Zi=1e3*Number(_i[1]),ls=Date.now();return{token:Es.token,expireTimeMillis:ls+Zi,issuedAtTimeMillis:ls}})).apply(this,arguments)}function hn(Je,at){const{projectId:wt,appId:Gt,apiKey:tn}=Je.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${wt}/apps/${Gt}:exchangeDebugToken?key=${tn}`,body:{debug_token:at}}}const Ln="firebase-app-check-store";let Wt=null;function Qt(){return Wt||(Wt=new Promise((Je,at)=>{var wt;try{const Gt=indexedDB.open("firebase-app-check-database",1);Gt.onsuccess=tn=>{Je(tn.target.result)},Gt.onerror=tn=>{var _n;at(_t.create("storage-open",{originalErrorMessage:null===(_n=tn.target.error)||void 0===_n?void 0:_n.message}))},Gt.onupgradeneeded=tn=>{0===tn.oldVersion&&tn.target.result.createObjectStore(Ln,{keyPath:"compositeKey"})}}catch(Gt){at(_t.create("storage-open",{originalErrorMessage:null===(wt=Gt)||void 0===wt?void 0:wt.message}))}}),Wt)}function xn(){return(xn=(0,ut.Z)(function*(Je,at){const Gt=(yield Qt()).transaction(Ln,"readwrite"),_n=Gt.objectStore(Ln).put({compositeKey:Je,value:at});return new Promise((or,li)=>{_n.onsuccess=ar=>{or()},Gt.onerror=ar=>{var Es;li(_t.create("storage-set",{originalErrorMessage:null===(Es=ar.target.error)||void 0===Es?void 0:Es.message}))}})})).apply(this,arguments)}const _r=new ze.Yd("@firebase/app-check");function fi(Je,at){return(0,He.hl)()?function Rr(Je,at){return function Dr(Je,at){return xn.apply(this,arguments)}(function yi(Je){return`${Je.options.appId}-${Je.name}`}(Je),at)}(Je,at).catch(wt=>{_r.warn(`Failed to write token to IndexedDB. Error: ${wt}`)}):Promise.resolve()}function bi(){return ie().enabled}function dr(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,ut.Z)(function*(){const Je=ie();if(Je.enabled&&Je.token)return Je.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const nn={error:"UNKNOWN_ERROR"};function jt(Je){return He.US.encodeString(JSON.stringify(Je),!1)}function vn(Je){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,ut.Z)(function*(Je,at=!1){const wt=Je.app;Ut(wt);const Gt=ge(wt);let _n,tn=Gt.token;if(tn&&!Ct(tn)&&(Gt.token=void 0,tn=void 0),!tn){const ar=yield Gt.cachedTokenPromise;ar&&(Ct(ar)?tn=ar:yield fi(wt,void 0))}if(!at&&tn&&Ct(tn))return{token:tn.token};let li,or=!1;if(bi()){Gt.exchangeTokenPromise||(Gt.exchangeTokenPromise=er(hn(wt,yield dr()),Je.heartbeatServiceProvider).finally(()=>{Gt.exchangeTokenPromise=void 0}),or=!0);const ar=yield Gt.exchangeTokenPromise;return yield fi(wt,ar),Gt.token=ar,{token:ar.token}}try{Gt.exchangeTokenPromise||(Gt.exchangeTokenPromise=Gt.provider.getToken().finally(()=>{Gt.exchangeTokenPromise=void 0}),or=!0),tn=yield ge(wt).exchangeTokenPromise}catch(ar){"appCheck/throttled"===ar.code?_r.warn(ar.message):_r.error(ar),_n=ar}return tn?_n?li=Ct(tn)?{token:tn.token,internalError:_n}:Et(_n):(li={token:tn.token},Gt.token=tn,yield fi(wt,tn)):li=Et(_n),or&&Qe(wt,li),li})).apply(this,arguments)}function Vn(Je,at){const wt=ge(Je),Gt=wt.tokenObservers.filter(tn=>tn.next!==at);0===Gt.length&&wt.tokenRefresher&&wt.tokenRefresher.isRunning()&&wt.tokenRefresher.stop(),wt.tokenObservers=Gt}function Ye(Je){const{app:at}=Je,wt=ge(at);let Gt=wt.tokenRefresher;Gt||(Gt=function Fe(Je){const{app:at}=Je;return new Ue((0,ut.Z)(function*(){let Gt;if(Gt=ge(at).token?yield vn(Je,!0):yield vn(Je),Gt.error)throw Gt.error;if(Gt.internalError)throw Gt.internalError}),()=>!0,()=>{const wt=ge(at);if(wt.token){let Gt=wt.token.issuedAtTimeMillis+.5*(wt.token.expireTimeMillis-wt.token.issuedAtTimeMillis)+3e5;return Gt=Math.min(Gt,wt.token.expireTimeMillis-3e5),Math.max(0,Gt-Date.now())}return 0},3e4,96e4)}(Je),wt.tokenRefresher=Gt),!Gt.isRunning()&&wt.isTokenAutoRefreshEnabled&&Gt.start()}function Qe(Je,at){const wt=ge(Je).tokenObservers;for(const Gt of wt)try{"EXTERNAL"===Gt.type&&null!=at.error?Gt.error(at.error):Gt.next(at)}catch(tn){}}function Ct(Je){return Je.expireTimeMillis-Date.now()>0}function Et(Je){return{token:jt(nn),error:Je}}class An{constructor(at,wt){this.app=at,this.heartbeatServiceProvider=wt}_delete(){const{tokenObservers:at}=ge(this.app);for(const wt of at)Vn(this.app,wt.next);return Promise.resolve()}}const Gn="app-check-internal";!function xr(){(0,st._registerComponent)(new it.wA("app-check",Je=>function Jn(Je,at){return new An(Je,at)}(Je.getProvider("app").getImmediate(),Je.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Je,at,wt)=>{Je.getProvider(Gn).initialize()})),(0,st._registerComponent)(new it.wA(Gn,Je=>function rr(Je){return{getToken:at=>vn(Je,at),addTokenListener:at=>function Nn(Je,at,wt,Gt){const{app:tn}=Je,_n=ge(tn);if(_n.tokenObservers=[..._n.tokenObservers,{next:wt,error:Gt,type:at}],_n.token&&Ct(_n.token)){const li=_n.token;Promise.resolve().then(()=>{wt({token:li.token}),Ye(Je)}).catch(()=>{})}_n.cachedTokenPromise.then(()=>Ye(Je))}(Je,"INTERNAL",at),removeTokenListener:at=>Vn(Je.app,at)}}(Je.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,st.registerVersion)("@firebase/app-check","0.5.17")}();class Xr{constructor(){return(0,c.vb)("app-check")}}typeof window<"u"&&window},1205:(on,pt,V)=>{"use strict";V.d(pt,{zQ:()=>Pe,ww:()=>Ie,rT:()=>ce,f7:()=>ve,L6:()=>re,_Q:()=>Ze,lh:()=>ge,Qv:()=>ze,nw:()=>ie});var c=V(4650),X=V(7579),W=V(9646),Oe=V(9751),Ae=V(8996),Se=V(6451),me=V(5363),Le=V(3900),Ke=V(4004),Ce=V(6063);class we extends X.x{constructor(Ve=1/0,We=1/0,$e=Ce.l){super(),this._bufferSize=Ve,this._windowTime=We,this._timestampProvider=$e,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=We===1/0,this._bufferSize=Math.max(1,Ve),this._windowTime=Math.max(1,We)}next(Ve){const{isStopped:We,_buffer:$e,_infiniteTimeWindow:Ue,_timestampProvider:Ne,_windowTime:tt}=this;We||($e.push(Ve),!Ue&&$e.push(Ne.now()+tt)),this._trimBuffer(),super.next(Ve)}_subscribe(Ve){this._throwIfClosed(),this._trimBuffer();const We=this._innerSubscribe(Ve),{_infiniteTimeWindow:$e,_buffer:Ue}=this,Ne=Ue.slice();for(let tt=0;tt<Ne.length&&!Ve.closed;tt+=$e?1:2)Ve.next(Ne[tt]);return this._checkFinalizedStatuses(Ve),We}_trimBuffer(){const{_bufferSize:Ve,_timestampProvider:We,_buffer:$e,_infiniteTimeWindow:Ue}=this,Ne=(Ue?1:2)*Ve;if(Ve<1/0&&Ne<$e.length&&$e.splice(0,$e.length-Ne),!Ue){const tt=We.now();let _t=0;for(let Kt=1;Kt<$e.length&&$e[Kt]<=tt;Kt+=2)_t=Kt;_t&&$e.splice(0,_t+1)}}}var be=V(3099);function qe(et,Ve,We){let $e,Ue=!1;return et&&"object"==typeof et?({bufferSize:$e=1/0,windowTime:Ve=1/0,refCount:Ue=!1,scheduler:We}=et):$e=null!=et?et:1/0,(0,be.B)({connector:()=>new we($e,Ve,We),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ue})}var Ge=V(590),ot=V(576);function It(et,Ve){return(0,ot.m)(Ve)?(0,Le.w)(()=>et,Ve):(0,Le.w)(()=>et)}var ke=V(9468),De=V(9300),fe=V(5813),q=V(2011),ut=V(6895),st=V(440),it=V(127);const ze=new c.OlP("angularfire2.auth.use-emulator"),re=new c.OlP("angularfire2.auth.settings"),Ze=new c.OlP("angularfire2.auth.tenant-id"),ce=new c.OlP("angularfire2.auth.langugage-code"),ge=new c.OlP("angularfire2.auth.use-device-language"),ve=new c.OlP("angularfire.auth.persistence"),ie=(et,Ve,We,$e,Ue,Ne,tt,_t)=>(0,q.cc)(`${et.name}.auth`,"AngularFireAuth",et.name,()=>{const Kt=Ve.runOutsideAngular(()=>et.auth());if(We&&Kt.useEmulator(...We),$e&&(Kt.tenantId=$e),Kt.languageCode=Ue,Ne&&Kt.useDeviceLanguage(),tt)for(const[Ut,zt]of Object.entries(tt))Kt.settings[Ut]=zt;return _t&&Kt.setPersistence(_t),Kt},[We,$e,Ue,Ne,tt,_t]);let Pe=(()=>{class et{constructor(We,$e,Ue,Ne,tt,_t,Kt,Ut,zt,wn,er,tr){const qn=new X.x,Pn=(0,W.of)(void 0).pipe((0,me.Q)(tt.outsideAngular),(0,Le.w)(()=>Ne.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,1277)))),(0,Ke.U)(()=>(0,q.on)(We,Ne,$e)),(0,Ke.U)(hn=>ie(hn,Ne,_t,Ut,zt,wn,Kt,er)),qe({bufferSize:1,refCount:!1}));if((0,ut.PM)(Ue))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,W.of)(null);else{Pn.pipe((0,Ge.P)()).subscribe();const cr=Pn.pipe((0,Le.w)(jn=>jn.getRedirectResult().then(Wt=>Wt,()=>null)),fe.iC,qe({bufferSize:1,refCount:!1})),Mr=Pn.pipe((0,Le.w)(jn=>new Oe.y(Wt=>({unsubscribe:Ne.runOutsideAngular(()=>jn.onAuthStateChanged(Qt=>Wt.next(Qt),Qt=>Wt.error(Qt),()=>Wt.complete()))})))),Ln=Pn.pipe((0,Le.w)(jn=>new Oe.y(Wt=>({unsubscribe:Ne.runOutsideAngular(()=>jn.onIdTokenChanged(Qt=>Wt.next(Qt),Qt=>Wt.error(Qt),()=>Wt.complete()))}))));this.authState=cr.pipe(It(Mr),(0,ke.R)(tt.outsideAngular),(0,me.Q)(tt.insideAngular)),this.user=cr.pipe(It(Ln),(0,ke.R)(tt.outsideAngular),(0,me.Q)(tt.insideAngular)),this.idToken=this.user.pipe((0,Le.w)(jn=>jn?(0,Ae.D)(jn.getIdToken()):(0,W.of)(null))),this.idTokenResult=this.user.pipe((0,Le.w)(jn=>jn?(0,Ae.D)(jn.getIdTokenResult()):(0,W.of)(null))),this.credential=(0,Se.T)(cr,qn,this.authState.pipe((0,De.h)(jn=>!jn))).pipe((0,Ke.U)(jn=>null!=jn&&jn.user?jn:null),(0,ke.R)(tt.outsideAngular),(0,me.Q)(tt.insideAngular))}return(0,q.pX)(this,Pn,Ne,{spy:{apply:(hn,cr,Mr)=>{(hn.startsWith("signIn")||hn.startsWith("createUser"))&&Mr.then(Ln=>qn.next(Ln))}}})}}return et.\u0275fac=function(We){return new(We||et)(c.LFG(q.Dh),c.LFG(q.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(fe.HU),c.LFG(ze,8),c.LFG(re,8),c.LFG(Ze,8),c.LFG(ce,8),c.LFG(ge,8),c.LFG(ve,8),c.LFG(st.nm,8))},et.\u0275prov=c.Yz7({token:et,factory:et.\u0275fac,providedIn:"any"}),et})(),Ie=(()=>{class et{constructor(){it.Z.registerVersion("angularfire",fe.q4.full,"auth-compat")}}return et.\u0275fac=function(We){return new(We||et)},et.\u0275mod=c.oAB({type:et}),et.\u0275inj=c.cJS({providers:[Pe]}),et})()},7407:(on,pt,V)=>{"use strict";V.d(pt,{ST:()=>np});var c=V(4650),X=V(4986),W=V(9751),Oe=V(8996),Ae=V(9646),Se=V(5813),me=V(8675),Le=V(4482),Ke=V(5403);function Ce(){return(0,Le.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ke.x)(e,h=>{const m=t;t=h,o&&e.next([m,h]),o=!0}))})}var re,we=V(4004),be=V(5026),qe=V(1884),Ge=V(9300),ot=V(2011),It=V(6895),De=(V(1277),V(3942)),fe=V(5861),q=V(9681),ut=V(4859),st=V(1877),it=V(2090),He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={},Ze=Ze||{},ce=He||self;function ge(){}function ve(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ie(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ie="closure_uid_"+(1e9*Math.random()>>>0),et=0;function Ve(i,e,t){return i.call.apply(i.bind,arguments)}function We(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,o),i.apply(e,h)}}return function(){return i.apply(e,arguments)}}function $e(i,e,t){return($e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ve:We).apply(null,arguments)}function Ue(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ne(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,h,m){for(var E=Array(arguments.length-2),P=2;P<arguments.length;P++)E[P-2]=arguments[P];return e.prototype[h].apply(o,E)}}function tt(){this.s=this.s,this.o=this.o}tt.prototype.s=!1,tt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Pe(i){Object.prototype.hasOwnProperty.call(i,Ie)&&i[Ie]||(i[Ie]=++et)}(this)},tt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ut(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function zt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(ve(o)){const h=i.length||0,m=o.length||0;i.length=h+m;for(let E=0;E<m;E++)i[h+E]=o[E]}else i.push(o)}}function wn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};var er=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ce.addEventListener("test",ge,e),ce.removeEventListener("test",ge,e)}catch(t){}return i}();function tr(i){return/^[\s\xa0]*$/.test(i)}var qn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Pn(i,e){return i<e?-1:i>e?1:0}function hn(){var i=ce.navigator;return i&&(i=i.userAgent)?i:""}function cr(i){return-1!=hn().indexOf(i)}function Mr(i){return Mr[" "](i),i}Mr[" "]=ge;var Dr,i,jn=cr("Opera"),Wt=cr("Trident")||cr("MSIE"),Qt=cr("Edge"),ii=Qt||Wt,Rr=cr("Gecko")&&!(-1!=hn().toLowerCase().indexOf("webkit")&&!cr("Edge"))&&!(cr("Trident")||cr("MSIE"))&&!cr("Edge"),Vr=-1!=hn().toLowerCase().indexOf("webkit")&&!cr("Edge");function Kr(){var i=ce.document;return i?i.documentMode:void 0}e:{var xn="",Sn=(i=hn(),Rr?/rv:([^\);]+)(\)|;)/.exec(i):Qt?/Edge\/([\d\.]+)/.exec(i):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Vr?/WebKit\/(\S+)/.exec(i):jn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Sn&&(xn=Sn?Sn[1]:""),Wt){var Bn=Kr();if(null!=Bn&&Bn>parseFloat(xn)){Dr=String(Bn);break e}}Dr=xn}var yi={};var fi=ce.document&&Wt&&(Kr()||parseInt(Dr,10))||void 0;function ki(i,e){if(wn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Rr){e:{try{Mr(e.nodeName);var h=!0;break e}catch(m){}h=!1}h||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:wr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&ki.X.h.call(this)}}Ne(ki,wn);var wr={2:"touch",3:"pen",4:"mouse"};ki.prototype.h=function(){ki.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var bi="closure_listenable_"+(1e6*Math.random()|0),dr=0;function Wn(i,e,t,o,h){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=h,this.key=++dr,this.ba=this.ea=!1}function Ar(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function nn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function jt(i){const e={};for(const t in i)e[t]=i[t];return e}const vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hn(i,e){let t,o;for(let h=1;h<arguments.length;h++){for(t in o=arguments[h],o)i[t]=o[t];for(let m=0;m<vn.length;m++)t=vn[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Nn(i){this.src=i,this.g={},this.h=0}function Vn(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],h=Kt(o,e);(m=0<=h)&&Array.prototype.splice.call(o,h,1),m&&(Ar(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ye(i,e,t,o){for(var h=0;h<i.length;++h){var m=i[h];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==o)return h}return-1}Nn.prototype.add=function(i,e,t,o,h){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var E=Ye(i,e,o,h);return-1<E?(e=i[E],t||(e.ea=!1)):((e=new Wn(e,this.src,m,!!o,h)).ea=t,i.push(e)),e};var Fe="closure_lm_"+(1e6*Math.random()|0),Qe={};function Ct(i,e,t,o,h){if(o&&o.once)return Jn(i,e,t,o,h);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Ct(i,e[m],t,o,h);return null}return t=Dt(t),i&&i[bi]?i.N(e,t,ie(o)?!!o.capture:!!o,h):Et(i,e,t,!1,o,h)}function Et(i,e,t,o,h,m){if(!e)throw Error("Invalid event type");var E=ie(h)?!!h.capture:!!h,P=je(i);if(P||(i[Fe]=P=new Nn(i)),(t=P.add(e,t,o,E,m)).proxy)return t;if(o=function An(){const e=yt;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)er||(h=E),void 0===h&&(h=!1),i.addEventListener(e.toString(),o,h);else if(i.attachEvent)i.attachEvent(bn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Jn(i,e,t,o,h){if(Array.isArray(e)){for(var m=0;m<e.length;m++)Jn(i,e[m],t,o,h);return null}return t=Dt(t),i&&i[bi]?i.O(e,t,ie(o)?!!o.capture:!!o,h):Et(i,e,t,!0,o,h)}function rr(i,e,t,o,h){if(Array.isArray(e))for(var m=0;m<e.length;m++)rr(i,e[m],t,o,h);else o=ie(o)?!!o.capture:!!o,t=Dt(t),i&&i[bi]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ye(m=i.g[e],t,o,h))&&(Ar(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=je(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ye(e,t,o,h)),(t=-1<i?e[i]:null)&&zr(t))}function zr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[bi])Vn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(bn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=je(e))?(Vn(t,i),0==t.h&&(t.src=null,e[Fe]=null)):Ar(i)}}}function bn(i){return i in Qe?Qe[i]:Qe[i]="on"+i}function yt(i,e){if(i.ba)i=!0;else{e=new ki(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&zr(i),i=t.call(o,e)}return i}function je(i){return(i=i[Fe])instanceof Nn?i:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(i){return"function"==typeof i?i:(i[Re]||(i[Re]=function(e){return i.handleEvent(e)}),i[Re])}function Mt(){tt.call(this),this.i=new Nn(this),this.P=this,this.I=null}function Cn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new wn(e,i);else if(e instanceof wn)e.target=e.target||i;else{var h=e;Hn(e=new wn(o,i),h)}if(h=!0,t)for(var m=t.length-1;0<=m;m--){var E=e.g=t[m];h=nr(E,o,!0,e)&&h}if(h=nr(E=e.g=i,o,!0,e)&&h,h=nr(E,o,!1,e)&&h,t)for(m=0;m<t.length;m++)h=nr(E=e.g=t[m],o,!1,e)&&h}function nr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ba&&E.capture==t){var P=E.listener,K=E.ha||E.src;E.ea&&Vn(i.i,E),h=!1!==P.call(K,o)&&h}}return h&&!o.defaultPrevented}Ne(Mt,tt),Mt.prototype[bi]=!0,Mt.prototype.removeEventListener=function(i,e,t,o){rr(this,i,e,t,o)},Mt.prototype.M=function(){if(Mt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Ar(t[o]);delete i.g[e],i.h--}}this.I=null},Mt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Mt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Fr=ce.JSON.stringify;function ei(){var i=Or;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var gi,Ci=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Pr,i=>i.reset());class Pr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ni(i){ce.setTimeout(()=>{throw i},0)}function vi(i,e){gi||function _s(){var i=ce.Promise.resolve(void 0);gi=function(){i.then(Wr)}}(),ir||(gi(),ir=!0),Or.add(i,e)}var ir=!1,Or=new class pi{constructor(){this.h=this.g=null}add(e,t){const o=Ci.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Wr(){for(var i;i=ei();){try{i.h.call(i.g)}catch(t){Ni(t)}var e=Ci;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ir=!1}function Lr(i,e){Mt.call(this),this.h=i||1,this.g=e||ce,this.j=$e(this.lb,this),this.l=Date.now()}function ai(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Ai(i,e,t){if("function"==typeof i)t&&(i=$e(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=$e(i.handleEvent,i)}return 2147483647<Number(e)?-1:ce.setTimeout(i,e||0)}function cn(i){i.g=Ai(()=>{i.g=null,i.i&&(i.i=!1,cn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ne(Lr,Mt),(re=Lr.prototype).ca=!1,re.R=null,re.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Cn(this,"tick"),this.ca&&(ai(this),this.start()))}},re.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},re.M=function(){Lr.X.M.call(this),ai(this),delete this.g};class Gn extends tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cn(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(i){tt.call(this),this.h=i,this.g={}}Ne(xr,tt);var xi=[];function Di(i,e,t,o){Array.isArray(t)||(t&&(xi[0]=t.toString()),t=xi);for(var h=0;h<t.length;h++){var m=Ct(e,t[h],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function Xr(i){nn(i.g,function(e,t){this.g.hasOwnProperty(t)&&zr(e)},i),i.g={}}function ae(){this.g=!0}function ht(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _e(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var h=o[1];if(Array.isArray(h)&&!(1>h.length)){var m=h[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<h.length;E++)h[E]=""}}}return Fr(t)}catch(P){return e}}(i,t)+(o?" "+o:"")})}xr.prototype.M=function(){xr.X.M.call(this),Xr(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ae.prototype.Aa=function(){this.g=!1},ae.prototype.info=function(){};var rt={},ft=null;function Rt(){return ft=ft||new Mt}function Pt(i){wn.call(this,rt.Pa,i)}function rn(i){const e=Rt();Cn(e,new Pt(e))}function Mn(i,e){wn.call(this,rt.STAT_EVENT,i),this.stat=e}function Rn(i){const e=Rt();Cn(e,new Mn(e,i))}function Nr(i,e){wn.call(this,rt.Qa,i),this.size=e}function mr(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){i()},e)}rt.Pa="serverreachability",Ne(Pt,wn),rt.STAT_EVENT="statevent",Ne(Mn,wn),rt.Qa="timingevent",Ne(Nr,wn);var Je={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},at={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wt(){}function tn(){}wt.prototype.h=null;var ar,_n={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function or(){wn.call(this,"d")}function li(){wn.call(this,"c")}function Es(){}function _i(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new xr(this),this.O=ls,this.T=new Lr(i=ii?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Zi}function Zi(){this.i=null,this.g="",this.h=!1}Ne(or,wn),Ne(li,wn),Ne(Es,wt),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},ar=new Es;var ls=45e3,Mi={},Qi={};function Wi(i,e,t){i.K=1,i.v=ds(Ws(e)),i.s=t,i.P=!0,ra(i,null)}function ra(i,e){i.F=Date.now(),Ls(i),i.A=Ws(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Ki(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Zi,i.g=vo(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Gn($e(i.La,i,i.g),i.N)),Di(i.S,i.g,"readystatechange",i.ib),e=i.H?jt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),rn(),function ye(i,e,t,o,h,m){i.info(function(){if(i.g)if(m)for(var E="",P=m.split("&"),K=0;K<P.length;K++){var J=P[K].split("=");if(1<J.length){var Ee=J[0];J=J[1];var Xe=Ee.split("_");E=2<=Xe.length&&"type"==Xe[1]?E+(Ee+"=")+J+"&":E+(Ee+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+o+") [attempt "+h+"]: "+e+"\n"+t+"\n"+E})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Vo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Xi(i,e,t){let h,o=!0;for(;!i.I&&i.C<t.length;){if(h=Os(i,t),h==Qi){4==e&&(i.o=4,Rn(14),o=!1),ht(i.j,i.m,null,"[Incomplete Response]");break}if(h==Mi){i.o=4,Rn(15),ht(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}ht(i.j,i.m,h,null),Gs(i,h)}Vo(i)&&h!=Qi&&h!=Mi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Rn(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ns(e),e.K=!0,Rn(11))):(ht(i.j,i.m,t,"[Invalid Chunked Response]"),Is(i),us(i))}function Os(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Qi:(t=Number(e.substring(t,o)),isNaN(t)?Mi:(o+=1)+t>e.length?Qi:(e=e.substr(o,t),i.C=o+t,e))}function Ls(i){i.V=Date.now()+i.O,so(i,i.O)}function so(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=mr($e(i.gb,i),e)}function Uo(i){i.B&&(ce.clearTimeout(i.B),i.B=null)}function us(i){0==i.l.G||i.I||yo(i.l,i)}function Is(i){Uo(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ai(i.T),Xr(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Gs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Po(t.h,i)))if(!i.J&&Po(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(J){o=null}if(Array.isArray(o)&&3==o.length){var h=o;if(0==h[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;ba(t),Oo(t)}Xa(t),Rn(18)}}else t.Ba=h[1],0<t.Ba-t.T&&37500>h[2]&&t.L&&0==t.A&&!t.v&&(t.v=mr($e(t.cb,t),6e3));if(1>=Ho(t.h)&&t.ja){try{t.ja()}catch(J){}t.ja=void 0}}else ko(t,11)}else if((i.J||t.g==i)&&ba(t),!tr(e))for(h=t.Fa.g.parse(e),e=0;e<h.length;e++){let J=h[e];if(t.T=J[0],J=J[1],2==t.G)if("c"==J[0]){t.I=J[1],t.ka=J[2];const Ee=J[3];null!=Ee&&(t.ma=Ee,t.j.info("VER="+t.ma));const Xe=J[4];null!=Xe&&(t.Ca=Xe,t.j.info("SVER="+t.Ca));const St=J[5];null!=St&&"number"==typeof St&&0<St&&(t.J=o=1.5*St,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const Bt=i.g;if(Bt){const en=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(en){var m=o.h;m.g||-1==en.indexOf("spdy")&&-1==en.indexOf("quic")&&-1==en.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(ao(m,m.h),m.h=null))}if(o.D){const $n=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;$n&&(o.za=$n,Ti(o.F,o.D,$n))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var E=i;if((o=t).sa=xc(o,o.H?o.ka:null,o.V),E.J){ts(o.h,E);var P=E,K=o.J;K&&P.setTimeout(K),P.B&&(Uo(P),Ls(P)),o.g=E}else Xs(o);0<t.i.length&&Zs(t)}else"stop"!=J[0]&&"close"!=J[0]||ko(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ko(t,7):Ia(t):"noop"!=J[0]&&t.l&&t.l.wa(J),t.A=0)}rn()}catch(J){}}function ws(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ve(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function As(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ve(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function zs(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ve(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),h=o.length,m=0;m<h;m++)e.call(void 0,o[m],t&&t[m],i)}(re=_i.prototype).setTimeout=function(i){this.O=i},re.ib=function(i){i=i.target;const e=this.L;e&&3==ui(i)?e.l():this.La(i)},re.La=function(i){try{if(i==this.g)e:{const Ee=ui(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ee)&&(3!=Ee||ii||this.g&&(this.h.h||this.g.fa()||Go(this.g)))){this.I||4!=Ee||7==e||rn(),Uo(this);var t=this.g.aa();this.Y=t;t:if(Vo(this)){var o=Go(this.g);i="";var h=o.length,m=4==ui(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),us(this);var E="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==h-1});o.splice(0,h),this.h.g+=i,this.C=0,E=this.h.g}else E=this.g.fa();if(this.i=200==t,function lt(i,e,t,o,h,m,E){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+h+"]: "+e+"\n"+t+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.U,Ee,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var P,K=this.g;if((P=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tr(P)){var J=P;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,Rn(12),Is(this),us(this);break e}ht(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gs(this,t)}this.P?(Xi(this,Ee,E),ii&&this.i&&3==Ee&&(Di(this.S,this.T,"tick",this.hb),this.T.start())):(ht(this.j,this.m,E,null),Gs(this,E)),4==Ee&&Is(this),this.i&&!this.I&&(4==Ee?yo(this.l,this):(this.i=!1,Ls(this)))}else 400==t&&0<E.indexOf("Unknown SID")?(this.o=3,Rn(12)):(this.o=0,Rn(13)),Is(this),us(this)}}}catch(Ee){}},re.hb=function(){if(this.g){var i=ui(this.g),e=this.g.fa();this.C<e.length&&(Uo(this),Xi(this,i,e),this.i&&4!=i&&Ls(this))}},re.cancel=function(){this.I=!0,Is(this)},re.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function gt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rn(),Rn(17)),Is(this),this.o=2,us(this)):so(this,this.V-i)};var ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Vi){this.h=void 0!==e?e:i.h,Ao(this,i.j),this.s=i.s,this.g=i.g,xo(this,i.m),this.l=i.l,e=i.i;var t=new po;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oo(this,t),this.o=i.o}else i&&(t=String(i).match(ia))?(this.h=!!e,Ao(this,t[1]||"",!0),this.s=Bs(t[2]||""),this.g=Bs(t[3]||"",!0),xo(this,t[4]),this.l=Bs(t[5]||"",!0),oo(this,t[6]||"",!0),this.o=Bs(t[7]||"")):(this.h=!!e,this.i=new po(null,this.h))}function Ws(i){return new Vi(i)}function Ao(i,e,t){i.j=t?Bs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function xo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function oo(i,e,t){e instanceof po?(i.i=e,function Mo(i,e){e&&!i.j&&(go(i),i.i=null,i.g.forEach(function(t,o){var h=o.toLowerCase();o!=h&&(si(this,o),Ki(this,h,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Ji(e,Za)),i.i=new po(e,i.h))}function Ti(i,e,t){i.i.set(e,t)}function ds(i){return Ti(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Bs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ji(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,jo),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function jo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Vi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ji(e,fo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ji(e,fo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ji(t,"/"==t.charAt(0)?sa:cs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ji(t,Qa)),i.join("")};var fo=/[#\/\?@]/g,cs=/[#\?:]/g,sa=/[#\?]/g,Za=/[#\?@]/g,Qa=/#/g;function po(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function go(i){i.g||(i.g=new Map,i.h=0,i.i&&function qa(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),h=null;if(0<=o){var m=i[t].substring(0,o);h=i[t].substring(o+1)}else m=i[t];e(m,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function si(i,e){go(i),e=Bi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ks(i,e){return go(i),e=Bi(i,e),i.g.has(e)}function Ki(i,e,t){si(i,e),0<t.length&&(i.i=null,i.g.set(Bi(i,e),Ut(t)),i.h+=t.length)}function Bi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ea(i){this.l=i||Ro,i=ce.PerformanceNavigationTiming?0<(i=ce.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ce.g&&ce.g.Ga&&ce.g.Ga()&&ce.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(re=po.prototype).add=function(i,e){go(this),this.i=null,i=Bi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},re.forEach=function(i,e){go(this),this.g.forEach(function(t,o){t.forEach(function(h){i.call(e,h,o,this)},this)},this)},re.oa=function(){go(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const h=i[o];for(let m=0;m<h.length;m++)t.push(e[o])}return t},re.W=function(i){go(this);let e=[];if("string"==typeof i)Ks(this,i)&&(e=e.concat(this.g.get(Bi(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},re.set=function(i,e){return go(this),this.i=null,Ks(this,i=Bi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},re.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const m=encodeURIComponent(String(o)),E=this.W(o);for(o=0;o<E.length;o++){var h=m;""!==E[o]&&(h+="="+encodeURIComponent(String(E[o]))),i.push(h)}}return this.i=i.join("&")};var Ro=10;function Ri(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ho(i){return i.h?1:i.g?i.g.size:0}function Po(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ao(i,e){i.g?i.g.add(e):i.h=e}function ts(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function C(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ut(i.i)}function z(){}function w(){this.g=new z}function U(i,e,t){const o=t||"";try{ws(i,function(h,m){let E=h;ie(h)&&(E=Fr(h)),e.push(o+m+"="+encodeURIComponent(E))})}catch(h){throw e.push(o+"type="+encodeURIComponent("_badmap")),h}}function Tt(i,e,t,o,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(o)}catch(m){}}function fn(i){this.l=i.ac||null,this.j=i.jb||!1}function Dn(i,e){Mt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=yr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ea.prototype.cancel=function(){if(this.i=C(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},z.prototype.stringify=function(i){return ce.JSON.stringify(i,void 0)},z.prototype.parse=function(i){return ce.JSON.parse(i,void 0)},Ne(fn,wt),fn.prototype.g=function(){return new Dn(this.l,this.j)},fn.prototype.i=function(i){return function(){return i}}({}),Ne(Dn,Mt);var yr=0;function Yr(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function ln(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ti(i)}function ti(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(re=Dn.prototype).open=function(i,e){if(this.readyState!=yr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ti(this)},re.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ce).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ln(this)),this.readyState=yr},re.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yr(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},re.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ln(this):ti(this),3==this.readyState&&Yr(this)}},re.Va=function(i){this.g&&(this.response=this.responseText=i,ln(this))},re.Ua=function(i){this.g&&(this.response=i,ln(this))},re.ga=function(){this.g&&ln(this)},re.setRequestHeader=function(i,e){this.v.append(i,e)},re.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},re.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var H=ce.JSON.parse;function B(i){Mt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=k,this.K=this.L=!1}Ne(B,Mt);var k="",oe=/^https?$/i,bt=["POST","PUT"];function Pi(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Yt(i),Ys(i)}function Yt(i){i.D||(i.D=!0,Cn(i,"complete"),Cn(i,"error"))}function Tr(i){if(i.h&&typeof Ze<"u"&&(!i.C[1]||4!=ui(i)||2!=i.aa()))if(i.v&&4==ui(i))Ai(i.Ha,0,i);else if(Cn(i,"readystatechange"),4==ui(i)){i.h=!1;try{const P=i.aa();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===P){var h=String(i.H).match(ia)[1]||null;if(!h&&ce.self&&ce.self.location){var m=ce.self.location.protocol;h=m.substr(0,m.length-1)}o=!oe.test(h?h.toLowerCase():"")}t=o}if(t)Cn(i,"complete"),Cn(i,"success");else{i.m=6;try{var E=2<ui(i)?i.g.statusText:""}catch(K){E=""}i.j=E+" ["+i.aa()+"]",Yt(i)}}finally{Ys(i)}}}function Ys(i,e){if(i.g){mo(i);const t=i.g,o=i.C[0]?ge:null;i.g=null,i.C=null,e||Cn(i,"ready");try{t.onreadystatechange=o}catch(h){}}}function mo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ce.clearTimeout(i.A),i.A=null)}function ui(i){return i.g?i.g.readyState:0}function Go(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case k:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $s(i){let e="";return nn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function qs(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=$s(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ti(i,e,t))}function oa(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Pa(i){this.Ca=0,this.i=[],this.j=new ae,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=oa("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=oa("baseRetryDelayMs",5e3,i),this.bb=oa("retryDelaySeedMs",1e4,i),this.$a=oa("forwardChannelMaxRetries",2,i),this.ta=oa("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Ea(i&&i.concurrentRequestLimit),this.Fa=new w,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ia(i){if(wa(i),3==i.G){var e=i.U++,t=Ws(i.F);Ti(t,"SID",i.I),Ti(t,"RID",e),Ti(t,"TYPE","terminate"),Qs(i,t),(e=new _i(i,i.j,e,void 0)).K=2,e.v=ds(Ws(t)),t=!1,ce.navigator&&ce.navigator.sendBeacon&&(t=ce.navigator.sendBeacon(e.v.toString(),"")),!t&&ce.Image&&((new Image).src=e.v,t=!0),t||(e.g=vo(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ls(e)}al(i)}function Oo(i){i.g&&(ns(i),i.g.cancel(),i.g=null)}function wa(i){Oo(i),i.u&&(ce.clearTimeout(i.u),i.u=null),ba(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ce.clearTimeout(i.m),i.m=null)}function Zs(i){Ri(i.h)||i.m||(i.m=!0,vi(i.Ja,i),i.C=0)}function zo(i,e){var t;t=e?e.m:i.U++;const o=Ws(i.F);Ti(o,"SID",i.I),Ti(o,"RID",t),Ti(o,"AID",i.T),Qs(i,o),i.o&&i.s&&qs(o,i.o,i.s),t=new _i(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=lo(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ao(i.h,t),Wi(t,o,e)}function Qs(i,e){i.ia&&nn(i.ia,function(t,o){Ti(e,o,t)}),i.l&&ws({},function(t,o){Ti(e,o,t)})}function lo(i,e,t){t=Math.min(i.i.length,t);var o=i.l?$e(i.l.Ra,i.l,i):null;e:{var h=i.i;let m=-1;for(;;){const E=["count="+t];-1==m?0<t?(m=h[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let P=!0;for(let K=0;K<t;K++){let J=h[K].h;const Ee=h[K].g;if(J-=m,0>J)m=Math.max(0,h[K].h-100),P=!1;else try{U(Ee,E,"req"+J+"_")}catch(Xe){o&&o(Ee)}}if(P){o=E.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Xs(i){i.g||i.u||(i.Z=1,vi(i.Ia,i),i.A=0)}function Xa(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=mr($e(i.Ia,i),rs(i,i.A)),i.A++,0))}function ns(i){null!=i.B&&(ce.clearTimeout(i.B),i.B=null)}function Wo(i){i.g=new _i(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Ws(i.sa);Ti(e,"RID","rpc"),Ti(e,"SID",i.I),Ti(e,"CI",i.L?"0":"1"),Ti(e,"AID",i.T),Ti(e,"TYPE","xmlhttp"),Qs(i,e),i.o&&i.s&&qs(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=ds(Ws(e)),t.s=null,t.P=!0,ra(t,i)}function ba(i){null!=i.v&&(ce.clearTimeout(i.v),i.v=null)}function yo(i,e){var t=null;if(i.g==e){ba(i),ns(i),i.g=null;var o=2}else{if(!Po(i.h,e))return;t=e.D,ts(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var h=i.C;Cn(o=Rt(),new Nr(o,t)),Zs(i)}else Xs(i);else if(3==(h=e.o)||0==h&&0<i.pa||!(1==o&&function bs(i,e){return!(Ho(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=mr($e(i.Ja,i,e),rs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Xa(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),h){case 1:ko(i,5);break;case 4:ko(i,10);break;case 3:ko(i,6);break;default:ko(i,2)}}function rs(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ko(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=$e(i.kb,i);t||(t=new Vi("//www.google.com/images/cleardot.gif"),ce.location&&"http"==ce.location.protocol||Ao(t,"https"),ds(t)),function pe(i,e){const t=new ae;if(ce.Image){const o=new Image;o.onload=Ue(Tt,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Ue(Tt,t,o,"TestLoadImage: error",!1,e),o.onabort=Ue(Tt,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Ue(Tt,t,o,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Rn(2);i.G=0,i.l&&i.l.va(e),al(i),wa(i)}function al(i){if(i.G=0,i.la=[],i.l){const e=C(i.h);(0!=e.length||0!=i.i.length)&&(zt(i.la,e),zt(i.la,i.i),i.h.i.length=0,Ut(i.i),i.i.length=0),i.l.ua()}}function xc(i,e,t){var o=t instanceof Vi?Ws(t):new Vi(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),xo(o,o.m);else{var h=ce.location;o=h.protocol,e=e?e+"."+h.hostname:h.hostname,h=+h.port;var m=new Vi(null,void 0);o&&Ao(m,o),e&&(m.g=e),h&&xo(m,h),t&&(m.l=t),o=m}return e=i.za,(t=i.D)&&e&&Ti(o,t,e),Ti(o,"VER",i.ma),Qs(i,o),o}function vo(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new B(t&&i.Da&&!i.ra?new fn({jb:!0}):i.ra)).Ka(i.H),e}function No(){}function aa(){if(Wt&&!(10<=Number(fi)))throw Error("Environmental error: no available transport.")}function ks(i,e){Mt.call(this),this.g=new Pa(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!tr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ui(this)}function _o(i){or.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Oa(){li.call(this),this.status=1}function Ui(i){this.g=i}(re=B.prototype).Ka=function(i){this.L=i},re.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ar.g(),this.C=function Gt(i){return i.h||(i.h=i.i())}(this.u?this.u:ar),this.g.onreadystatechange=$e(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Pi(this,m)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var h in o)t.set(h,o[h]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const m of o.keys())t.set(m,o.get(m))}o=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),h=ce.FormData&&i instanceof ce.FormData,!(0<=Kt(bt,e))||o||h||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,E]of t)this.g.setRequestHeader(m,E);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mo(this),0<this.B&&((this.K=function mn(i){return Wt&&function _r(){return function Ln(i){var e=yi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=qn(String(Dr)).split("."),t=qn("9").split("."),o=Math.max(e.length,t.length);for(let E=0;0==i&&E<o;E++){var h=e[E]||"",m=t[E]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==h[0].length&&0==m[0].length)break;i=Pn(0==h[1].length?0:parseInt(h[1],10),0==m[1].length?0:parseInt(m[1],10))||Pn(0==h[2].length,0==m[2].length)||Pn(h[2],m[2]),h=h[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$e(this.qa,this)):this.A=Ai(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Pi(this,m)}},re.qa=function(){typeof Ze<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cn(this,"timeout"),this.abort(8))},re.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Cn(this,"complete"),Cn(this,"abort"),Ys(this))},re.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ys(this,!0)),B.X.M.call(this)},re.Ha=function(){this.s||(this.F||this.v||this.l?Tr(this):this.fb())},re.fb=function(){Tr(this)},re.aa=function(){try{return 2<ui(this)?this.g.status:-1}catch(i){return-1}},re.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},re.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),H(e)}},re.Ea=function(){return this.m},re.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(re=Pa.prototype).ma=8,re.G=1,re.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const h=new _i(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=jt(m),Hn(m,this.S)):m=this.S),null!==this.o||this.N||(h.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lo(this,h,e),Ti(t=Ws(this.F),"RID",i),Ti(t,"CVER",22),this.D&&Ti(t,"X-HTTP-Session-Id",this.D),Qs(this,t),m&&(this.N?e="headers="+encodeURIComponent(String($s(m)))+"&"+e:this.o&&qs(t,this.o,m)),ao(this.h,h),this.Ya&&Ti(t,"TYPE","init"),this.O?(Ti(t,"$req",e),Ti(t,"SID","null"),h.Z=!0,Wi(h,t,null)):Wi(h,t,e),this.G=2}}else 3==this.G&&(i?zo(this,i):0==this.i.length||Ri(this.h)||zo(this))},re.Ia=function(){if(this.u=null,Wo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=mr($e(this.eb,this),i)}},re.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Rn(10),Oo(this),Wo(this))},re.cb=function(){null!=this.v&&(this.v=null,Oo(this),Xa(this),Rn(19))},re.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))},(re=No.prototype).xa=function(){},re.wa=function(){},re.va=function(){},re.ua=function(){},re.Ra=function(){},aa.prototype.g=function(i,e){return new ks(i,e)},Ne(ks,Mt),ks.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Rn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=xc(i,null,i.V),Zs(i)},ks.prototype.close=function(){Ia(this.g)},ks.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Fr(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Zs(e)},ks.prototype.M=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,ks.X.M.call(this)},Ne(_o,or),Ne(Oa,li),Ne(Ui,No),Ui.prototype.xa=function(){Cn(this.g,"a")},Ui.prototype.wa=function(i){Cn(this.g,new _o(i))},Ui.prototype.va=function(i){Cn(this.g,new Oa)},Ui.prototype.ua=function(){Cn(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,Je.NO_ERROR=0,Je.TIMEOUT=8,Je.HTTP_ERROR=6,at.COMPLETE="complete",tn.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",Mt.prototype.listen=Mt.prototype.N,B.prototype.listenOnce=B.prototype.O,B.prototype.getLastError=B.prototype.Oa,B.prototype.getLastErrorCode=B.prototype.Ea,B.prototype.getStatus=B.prototype.aa,B.prototype.getResponseJson=B.prototype.Sa,B.prototype.getResponseText=B.prototype.fa,B.prototype.send=B.prototype.da,B.prototype.setWithCredentials=B.prototype.Ka;var O=ze.createWebChannelTransport=function(){return new aa},Q=ze.getStatEventTarget=function(){return Rt()},F=ze.ErrorCode=Je,se=ze.EventType=at,Me=ze.Event=rt,Ft=ze.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ht=ze.FetchXmlHttpFactory=fn,On=ze.WebChannel=tn,qr=ze.XhrIo=B;const kr="@firebase/firestore";class hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");let Zn="9.14.0";const ni=new st.Yd("@firebase/firestore");function Ei(){return ni.logLevel}function Xt(i,...e){if(ni.logLevel<=st.in.DEBUG){const t=e.map(hs);ni.debug(`Firestore (${Zn}): ${i}`,...t)}}function mi(i,...e){if(ni.logLevel<=st.in.ERROR){const t=e.map(hs);ni.error(`Firestore (${Zn}): ${i}`,...t)}}function Fi(i,...e){if(ni.logLevel<=st.in.WARN){const t=e.map(hs);ni.warn(`Firestore (${Zn}): ${i}`,...t)}}function hs(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function pn(i="Unexpected state"){const e=`FIRESTORE (${Zn}) INTERNAL ASSERTION FAILED: `+i;throw mi(e),new Error(e)}function sr(i,e){i||pn()}function En(i,e){return i}const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends it.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hr.UNAUTHENTICATED))}shutdown(){}}class la{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bu{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let h=this.i;const m=J=>this.i!==h?(h=this.i,t(J)):Promise.resolve();let E=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new xs,e.enqueueRetryable(()=>m(this.currentUser))};const P=()=>{const J=E;e.enqueueRetryable((0,fe.Z)(function*(){yield J.promise,yield m(o.currentUser)}))},K=J=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),P()};this.t.onInit(J=>K(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?K(J):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new xs)}},0),P()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(sr("string"==typeof o.accessToken),new gl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return sr(null===e||"string"==typeof e),new hr(e)}}class Eo{constructor(e,t,o,h){this.h=e,this.l=t,this.m=o,this.g=h,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(sr(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ko{constructor(e,t,o,h){this.h=e,this.l=t,this.m=o,this.g=h}getToken(){return Promise.resolve(new Eo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ka{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ja{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=m=>{null!=m.error&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.A;return this.A=m.token,Xt("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const h=m=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>h(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?h(m):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(sr("string"==typeof t.token),this.A=t.token,new ka(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Na(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class ml{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const h=Na(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<t&&(o+=e.charAt(h[m]%e.length))}return o}}function fr(i,e){return i<e?-1:i>e?1:0}function ll(i,e,t){return i.length===e.length&&i.every((o,h)=>t(o,e[h]))}function xl(i){return i+"\0"}class ji{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ji.fromMillis(Date.now())}static fromDate(e){return ji.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new ji(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fr(this.nanoseconds,e.nanoseconds):fr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pr(e)}static min(){return new pr(new ji(0,0))}static max(){return new pr(new ji(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ms{constructor(e,t,o){void 0===t?t=0:t>e.length&&pn(),void 0===o?o=e.length-t:o>e.length-t&&pn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Ms.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let h=0;h<o;h++){const m=e.get(h),E=t.get(h);if(m<E)return-1;if(m>E)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jr extends Ms{construct(e,t,o){return new Jr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(h=>h.length>0))}return new Jr(t)}static emptyPath(){return new Jr([])}}const Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends Ms{construct(e,t,o){return new wi(e,t,o)}static isValidIdentifier(e){return Cs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(e){const t=[];let o="",h=0;const m=()=>{if(0===o.length)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let E=!1;for(;h<e.length;){const P=e[h];if("\\"===P){if(h+1===e.length)throw new Jt(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const K=e[h+1];if("\\"!==K&&"."!==K&&"`"!==K)throw new Jt(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=K,h+=2}else"`"===P?(E=!E,h++):"."!==P||E?(o+=P,h++):(m(),h++)}if(m(),E)throw new Jt(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wi(t)}static emptyPath(){return new wi([])}}class gn{constructor(e){this.path=e}static fromPath(e){return new gn(Jr.fromString(e))}static fromName(e){return new gn(Jr.fromString(e).popFirst(5))}static empty(){return new gn(Jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gn(new Jr(e.slice()))}}class Fa{constructor(e,t,o,h){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=h}}function Ca(i){return i.fields.find(e=>2===e.kind)}function Da(i){return i.fields.filter(e=>2!==e.kind)}Fa.UNKNOWN_ID=-1;class Yo{constructor(e,t){this.fieldPath=e,this.kind=t}}class La{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new La(0,fs.min())}}function Du(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,h=pr.fromTimestamp(1e9===o?new ji(t+1,0):new ji(t,o));return new fs(h,gn.empty(),e)}function Ta(i){return new fs(i.readTime,i.key,-1)}class fs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new fs(pr.min(),gn.empty(),-1)}static max(){return new fs(pr.max(),gn.empty(),-1)}}function Ba(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=gn.comparator(i.documentKey,e.documentKey),0!==t?t:fr(i.largestBatchId,e.largestBatchId))}const $a="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ul{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qo(i){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,fe.Z)(function*(i){if(i.code!==Lt.FAILED_PRECONDITION||i.message!==$a)throw i;Xt("LocalStore","Unexpectedly lost primary lease")}),Mc.apply(this,arguments)}class kt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new kt((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,h)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof kt?t:kt.resolve(t)}catch(t){return kt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):kt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):kt.reject(t)}static resolve(e){return new kt((t,o)=>{t(e)})}static reject(e){return new kt((t,o)=>{o(e)})}static waitFor(e){return new kt((t,o)=>{let h=0,m=0,E=!1;e.forEach(P=>{++h,P.next(()=>{++m,E&&m===h&&t()},K=>o(K))}),E=!0,m===h&&t()})}static or(e){let t=kt.resolve(!1);for(const o of e)t=t.next(h=>h?kt.resolve(h):o());return t}static forEach(e,t){const o=[];return e.forEach((h,m)=>{o.push(t.call(this,h,m))}),this.waitFor(o)}static mapArray(e,t){return new kt((o,h)=>{const m=e.length,E=new Array(m);let P=0;for(let K=0;K<m;K++){const J=K;t(e[J]).next(Ee=>{E[J]=Ee,++P,P===m&&o(E)},Ee=>h(Ee))}})}static doWhile(e,t){return new kt((o,h)=>{const m=()=>{!0===e()?t().next(()=>{m()},h):o()};m()})}}class el{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new xs,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Va(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const h=Ml(o.target.error);this.P.reject(new Va(e,h))}}static open(e,t,o,h){try{return new el(t,e.transaction(h,o))}catch(m){throw new Va(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sa(t)}}class Zo{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Zo.D((0,it.z$)())&&mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xt("SimpleDb","Removing database:",e),bo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,it.hl)())return!1;if(Zo.N())return!0;const e=(0,it.z$)(),t=Zo.D(e),o=0<t&&t<10,h=Zo.k(e),m=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,h)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=E=>{o(E.target.result)},m.onblocked=()=>{h(new Va(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const P=E.target.error;h("VersionError"===P.name?new Jt(Lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===P.name?new Jt(Lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+P):new Va(e,P))},m.onupgradeneeded=E=>{Xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',E.oldVersion),t.S.$(E.target.result,m.transaction,E.oldVersion,t.version).next(()=>{Xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,h){var m=this;return(0,fe.Z)(function*(){const E="readonly"===t;let P=0;for(;;){++P;try{m.db=yield m.F(e);const K=el.open(m.db,e,E?"readonly":"readwrite",o),J=h(K).next(Ee=>(K.V(),Ee)).catch(Ee=>(K.abort(Ee),kt.reject(Ee))).toPromise();return J.catch(()=>{}),yield K.v,J}catch(K){const J=K,Ee="FirebaseError"!==J.name&&P<3;if(Xt("SimpleDb","Transaction failed with error:",J.message,"Retrying:",Ee),m.close(),!Ee)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tu{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return bo(this.U.delete())}}class Va extends Jt{constructor(e,t){super(Lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wo(i){return"IndexedDbTransactionError"===i.name}class Sa{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Xt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),bo(o)}add(e){return Xt("SimpleDb","ADD",this.store.name,e,e),bo(this.store.add(e))}get(e){return bo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Xt("SimpleDb","DELETE",this.store.name,e),bo(this.store.delete(e))}count(){return Xt("SimpleDb","COUNT",this.store.name),bo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const h=this.cursor(o),m=[];return this.H(h,(E,P)=>{m.push(P)}).next(()=>m)}{const h=this.store.getAll(o.range);return new kt((m,E)=>{h.onerror=P=>{E(P.target.error)},h.onsuccess=P=>{m(P.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new kt((h,m)=>{o.onerror=E=>{m(E.target.error)},o.onsuccess=E=>{h(E.target.result)}})}Y(e,t){Xt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const h=this.cursor(o);return this.H(h,(m,E,P)=>P.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const h=this.cursor(o);return this.H(h,t)}tt(e){const t=this.cursor({});return new kt((o,h)=>{t.onerror=m=>{const E=Ml(m.target.error);h(E)},t.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(P=>{P?E.continue():o()}):o()}})}H(e,t){const o=[];return new kt((h,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const P=E.target.result;if(!P)return void h();const K=new tu(P),J=t(P.primaryKey,P.value,K);if(J instanceof kt){const Ee=J.catch(Xe=>(K.done(),kt.reject(Xe)));o.push(Ee)}K.isDone?h():null===K.G?P.continue():P.continue(K.G)}}).next(()=>kt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bo(i){return new kt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const h=Ml(o.target.error);t(h)}})}let yl=!1;function Ml(i){const e=Zo.D((0,it.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yl||(yl=!0,setTimeout(()=>{throw o},0)),o}}return i}class Qo{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Xt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){wo(o)?Xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield qo(o)}yield t.nt(6e4)}))}}class Tu{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let h=t,m=!0;return kt.doWhile(()=>!0===m&&h>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(E=>{if(null!==E&&!o.has(E))return Xt("IndexBackiller",`Processing collection: ${E}`),this.rt(e,E,h).next(P=>{h-=P,o.add(E)});m=!1})).next(()=>t-h)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(h=>this.localStore.localDocuments.getNextDocuments(e,t,h,o).next(m=>{const E=m.changes;return this.localStore.indexManager.updateIndexEntries(e,E).next(()=>this.ot(h,m)).next(P=>(Xt("IndexBackiller",`Updating offset: ${P}`),this.localStore.indexManager.updateCollectionGroup(e,t,P))).next(()=>E.size)}))}ot(e,t){let o=e;return t.changes.forEach((h,m)=>{const E=Ta(m);Ba(E,o)>0&&(o=E)}),new fs(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Li(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ua(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Ns.at=-1;class Oi{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new Oi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new Oi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(0===h)return t+o.left.size;h<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ci(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ci(this.root,e,this.comparator,!1)}getReverseIterator(){return new ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ci(this.root,e,this.comparator,!0)}}class ci{constructor(e,t,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,t,o,h,m){this.key=e,this.value=t,this.color=null!=o?o:br.RED,this.left=null!=h?h:br.EMPTY,this.right=null!=m?m:br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,h,m){return new br(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=h?h:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,t,o),null):0===m?h.copy(null,t,null,null,null):h.copy(null,null,null,null,h.right.insert(e,t,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,h=this;if(t(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,t),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===t(e,h.key)){if(h.right.isEmpty())return br.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,t))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(i,e,t,o,h){return this}insert(i,e,t){return new br(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Oi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;t(h.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aa(this.data.getIterator())}getIteratorFrom(e){return new Aa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(h,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class Aa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ur(i){return i.hasNext()?i.getNext():void 0}class Vs{constructor(e){this.fields=e,e.sort(wi.comparator)}static empty(){return new Vs([])}unionWith(e){let t=new Kn(wi.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class T{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new T(t)}static fromUint8Array(e){const t=function(o){let h="";for(let m=0;m<o.length;++m)h+=String.fromCharCode(o[m]);return h}(e);return new T(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}T.EMPTY_BYTE_STRING=new T("");const S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function I(i){if(sr(!!i),"string"==typeof i){let e=0;const t=S.exec(i);if(sr(!!t),t[1]){let h=t[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:M(i.seconds),nanos:M(i.nanos)}}function M(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function j(i){return"string"==typeof i?T.fromBase64String(i):T.fromUint8Array(i)}function ne(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ue(i){const e=i.mapValue.fields.__previous_value__;return ne(e)?ue(e):e}function nt(i){const e=I(i.mapValue.fields.__local_write_time__.timestampValue);return new ji(e.seconds,e.nanos)}class Ot{constructor(e,t,o,h,m,E,P,K){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=P,this.useFetchStreams=K}}class an{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new an("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof an&&e.projectId===this.projectId&&e.database===this.database}}function Tn(i){return null==i}function kn(i){return 0===i&&1/i==-1/0}function Qr(i){return"number"==typeof i&&Number.isInteger(i)&&!kn(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},is={nullValue:"NULL_VALUE"};function Rs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ne(i)?4:Sr(i)?9007199254740991:10:pn()}function oi(i,e){if(i===e)return!0;const t=Rs(i);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return nt(i).isEqual(nt(e));case 3:return function(o,h){if("string"==typeof o.timestampValue&&"string"==typeof h.timestampValue&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const m=I(o.timestampValue),E=I(h.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,j(i.bytesValue).isEqual(j(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,h){return M(o.geoPointValue.latitude)===M(h.geoPointValue.latitude)&&M(o.geoPointValue.longitude)===M(h.geoPointValue.longitude)}(i,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return M(o.integerValue)===M(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const m=M(o.doubleValue),E=M(h.doubleValue);return m===E?kn(m)===kn(E):isNaN(m)&&isNaN(E)}return!1}(i,e);case 9:return ll(i.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:return function(o,h){const m=o.mapValue.fields||{},E=h.mapValue.fields||{};if(Li(m)!==Li(E))return!1;for(const P in m)if(m.hasOwnProperty(P)&&(void 0===E[P]||!oi(m[P],E[P])))return!1;return!0}(i,e);default:return pn()}var h}function Js(i,e){return void 0!==(i.values||[]).find(t=>oi(t,e))}function Us(i,e){if(i===e)return 0;const t=Rs(i),o=Rs(e);if(t!==o)return fr(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return fr(i.booleanValue,e.booleanValue);case 2:return function(h,m){const E=M(h.integerValue||h.doubleValue),P=M(m.integerValue||m.doubleValue);return E<P?-1:E>P?1:E===P?0:isNaN(E)?isNaN(P)?0:-1:1}(i,e);case 3:return Pc(i.timestampValue,e.timestampValue);case 4:return Pc(nt(i),nt(e));case 5:return fr(i.stringValue,e.stringValue);case 6:return function(h,m){const E=j(h),P=j(m);return E.compareTo(P)}(i.bytesValue,e.bytesValue);case 7:return function(h,m){const E=h.split("/"),P=m.split("/");for(let K=0;K<E.length&&K<P.length;K++){const J=fr(E[K],P[K]);if(0!==J)return J}return fr(E.length,P.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,m){const E=fr(M(h.latitude),M(m.latitude));return 0!==E?E:fr(M(h.longitude),M(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,m){const E=h.values||[],P=m.values||[];for(let K=0;K<E.length&&K<P.length;++K){const J=Us(E[K],P[K]);if(J)return J}return fr(E.length,P.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,m){if(h===Si.mapValue&&m===Si.mapValue)return 0;if(h===Si.mapValue)return 1;if(m===Si.mapValue)return-1;const E=h.fields||{},P=Object.keys(E),K=m.fields||{},J=Object.keys(K);P.sort(),J.sort();for(let Ee=0;Ee<P.length&&Ee<J.length;++Ee){const Xe=fr(P[Ee],J[Ee]);if(0!==Xe)return Xe;const St=Us(E[P[Ee]],K[J[Ee]]);if(0!==St)return St}return fr(P.length,J.length)}(i.mapValue,e.mapValue);default:throw pn()}}function Pc(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return fr(i,e);const t=I(i),o=I(e),h=fr(t.seconds,o.seconds);return 0!==h?h:fr(t.nanos,o.nanos)}function $(i){return G(i)}function G(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const h=I(o);return`time(${h.seconds},${h.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?j(i.bytesValue).toBase64():"referenceValue"in i?gn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let h="[",m=!0;for(const E of o.values||[])m?m=!1:h+=",",h+=G(E);return h+"]"}(i.arrayValue):"mapValue"in i?function(o){const h=Object.keys(o.fields||{}).sort();let m="{",E=!0;for(const P of h)E?E=!1:m+=",",m+=`${P}:${G(o.fields[P])}`;return m+"}"}(i.mapValue):pn();var e}function te(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Be(i){return!!i&&"integerValue"in i}function mt(i){return!!i&&"arrayValue"in i}function Nt(i){return!!i&&"nullValue"in i}function qt(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function In(i){return!!i&&"mapValue"in i}function zn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ua(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=zn(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Sr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function lr(i){return"nullValue"in i?is:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?te(an.empty(),gn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:pn()}function vr(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?te(an.empty(),gn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Si:pn()}function ss(i,e){const t=Us(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Co(i,e){const t=Us(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!In(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zn(t)}setAll(e){let t=wi.emptyPath(),o={},h=[];e.forEach((E,P)=>{if(!t.isImmediateParentOf(P)){const K=this.getFieldsMap(t);this.applyChanges(K,o,h),o={},h=[],t=P.popLast()}E?o[P.lastSegment()]=zn(E):h.push(P.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,h)}delete(e){const t=this.field(e.popLast());In(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=t.mapValue.fields[e.get(o)];In(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=h),t=h}return t.mapValue.fields}applyChanges(e,t,o){ua(t,(h,m)=>e[h]=m);for(const h of o)delete e[h]}clone(){return new Ds(zn(this.value))}}function xa(i){const e=[];return ua(i.fields,(t,o)=>{const h=new wi([t]);if(In(o)){const m=xa(o.mapValue).fields;if(0===m.length)e.push(h);else for(const E of m)e.push(h.child(E))}else e.push(h)}),new Vs(e)}class di{constructor(e,t,o,h,m,E){this.key=e,this.documentType=t,this.version=o,this.readTime=h,this.data=m,this.documentState=E}static newInvalidDocument(e){return new di(e,0,pr.min(),pr.min(),Ds.empty(),0)}static newFoundDocument(e,t,o){return new di(e,1,t,pr.min(),o,0)}static newNoDocument(e,t){return new di(e,2,t,pr.min(),Ds.empty(),0)}static newUnknownDocument(e,t){return new di(e,3,t,pr.min(),Ds.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new di(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oc{constructor(e,t=null,o=[],h=[],m=null,E=null,P=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=E,this.endAt=P,this.ht=null}}function tl(i,e=null,t=[],o=[],h=null,m=null,E=null){return new Oc(i,e,t,o,h,m,E)}function Xo(i){const e=En(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(h=o).field.canonicalString()+h.op.toString()+$(h.value);var h}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),Tn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>$(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>$(o)).join(",")),e.ht=t}return e.ht}function Jo(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<i.orderBy.length;h++)if(!Nc(i.orderBy[h],e.orderBy[h]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let h=0;h<i.filters.length;h++)if((t=i.filters[h]).op!==(o=e.filters[h]).op||!t.field.isEqual(o.field)||!oi(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Xu(i.startAt,e.startAt)&&Xu(i.endAt,e.endAt)}function Su(i){return gn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function kc(i,e){return i.filters.filter(t=>t instanceof Lo&&t.field.isEqual(e))}function Yi(i,e,t){let o=is,h=!0;for(const m of kc(i,e)){let E=is,P=!0;switch(m.op){case"<":case"<=":E=lr(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,P=!1;break;case"!=":case"not-in":E=is}ss({value:o,inclusive:h},{value:E,inclusive:P})<0&&(o=E,h=P)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];ss({value:o,inclusive:h},{value:E,inclusive:t.inclusive})<0&&(o=E,h=t.inclusive);break}return{value:o,inclusive:h}}function tf(i,e,t){let o=Si,h=!0;for(const m of kc(i,e)){let E=Si,P=!0;switch(m.op){case">=":case">":E=vr(m.value),P=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,P=!1;break;case"!=":case"not-in":E=Si}Co({value:o,inclusive:h},{value:E,inclusive:P})>0&&(o=E,h=P)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=t.position[m];Co({value:o,inclusive:h},{value:E,inclusive:t.inclusive})>0&&(o=E,h=t.inclusive);break}return{value:o,inclusive:h}}class Lo extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new fd(e,t,o):"array-contains"===t?new Qu(e,o):"in"===t?new Zr(e,o):"not-in"===t?new nf(e,o):"array-contains-any"===t?new pd(e,o):new Lo(e,t,o)}static lt(e,t,o){return"in"===t?new qu(e,o):new Zu(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Us(t,this.value)):null!==t&&Rs(this.value)===Rs(t)&&this.ft(Us(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fd extends Lo{constructor(e,t,o){super(e,t,o),this.key=gn.fromName(o.referenceValue)}matches(e){const t=gn.comparator(e.key,this.key);return this.ft(t)}}class qu extends Lo{constructor(e,t){super(e,"in",t),this.keys=Ua(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Zu extends Lo{constructor(e,t){super(e,"not-in",t),this.keys=Ua(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ua(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>gn.fromName(o.referenceValue))}class Qu extends Lo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mt(t)&&Js(t.arrayValue,this.value)}}class Zr extends Lo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Js(this.value.arrayValue,t)}}class nf extends Lo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Js(this.value.arrayValue,t)}}class pd extends Lo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Js(this.value.arrayValue,o))}}class Rl{constructor(e,t){this.position=e,this.inclusive=t}}class os{constructor(e,t="asc"){this.field=e,this.dir=t}}function Nc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function rf(i,e,t){let o=0;for(let h=0;h<i.position.length;h++){const m=e[h],E=i.position[h];if(o=m.field.isKeyField()?gn.comparator(gn.fromName(E.referenceValue),t.key):Us(E,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function Xu(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!oi(i.position[t],e.position[t]))return!1;return!0}class ja{constructor(e,t=null,o=[],h=[],m=null,E="F",P=null,K=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=E,this.startAt=P,this.endAt=K,this._t=null,this.wt=null}}function th(i,e,t,o,h,m,E,P){return new ja(i,e,t,o,h,m,E,P)}function Pl(i){return new ja(i)}function nh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function sf(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function rh(i){for(const e of i.filters)if(e.dt())return e.field;return null}function ih(i){return null!==i.collectionGroup}function Ju(i){const e=En(i);if(null===e._t){e._t=[];const t=rh(e),o=sf(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new os(t)),e._t.push(new os(wi.keyField(),"asc"));else{let h=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(h=!0);if(!h){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new os(wi.keyField(),m))}}}return e._t}function Fs(i){const e=En(i);if(!e.wt)if("F"===e.limitType)e.wt=tl(e.path,e.collectionGroup,Ju(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of Ju(e))t.push(new os(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new Rl(e.endAt.position,e.endAt.inclusive):null,h=e.startAt?new Rl(e.startAt.position,e.startAt.inclusive):null;e.wt=tl(e.path,e.collectionGroup,t,e.filters,e.limit,o,h)}return e.wt}function Ol(i,e,t){return new ja(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Ha(i,e){return Jo(Fs(i),Fs(e))&&i.limitType===e.limitType}function sh(i){return`${Xo(Fs(i))}|lt:${i.limitType}`}function Au(i){return`Query(target=${function ca(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${$(o.value)}`;var o}).join(", ")}]`),Tn(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>$(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>$(t)).join(",")),`Target(${e})`}(Fs(i))}; limitType=${i.limitType})`}function nu(i,e){return e.isFoundDocument()&&function(t,o){const h=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(h):gn.isDocumentKey(t.path)?t.path.isEqual(h):t.path.isImmediateParentOf(h)}(i,e)&&function(t,o){for(const h of t.explicitOrderBy)if(!h.field.isKeyField()&&null===o.data.field(h.field))return!1;return!0}(i,e)&&function(t,o){for(const h of t.filters)if(!h.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(h,m,E){const P=rf(h,m,E);return h.inclusive?P<=0:P<0}(t.startAt,Ju(t),o)||t.endAt&&!function(h,m,E){const P=rf(h,m,E);return h.inclusive?P>=0:P>0}(t.endAt,Ju(t),o)));var t,o}function Ga(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Fc(i){return(e,t)=>{let o=!1;for(const h of Ju(i)){const m=af(h,e,t);if(0!==m)return m;o=o||h.field.isKeyField()}return 0}}function af(i,e,t){const o=i.field.isKeyField()?gn.comparator(e.key,t.key):function(h,m,E){const P=m.data.field(h),K=E.data.field(h);return null!==P&&null!==K?Us(P,K):pn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return pn()}}function oh(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kn(e)?"-0":e}}function ah(i){return{integerValue:""+i}}function ec(i,e){return Qr(e)?ah(e):oh(i,e)}class gd{constructor(){this._=void 0}}function lh(i,e,t){return i instanceof Mu?function(o,h){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&(m.fields.__previous_value__=h),{mapValue:m}}(t,e):i instanceof Ru?ps(i,e):i instanceof kl?tc(i,e):function(o,h){const m=xu(o,h),E=uo(m)+uo(o.yt);return Be(m)&&Be(o.yt)?ah(E):oh(o.It,E)}(i,e)}function ip(i,e,t){return i instanceof Ru?ps(i,e):i instanceof kl?tc(i,e):t}function xu(i,e){return i instanceof da?Be(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Mu extends gd{}class Ru extends gd{constructor(e){super(),this.elements=e}}function ps(i,e){const t=_l(e);for(const o of i.elements)t.some(h=>oi(h,o))||t.push(o);return{arrayValue:{values:t}}}class kl extends gd{constructor(e){super(),this.elements=e}}function tc(i,e){let t=_l(e);for(const o of i.elements)t=t.filter(h=>!oi(h,o));return{arrayValue:{values:t}}}class da extends gd{constructor(e,t){super(),this.It=e,this.yt=t}}function uo(i){return M(i.integerValue||i.doubleValue)}function _l(i){return mt(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class nc{constructor(e,t){this.field=e,this.transform=t}}class md{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Pu{}function za(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new su(i.key,gs.none()):new Wa(i.key,i.data,gs.none());{const t=i.data,o=Ds.empty();let h=new Kn(wi.comparator);for(let m of e.fields)if(!h.has(m)){let E=t.field(m);null===E&&m.length>1&&(m=m.popLast(),E=t.field(m)),null===E?o.delete(m):o.set(m,E),h=h.add(m)}return new Bo(i.key,o,new Vs(h.toArray()),gs.none())}}function vd(i,e,t){i instanceof Wa?function(o,h,m){const E=o.value.clone(),P=Nl(o.fieldTransforms,h,m.transformResults);E.setAll(P),h.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(i,e,t):i instanceof Bo?function(o,h,m){if(!yd(o.precondition,h))return void h.convertToUnknownDocument(m.version);const E=Nl(o.fieldTransforms,h,m.transformResults),P=h.data;P.setAll(ru(o)),P.setAll(E),h.convertToFoundDocument(m.version,P).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ou(i,e,t,o){return i instanceof Wa?function(h,m,E,P){if(!yd(h.precondition,m))return E;const K=h.value.clone(),J=iu(h.fieldTransforms,P,m);return K.setAll(J),m.convertToFoundDocument(m.version,K).setHasLocalMutations(),null}(i,e,t,o):i instanceof Bo?function(h,m,E,P){if(!yd(h.precondition,m))return E;const K=iu(h.fieldTransforms,P,m),J=m.data;return J.setAll(ru(h)),J.setAll(K),m.convertToFoundDocument(m.version,J).setHasLocalMutations(),null===E?null:E.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(Ee=>Ee.field))}(i,e,t,o):(E=t,yd(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):E);var m,E}function uh(i,e){let t=null;for(const o of i.fieldTransforms){const h=e.data.field(o.field),m=xu(o.transform,h||null);null!=m&&(null===t&&(t=Ds.empty()),t.set(o.field,m))}return t||null}function ku(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&ll(t,o,(h,m)=>function lf(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ru&&o instanceof Ru||t instanceof kl&&o instanceof kl?ll(t.elements,o.elements,oi):t instanceof da&&o instanceof da?oi(t.yt,o.yt):t instanceof Mu&&o instanceof Mu);var t,o}(h,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Wa extends Pu{constructor(e,t,o,h=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class Bo extends Pu{constructor(e,t,o,h,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function ru(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Nl(i,e,t){const o=new Map;sr(i.length===t.length);for(let h=0;h<t.length;h++){const m=i[h],E=m.transform,P=e.data.field(m.field);o.set(m.field,ip(E,P,t[h]))}return o}function iu(i,e,t){const o=new Map;for(const h of i){const m=h.transform,E=t.data.field(h.field);o.set(h.field,lh(m,E,e))}return o}class su extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nu extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ch{constructor(e){this.count=e}}var ms,hi;function Lc(i){switch(i){default:return pn();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function ou(i){if(void 0===i)return mi("GRPC error has no .code"),Lt.UNKNOWN;switch(i){case ms.OK:return Lt.OK;case ms.CANCELLED:return Lt.CANCELLED;case ms.UNKNOWN:return Lt.UNKNOWN;case ms.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case ms.INTERNAL:return Lt.INTERNAL;case ms.UNAVAILABLE:return Lt.UNAVAILABLE;case ms.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case ms.NOT_FOUND:return Lt.NOT_FOUND;case ms.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case ms.ABORTED:return Lt.ABORTED;case ms.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case ms.DATA_LOSS:return Lt.DATA_LOSS;default:return pn()}}(hi=ms||(ms={}))[hi.OK=0]="OK",hi[hi.CANCELLED=1]="CANCELLED",hi[hi.UNKNOWN=2]="UNKNOWN",hi[hi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hi[hi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hi[hi.NOT_FOUND=5]="NOT_FOUND",hi[hi.ALREADY_EXISTS=6]="ALREADY_EXISTS",hi[hi.PERMISSION_DENIED=7]="PERMISSION_DENIED",hi[hi.UNAUTHENTICATED=16]="UNAUTHENTICATED",hi[hi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hi[hi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hi[hi.ABORTED=10]="ABORTED",hi[hi.OUT_OF_RANGE=11]="OUT_OF_RANGE",hi[hi.UNIMPLEMENTED=12]="UNIMPLEMENTED",hi[hi.INTERNAL=13]="INTERNAL",hi[hi.UNAVAILABLE=14]="UNAVAILABLE",hi[hi.DATA_LOSS=15]="DATA_LOSS";class Ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[h,m]of o)if(this.equalsFn(h,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),h=this.inner[o];if(void 0===h)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,t]);h.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return 1===o.length?delete this.inner[t]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(t,o)=>{for(const[h,m]of o)e(h,m)})}isEmpty(){return vl(this.inner)}size(){return this.innerSize}}const au=new Oi(gn.comparator);function ea(){return au}const _d=new Oi(gn.comparator);function Hi(...i){let e=_d;for(const t of i)e=e.insert(t.key,t);return e}function ta(i){let e=_d;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Ra(){return rc()}function Bc(){return rc()}function rc(){return new Ma(i=>i.toString(),(i,e)=>i.isEqual(e))}const dh=new Oi(gn.comparator),lu=new Kn(gn.comparator);function jr(...i){let e=lu;for(const t of i)e=e.add(t);return e}const El=new Kn(fr);function Il(){return El}class nl{constructor(e,t,o,h,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const h=new Map;return h.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new nl(pr.min(),h,Il(),ea(),jr())}}class Fu{constructor(e,t,o,h,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Fu(o,t,jr(),jr(),jr())}}class uu{constructor(e,t,o,h){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=h}}class $c{constructor(e,t){this.targetId=e,this.At=t}}class cu{constructor(e,t,o=T.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=h}}class ha{constructor(){this.Rt=0,this.bt=sp(),this.Pt=T.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jr(),t=jr(),o=jr();return this.bt.forEach((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:t=t.add(h);break;case 1:o=o.add(h);break;default:pn()}}),new Fu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=sp()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class ic{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ea(),this.qt=hh(),this.Kt=new Kn(fr)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,h)=>{this.Ht(h)&&t(h)})}Yt(e){const t=e.targetId,o=e.At.count,h=this.Xt(t);if(h){const m=h.target;if(Su(m))if(0===o){const E=new gn(m.path);this.jt(t,E,di.newNoDocument(E,pr.min()))}else sr(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((m,E)=>{const P=this.Xt(E);if(P){if(m.current&&Su(P.target)){const K=new gn(P.target.path);null!==this.Ut.get(K)||this.ee(E,K)||this.jt(E,K,di.newNoDocument(K,e))}m.Dt&&(t.set(E,m.xt()),m.Nt())}});let o=jr();this.qt.forEach((m,E)=>{let P=!0;E.forEachWhile(K=>{const J=this.Xt(K);return!J||2===J.purpose||(P=!1,!1)}),P&&(o=o.add(m))}),this.Ut.forEach((m,E)=>E.setReadTime(e));const h=new nl(e,t,this.Kt,this.Ut,o);return this.Ut=ea(),this.qt=hh(),this.Kt=new Kn(fr),h}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const h=this.zt(e);this.ee(e,t)?h.kt(t,1):h.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new ha,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Kn(fr),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Xt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ha),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function hh(){return new Oi(gn.comparator)}function sp(){return new Oi(gn.comparator)}const sc={asc:"ASCENDING",desc:"DESCENDING"},Ed={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fh{constructor(e,t){this.databaseId=e,this.gt=t}}function Lu(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ph(i,e){return i.gt?e.toBase64():e.toUint8Array()}function wl(i,e){return Lu(i,e.toTimestamp())}function eo(i){return sr(!!i),pr.fromTimestamp(function(e){const t=I(e);return new ji(t.seconds,t.nanos)}(i))}function oc(i,e){return(t=i,new Jr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Vc(i){const e=Jr.fromString(i);return sr(Yn(e)),e}function Fl(i,e){return oc(i.databaseId,e.path)}function fa(i,e){const t=Vc(e);if(t.get(1)!==i.databaseId.projectId)throw new Jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Jt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new gn(Id(t))}function co(i,e){return oc(i.databaseId,e)}function Ll(i){const e=Vc(i);return 4===e.length?Jr.emptyPath():Id(e)}function cl(i){return new Jr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Id(i){return sr(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function rl(i,e,t){return{name:Fl(i,e),fields:t.value.mapValue.fields}}function Bu(i,e,t){const o=fa(i,e.name),h=eo(e.updateTime),m=new Ds({mapValue:{fields:e.fields}}),E=di.newFoundDocument(o,h,m);return t&&E.setHasCommittedMutations(),t?E.setHasCommittedMutations():E}function $u(i,e){let t;if(e instanceof Wa)t={update:rl(i,e.key,e.value)};else if(e instanceof su)t={delete:Fl(i,e.key)};else if(e instanceof Bo)t={update:rl(i,e.key,e.data),updateMask:yn(e.fieldMask)};else{if(!(e instanceof Nu))return pn();t={verify:Fl(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(h,m){const E=m.transform;if(E instanceof Mu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Ru)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof kl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof da)return{fieldPath:m.field.canonicalString(),increment:E.yt};throw pn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:wl(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:pn()),t;var h}function du(i,e){const t=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?gs.updateTime(eo(h.updateTime)):void 0!==h.exists?gs.exists(h.exists):gs.none():gs.none(),o=e.updateTransforms?e.updateTransforms.map(h=>function(m,E){let P=null;"setToServerValue"in E?(sr("REQUEST_TIME"===E.setToServerValue),P=new Mu):"appendMissingElements"in E?P=new Ru(E.appendMissingElements.values||[]):"removeAllFromArray"in E?P=new kl(E.removeAllFromArray.values||[]):"increment"in E?P=new da(m,E.increment):pn();const K=wi.fromServerFormat(E.fieldPath);return new nc(K,P)}(i,h)):[];var h;if(e.update){const h=fa(i,e.update.name),m=new Ds({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new Vs((e.updateMask.fieldPaths||[]).map(J=>wi.fromServerFormat(J)));return new Bo(h,m,E,t,o)}return new Wa(h,m,t,o)}if(e.delete){const h=fa(i,e.delete);return new su(h,t)}if(e.verify){const h=fa(i,e.verify);return new Nu(h,t)}return pn()}function bd(i,e){return{documents:[co(i,e.path)]}}function Bl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=co(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=co(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const h=function(K){if(0===K.length)return;const J=K.map(Ee=>function(Xe){if("=="===Xe.op){if(qt(Xe.value))return{unaryFilter:{field:Z(Xe.field),op:"IS_NAN"}};if(Nt(Xe.value))return{unaryFilter:{field:Z(Xe.field),op:"IS_NULL"}}}else if("!="===Xe.op){if(qt(Xe.value))return{unaryFilter:{field:Z(Xe.field),op:"IS_NOT_NAN"}};if(Nt(Xe.value))return{unaryFilter:{field:Z(Xe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Z(Xe.field),op:A(Xe.op),value:Xe.value}}}(Ee));return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}(e.filters);h&&(t.structuredQuery.where=h);const m=function(K){if(0!==K.length)return K.map(J=>{return{field:Z((Ee=J).field),direction:v(Ee.dir)};var Ee})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const E=(J=e.limit,i.gt||Tn(J)?J:{value:J});var J,P,K;return null!==E&&(t.structuredQuery.limit=E),e.startAt&&(t.structuredQuery.startAt={before:(P=e.startAt).inclusive,values:P.position}),e.endAt&&(t.structuredQuery.endAt={before:!(K=e.endAt).inclusive,values:K.position}),t}function df(i){let e=Ll(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let h=null;if(o>0){sr(1===o);const Ee=t.from[0];Ee.allDescendants?h=Ee.collectionId:e=e.child(Ee.collectionId)}let m=[];t.where&&(m=g(t.where));let E=[];t.orderBy&&(E=t.orderBy.map(Ee=>{return new os(de((Xe=Ee).field),function(St){switch(St){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Xe.direction));var Xe}));let P=null;t.limit&&(P=function(Ee){let Xe;return Xe="object"==typeof Ee?Ee.value:Ee,Tn(Xe)?null:Xe}(t.limit));let K=null;var Ee;t.startAt&&(K=new Rl((Ee=t.startAt).values||[],!!Ee.before));let J=null;return t.endAt&&(J=function(Ee){return new Rl(Ee.values||[],!Ee.before)}(t.endAt)),th(e,h,E,m,P,"F",K,J)}function g(i){return i?void 0!==i.unaryFilter?[Vt(i)]:void 0!==i.fieldFilter?[ct(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>g(e)).reduce((e,t)=>e.concat(t)):pn():[]}function v(i){return sc[i]}function A(i){return Ed[i]}function Z(i){return{fieldPath:i.canonicalString()}}function de(i){return wi.fromServerFormat(i.fieldPath)}function ct(i){return Lo.create(de(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pn()}}(i.fieldFilter.op),i.fieldFilter.value)}function Vt(i){switch(i.unaryFilter.op){case"IS_NAN":const e=de(i.unaryFilter.field);return Lo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=de(i.unaryFilter.field);return Lo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=de(i.unaryFilter.field);return Lo.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=de(i.unaryFilter.field);return Lo.create(h,"!=",{nullValue:"NULL_VALUE"});default:return pn()}}function yn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yn(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Xn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=to(e)),e=gr(i.get(t),e);return to(e)}function gr(i,e){let t=e;const o=i.length;for(let h=0;h<o;h++){const m=i.charAt(h);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function to(i){return i+"\x01\x01"}function no(i){const e=i.length;if(sr(e>=2),2===e)return sr("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Jr.emptyPath();const t=e-2,o=[];let h="";for(let m=0;m<e;){const E=i.indexOf("\x01",m);switch((E<0||E>t)&&pn(),i.charAt(E+1)){case"\x01":const P=i.substring(m,E);let K;0===h.length?K=P:(h+=P,K=h,h=""),o.push(K);break;case"\x10":h+=i.substring(m,E),h+="\0";break;case"\x11":h+=i.substring(m,E+1);break;default:pn()}m=E+2}return new Jr(o)}const ac=["userId","batchId"];function Uc(i,e){return[i,Xn(e)]}function jc(i,e,t){return[i,Xn(e),t]}const bl={},lc=["prefixPath","collectionGroup","readTime","documentId"],Cd=["prefixPath","collectionGroup","documentId"],Dd=["collectionGroup","readTime","prefixPath","documentId"],hf=["canonicalId","targetId"],ff=["targetId","path"],op=["path","targetId"],fg=["collectionId","parent"],uc=["indexId","uid"],pf=["uid","sequenceNumber"],dm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hm=["indexId","uid","orderedDocumentKey"],pg=["userId","collectionPath","documentId"],hu=["userId","collectionPath","largestBatchId"],fu=["userId","collectionGroup","largestBatchId"],Hc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vu=[...Hc,"documentOverlays"],Td=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sd=Td,My=[...Sd,"indexConfiguration","indexState","indexEntries"];class gg extends ul{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function pa(i,e){const t=En(i);return Zo.M(t.ie,e)}class Ad{constructor(e,t,o,h){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&vd(m,e,o[h])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ou(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ou(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Bc();return this.mutations.forEach(h=>{const m=e.get(h.key),E=m.overlayedDocument;let P=this.applyToLocalView(E,m.mutatedFields);P=t.has(h.key)?null:P;const K=za(E,P);null!==K&&o.set(h.key,K),E.isValidDocument()||E.convertToNoDocument(pr.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jr())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(t,o)=>ku(t,o))&&ll(this.baseMutations,e.baseMutations,(t,o)=>ku(t,o))}}class Gc{constructor(e,t,o,h){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=h}static from(e,t,o){sr(e.mutations.length===o.length);let h=dh;const m=e.mutations;for(let E=0;E<m.length;E++)h=h.insert(m[E].key,o[E].version);return new Gc(e,t,o,h)}}class mg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t,o,h,m=pr.min(),E=pr.min(),P=T.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=P}withSequenceNumber(e){return new il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zc{constructor(e){this.re=e}}function yg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fl(h=i.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Lu(h,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:pu(e.version)};else{if(!e.isUnknownDocument())return pn();o.unknownDocument={path:t.path.toArray(),version:pu(e.version)}}var h,m;return o}function gf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function pu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Uu(i){const e=new ji(i.seconds,i.nanoseconds);return pr.fromTimestamp(e)}function gu(i,e){const t=(e.baseMutations||[]).map(m=>du(i.re,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>du(i.re,m)),h=ji.fromMillis(e.localWriteTimeMs);return new Ad(e.batchId,h,t,o)}function Wc(i){const e=Uu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Uu(i.lastLimboFreeSnapshotVersion):pr.min();let o;var h;return void 0!==i.query.documents?(sr(1===(h=i.query).documents.length),o=Fs(Pl(Ll(h.documents[0])))):o=Fs(df(i.query)),new il(o,i.targetId,0,i.lastListenSequenceNumber,e,t,T.fromBase64String(i.resumeToken))}function Kc(i,e){const t=pu(e.snapshotVersion),o=pu(e.lastLimboFreeSnapshotVersion);let h;h=Su(e.target)?bd(i.re,e.target):Bl(i.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xo(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:h}}function ap(i){const e=df({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ol(e,e.limit,"L"):e}function ys(i,e){return new mg(e.largestBatchId,du(i.re,e.overlayMutation))}function lp(i,e){const t=e.path.lastSegment();return[i,Xn(e.path.popLast()),t]}function up(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:pu(o.readTime),documentKey:Xn(o.documentKey.path),largestBatchId:o.largestBatchId}}class cp{getBundleMetadata(e,t){return Yc(e).get(t).next(o=>{if(o)return{id:(h=o).bundleId,createTime:Uu(h.createTime),version:h.version};var h})}saveBundleMetadata(e,t){return Yc(e).put({bundleId:(o=t).id,createTime:pu(eo(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return gh(e).get(t).next(o=>{if(o)return{name:(h=o).name,query:ap(h.bundledQuery),readTime:Uu(h.readTime)};var h})}saveNamedQuery(e,t){return gh(e).put({name:(o=t).name,readTime:pu(eo(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Yc(i){return pa(i,"bundles")}function gh(i){return pa(i,"namedQueries")}class xd{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new xd(e,t.uid||"")}getOverlay(e,t){return qc(e).get(lp(this.userId,t)).next(o=>o?ys(this.It,o):null)}getOverlays(e,t){const o=Ra();return kt.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){const h=[];return o.forEach((m,E)=>{const P=new mg(t,E);h.push(this.ue(e,P))}),kt.waitFor(h)}removeOverlaysForBatchId(e,t,o){const h=new Set;t.forEach(E=>h.add(Xn(E.getCollectionPath())));const m=[];return h.forEach(E=>{const P=IDBKeyRange.bound([this.userId,E,o],[this.userId,E,o+1],!1,!0);m.push(qc(e).Y("collectionPathOverlayIndex",P))}),kt.waitFor(m)}getOverlaysForCollection(e,t,o){const h=Ra(),m=Xn(t),E=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return qc(e).W("collectionPathOverlayIndex",E).next(P=>{for(const K of P){const J=ys(this.It,K);h.set(J.getKey(),J)}return h})}getOverlaysForCollectionGroup(e,t,o,h){const m=Ra();let E;const P=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qc(e).Z({index:"collectionGroupOverlayIndex",range:P},(K,J,Ee)=>{const Xe=ys(this.It,J);m.size()<h||Xe.largestBatchId===E?(m.set(Xe.getKey(),Xe),E=Xe.largestBatchId):Ee.done()}).next(()=>m)}ue(e,t){return qc(e).put(function(o,h,m){const[E,P,K]=lp(h,m.mutation.key);return{userId:h,collectionPath:P,documentId:K,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:$u(o.re,m.mutation)}}(this.It,this.userId,t))}}function qc(i){return pa(i,"documentOverlays")}class ju{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(M(e.integerValue));else if("doubleValue"in e){const o=M(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),kn(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(j(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Sr(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):pn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const h of Object.keys(o))this._e(h,t),this.ae(o[h],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const h of o)this.ae(h,t)}ge(e,t){this.le(t,37),gn.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function vg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function mh(i){const e=64-function(t){let o=0;for(let h=0;h<8;++h){const m=vg(255&t[h]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}ju.Te=new ju;class Ry{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const h=t.codePointAt(0);this.Ae(240|h>>>18),this.Ae(128|63&h>>>12),this.Ae(128|63&h>>>6),this.Ae(128|63&h)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const h=t.codePointAt(0);this.Pe(240|h>>>18),this.Pe(128|63&h>>>12),this.Pe(128|63&h>>>6),this.Pe(128|63&h)}}this.ve()}De(e){const t=this.Ce(e),o=mh(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=255&t[h]}Ne(e){const t=this.Ce(e),o=mh(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let h=t.length-o;h<t.length;++h)this.buffer[this.position++]=~(255&t[h])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(h){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,h,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let h=1;h<t.length;++h)t[h]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const h=new Uint8Array(o);h.set(this.buffer),this.buffer=h}}class yh{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class dp{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class cc{constructor(){this.Be=new Ry,this.Le=new yh(this.Be),this.Ue=new dp(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mu{constructor(e,t,o,h){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=h}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new mu(this.indexId,this.documentKey,this.arrayValue,o)}}function dc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=_g(i.arrayValue,e.arrayValue),0!==t?t:(t=_g(i.directionalValue,e.directionalValue),0!==t?t:gn.comparator(i.documentKey,e.documentKey)))}function _g(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class pm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Ca(e);if(void 0!==t&&!this.ze(t))return!1;const o=Da(e);let h=0,m=0;for(;h<o.length&&this.ze(o[h]);++h);if(h===o.length)return!0;if(void 0!==this.je){const E=o[h];if(!this.He(this.je,E)||!this.Je(this.Ge[m++],E))return!1;++h}for(;h<o.length;++h){const E=o[h];if(m>=this.Ge.length||!this.Je(this.Ge[m++],E))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Eg{constructor(){this.Ye=new vh}addToCollectionParentIndex(e,t){return this.Ye.add(t),kt.resolve()}getCollectionParents(e,t){return kt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return kt.resolve()}deleteFieldIndex(e,t){return kt.resolve()}getDocumentsMatchingTarget(e,t){return kt.resolve(null)}getIndexType(e,t){return kt.resolve(0)}getFieldIndexes(e,t){return kt.resolve([])}getNextCollectionGroupToUpdate(e){return kt.resolve(null)}getMinOffset(e,t){return kt.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return kt.resolve(fs.min())}updateCollectionGroup(e,t,o){return kt.resolve()}updateIndexEntries(e,t){return kt.resolve()}}class vh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t]||new Kn(Jr.comparator),m=!h.has(o);return this.index[t]=h.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),h=this.index[t];return h&&h.has(o)}getEntries(e){return(this.index[e]||new Kn(Jr.comparator)).toArray()}}const hc=new Uint8Array(0);class Ig{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vh,this.Ze=new Ma(o=>Xo(o),(o,h)=>Jo(o,h)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),h=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const m={collectionId:o,parent:Xn(h)};return Md(e).put(m)}return kt.resolve()}getCollectionParents(e,t){const o=[],h=IDBKeyRange.bound([t,""],[xl(t),""],!1,!0);return Md(e).W(h).next(m=>{for(const E of m){if(E.collectionId!==t)break;o.push(no(E.parent))}return o})}addFieldIndex(e,t){const o=Cl(e),h={indexId:(E=t).indexId,collectionGroup:E.collectionGroup,fields:E.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var E;delete h.indexId;const m=o.add(h);if(t.indexState){const E=pc(e);return m.next(P=>{E.put(up(P,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const o=Cl(e),h=pc(e),m=fc(e);return o.delete(t.indexId).next(()=>h.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=fc(e);let h=!0;const m=new Map;return kt.forEach(this.tn(t),E=>this.en(e,E).next(P=>{h&&(h=!!P),m.set(E,P)})).next(()=>{if(h){let E=jr();const P=[];return kt.forEach(m,(K,J)=>{var Ee;Xt("IndexedDbIndexManager",`Using index ${Ee=K,`id=${Ee.indexId}|cg=${Ee.collectionGroup}|f=${Ee.fields.map($i=>`${$i.fieldPath}:${$i.kind}`).join(",")}`} to execute ${Xo(t)}`);const Xe=function($i,ho){const Gi=Ca(ho);if(void 0===Gi)return null;for(const qi of kc($i,Gi.fieldPath))switch(qi.op){case"array-contains-any":return qi.value.arrayValue.values||[];case"array-contains":return[qi.value]}return null}(J,K),St=function($i,ho){const Gi=new Map;for(const qi of Da(ho))for(const _a of kc($i,qi.fieldPath))switch(_a.op){case"==":case"in":Gi.set(qi.fieldPath.canonicalString(),_a.value);break;case"not-in":case"!=":return Gi.set(qi.fieldPath.canonicalString(),_a.value),Array.from(Gi.values())}return null}(J,K),Bt=function($i,ho){const Gi=[];let qi=!0;for(const _a of Da(ho)){const dg=0===_a.kind?Yi($i,_a.fieldPath,$i.startAt):tf($i,_a.fieldPath,$i.startAt);Gi.push(dg.value),qi&&(qi=dg.inclusive)}return new Rl(Gi,qi)}(J,K),en=function($i,ho){const Gi=[];let qi=!0;for(const _a of Da(ho)){const dg=0===_a.kind?tf($i,_a.fieldPath,$i.endAt):Yi($i,_a.fieldPath,$i.endAt);Gi.push(dg.value),qi&&(qi=dg.inclusive)}return new Rl(Gi,qi)}(J,K),$n=this.nn(K,J,Bt),Qn=this.nn(K,J,en),zi=this.sn(K,J,St),Ss=this.rn(K.indexId,Xe,$n,Bt.inclusive,Qn,en.inclusive,zi);return kt.forEach(Ss,$i=>o.J($i,t.limit).next(ho=>{ho.forEach(Gi=>{const qi=gn.fromSegments(Gi.documentKey);E.has(qi)||(E=E.add(qi),P.push(qi))})}))}).next(()=>P)}return kt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,h,m,E,P){const K=(null!=t?t.length:1)*Math.max(o.length,m.length),J=K/(null!=t?t.length:1),Ee=[];for(let Xe=0;Xe<K;++Xe){const St=t?this.on(t[Xe/J]):hc,Bt=this.un(e,St,o[Xe%J],h),en=this.cn(e,St,m[Xe%J],E),$n=P.map(Qn=>this.un(e,St,Qn,!0));Ee.push(...this.createRange(Bt,en,$n))}return Ee}un(e,t,o,h){const m=new mu(e,gn.empty(),t,o);return h?m:m.Ke()}cn(e,t,o,h){const m=new mu(e,gn.empty(),t,o);return h?m.Ke():m}en(e,t){const o=new pm(t),h=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,h).next(m=>{let E=null;for(const P of m)o.We(P)&&(!E||P.fields.length>E.fields.length)&&(E=P);return E})}getIndexType(e,t){let o=2;return kt.forEach(this.tn(t),h=>this.en(e,h).next(m=>{m?0!==o&&m.fields.length<function(E){let P=new Kn(wi.comparator),K=!1;for(const J of E.filters){const Ee=J;Ee.field.isKeyField()||("array-contains"===Ee.op||"array-contains-any"===Ee.op?K=!0:P=P.add(Ee.field))}for(const J of E.orderBy)J.field.isKeyField()||(P=P.add(J.field));return P.size+(K?1:0)}(h)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new cc;for(const h of Da(e)){const m=t.data.field(h.fieldPath);if(null==m)return null;const E=o.qe(h.kind);ju.Te.ce(m,E)}return o.$e()}on(e){const t=new cc;return ju.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new cc;return ju.Te.ce(te(this.databaseId,t),o.qe(function(h){const m=Da(h);return 0===m.length?0:m[m.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let h=[];h.push(new cc);let m=0;for(const E of Da(e)){const P=o[m++];for(const K of h)if(this.ln(t,E.fieldPath)&&mt(P))h=this.fn(h,E,P);else{const J=K.qe(E.kind);ju.Te.ce(P,J)}}return this.dn(h)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const h=[...e],m=[];for(const E of o.arrayValue.values||[])for(const P of h){const K=new cc;K.seed(P.$e()),ju.Te.ce(E,K.qe(t.kind)),m.push(K)}return m}ln(e,t){return!!e.filters.find(o=>o instanceof Lo&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Cl(e),h=pc(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(m=>{const E=[];return kt.forEach(m,P=>h.get([P.indexId,this.uid]).next(K=>{E.push(function(J,Ee){const Xe=Ee?new La(Ee.sequenceNumber,new fs(Uu(Ee.readTime),new gn(no(Ee.documentKey)),Ee.largestBatchId)):La.empty(),St=J.fields.map(([Bt,en])=>new Yo(wi.fromServerFormat(Bt),en));return new Fa(J.indexId,J.collectionGroup,St,Xe)}(P,K))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,h)=>{const m=o.indexState.sequenceNumber-h.indexState.sequenceNumber;return 0!==m?m:fr(o.collectionGroup,h.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const h=Cl(e),m=pc(e);return this._n(e).next(E=>h.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(P=>kt.forEach(P,K=>m.put(up(K.indexId,this.user,E,o)))))}updateIndexEntries(e,t){const o=new Map;return kt.forEach(t,(h,m)=>{const E=o.get(h.collectionGroup);return(E?kt.resolve(E):this.getFieldIndexes(e,h.collectionGroup)).next(P=>(o.set(h.collectionGroup,P),kt.forEach(P,K=>this.wn(e,h,K).next(J=>{const Ee=this.mn(m,K);return J.isEqual(Ee)?kt.resolve():this.gn(e,m,K,J,Ee)}))))})}yn(e,t,o,h){return fc(e).put({indexId:h.indexId,uid:this.uid,arrayValue:h.arrayValue,directionalValue:h.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,h){return fc(e).delete([h.indexId,this.uid,h.arrayValue,h.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const h=fc(e);let m=new Kn(dc);return h.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(E,P)=>{m=m.add(new mu(o.indexId,t,P.arrayValue,P.directionalValue))}).next(()=>m)}mn(e,t){let o=new Kn(dc);const h=this.an(t,e);if(null==h)return o;const m=Ca(t);if(null!=m){const E=e.data.field(m.fieldPath);if(mt(E))for(const P of E.arrayValue.values||[])o=o.add(new mu(t.indexId,e.key,this.on(P),h))}else o=o.add(new mu(t.indexId,e.key,hc,h));return o}gn(e,t,o,h,m){Xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const E=[];return function(P,K,J,Ee,Xe){const St=P.getIterator(),Bt=K.getIterator();let en=Ur(St),$n=Ur(Bt);for(;en||$n;){let Qn=!1,zi=!1;if(en&&$n){const Ss=J(en,$n);Ss<0?zi=!0:Ss>0&&(Qn=!0)}else null!=en?zi=!0:Qn=!0;Qn?(Ee($n),$n=Ur(Bt)):zi?(Xe(en),en=Ur(St)):(en=Ur(St),$n=Ur(Bt))}}(h,m,dc,P=>{E.push(this.yn(e,t,o,P))},P=>{E.push(this.pn(e,t,o,P))}),kt.waitFor(E)}_n(e){let t=1;return pc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,h,m)=>{m.done(),t=h.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((E,P)=>dc(E,P)).filter((E,P,K)=>!P||0!==dc(E,K[P-1]));const h=[];h.push(e);for(const E of o){const P=dc(E,e),K=dc(E,t);if(0===P)h[0]=e.Ke();else if(P>0&&K<0)h.push(E),h.push(E.Ke());else if(K>0)break}h.push(t);const m=[];for(let E=0;E<h.length;E+=2)m.push(IDBKeyRange.bound([h[E].indexId,this.uid,h[E].arrayValue,h[E].directionalValue,hc,[]],[h[E+1].indexId,this.uid,h[E+1].arrayValue,h[E+1].directionalValue,hc,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mf)}getMinOffset(e,t){return kt.mapArray(this.tn(t),o=>this.en(e,o).next(h=>h||pn())).next(mf)}}function Md(i){return pa(i,"collectionParents")}function fc(i){return pa(i,"indexEntries")}function Cl(i){return pa(i,"indexConfiguration")}function pc(i){return pa(i,"indexState")}function mf(i){sr(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const h=i[o].indexState.offset;Ba(h,e)<0&&(e=h),t<h.largestBatchId&&(t=h.largestBatchId)}return new fs(e.readTime,e.documentKey,t)}const gc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ga{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ga(e,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _h(i,e,t){const o=i.store("mutations"),h=i.store("documentMutations"),m=[],E=IDBKeyRange.only(t.batchId);let P=0;const K=o.Z({range:E},(Ee,Xe,St)=>(P++,St.delete()));m.push(K.next(()=>{sr(1===P)}));const J=[];for(const Ee of t.mutations){const Xe=jc(e,Ee.key.path,t.batchId);m.push(h.delete(Xe)),J.push(Ee.key)}return kt.waitFor(m).next(()=>J)}function Zc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw pn();e=i.noDocument}return JSON.stringify(e).length}ga.DEFAULT_COLLECTION_PERCENTILE=10,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ga.DEFAULT=new ga(41943040,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ga.DISABLED=new ga(-1,0,0);class mc{constructor(e,t,o,h){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=h,this.In={}}static oe(e,t,o,h){sr(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new mc(m,t,o,h)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).Z({index:"userMutationsIndex",range:o},(h,m,E)=>{t=!1,E.done()}).next(()=>t)}addMutationBatch(e,t,o,h){const m=Dl(e),E=$l(e);return E.add({}).next(P=>{sr("number"==typeof P);const K=new Ad(P,t,o,h),J=function(St,Bt,en){const $n=en.baseMutations.map(zi=>$u(St.re,zi)),Qn=en.mutations.map(zi=>$u(St.re,zi));return{userId:Bt,batchId:en.batchId,localWriteTimeMs:en.localWriteTime.toMillis(),baseMutations:$n,mutations:Qn}}(this.It,this.userId,K),Ee=[];let Xe=new Kn((St,Bt)=>fr(St.canonicalString(),Bt.canonicalString()));for(const St of h){const Bt=jc(this.userId,St.key.path,P);Xe=Xe.add(St.key.path.popLast()),Ee.push(E.put(J)),Ee.push(m.put(Bt,bl))}return Xe.forEach(St=>{Ee.push(this.indexManager.addToCollectionParentIndex(e,St))}),e.addOnCommittedListener(()=>{this.In[P]=K.keys()}),kt.waitFor(Ee).next(()=>K)})}lookupMutationBatch(e,t){return $l(e).get(t).next(o=>o?(sr(o.userId===this.userId),gu(this.It,o)):null)}Tn(e,t){return this.In[t]?kt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const h=o.keys();return this.In[t]=h,h}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,h=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return $l(e).Z({index:"userMutationsIndex",range:h},(E,P,K)=>{P.userId===this.userId&&(sr(P.batchId>=o),m=gu(this.It,P)),K.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return $l(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(h,m,E)=>{o=m.batchId,E.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $l(e).W("userMutationsIndex",t).next(o=>o.map(h=>gu(this.It,h)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Uc(this.userId,t.path),h=IDBKeyRange.lowerBound(o),m=[];return Dl(e).Z({range:h},(E,P,K)=>{const[J,Ee,Xe]=E,St=no(Ee);if(J===this.userId&&t.path.isEqual(St))return $l(e).get(Xe).next(Bt=>{if(!Bt)throw pn();sr(Bt.userId===this.userId),m.push(gu(this.It,Bt))});K.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Kn(fr);const h=[];return t.forEach(m=>{const E=Uc(this.userId,m.path),P=IDBKeyRange.lowerBound(E),K=Dl(e).Z({range:P},(J,Ee,Xe)=>{const[St,Bt,en]=J,$n=no(Bt);St===this.userId&&m.path.isEqual($n)?o=o.add(en):Xe.done()});h.push(K)}),kt.waitFor(h).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1,m=Uc(this.userId,o),E=IDBKeyRange.lowerBound(m);let P=new Kn(fr);return Dl(e).Z({range:E},(K,J,Ee)=>{const[Xe,St,Bt]=K,en=no(St);Xe===this.userId&&o.isPrefixOf(en)?en.length===h&&(P=P.add(Bt)):Ee.done()}).next(()=>this.En(e,P))}En(e,t){const o=[],h=[];return t.forEach(m=>{h.push($l(e).get(m).next(E=>{if(null===E)throw pn();sr(E.userId===this.userId),o.push(gu(this.It,E))}))}),kt.waitFor(h).next(()=>o)}removeMutationBatch(e,t){return _h(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),kt.forEach(o,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return kt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),h=[];return Dl(e).Z({range:o},(m,E,P)=>{if(m[0]===this.userId){const K=no(m[1]);h.push(K)}else P.done()}).next(()=>{sr(0===h.length)})})}containsKey(e,t){return Rd(e,this.userId,t)}Rn(e){return hp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rd(i,e,t){const o=Uc(e,t.path),h=o[1],m=IDBKeyRange.lowerBound(o);let E=!1;return Dl(i).Z({range:m,X:!0},(P,K,J)=>{const[Ee,Xe,St]=P;Ee===e&&Xe===h&&(E=!0),J.done()}).next(()=>E)}function $l(i){return pa(i,"mutations")}function Dl(i){return pa(i,"documentMutations")}function hp(i){return pa(i,"mutationQueues")}class Vl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Vl(0)}static vn(){return new Vl(-1)}}class yf{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Vl(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>pr.fromTimestamp(new ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(h=>(h.highestListenSequenceNumber=t,o&&(h.lastRemoteSnapshotVersion=o.toTimestamp()),t>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=t),this.Sn(e,h)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(sr(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let h=0;const m=[];return Qc(e).Z((E,P)=>{const K=Wc(P);K.sequenceNumber<=t&&null===o.get(K.targetId)&&(h++,m.push(this.removeTargetData(e,K)))}).next(()=>kt.waitFor(m)).next(()=>h)}forEachTarget(e,t){return Qc(e).Z((o,h)=>{const m=Wc(h);t(m)})}Vn(e){return fp(e).get("targetGlobalKey").next(t=>(sr(null!==t),t))}Sn(e,t){return fp(e).put("targetGlobalKey",t)}Dn(e,t){return Qc(e).put(Kc(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Xo(t),h=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return Qc(e).Z({range:h,index:"queryTargetsIndex"},(E,P,K)=>{const J=Wc(P);Jo(t,J.target)&&(m=J,K.done())}).next(()=>m)}addMatchingKeys(e,t,o){const h=[],m=ma(e);return t.forEach(E=>{const P=Xn(E.path);h.push(m.put({targetId:o,path:P})),h.push(this.referenceDelegate.addReference(e,o,E))}),kt.waitFor(h)}removeMatchingKeys(e,t,o){const h=ma(e);return kt.forEach(t,m=>{const E=Xn(m.path);return kt.waitFor([h.delete([o,E]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=ma(e),h=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(h)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),h=ma(e);let m=jr();return h.Z({range:o,X:!0},(E,P,K)=>{const J=no(E[1]),Ee=new gn(J);m=m.add(Ee)}).next(()=>m)}containsKey(e,t){const o=Xn(t.path),h=IDBKeyRange.bound([o],[xl(o)],!1,!0);let m=0;return ma(e).Z({index:"documentTargetsIndex",X:!0,range:h},([E,P],K,J)=>{0!==E&&(m++,J.done())}).next(()=>m>0)}se(e,t){return Qc(e).get(t).next(o=>o?Wc(o):null)}}function Qc(i){return pa(i,"targets")}function fp(i){return pa(i,"targetGlobal")}function ma(i){return pa(i,"targetDocuments")}function Ul([i,e],[t,o]){const h=fr(i,t);return 0===h?fr(e,o):h}class Eh{constructor(e){this.xn=e,this.buffer=new Kn(Ul),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Ul(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gm{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){wo(o)?Xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield qo(o)}yield t.Fn(3e5)}))}}class vf{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return kt.resolve(Ns.at);const o=new Eh(t);return this.$n.forEachTarget(e,h=>o.On(h.sequenceNumber)).next(()=>this.$n.Ln(e,h=>o.On(h))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector","Garbage collection skipped; disabled"),kt.resolve(gc)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gc):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,h,m,E,P,K,J;const Ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Xe=>(Xe>this.params.maximumSequenceNumbersToCollect?(Xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Xe}`),h=this.params.maximumSequenceNumbersToCollect):h=Xe,E=Date.now(),this.nthSequenceNumber(e,h))).next(Xe=>(o=Xe,P=Date.now(),this.removeTargets(e,o,t))).next(Xe=>(m=Xe,K=Date.now(),this.removeOrphanedDocuments(e,o))).next(Xe=>(J=Date.now(),Ei()<=st.in.DEBUG&&Xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Ee}ms\n\tDetermined least recently used ${h} in `+(P-E)+`ms\n\tRemoved ${m} targets in `+(K-P)+`ms\n\tRemoved ${Xe} documents in `+(J-K)+`ms\nTotal Duration: ${J-Ee}ms`),kt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:Xe})))}}class pp{constructor(e,t){this.db=e,this.garbageCollector=new vf(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(h=>o+h))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,h)=>t(h))}addReference(e,t,o){return Hu(e,o)}removeReference(e,t,o){return Hu(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Hu(e,t)}Gn(e,t){return function(o,h){let m=!1;return hp(o).tt(E=>Rd(o,E,h).next(P=>(P&&(m=!0),kt.resolve(!P)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let m=0;return this.Kn(e,(E,P)=>{if(P<=t){const K=this.Gn(e,E).next(J=>{if(!J)return m++,o.getEntry(e,E).next(()=>(o.removeEntry(E,pr.min()),ma(e).delete([0,Xn(E.path)])))});h.push(K)}}).next(()=>kt.waitFor(h)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Hu(e,t)}Kn(e,t){const o=ma(e);let h,m=Ns.at;return o.Z({index:"documentTargetsIndex"},([E,P],{path:K,sequenceNumber:J})=>{0===E?(m!==Ns.at&&t(new gn(no(h)),m),m=J,h=K):m=Ns.at}).next(()=>{m!==Ns.at&&t(new gn(no(h)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hu(i,e){return ma(i).put((o=i.currentSequenceNumber,{targetId:0,path:Xn(e.path),sequenceNumber:o}));var o}class Pd{constructor(){this.changes=new Ma(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?kt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wg{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return yu(e).put(o)}removeEntry(e,t,o){return yu(e).delete(function(h,m){const E=h.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],gf(m),E[E.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=di.newInvalidDocument(t);return yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jl(t))},(h,m)=>{o=this.jn(t,m)}).next(()=>o)}Wn(e,t){let o={size:0,document:di.newInvalidDocument(t)};return yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(jl(t))},(h,m)=>{o={document:this.jn(t,m),size:Zc(m)}}).next(()=>o)}getEntries(e,t){let o=ea();return this.zn(e,t,(h,m)=>{const E=this.jn(h,m);o=o.insert(h,E)}).next(()=>o)}Hn(e,t){let o=ea(),h=new Oi(gn.comparator);return this.zn(e,t,(m,E)=>{const P=this.jn(m,E);o=o.insert(m,P),h=h.insert(m,Zc(E))}).next(()=>({documents:o,Jn:h}))}zn(e,t,o){if(t.isEmpty())return kt.resolve();let h=new Kn(gp);t.forEach(K=>h=h.add(K));const m=IDBKeyRange.bound(jl(h.first()),jl(h.last())),E=h.getIterator();let P=E.getNext();return yu(e).Z({index:"documentKeyIndex",range:m},(K,J,Ee)=>{const Xe=gn.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;P&&gp(P,Xe)<0;)o(P,null),P=E.getNext();P&&P.isEqual(Xe)&&(o(P,J),P=E.hasNext()?E.getNext():null),P?Ee.j(jl(P)):Ee.done()}).next(()=>{for(;P;)o(P,null),P=E.hasNext()?E.getNext():null})}getAllFromCollection(e,t,o){const h=[t.popLast().toArray(),t.lastSegment(),gf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yu(e).W(IDBKeyRange.bound(h,m,!0)).next(E=>{let P=ea();for(const K of E){const J=this.jn(gn.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);P=P.insert(J.key,J)}return P})}getAllFromCollectionGroup(e,t,o,h){let m=ea();const E=na(t,o),P=na(t,fs.max());return yu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,P,!0)},(K,J,Ee)=>{const Xe=this.jn(gn.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);m=m.insert(Xe.key,Xe),m.size===h&&Ee.done()}).next(()=>m)}newChangeBuffer(e){return new bg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Od(e).get("remoteDocumentGlobalKey").next(t=>(sr(!!t),t))}Qn(e,t){return Od(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function fm(i,e){let t;if(e.document)t=Bu(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=gn.fromSegments(e.noDocument.path),h=Uu(e.noDocument.readTime);t=di.newNoDocument(o,h),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pn();{const o=gn.fromSegments(e.unknownDocument.path),h=Uu(e.unknownDocument.version);t=di.newUnknownDocument(o,h)}}return e.readTime&&t.setReadTime(function(o){const h=new ji(o[0],o[1]);return pr.fromTimestamp(h)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(pr.min()))return o}return di.newInvalidDocument(e)}}function Tl(i){return new wg(i)}class bg extends Pd{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ma(o=>o.toString(),(o,h)=>o.isEqual(h))}applyChanges(e){const t=[];let o=0,h=new Kn((m,E)=>fr(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const P=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,P.readTime)),E.isValidDocument()){const K=yg(this.Yn.It,E);h=h.add(m.path.popLast());const J=Zc(K);o+=J-P.size,t.push(this.Yn.addEntry(e,m,K))}else if(o-=P.size,this.trackRemovals){const K=yg(this.Yn.It,E.convertToNoDocument(pr.min()));t.push(this.Yn.addEntry(e,m,K))}}),h.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,o)),kt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:h})=>(h.forEach((m,E)=>{this.Xn.set(m,{size:E,readTime:o.get(m).readTime})}),o))}}function Od(i){return pa(i,"remoteDocumentGlobal")}function yu(i){return pa(i,"remoteDocumentsV14")}function jl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function na(i,e){const t=e.documentKey.path.toArray();return[i,gf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gp(i,e){const t=i.path.toArray(),o=e.path.toArray();let h=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(h=fr(t[m],o[m]),h)return h;return h=fr(t.length,o.length),h||(h=fr(t[t.length-2],o[o.length-2]),h||fr(t[t.length-1],o[o.length-1]))}class Py{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _f{constructor(e,t,o,h){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(h=>(o=h,this.getBaseDocument(e,t,o))).next(h=>(null!==o&&Ou(o.mutation,h,Vs.empty(),ji.now()),h))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,jr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=jr()){const h=Ra();return this.populateOverlays(e,h,t).next(()=>this.computeViews(e,t,h,o).next(m=>{let E=Hi();return m.forEach((P,K)=>{E=E.insert(P,K.overlayedDocument)}),E}))}getOverlayedDocuments(e,t){const o=Ra();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,jr()))}populateOverlays(e,t,o){const h=[];return o.forEach(m=>{t.has(m)||h.push(m)}),this.documentOverlayCache.getOverlays(e,h).next(m=>{m.forEach((E,P)=>{t.set(E,P)})})}computeViews(e,t,o,h){let m=ea();const E=rc(),P=rc();return t.forEach((K,J)=>{const Ee=o.get(J.key);h.has(J.key)&&(void 0===Ee||Ee.mutation instanceof Bo)?m=m.insert(J.key,J):void 0!==Ee&&(E.set(J.key,Ee.mutation.getFieldMask()),Ou(Ee.mutation,J,Ee.mutation.getFieldMask(),ji.now()))}),this.recalculateAndSaveOverlays(e,m).next(K=>(K.forEach((J,Ee)=>E.set(J,Ee)),t.forEach((J,Ee)=>{var Xe;return P.set(J,new Py(Ee,null!==(Xe=E.get(J))&&void 0!==Xe?Xe:null))}),P))}recalculateAndSaveOverlays(e,t){const o=rc();let h=new Oi((E,P)=>E-P),m=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(E=>{for(const P of E)P.keys().forEach(K=>{const J=t.get(K);if(null===J)return;let Ee=o.get(K)||Vs.empty();Ee=P.applyToLocalView(J,Ee),o.set(K,Ee);const Xe=(h.get(P.batchId)||jr()).add(K);h=h.insert(P.batchId,Xe)})}).next(()=>{const E=[],P=h.getReverseIterator();for(;P.hasNext();){const K=P.getNext(),J=K.key,Ee=K.value,Xe=Bc();Ee.forEach(St=>{if(!m.has(St)){const Bt=za(t.get(St),o.get(St));null!==Bt&&Xe.set(St,Bt),m=m.add(St)}}),E.push(this.documentOverlayCache.saveOverlays(e,J,Xe))}return kt.waitFor(E)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return gn.isDocumentKey((h=t).path)&&null===h.collectionGroup&&0===h.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ih(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var h}getNextDocuments(e,t,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,h).next(m=>{const E=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,h-m.size):kt.resolve(Ra());let P=-1,K=m;return E.next(J=>kt.forEach(J,(Ee,Xe)=>(P<Xe.largestBatchId&&(P=Xe.largestBatchId),m.get(Ee)?kt.resolve():this.getBaseDocument(e,Ee,Xe).next(St=>{K=K.insert(Ee,St)}))).next(()=>this.populateOverlays(e,J,m)).next(()=>this.computeViews(e,K,J,jr())).next(Ee=>({batchId:P,changes:ta(Ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new gn(t)).next(o=>{let h=Hi();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const h=t.collectionGroup;let m=Hi();return this.indexManager.getCollectionParents(e,h).next(E=>kt.forEach(E,P=>{const K=(J=t,Ee=P.child(h),new ja(Ee,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,Ee;return this.getDocumentsMatchingCollectionQuery(e,K,o).next(J=>{J.forEach((Ee,Xe)=>{m=m.insert(Ee,Xe)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,o){let h;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(m=>(h=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(m=>{m.forEach((P,K)=>{const J=K.getKey();null===h.get(J)&&(h=h.insert(J,di.newInvalidDocument(J)))});let E=Hi();return h.forEach((P,K)=>{const J=m.get(P);void 0!==J&&Ou(J.mutation,K,Vs.empty(),ji.now()),nu(t,K)&&(E=E.insert(P,K))}),E})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):kt.resolve(di.newInvalidDocument(t))}}class mm{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return kt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:eo(o.createTime)}),kt.resolve()}getNamedQuery(e,t){return kt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:ap(o.bundledQuery),readTime:eo(o.readTime)}),kt.resolve();var o}}class ym{constructor(){this.overlays=new Oi(gn.comparator),this.es=new Map}getOverlay(e,t){return kt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ra();return kt.forEach(t,h=>this.getOverlay(e,h).next(m=>{null!==m&&o.set(h,m)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((h,m)=>{this.ue(e,t,m)}),kt.resolve()}removeOverlaysForBatchId(e,t,o){const h=this.es.get(o);return void 0!==h&&(h.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(o)),kt.resolve()}getOverlaysForCollection(e,t,o){const h=Ra(),m=t.length+1,E=new gn(t.child("")),P=this.overlays.getIteratorFrom(E);for(;P.hasNext();){const K=P.getNext().value,J=K.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===m&&K.largestBatchId>o&&h.set(K.getKey(),K)}return kt.resolve(h)}getOverlaysForCollectionGroup(e,t,o,h){let m=new Oi((J,Ee)=>J-Ee);const E=this.overlays.getIterator();for(;E.hasNext();){const J=E.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let Ee=m.get(J.largestBatchId);null===Ee&&(Ee=Ra(),m=m.insert(J.largestBatchId,Ee)),Ee.set(J.getKey(),J)}}const P=Ra(),K=m.getIterator();for(;K.hasNext()&&(K.getNext().value.forEach((J,Ee)=>P.set(J,Ee)),!(P.size()>=h)););return kt.resolve(P)}ue(e,t,o){const h=this.overlays.get(o.key);if(null!==h){const E=this.es.get(h.largestBatchId).delete(o.key);this.es.set(h.largestBatchId,E)}this.overlays=this.overlays.insert(o.key,new mg(t,o));let m=this.es.get(t);void 0===m&&(m=jr(),this.es.set(t,m)),this.es.set(t,m.add(o.key))}}class mp{constructor(){this.ns=new Kn(Do.ss),this.rs=new Kn(Do.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Do(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Do(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new gn(new Jr([])),o=new Do(t,e),h=new Do(t,e+1),m=[];return this.rs.forEachInRange([o,h],E=>{this.cs(E),m.push(E.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new gn(new Jr([])),o=new Do(t,e),h=new Do(t,e+1);let m=jr();return this.rs.forEachInRange([o,h],E=>{m=m.add(E.key)}),m}containsKey(e){const t=new Do(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Do{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return gn.comparator(e.key,t.key)||fr(e._s,t._s)}static os(e,t){return fr(e._s,t._s)||gn.comparator(e.key,t.key)}}class kd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Kn(Do.ss)}checkEmpty(e){return kt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,h){const m=this.ws;this.ws++;const E=new Ad(m,t,o,h);this.mutationQueue.push(E);for(const P of h)this.gs=this.gs.add(new Do(P.key,m)),this.indexManager.addToCollectionParentIndex(e,P.key.path.popLast());return kt.resolve(E)}lookupMutationBatch(e,t){return kt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const h=this.ps(t+1),m=h<0?0:h;return kt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return kt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return kt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Do(t,0),h=new Do(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([o,h],E=>{const P=this.ys(E._s);m.push(P)}),kt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Kn(fr);return t.forEach(h=>{const m=new Do(h,0),E=new Do(h,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,E],P=>{o=o.add(P._s)})}),kt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,h=o.length+1;let m=o;gn.isDocumentKey(m)||(m=m.child(""));const E=new Do(new gn(m),0);let P=new Kn(fr);return this.gs.forEachWhile(K=>{const J=K.key.path;return!!o.isPrefixOf(J)&&(J.length===h&&(P=P.add(K._s)),!0)},E),kt.resolve(this.Is(P))}Is(e){const t=[];return e.forEach(o=>{const h=this.ys(o);null!==h&&t.push(h)}),t}removeMutationBatch(e,t){sr(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return kt.forEach(t.mutations,h=>{const m=new Do(h.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Do(t,0),h=this.gs.firstAfterOrEqual(o);return kt.resolve(t.isEqual(h&&h.key))}performConsistencyCheck(e){return kt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ef{constructor(e){this.Es=e,this.docs=new Oi(gn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,h=this.docs.get(o),m=h?h.size:0,E=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return kt.resolve(o?o.document.mutableCopy():di.newInvalidDocument(t))}getEntries(e,t){let o=ea();return t.forEach(h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():di.newInvalidDocument(h))}),kt.resolve(o)}getAllFromCollection(e,t,o){let h=ea();const m=new gn(t.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:P,value:{document:K}}=E.getNext();if(!t.isPrefixOf(P.path))break;P.path.length>t.length+1||Ba(Ta(K),o)<=0||(h=h.insert(K.key,K.mutableCopy()))}return kt.resolve(h)}getAllFromCollectionGroup(e,t,o,h){pn()}As(e,t){return kt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new If(this)}getSize(e){return kt.resolve(this.size)}}class If extends Pd{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,h)=>{h.isValidDocument()?t.push(this.Yn.addEntry(e,h)):this.Yn.removeEntry(o)}),kt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.Rs=new Ma(t=>Xo(t),Jo),this.lastRemoteSnapshotVersion=pr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new mp,this.targetCount=0,this.vs=Vl.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,h)=>t(h)),kt.resolve()}getLastRemoteSnapshotVersion(e){return kt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return kt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),kt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),kt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Vl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,kt.resolve()}updateTargetData(e,t){return this.Dn(t),kt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,kt.resolve()}removeTargets(e,t,o){let h=0;const m=[];return this.Rs.forEach((E,P)=>{P.sequenceNumber<=t&&null===o.get(P.targetId)&&(this.Rs.delete(E),m.push(this.removeMatchingKeysForTargetId(e,P.targetId)),h++)}),kt.waitFor(m).next(()=>h)}getTargetCount(e){return kt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return kt.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),kt.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const h=this.persistence.referenceDelegate,m=[];return h&&t.forEach(E=>{m.push(h.markPotentiallyOrphaned(e,E))}),kt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),kt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return kt.resolve(o)}containsKey(e,t){return kt.resolve(this.Ps.containsKey(t))}}class Nd{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ns(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new vm(this),this.indexManager=new Eg,this.remoteDocumentCache=new Ef(o=>this.referenceDelegate.xs(o)),this.It=new zc(t),this.Ns=new mm(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ym,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new kd(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Xt("MemoryPersistence","Starting transaction:",e);const h=new yc(this.Ss.next());return this.referenceDelegate.ks(),o(h).next(m=>this.referenceDelegate.Os(h).next(()=>m)).toPromise().then(m=>(h.raiseOnCommittedEvent(),m))}Ms(e,t){return kt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class yc extends ul{constructor(e){super(),this.currentSequenceNumber=e}}class wf{constructor(e){this.persistence=e,this.Fs=new mp,this.$s=null}static Bs(e){return new wf(e)}get Ls(){if(this.$s)return this.$s;throw pn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),kt.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),kt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),kt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(h=>this.Ls.add(h.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(h=>{h.forEach(m=>this.Ls.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kt.forEach(this.Ls,o=>{const h=gn.fromPath(o);return this.Us(e,h).next(m=>{m||t.removeEntry(h,pr.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return kt.or([()=>kt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class yp{constructor(e){this.It=e}$(e,t,o,h){const m=new el("createOrUpgrade",t);var P;o<1&&h>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ac,{unique:!0}),P.createObjectStore("documentMutations"),Cg(e),function(P){P.createObjectStore("remoteDocuments")}(e));let E=kt.resolve();return o<3&&h>=3&&(0!==o&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),Cg(e)),E=E.next(()=>function(P){const K=P.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pr.min().toTimestamp(),targetCount:0};return K.put("targetGlobalKey",J)}(m))),o<4&&h>=4&&(0!==o&&(E=E.next(()=>function(P,K){return K.store("mutations").W().next(J=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ac,{unique:!0});const Ee=K.store("mutations"),Xe=J.map(St=>Ee.put(St));return kt.waitFor(Xe)})}(e,m))),E=E.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&h>=5&&(E=E.next(()=>this.qs(m))),o<6&&h>=6&&(E=E.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),o<7&&h>=7&&(E=E.next(()=>this.Gs(m))),o<8&&h>=8&&(E=E.next(()=>this.Qs(e,m))),o<9&&h>=9&&(E=E.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&h>=10&&(E=E.next(()=>this.js(m))),o<11&&h>=11&&(E=E.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&h>=12&&(E=E.next(()=>{!function(P){const K=P.createObjectStore("documentOverlays",{keyPath:pg});K.createIndex("collectionPathOverlayIndex",hu,{unique:!1}),K.createIndex("collectionGroupOverlayIndex",fu,{unique:!1})}(e)})),o<13&&h>=13&&(E=E.next(()=>function(P){const K=P.createObjectStore("remoteDocumentsV14",{keyPath:lc});K.createIndex("documentKeyIndex",Cd),K.createIndex("collectionGroupIndex",Dd)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&h>=14&&(E=E.next(()=>this.zs(e,m))),o<15&&h>=15&&(E=E.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:uc}).createIndex("sequenceNumberIndex",pf,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:dm}).createIndex("documentKeyIndex",hm,{unique:!1})}(e))),E}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,h)=>{t+=Zc(h)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(h=>kt.forEach(h,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",E).next(P=>kt.forEach(P,K=>{sr(K.userId===m.userId);const J=gu(this.It,K);return _h(e,m.userId,J).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(h=>{const m=[];return o.Z((E,P)=>{const K=new Jr(E),J=[0,Xn(K)];m.push(t.get(J).next(Ee=>Ee?kt.resolve():t.put({targetId:0,path:Xn(K),sequenceNumber:h.highestListenSequenceNumber})))}).next(()=>kt.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:fg});const o=t.store("collectionParents"),h=new vh,m=E=>{if(h.add(E)){const P=E.lastSegment(),K=E.popLast();return o.put({collectionId:P,parent:Xn(K)})}};return t.store("remoteDocuments").Z({X:!0},(E,P)=>{const K=new Jr(E);return m(K.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([E,P,K],J)=>{const Ee=no(P);return m(Ee.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,h)=>{const m=Wc(h),E=Kc(this.It,m);return t.put(E)})}Ws(e,t){const o=t.store("remoteDocuments"),h=[];return o.Z((m,E)=>{const P=t.store("remoteDocumentsV14"),K=(J=E,J.document?new gn(Jr.fromString(J.document.name).popFirst(5)):J.noDocument?gn.fromSegments(J.noDocument.path):J.unknownDocument?gn.fromSegments(J.unknownDocument.path):pn()).path.toArray();var J;const Ee={prefixPath:K.slice(0,K.length-2),collectionGroup:K[K.length-2],documentId:K[K.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};h.push(P.put(Ee))}).next(()=>kt.waitFor(h))}zs(e,t){const o=t.store("mutations"),h=Tl(this.It),m=new Nd(wf.Bs,this.It.re);return o.W().next(E=>{const P=new Map;return E.forEach(K=>{var J;let Ee=null!==(J=P.get(K.userId))&&void 0!==J?J:jr();gu(this.It,K).keys().forEach(Xe=>Ee=Ee.add(Xe)),P.set(K.userId,Ee)}),kt.forEach(P,(K,J)=>{const Ee=new hr(J),Xe=xd.oe(this.It,Ee),St=m.getIndexManager(Ee),Bt=mc.oe(Ee,this.It,St,m.referenceDelegate);return new _f(h,Bt,Xe,St).recalculateAndSaveOverlaysForDocumentKeys(new gg(t,Ns.at),K).next()})})}}function Cg(i){i.createObjectStore("targetDocuments",{keyPath:ff}).createIndex("documentTargetsIndex",op,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hf,{unique:!0}),i.createObjectStore("targetGlobal")}const vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _p{constructor(e,t,o,h,m,E,P,K,J,Ee,Xe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=m,this.window=E,this.document=P,this.Js=J,this.Ys=Ee,this.Xs=Xe,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=St=>Promise.resolve(),!_p.C())throw new Jt(Lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pp(this,h),this.ii=t+"main",this.It=new zc(K),this.ri=new Zo(this.ii,this.Xs,new yp(this.It)),this.Cs=new yf(this.referenceDelegate,this.It),this.remoteDocumentCache=Tl(this.It),this.Ns=new cp,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Ee&&mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(Lt.FAILED_PRECONDITION,vp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ns(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,fe.Z)(function*(h){if(t.started)return e(h)});return function(h){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,fe.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(wo(e))return Xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Fd(e).get("owner").next(t=>kt.resolve(this.mi(t)))}gi(e){return bf(e).delete(this.clientId)}yi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const h=pa(o,"clientMetadata");return h.W().next(m=>{const E=e.Ii(m,18e5),P=m.filter(K=>-1===E.indexOf(K));return kt.forEach(P,K=>h.delete(K.clientId)).next(()=>P)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?kt.resolve(!0):Fd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Jt(Lt.FAILED_PRECONDITION,vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||bf(e).W().next(o=>void 0===this.Ii(o,5e3).find(h=>{if(this.clientId!==h.clientId){const E=!this.inForeground&&h.inForeground,P=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||E&&P)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new gg(t,Ns.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>bf(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return mc.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ig(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return xd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Xt("IndexedDbPersistence","Starting transaction:",e);const h="readonly"===t?"readonly":"readwrite",m=15===(E=this.Xs)?My:14===E?Sd:13===E?Td:12===E?Vu:11===E?Hc:void pn();var E;let P;return this.ri.runTransaction(e,h,m,K=>(P=new gg(K,this.Ss?this.Ss.next():Ns.at),"readwrite-primary"===t?this.fi(P).next(J=>!!J||this.di(P)).next(J=>{if(!J)throw mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Jt(Lt.FAILED_PRECONDITION,$a);return o(P)}).next(J=>this.wi(P).next(()=>J)):this.Vi(P).next(()=>o(P)))).then(K=>(P.raiseOnCommittedEvent(),K))}Vi(e){return Fd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Jt(Lt.FAILED_PRECONDITION,vp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fd(e).put("owner",t)}static C(){return Zo.C()}_i(e){const t=Fd(e);return t.get("owner").next(o=>this.mi(o)?(Xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):kt.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(mi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,it.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Xt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return mi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){mi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fd(i){return pa(i,"owner")}function bf(i){return pa(i,"clientMetadata")}function vc(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Hl{constructor(e,t,o,h){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=h}static Ci(e,t){let o=jr(),h=jr();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Hl(e,t.fromCache,o,h)}}class Cf{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,h){return this.ki(e,t).next(m=>m||this.Oi(e,t,h,o)).next(m=>m||this.Mi(e,t))}ki(e,t){if(nh(t))return kt.resolve(null);let o=Fs(t);return this.indexManager.getIndexType(e,o).next(h=>0===h?null:(null!==t.limit&&1===h&&(t=Ol(t,null,"F"),o=Fs(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(m=>{const E=jr(...m);return this.Ni.getDocuments(e,E).next(P=>this.indexManager.getMinOffset(e,o).next(K=>{const J=this.Fi(t,P);return this.$i(t,J,E,K.readTime)?this.ki(e,Ol(t,null,"F")):this.Bi(e,J,t,K)}))})))}Oi(e,t,o,h){return nh(t)||h.isEqual(pr.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(m=>{const E=this.Fi(t,m);return this.$i(t,E,o,h)?this.Mi(e,t):(Ei()<=st.in.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Au(t)),this.Bi(e,E,t,Du(h,-1)))})}Fi(e,t){let o=new Kn(Fc(e));return t.forEach((h,m)=>{nu(e,m)&&(o=o.add(m))}),o}$i(e,t,o,h){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Mi(e,t){return Ei()<=st.in.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",Au(t)),this.Ni.getDocumentsMatchingQuery(e,t,fs.min())}Bi(e,t,o,h){return this.Ni.getDocumentsMatchingQuery(e,o,h).next(m=>(t.forEach(E=>{m=m.insert(E.key,E)}),m))}}class Dg{constructor(e,t,o,h){this.persistence=e,this.Li=t,this.It=h,this.Ui=new Oi(fr),this.qi=new Ma(m=>Xo(m),Jo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _f(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function _m(i,e,t,o){return new Dg(i,e,t,o)}function Ld(i,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,fe.Z)(function*(i,e){const t=En(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let h;return t.mutationQueue.getAllMutationBatches(o).next(m=>(h=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(m=>{const E=[],P=[];let K=jr();for(const J of h){E.push(J.batchId);for(const Ee of J.mutations)K=K.add(Ee.key)}for(const J of m){P.push(J.batchId);for(const Ee of J.mutations)K=K.add(Ee.key)}return t.localDocuments.getDocuments(o,K).next(J=>({ji:J,removedBatchIds:E,addedBatchIds:P}))})})}),Gl.apply(this,arguments)}function Oy(i,e){const t=En(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const h=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(E,P,K,J){const Ee=K.batch,Xe=Ee.keys();let St=kt.resolve();return Xe.forEach(Bt=>{St=St.next(()=>J.getEntry(P,Bt)).next(en=>{const $n=K.docVersions.get(Bt);sr(null!==$n),en.version.compareTo($n)<0&&(Ee.applyToRemoteDocument(en,K),en.isValidDocument()&&(en.setReadTime(K.commitVersion),J.addEntry(en)))})}),St.next(()=>E.mutationQueue.removeMutationBatch(P,Ee))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(E){let P=jr();for(let K=0;K<E.mutationResults.length;++K)E.mutationResults[K].transformResults.length>0&&(P=P.add(E.batch.mutations[K].key));return P}(e))).next(()=>t.localDocuments.getDocuments(o,h))})}function Ih(i){const e=En(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ep(i,e){const t=En(i),o=e.snapshotVersion;let h=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=t.Gi.newChangeBuffer({trackRemovals:!0});h=t.Ui;const P=[];e.targetChanges.forEach((Ee,Xe)=>{const St=h.get(Xe);if(!St)return;P.push(t.Cs.removeMatchingKeys(m,Ee.removedDocuments,Xe).next(()=>t.Cs.addMatchingKeys(m,Ee.addedDocuments,Xe)));let Bt=St.withSequenceNumber(m.currentSequenceNumber);var en,$n,Qn;e.targetMismatches.has(Xe)?Bt=Bt.withResumeToken(T.EMPTY_BYTE_STRING,pr.min()).withLastLimboFreeSnapshotVersion(pr.min()):Ee.resumeToken.approximateByteSize()>0&&(Bt=Bt.withResumeToken(Ee.resumeToken,o)),h=h.insert(Xe,Bt),$n=Bt,Qn=Ee,(0===(en=St).resumeToken.approximateByteSize()||$n.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||Qn.addedDocuments.size+Qn.modifiedDocuments.size+Qn.removedDocuments.size>0)&&P.push(t.Cs.updateTargetData(m,Bt))});let K=ea(),J=jr();if(e.documentUpdates.forEach(Ee=>{e.resolvedLimboDocuments.has(Ee)&&P.push(t.persistence.referenceDelegate.updateLimboDocument(m,Ee))}),P.push(Ip(m,E,e.documentUpdates).next(Ee=>{K=Ee.Wi,J=Ee.zi})),!o.isEqual(pr.min())){const Ee=t.Cs.getLastRemoteSnapshotVersion(m).next(Xe=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,o));P.push(Ee)}return kt.waitFor(P).next(()=>E.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,K,J)).next(()=>K)}).then(m=>(t.Ui=h,m))}function Ip(i,e,t){let o=jr(),h=jr();return t.forEach(m=>o=o.add(m)),e.getEntries(i,o).next(m=>{let E=ea();return t.forEach((P,K)=>{const J=m.get(P);K.isFoundDocument()!==J.isFoundDocument()&&(h=h.add(P)),K.isNoDocument()&&K.version.isEqual(pr.min())?(e.removeEntry(P,K.readTime),E=E.insert(P,K)):!J.isValidDocument()||K.version.compareTo(J.version)>0||0===K.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(K),E=E.insert(P,K)):Xt("LocalStore","Ignoring outdated watch update for ",P,". Current version:",J.version," Watch version:",K.version)}),{Wi:E,zi:h}})}function Bd(i,e){const t=En(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Xc(i,e){const t=En(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let h;return t.Cs.getTargetData(o,e).next(m=>m?(h=m,kt.resolve(h)):t.Cs.allocateTargetId(o).next(E=>(h=new il(e,E,0,o.currentSequenceNumber),t.Cs.addTargetData(o,h).next(()=>h))))}).then(o=>{const h=t.Ui.get(o.targetId);return(null===h||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function Jc(i,e,t){return Df.apply(this,arguments)}function Df(){return Df=(0,fe.Z)(function*(i,e,t){const o=En(i),h=o.Ui.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,E=>o.persistence.referenceDelegate.removeTarget(E,h)))}catch(E){if(!wo(E))throw E;Xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}o.Ui=o.Ui.remove(e),o.qi.delete(h.target)}),Df.apply(this,arguments)}function Ka(i,e,t){const o=En(i);let h=pr.min(),m=jr();return o.persistence.runTransaction("Execute query","readonly",E=>function(P,K,J){const Ee=En(P),Xe=Ee.qi.get(J);return void 0!==Xe?kt.resolve(Ee.Ui.get(Xe)):Ee.Cs.getTargetData(K,J)}(o,E,Fs(e)).next(P=>{if(P)return h=P.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(E,P.targetId).next(K=>{m=K})}).next(()=>o.Li.getDocumentsMatchingQuery(E,e,t?h:pr.min(),t?m:jr())).next(P=>(Tf(o,Ga(e),P),{documents:P,Hi:m})))}function wh(i,e){const t=En(i),o=En(t.Cs),h=t.Ui.get(e);return h?Promise.resolve(h.target):t.persistence.runTransaction("Get target data","readonly",m=>o.se(m,e).next(E=>E?E.target:null))}function bh(i,e){const t=En(i),o=t.Ki.get(e)||pr.min();return t.persistence.runTransaction("Get new document changes","readonly",h=>t.Gi.getAllFromCollectionGroup(h,e,Du(o,-1),Number.MAX_SAFE_INTEGER)).then(h=>(Tf(t,e,h),h))}function Tf(i,e,t){let o=i.Ki.get(e)||pr.min();t.forEach((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.Ki.set(e,o)}function wp(){return wp=(0,fe.Z)(function*(i,e,t,o){const h=En(i);let m=jr(),E=ea();for(const J of t){const Ee=e.Ji(J.metadata.name);J.document&&(m=m.add(Ee));const Xe=e.Yi(J);Xe.setReadTime(e.Xi(J.metadata.readTime)),E=E.insert(Ee,Xe)}const P=h.Gi.newChangeBuffer({trackRemovals:!0}),K=yield Xc(h,(J=o,Fs(Pl(Jr.fromString(`__bundle__/docs/${J}`)))));var J;return h.persistence.runTransaction("Apply bundle documents","readwrite",J=>Ip(J,P,E).next(Ee=>(P.apply(J),Ee)).next(Ee=>h.Cs.removeMatchingKeysForTargetId(J,K.targetId).next(()=>h.Cs.addMatchingKeys(J,m,K.targetId)).next(()=>h.localDocuments.getLocalViewOfDocuments(J,Ee.Wi,Ee.zi)).next(()=>Ee.Wi)))}),wp.apply(this,arguments)}function bp(i,e){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,fe.Z)(function*(i,e,t=jr()){const o=yield Xc(i,Fs(ap(e.bundledQuery))),h=En(i);return h.persistence.runTransaction("Save named query","readwrite",m=>{const E=eo(e.readTime);if(o.snapshotVersion.compareTo(E)>=0)return h.Ns.saveNamedQuery(m,e);const P=o.withResumeToken(T.EMPTY_BYTE_STRING,E);return h.Ui=h.Ui.insert(P.targetId,P),h.Cs.updateTargetData(m,P).next(()=>h.Cs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>h.Cs.addMatchingKeys(m,t,o.targetId)).next(()=>h.Ns.saveNamedQuery(m,e))})}),Sf.apply(this,arguments)}function Cp(i,e){return`firestore_clients_${i}_${e}`}function Dp(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Ch(i,e){return`firestore_targets_${i}_${e}`}class Br{constructor(e,t,o,h){this.user=e,this.batchId=t,this.state=o,this.error=h}static Zi(e,t,o){const h=JSON.parse(o);let m,E="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return E&&h.error&&(E="string"==typeof h.error.message&&"string"==typeof h.error.code,E&&(m=new Jt(h.error.code,h.error.message))),E?new Br(e,t,h.state,m):(mi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $o{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let h,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(h=new Jt(o.error.code,o.error.message))),m?new $o(e,o.state,h):(mi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let h="object"==typeof o&&o.activeTargetIds instanceof Array,m=Il();for(let E=0;h&&E<o.activeTargetIds.length;++E)h=Qr(o.activeTargetIds[E]),m=m.add(o.activeTargetIds[E]);return h?new _c(e,m):(mi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zl{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zl(t.clientId,t.onlineState):(mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $d{constructor(){this.activeTargetIds=Il()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sl{constructor(e,t,o,h,m){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Oi(fr),this.started=!1,this.cr=[];const E=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Cp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new $d),this.lr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.vi();for(const h of t){if(h===e.sr)continue;const m=e.getItem(Cp(e.persistenceKey,h));if(m){const E=_c.Zi(h,m);E&&(e.ur=e.ur.insert(E.clientId,E))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const h=e.yr(o);h&&e.pr(h)}for(const h of e.cr)e.rr(h);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,h)=>{h.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Ch(this.persistenceKey,e));if(o){const h=$o.Zi(e,o);h&&(t=h.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ch(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(h=>{this.Er(h)}),this.currentUser=e,o.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Xt("SharedClientState","READ",e,t),t}setItem(e,t){Xt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Xt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Xt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const h=t.vr(o.key);return t.Vr(h,null)}{const h=t.Sr(o.key,o.newValue);if(h)return t.Vr(h.clientId,h)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const h=t.Dr(o.key,o.newValue);if(h)return t.Cr(h)}}else if(t._r.test(o.key)){if(null!==o.newValue){const h=t.Nr(o.key,o.newValue);if(h)return t.kr(h)}}else if(o.key===t.wr){if(null!==o.newValue){const h=t.yr(o.newValue);if(h)return t.pr(h)}}else if(o.key===t.hr){const h=function(m){let E=Ns.at;if(null!=m)try{const P=JSON.parse(m);sr("number"==typeof P),E=P}catch(P){mi("SharedClientState","Failed to read sequence number from WebStorage",P)}return E}(o.newValue);h!==Ns.at&&t.sequenceNumberHandler(h)}else if(o.key===t.mr){const h=t.Or(o.newValue);yield Promise.all(h.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const h=new Br(this.currentUser,e,t,o),m=Dp(this.persistenceKey,this.currentUser,e);this.setItem(m,h.tr())}Er(e){const t=Dp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const h=Ch(this.persistenceKey,e),m=new $o(e,t,o);this.setItem(h,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return _c.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),h=Number(o[1]);return Br.Zi(new hr(void 0!==o[2]?o[2]:null),h,t)}Nr(e,t){const o=this._r.exec(e),h=Number(o[1]);return $o.Zi(h,t)}yr(e){return zl.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Xt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),h=this.Ir(this.ur),m=this.Ir(o),E=[],P=[];return m.forEach(K=>{h.has(K)||E.push(K)}),h.forEach(K=>{m.has(K)||P.push(K)}),this.syncEngine.Br(E,P).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Il();return e.forEach((o,h)=>{t=t.unionWith(h.activeTargetIds)}),t}}class Gu{constructor(){this.Lr=new $d,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new $d,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Tg{qr(e){}shutdown(){}}class Af{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ed={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ky{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Ny extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,h,m){const E=this.ho(e,t);Xt("RestConnection","Sending: ",E,o);const P={};return this.lo(P,h,m),this.fo(e,E,P,o).then(K=>(Xt("RestConnection","Received: ",K),K),K=>{throw Fi("RestConnection",`${e} failed with error: `,K,"url: ",E,"request:",o),K})}_o(e,t,o,h,m,E){return this.ao(e,t,o,h,m)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((h,m)=>e[m]=h),o&&o.headers.forEach((h,m)=>e[m]=h)}ho(e,t){return`${this.oo}/v1/${t}:${ed[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,h){return new Promise((m,E)=>{const P=new qr;P.setWithCredentials(!0),P.listenOnce(se.COMPLETE,()=>{var J;try{switch(P.getLastErrorCode()){case F.NO_ERROR:const Ee=P.getResponseJson();Xt("Connection","XHR received:",JSON.stringify(Ee)),m(Ee);break;case F.TIMEOUT:Xt("Connection",'RPC "'+e+'" timed out'),E(new Jt(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case F.HTTP_ERROR:const Xe=P.getStatus();if(Xt("Connection",'RPC "'+e+'" failed with status:',Xe,"response text:",P.getResponseText()),Xe>0){let St=P.getResponseJson();Array.isArray(St)&&(St=St[0]);const Bt=null===(J=St)||void 0===J?void 0:J.error;if(Bt&&Bt.status&&Bt.message){const en=function($n){const Qn=$n.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(Qn)>=0?Qn:Lt.UNKNOWN}(Bt.status);E(new Jt(en,Bt.message))}else E(new Jt(Lt.UNKNOWN,"Server responded with status "+P.getStatus()))}else E(new Jt(Lt.UNAVAILABLE,"Connection failed."));break;default:pn()}}finally{Xt("Connection",'RPC "'+e+'" completed.')}});const K=JSON.stringify(h);P.send(t,"POST",K,o,15)})}wo(e,t,o){const h=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=O(),E=Q(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(P.xmlHttpFactory=new Ht({})),this.lo(P.initMessageHeaders,t,o),P.encodeInitMessageHeaders=!0;const K=h.join("");Xt("Connection","Creating WebChannel: "+K,P);const J=m.createWebChannel(K,P);let Ee=!1,Xe=!1;const St=new ky({Hr:en=>{Xe?Xt("Connection","Not sending because WebChannel is closed:",en):(Ee||(Xt("Connection","Opening WebChannel transport."),J.open(),Ee=!0),Xt("Connection","WebChannel sending:",en),J.send(en))},Jr:()=>J.close()}),Bt=(en,$n,Qn)=>{en.listen($n,zi=>{try{Qn(zi)}catch(Ss){setTimeout(()=>{throw Ss},0)}})};return Bt(J,On.EventType.OPEN,()=>{Xe||Xt("Connection","WebChannel transport opened.")}),Bt(J,On.EventType.CLOSE,()=>{Xe||(Xe=!0,Xt("Connection","WebChannel transport closed"),St.io())}),Bt(J,On.EventType.ERROR,en=>{Xe||(Xe=!0,Fi("Connection","WebChannel transport errored:",en),St.io(new Jt(Lt.UNAVAILABLE,"The operation could not be completed")))}),Bt(J,On.EventType.MESSAGE,en=>{var $n;if(!Xe){const Qn=en.data[0];sr(!!Qn);const zi=Qn,Ss=zi.error||(null===($n=zi[0])||void 0===$n?void 0:$n.error);if(Ss){Xt("Connection","WebChannel received error:",Ss);const $i=Ss.status;let ho=function(qi){const _a=ms[qi];if(void 0!==_a)return ou(_a)}($i),Gi=Ss.message;void 0===ho&&(ho=Lt.INTERNAL,Gi="Unknown error status: "+$i+" with message "+Ss.message),Xe=!0,St.io(new Jt(ho,Gi)),J.close()}else Xt("Connection","WebChannel received:",Qn),St.ro(Qn)}}),Bt(E,Me.STAT_EVENT,en=>{en.stat===Ft.PROXY?Xt("Connection","Detected buffering proxy"):en.stat===Ft.NOPROXY&&Xt("Connection","Detected no buffering proxy")}),setTimeout(()=>{St.so()},0),St}}function Tp(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}function Wl(i){return new fh(i,!0)}class Sp{constructor(e,t,o=1e3,h=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=h,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),h=Math.max(0,t-o);h>0&&Xt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,h,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xf{constructor(e,t,o,h,m,E,P,K){this.Hs=e,this.vo=o,this.Vo=h,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=P,this.listener=K,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Sp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,fe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,fe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,fe.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Lt.RESOURCE_EXHAUSTED?(mi(t.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===Lt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,h])=>{this.So===t&&this.Go(o,h)},o=>{e(()=>{const h=new Jt(Lt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(h)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(h=>{o(()=>this.Qo(h))}),this.stream.onMessage(h=>{o(()=>this.onMessage(h))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,fe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ap extends xf{constructor(e,t,o,h,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,h,E),this.It=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function cf(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(K=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===K?1:"REMOVE"===K?2:"CURRENT"===K?3:"RESET"===K?4:pn(),h=e.targetChange.targetIds||[],m=function(K,J){return K.gt?(sr(void 0===J||"string"==typeof J),T.fromBase64String(J||"")):(sr(void 0===J||J instanceof Uint8Array),T.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,P=E&&function(K){const J=void 0===K.code?Lt.UNKNOWN:ou(K.code);return new Jt(J,K.message||"")}(E);t=new cu(o,h,m,P||null)}else if("documentChange"in e){const o=e.documentChange,h=fa(i,o.document.name),m=eo(o.document.updateTime),E=new Ds({mapValue:{fields:o.document.fields}}),P=di.newFoundDocument(h,m,E);t=new uu(o.targetIds||[],o.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const o=e.documentDelete,h=fa(i,o.document),m=o.readTime?eo(o.readTime):pr.min(),E=di.newNoDocument(h,m);t=new uu([],o.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const o=e.documentRemove,h=fa(i,o.document);t=new uu([],o.removedTargetIds||[],h,null)}else{if(!("filter"in e))return pn();{const o=e.filter,m=new ch(o.count||0);t=new $c(o.targetId,m)}}var K;return t}(this.It,e),o=function(h){if(!("targetChange"in h))return pr.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?pr.min():m.readTime?eo(m.readTime):pr.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=cl(this.It),t.addTarget=function(h,m){let E;const P=m.target;return E=Su(P)?{documents:bd(h,P)}:{query:Bl(h,P)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=ph(h,m.resumeToken):m.snapshotVersion.compareTo(pr.min())>0&&(E.readTime=Lu(h,m.snapshotVersion.toTimestamp())),E}(this.It,e);const o=function D(i,e){const t=function(o,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=cl(this.It),t.removeTarget=e,this.Bo(t)}}class Dh extends xf{constructor(e,t,o,h,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,h,E),this.It=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(sr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function wd(i,e){return i&&i.length>0?(sr(void 0!==e),i.map(t=>function(o,h){let m=eo(o.updateTime?o.updateTime:h);return m.isEqual(pr.min())&&(m=eo(h)),new md(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=eo(e.commitTime);return this.listener.Zo(o,t)}return sr(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=cl(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>$u(this.It,o))};this.Bo(t)}}class xp extends class{}{constructor(e,t,o,h){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.It=h,this.nu=!1}su(){if(this.nu)throw new Jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.ao(e,t,o,h,m)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Jt(Lt.UNKNOWN,h.toString())})}_o(e,t,o,h){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,E])=>this.connection._o(e,t,o,m,E,h)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Jt(Lt.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class Sg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(mi(t),this.ou=!1):Xt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Mp{constructor(e,t,o,h,m){var E=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.qr(P=>{o.enqueueAndForget((0,fe.Z)(function*(){var K;zu(E)&&(Xt("RemoteStore","Restarting streams for network reachability change."),yield(K=(0,fe.Z)(function*(J){const Ee=En(J);Ee._u.add(4),yield Sl(Ee),Ee.gu.set("Unknown"),Ee._u.delete(4),yield Th(Ee)}),function(J){return K.apply(this,arguments)})(E))}))}),this.gu=new Sg(o,h)}}function Th(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,fe.Z)(function*(i){if(zu(i))for(const e of i.wu)yield e(!0)}),Pf.apply(this,arguments)}function Sl(i){return dl.apply(this,arguments)}function dl(){return dl=(0,fe.Z)(function*(i){for(const e of i.wu)yield e(!1)}),dl.apply(this,arguments)}function Vd(i,e){const t=En(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Op(t)?Of(t):nd(t).ko()&&Rp(t,e))}function Ec(i,e){const t=En(i),o=nd(t);t.du.delete(e),o.ko()&&Pp(t,e),0===t.du.size&&(o.ko()?o.Fo():zu(t)&&t.gu.set("Unknown"))}function Rp(i,e){i.yu.Mt(e.targetId),nd(i).zo(e)}function Pp(i,e){i.yu.Mt(e),nd(i).Ho(e)}function Of(i){i.yu=new ic({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),nd(i).start(),i.gu.uu()}function Op(i){return zu(i)&&!nd(i).No()&&i.du.size>0}function zu(i){return 0===En(i)._u.size}function Ag(i){i.yu=void 0}function Im(i){return kf.apply(this,arguments)}function kf(){return kf=(0,fe.Z)(function*(i){i.du.forEach((e,t)=>{Rp(i,e)})}),kf.apply(this,arguments)}function wm(i,e){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,fe.Z)(function*(i,e){Ag(i),Op(i)?(i.gu.hu(e),Of(i)):i.gu.set("Unknown")}),Nf.apply(this,arguments)}function xg(i,e,t){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,fe.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof cu&&2===e.state&&e.cause)try{yield(o=(0,fe.Z)(function*(h,m){const E=m.cause;for(const P of m.targetIds)h.du.has(P)&&(yield h.remoteSyncer.rejectListen(P,E),h.du.delete(P),h.yu.removeTarget(P))}),function(h,m){return o.apply(this,arguments)})(i,e)}catch(o){Xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield kp(i,o)}else if(e instanceof uu?i.yu.Gt(e):e instanceof $c?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(pr.min()))try{const o=yield Ih(i.localStore);t.compareTo(o)>=0&&(yield function(h,m){const E=h.yu.te(m);return E.targetChanges.forEach((P,K)=>{if(P.resumeToken.approximateByteSize()>0){const J=h.du.get(K);J&&h.du.set(K,J.withResumeToken(P.resumeToken,m))}}),E.targetMismatches.forEach(P=>{const K=h.du.get(P);if(!K)return;h.du.set(P,K.withResumeToken(T.EMPTY_BYTE_STRING,K.snapshotVersion)),Pp(h,P);const J=new il(K.target,P,1,K.sequenceNumber);Rp(h,J)}),h.remoteSyncer.applyRemoteEvent(E)}(i,t))}catch(o){Xt("RemoteStore","Failed to raise snapshot:",o),yield kp(i,o)}var o}),Sh.apply(this,arguments)}function kp(i,e,t){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,fe.Z)(function*(i,e,t){if(!wo(e))throw e;i._u.add(1),yield Sl(i),i.gu.set("Offline"),t||(t=()=>Ih(i.localStore)),i.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Xt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Th(i)}))}),Ah.apply(this,arguments)}function Mg(i,e){return e().catch(t=>kp(i,t,e))}function xh(i){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,fe.Z)(function*(i){const e=En(i),t=Yl(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Rg(e);)try{const h=yield Bd(e.localStore,o);if(null===h){0===e.fu.length&&t.Fo();break}o=h.batchId,Pg(e,h)}catch(h){yield kp(e,h)}Mh(e)&&ro(e)}),Ic.apply(this,arguments)}function Rg(i){return zu(i)&&i.fu.length<10}function Pg(i,e){i.fu.push(e);const t=Yl(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Mh(i){return zu(i)&&!Yl(i).No()&&i.fu.length>0}function ro(i){Yl(i).start()}function Og(i){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,fe.Z)(function*(i){Yl(i).eu()}),Rh.apply(this,arguments)}function Ff(i){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,fe.Z)(function*(i){const e=Yl(i);for(const t of i.fu)e.Xo(t.mutations)}),Kl.apply(this,arguments)}function Lf(i,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,fe.Z)(function*(i,e,t){const o=i.fu.shift(),h=Gc.from(o,e,t);yield Mg(i,()=>i.remoteSyncer.applySuccessfulWrite(h)),yield xh(i)}),Bf.apply(this,arguments)}function Np(i,e){return kg.apply(this,arguments)}function kg(){return kg=(0,fe.Z)(function*(i,e){var t;e&&Yl(i).Yo&&(yield(t=(0,fe.Z)(function*(o,h){if(Lc(m=h.code)&&m!==Lt.ABORTED){const E=o.fu.shift();Yl(o).Mo(),yield Mg(o,()=>o.remoteSyncer.rejectFailedWrite(E.batchId,h)),yield xh(o)}var m}),function(o,h){return t.apply(this,arguments)})(i,e)),Mh(i)&&ro(i)}),kg.apply(this,arguments)}function Fp(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,fe.Z)(function*(i,e){const t=En(i);t.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const o=zu(t);t._u.add(3),yield Sl(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Th(t)}),Lp.apply(this,arguments)}function Ud(i,e){return jd.apply(this,arguments)}function jd(){return jd=(0,fe.Z)(function*(i,e){const t=En(i);e?(t._u.delete(2),yield Th(t)):e||(t._u.add(2),yield Sl(t),t.gu.set("Unknown"))}),jd.apply(this,arguments)}function nd(i){return i.pu||(i.pu=function(e,t,o){const h=En(e);return h.su(),new Ap(t,h.connection,h.authCredentials,h.appCheckCredentials,h.It,o)}(i.datastore,i.asyncQueue,{Yr:Im.bind(null,i),Zr:wm.bind(null,i),Wo:xg.bind(null,i)}),i.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(i.pu.Mo(),Op(i)?Of(i):i.gu.set("Unknown")):(yield i.pu.stop(),Ag(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Yl(i){return i.Iu||(i.Iu=function(e,t,o){const h=En(e);return h.su(),new Dh(t,h.connection,h.authCredentials,h.appCheckCredentials,h.It,o)}(i.datastore,i.asyncQueue,{Yr:Og.bind(null,i),Zr:Np.bind(null,i),tu:Ff.bind(null,i),Zo:Lf.bind(null,i)}),i.wu.push(function(){var e=(0,fe.Z)(function*(t){t?(i.Iu.Mo(),yield xh(i)):(yield i.Iu.stop(),i.fu.length>0&&(Xt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Ph{constructor(e,t,o,h,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,t,o,h,m){const E=Date.now()+o,P=new Ph(e,t,E,h,m);return P.start(o),P}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oh(i,e){if(mi("AsyncQueue",`${e}: ${i}`),wo(i))return new Jt(Lt.UNAVAILABLE,`${e}: ${i}`);throw i}class Hd{constructor(e){this.comparator=e?(t,o)=>e(t,o)||gn.comparator(t.key,o.key):(t,o)=>gn.comparator(t.key,o.key),this.keyedMap=Hi(),this.sortedSet=new Oi(this.comparator)}static emptySet(e){return new Hd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const h=t.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Hd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Ng{constructor(){this.Tu=new Oi(gn.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):pn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Gd{constructor(e,t,o,h,m,E,P,K,J){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=P,this.excludesMetadataChanges=K,this.hasCachedResults=J}static fromInitialDocuments(e,t,o,h,m){const E=[];return t.forEach(P=>{E.push({type:0,doc:P})}),new Gd(e,t,Hd.emptySet(t),E,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ha(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let h=0;h<t.length;h++)if(t[h].type!==o[h].type||!t[h].doc.isEqual(o[h].doc))return!1;return!0}}class bm{constructor(){this.Au=void 0,this.listeners=[]}}class Fg{constructor(){this.queries=new Ma(e=>sh(e),Ha),this.onlineState="Unknown",this.Ru=new Set}}function Lg(i,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,fe.Z)(function*(i,e){const t=En(i),o=e.query;let h=!1,m=t.queries.get(o);if(m||(h=!0,m=new bm),h)try{m.Au=yield t.onListen(o)}catch(E){const P=Oh(E,`Initialization of query '${Au(e.query)}' failed`);return void e.onError(P)}t.queries.set(o,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&kh(t)}),Bp.apply(this,arguments)}function Cm(i,e){return $p.apply(this,arguments)}function $p(){return $p=(0,fe.Z)(function*(i,e){const t=En(i),o=e.query;let h=!1;const m=t.queries.get(o);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),h=0===m.listeners.length)}if(h)return t.queries.delete(o),t.onUnlisten(o)}),$p.apply(this,arguments)}function Bg(i,e){const t=En(i);let o=!1;for(const h of e){const E=t.queries.get(h.query);if(E){for(const P of E.listeners)P.Pu(h)&&(o=!0);E.Au=h}}o&&kh(t)}function Dm(i,e,t){const o=En(i),h=o.queries.get(e);if(h)for(const m of h.listeners)m.onError(t);o.queries.delete(e)}function kh(i){i.Ru.forEach(e=>{e.next()})}class Vp{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)3!==h.type&&o.push(h);e=new Gd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Gd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Fy{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Tm{constructor(e){this.It=e}Ji(e){return fa(this.It,e)}Yi(e){return e.metadata.exists?Bu(this.It,e.document,!1):di.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return eo(e)}}class Ly{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sm(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const o=Jr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new Tm(this.It);for(const h of e)if(h.metadata.queries){const m=o.Ji(h.metadata.name);for(const E of h.metadata.queries){const P=(t.get(E)||jr()).add(m);t.set(E,P)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function Em(i,e,t,o){return wp.apply(this,arguments)}(e.localStore,new Tm(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const h of e.queries)yield bp(e.localStore,h,o.get(h.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Sm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class wc{constructor(e){this.key=e}}class ya{constructor(e){this.key=e}}class hl{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jr(),this.mutatedKeys=jr(),this.Gu=Fc(e),this.Qu=new Hd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Ng,h=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,E=h,P=!1;const K="F"===this.query.limitType&&h.size===this.query.limit?h.last():null,J="L"===this.query.limitType&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((Ee,Xe)=>{const St=h.get(Ee),Bt=nu(this.query,Xe)?Xe:null,en=!!St&&this.mutatedKeys.has(St.key),$n=!!Bt&&(Bt.hasLocalMutations||this.mutatedKeys.has(Bt.key)&&Bt.hasCommittedMutations);let Qn=!1;St&&Bt?St.data.isEqual(Bt.data)?en!==$n&&(o.track({type:3,doc:Bt}),Qn=!0):this.Hu(St,Bt)||(o.track({type:2,doc:Bt}),Qn=!0,(K&&this.Gu(Bt,K)>0||J&&this.Gu(Bt,J)<0)&&(P=!0)):!St&&Bt?(o.track({type:0,doc:Bt}),Qn=!0):St&&!Bt&&(o.track({type:1,doc:St}),Qn=!0,(K||J)&&(P=!0)),Qn&&(Bt?(E=E.add(Bt),m=$n?m.add(Ee):m.delete(Ee)):(E=E.delete(Ee),m=m.delete(Ee)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Ee="F"===this.query.limitType?E.last():E.first();E=E.delete(Ee.key),m=m.delete(Ee.key),o.track({type:1,doc:Ee})}return{Qu:E,zu:o,$i:P,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const h=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((J,Ee)=>function(Xe,St){const Bt=en=>{switch(en){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pn()}};return Bt(Xe)-Bt(St)}(J.type,Ee.type)||this.Gu(J.doc,Ee.doc)),this.Ju(o);const E=t?this.Yu():[],P=0===this.Ku.size&&this.current?1:0,K=P!==this.qu;return this.qu=P,0!==m.length||K?{snapshot:new Gd(this.query,e.Qu,h,m,e.mutatedKeys,0===P,K,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:E}:{Xu:E}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ng,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new ya(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new wc(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=jr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Gd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class $f{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class By{constructor(e){this.key=e,this.nc=!1}}class bc{constructor(e,t,o,h,m,E){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.sc={},this.ic=new Ma(P=>sh(P),Ha),this.rc=new Map,this.oc=new Set,this.uc=new Oi(gn.comparator),this.cc=new Map,this.ac=new mp,this.hc={},this.lc=new Map,this.fc=Vl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Up(i,e){return jp.apply(this,arguments)}function jp(){return jp=(0,fe.Z)(function*(i,e){const t=x(i);let o,h;const m=t.ic.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),h=m.view.ec();else{const E=yield Xc(t.localStore,Fs(e));t.isPrimaryClient&&Vd(t.remoteStore,E);const P=t.sharedClientState.addLocalQueryTarget(E.targetId);o=E.targetId,h=yield Vf(t,e,o,"current"===P,E.resumeToken)}return h}),jp.apply(this,arguments)}function Vf(i,e,t,o,h){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,fe.Z)(function*(i,e,t,o,h){i._c=(Xe,St,Bt)=>{return(en=(0,fe.Z)(function*($n,Qn,zi,Ss){let $i=Qn.view.Wu(zi);$i.$i&&($i=yield Ka($n.localStore,Qn.query,!1).then(({documents:qi})=>Qn.view.Wu(qi,$i)));const ho=Ss&&Ss.targetChanges.get(Qn.targetId),Gi=Qn.view.applyChanges($i,$n.isPrimaryClient,ho);return Vh($n,Qn.targetId,Gi.Xu),Gi.snapshot}),function($n,Qn,zi,Ss){return en.apply(this,arguments)})(i,Xe,St,Bt);var en};const m=yield Ka(i.localStore,e,!0),E=new hl(e,m.Hi),P=E.Wu(m.documents),K=Fu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,h),J=E.applyChanges(P,i.isPrimaryClient,K);Vh(i,t,J.Xu);const Ee=new $f(e,t,E);return i.ic.set(e,Ee),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),J.snapshot}),Nh.apply(this,arguments)}function Hp(i,e){return zd.apply(this,arguments)}function zd(){return zd=(0,fe.Z)(function*(i,e){const t=En(i),o=t.ic.get(e),h=t.rc.get(o.targetId);if(h.length>1)return t.rc.set(o.targetId,h.filter(m=>!Ha(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Jc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Ec(t.remoteStore,o.targetId),Cc(t,o.targetId)}).catch(qo))):(Cc(t,o.targetId),yield Jc(t.localStore,o.targetId,!0))}),zd.apply(this,arguments)}function ql(){return ql=(0,fe.Z)(function*(i,e,t){const o=L(i);try{const h=yield function(m,E){const P=En(m),K=ji.now(),J=E.reduce((St,Bt)=>St.add(Bt.key),jr());let Ee,Xe;return P.persistence.runTransaction("Locally write mutations","readwrite",St=>{let Bt=ea(),en=jr();return P.Gi.getEntries(St,J).next($n=>{Bt=$n,Bt.forEach((Qn,zi)=>{zi.isValidDocument()||(en=en.add(Qn))})}).next(()=>P.localDocuments.getOverlayedDocuments(St,Bt)).next($n=>{Ee=$n;const Qn=[];for(const zi of E){const Ss=uh(zi,Ee.get(zi.key).overlayedDocument);null!=Ss&&Qn.push(new Bo(zi.key,Ss,xa(Ss.value.mapValue),gs.exists(!0)))}return P.mutationQueue.addMutationBatch(St,K,Qn,E)}).next($n=>{Xe=$n;const Qn=$n.applyToLocalDocumentSet(Ee,en);return P.documentOverlayCache.saveOverlays(St,$n.batchId,Qn)})}).then(()=>({batchId:Xe.batchId,changes:ta(Ee)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),function(m,E,P){let K=m.hc[m.currentUser.toKey()];K||(K=new Oi(fr)),K=K.insert(E,P),m.hc[m.currentUser.toKey()]=K}(o,h.batchId,t),yield Wu(o,h.changes),yield xh(o.remoteStore)}catch(h){const m=Oh(h,"Failed to persist write");t.reject(m)}}),ql.apply(this,arguments)}function rd(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,fe.Z)(function*(i,e){const t=En(i);try{const o=yield Ep(t.localStore,e);e.targetChanges.forEach((h,m)=>{const E=t.cc.get(m);E&&(sr(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?E.nc=!0:h.modifiedDocuments.size>0?sr(E.nc):h.removedDocuments.size>0&&(sr(E.nc),E.nc=!1))}),yield Wu(t,o,e)}catch(o){yield qo(o)}}),Gp.apply(this,arguments)}function zp(i,e,t){const o=En(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const h=[];o.ic.forEach((m,E)=>{const P=E.view.bu(e);P.snapshot&&h.push(P.snapshot)}),function(m,E){const P=En(m);P.onlineState=E;let K=!1;P.queries.forEach((J,Ee)=>{for(const Xe of Ee.listeners)Xe.bu(E)&&(K=!0)}),K&&kh(P)}(o.eventManager,e),h.length&&o.sc.Wo(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Vg(i,e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,fe.Z)(function*(i,e,t){const o=En(i);o.sharedClientState.updateQueryState(e,"rejected",t);const h=o.cc.get(e),m=h&&h.key;if(m){let E=new Oi(gn.comparator);E=E.insert(m,di.newNoDocument(m,pr.min()));const P=jr().add(m),K=new nl(pr.min(),new Map,new Kn(fr),E,P);yield rd(o,K),o.uc=o.uc.remove(m),o.cc.delete(e),Uh(o)}else yield Jc(o.localStore,e,!1).then(()=>Cc(o,e,t)).catch(qo)}),Wp.apply(this,arguments)}function Ug(i,e){return id.apply(this,arguments)}function id(){return id=(0,fe.Z)(function*(i,e){const t=En(i),o=e.batch.batchId;try{const h=yield Oy(t.localStore,e);Uf(t,o,null),od(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Wu(t,h)}catch(h){yield qo(h)}}),id.apply(this,arguments)}function sd(i,e,t){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,fe.Z)(function*(i,e,t){const o=En(i);try{const h=yield function(m,E){const P=En(m);return P.persistence.runTransaction("Reject batch","readwrite-primary",K=>{let J;return P.mutationQueue.lookupMutationBatch(K,E).next(Ee=>(sr(null!==Ee),J=Ee.keys(),P.mutationQueue.removeMutationBatch(K,Ee))).next(()=>P.mutationQueue.performConsistencyCheck(K)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(K,J,E)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(K,J)).next(()=>P.localDocuments.getDocuments(K,J))})}(o.localStore,e);Uf(o,e,t),od(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Wu(o,h)}catch(h){yield qo(h)}}),Fh.apply(this,arguments)}function Bh(){return Bh=(0,fe.Z)(function*(i,e){const t=En(i);zu(t.remoteStore)||Xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const E=En(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>E.mutationQueue.getHighestUnacknowledgedBatchId(P))}(t.localStore);if(-1===o)return void e.resolve();const h=t.lc.get(o)||[];h.push(e),t.lc.set(o,h)}catch(o){const h=Oh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}}),Bh.apply(this,arguments)}function od(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Uf(i,e,t){const o=En(i);let h=o.hc[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(t?m.reject(t):m.resolve(),h=h.remove(e)),o.hc[o.currentUser.toKey()]=h}}function Cc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||$h(i,o)})}function $h(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Ec(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Uh(i))}function Vh(i,e,t){for(const o of t)o instanceof wc?(i.ac.addReference(o.key,e),jg(i,o)):o instanceof ya?(Xt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||$h(i,o.key)):pn()}function jg(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(Xt("SyncEngine","New document in limbo: "+t),i.oc.add(o),Uh(i))}function Uh(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new gn(Jr.fromString(e)),o=i.fc.next();i.cc.set(o,new By(t)),i.uc=i.uc.insert(t,o),Vd(i.remoteStore,new il(Fs(Pl(t.path)),o,2,Ns.at))}}function Wu(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,fe.Z)(function*(i,e,t){const o=En(i),h=[],m=[],E=[];var P;o.ic.isEmpty()||(o.ic.forEach((P,K)=>{E.push(o._c(K,e,t).then(J=>{if((J||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(K.targetId,null!=J&&J.fromCache?"not-current":"current"),J){h.push(J);const Ee=Hl.Ci(K.targetId,J);m.push(Ee)}}))}),yield Promise.all(E),o.sc.Wo(h),yield(P=(0,fe.Z)(function*(K,J){const Ee=En(K);try{yield Ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",Xe=>kt.forEach(J,St=>kt.forEach(St.Si,Bt=>Ee.persistence.referenceDelegate.addReference(Xe,St.targetId,Bt)).next(()=>kt.forEach(St.Di,Bt=>Ee.persistence.referenceDelegate.removeReference(Xe,St.targetId,Bt)))))}catch(Xe){if(!wo(Xe))throw Xe;Xt("LocalStore","Failed to update sequence numbers: "+Xe)}for(const Xe of J){const St=Xe.targetId;if(!Xe.fromCache){const Bt=Ee.Ui.get(St),$n=Bt.withLastLimboFreeSnapshotVersion(Bt.snapshotVersion);Ee.Ui=Ee.Ui.insert(St,$n)}}}),function(K,J){return P.apply(this,arguments)})(o.localStore,m))}),Kp.apply(this,arguments)}function Hg(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,fe.Z)(function*(i,e){const t=En(i);if(!t.currentUser.isEqual(e)){Xt("SyncEngine","User change. New user:",e.toKey());const o=yield Ld(t.localStore,e);t.currentUser=e,(h=t).lc.forEach(E=>{E.forEach(P=>{P.reject(new Jt(Lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Wu(t,o.ji)}var h}),Yp.apply(this,arguments)}function qp(i,e){const t=En(i),o=t.cc.get(e);if(o&&o.nc)return jr().add(o.key);{let h=jr();const m=t.rc.get(e);if(!m)return h;for(const E of m){const P=t.ic.get(E);h=h.unionWith(P.view.ju)}return h}}function Gg(i,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,fe.Z)(function*(i,e){const t=En(i),o=yield Ka(t.localStore,e.query,!0),h=e.view.tc(o);return t.isPrimaryClient&&Vh(t,e.targetId,h.Xu),h}),Zp.apply(this,arguments)}function Am(i,e){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,fe.Z)(function*(i,e){const t=En(i);return bh(t.localStore,e).then(o=>Wu(t,o))}),Ya.apply(this,arguments)}function zg(i,e,t,o){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,fe.Z)(function*(i,e,t,o){const h=En(i),m=yield function(E,P){const K=En(E),J=En(K.mutationQueue);return K.persistence.runTransaction("Lookup mutation documents","readonly",Ee=>J.Tn(Ee,P).next(Xe=>Xe?K.localDocuments.getDocuments(Ee,Xe):kt.resolve(null)))}(h.localStore,e);var P;null!==m?("pending"===t?yield xh(h.remoteStore):"acknowledged"===t||"rejected"===t?(Uf(h,e,o||null),od(h,e),P=e,En(En(h.localStore).mutationQueue).An(P)):pn(),yield Wu(h,m)):Xt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Qp.apply(this,arguments)}function Wd(){return Wd=(0,fe.Z)(function*(i,e){const t=En(i);if(x(t),L(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),h=yield jf(t,o.toArray());t.dc=!0,yield Ud(t.remoteStore,!0);for(const m of h)Vd(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const o=[];let h=Promise.resolve();t.rc.forEach((m,E)=>{t.sharedClientState.isLocalQueryTarget(E)?o.push(E):h=h.then(()=>(Cc(t,E),Jc(t.localStore,E,!0))),Ec(t.remoteStore,E)}),yield h,yield jf(t,o),function(m){const E=En(m);E.cc.forEach((P,K)=>{Ec(E.remoteStore,K)}),E.ac.fs(),E.cc=new Map,E.uc=new Oi(gn.comparator)}(t),t.dc=!1,yield Ud(t.remoteStore,!1)}}),Wd.apply(this,arguments)}function jf(i,e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,fe.Z)(function*(i,e,t){const o=En(i),h=[],m=[];for(const E of e){let P;const K=o.rc.get(E);if(K&&0!==K.length){P=yield Xc(o.localStore,Fs(K[0]));for(const J of K){const Ee=o.ic.get(J),Xe=yield Gg(o,Ee);Xe.snapshot&&m.push(Xe.snapshot)}}else{const J=yield wh(o.localStore,E);P=yield Xc(o.localStore,J),yield Vf(o,Wg(J),E,!1,P.resumeToken)}h.push(P)}return o.sc.Wo(m),h}),Xp.apply(this,arguments)}function Wg(i){return th(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function u(i){const e=En(i);return En(En(e.localStore).persistence).vi()}function a(i,e,t,o){return l.apply(this,arguments)}function l(){return l=(0,fe.Z)(function*(i,e,t,o){const h=En(i);if(h.dc)return void Xt("SyncEngine","Ignoring unexpected query state notification.");const m=h.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const E=yield bh(h.localStore,Ga(m[0])),P=nl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,T.EMPTY_BYTE_STRING);yield Wu(h,E,P);break}case"rejected":yield Jc(h.localStore,e,!0),Cc(h,e,o);break;default:pn()}}),l.apply(this,arguments)}function p(i,e,t){return _.apply(this,arguments)}function _(){return _=(0,fe.Z)(function*(i,e,t){const o=x(i);if(o.dc){for(const h of e){if(o.rc.has(h)){Xt("SyncEngine","Adding an already active target "+h);continue}const m=yield wh(o.localStore,h),E=yield Xc(o.localStore,m);yield Vf(o,Wg(m),E.targetId,!1,E.resumeToken),Vd(o.remoteStore,E)}for(const h of t)o.rc.has(h)&&(yield Jc(o.localStore,h,!1).then(()=>{Ec(o.remoteStore,h),Cc(o,h)}).catch(qo))}}),_.apply(this,arguments)}function x(i){const e=En(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=rd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vg.bind(null,e),e.sc.Wo=Bg.bind(null,e.eventManager),e.sc.wc=Dm.bind(null,e.eventManager),e}function L(i){const e=En(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ug.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sd.bind(null,e),e}class he{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.It=Wl(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return _m(this.persistence,new Cf,e.initialUser,this.It)}yc(e){return new Nd(wf.Bs,this.It)}gc(e){return new Gu}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Te extends he{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,fe.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield L(o.Ac.syncEngine),yield xh(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return _m(this.persistence,new Cf,e.initialUser,this.It)}Tc(e,t){return new gm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Tu(t,this.persistence);return new Qo(e.asyncQueue,o)}yc(e){const t=vc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ga.withCacheSize(this.cacheSizeBytes):ga.DEFAULT;return new _p(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Tp(),td(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Gu}}class vt extends Te{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,fe.Z)(function*(){yield t().call(o,e);const h=o.Ac.syncEngine;o.sharedClientState instanceof sl&&(o.sharedClientState.syncEngine={Fr:zg.bind(null,h),$r:a.bind(null,h),Br:p.bind(null,h),vi:u.bind(null,h),Mr:Am.bind(null,h)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var m=(0,fe.Z)(function*(E){yield function $y(i,e){return Wd.apply(this,arguments)}(o.Ac.syncEngine,E),o.gcScheduler&&(E&&!o.gcScheduler.started?o.gcScheduler.start():E||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(E&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():E||o.indexBackfillerScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}gc(e){const t=Tp();if(!sl.C(t))throw new Jt(Lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=vc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sl(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class At{initialize(e,t){var o=this;return(0,fe.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=h=>zp(o.syncEngine,h,1),o.remoteStore.remoteSyncer.handleCredentialChange=Hg.bind(null,o.syncEngine),yield Ud(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fg}createDatastore(e){const t=Wl(e.databaseInfo.databaseId),o=new Ny(e.databaseInfo);return new xp(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,h=e.asyncQueue,m=P=>zp(this.syncEngine,P,0),E=Af.C()?new Af:new Tg,new Mp(t,o,h,m,E);var t,o,h,m,E}createSyncEngine(e,t){return function(o,h,m,E,P,K,J){const Ee=new bc(o,h,m,E,P,K);return J&&(Ee.dc=!0),Ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const o=En(t);Xt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Sl(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $t(i,e,t){if(!t)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function un(i,e,t,o){if(!0===e&&!0===o)throw new Jt(Lt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Fn(i){if(!gn.isDocumentKey(i))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $r(i){if(gn.isDocumentKey(i))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ri(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":pn()}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Jt(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ri(i);throw new Jt(Lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function To(i,e){if(e<=0)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Ts=new Map;class So{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,un("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vu{constructor(e,t,o,h){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new So({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new So(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wu;switch(t.type){case"gapi":return new Ko(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Jt(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ts.get(e);t&&(Xt("ComponentProvider","Removing Datastore"),Ts.delete(e),t.terminate())}(this),Promise.resolve()}}class as{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new as(this.firestore,e,this._key)}}class js{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class Zl extends js{constructor(e,t,o){super(e,t,Pl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new as(this.firestore,null,new gn(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function Kg(i,e,...t){if(i=(0,it.m9)(i),$t("collection","path",e),i instanceof vu){const o=Jr.fromString(e,...t);return $r(o),new Zl(i,null,o)}{if(!(i instanceof as||i instanceof Zl))throw new Jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jr.fromString(e,...t));return $r(o),new Zl(i.firestore,null,o)}}function Jp(i,e,...t){if(i=(0,it.m9)(i),1===arguments.length&&(e=ml.R()),$t("doc","path",e),i instanceof vu){const o=Jr.fromString(e,...t);return Fn(o),new as(i,null,new gn(o))}{if(!(i instanceof as||i instanceof Zl))throw new Jt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Jr.fromString(e,...t));return Fn(o),new as(i.firestore,i instanceof Zl?i.converter:null,new gn(o))}}function xm(i,e){return i=(0,it.m9)(i),e=(0,it.m9)(e),(i instanceof as||i instanceof Zl)&&(e instanceof as||e instanceof Zl)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Yg(i,e){return i=(0,it.m9)(i),e=(0,it.m9)(e),i instanceof js&&e instanceof js&&i.firestore===e.firestore&&Ha(i._query,e._query)&&i.converter===e.converter}function Mm(i,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Hf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ad{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new xs,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.ku)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),h=Number(o);isNaN(h)&&e.Dc(`length string (${o}) is not valid number`);const m=yield e.Cc(h);return new Fy(JSON.parse(m),t.length+h)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,fe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class $v{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Jt(Lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(h=(0,fe.Z)(function*(m,E){const P=En(m),K=cl(P.It)+"/documents",J={documents:E.map(Bt=>Fl(P.It,Bt))},Ee=yield P._o("BatchGetDocuments",K,J,E.length),Xe=new Map;Ee.forEach(Bt=>{const en=function uf(i,e){return"found"in e?function(t,o){sr(!!o.found);const h=fa(t,o.found.name),m=eo(o.found.updateTime),E=new Ds({mapValue:{fields:o.found.fields}});return di.newFoundDocument(h,m,E)}(i,e):"missing"in e?function(t,o){sr(!!o.missing),sr(!!o.readTime);const h=fa(t,o.missing),m=eo(o.readTime);return di.newNoDocument(h,m)}(i,e):pn()}(P.It,Bt);Xe.set(en.key.toString(),en)});const St=[];return E.forEach(Bt=>{const en=Xe.get(Bt.toString());sr(!!en),St.push(en)}),St}),function(m,E){return h.apply(this,arguments)})(t.datastore,e);var h;return o.forEach(h=>t.recordVersion(h)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,h)=>{const m=gn.fromPath(h);e.mutations.push(new Nu(m,e.precondition(m)))}),yield(o=(0,fe.Z)(function*(h,m){const E=En(h),P=cl(E.It)+"/documents",K={writes:m.map(J=>$u(E.It,J))};yield E.ao("Commit",P,K)}),function(h,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pn();t=pr.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Jt(Lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pr.min())?gs.exists(!1):gs.updateTime(t):gs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pr.min()))throw new Jt(Lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(t)}return gs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Pm{constructor(e,t,o,h,m){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=h,this.deferred=m,this.kc=o.maxAttempts,this.xo=new Sp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,fe.Z)(function*(){const t=new $v(e.datastore),o=e.Mc(t);o&&o.then(h=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(h)}).catch(m=>{e.Fc(m)}))}).catch(h=>{e.Fc(h)})}))}Mc(e){try{const t=this.updateFunction(e);return!Tn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lc(t)}return!1}}class Vy{constructor(e,t,o,h){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=h,this.user=hr.UNAUTHENTICATED,this.clientId=ml.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var E=(0,fe.Z)(function*(P){Xt("FirestoreClient","Received user=",P.uid),yield m.authCredentialListener(P),m.user=P});return function(P){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(o,E=>(Xt("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const h=Oh(o,"Failed to shutdown persistence");t.reject(h)}})),t.promise}}function Uy(i,e){return Om.apply(this,arguments)}function Om(){return Om=(0,fe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var h=(0,fe.Z)(function*(m){o.isEqual(m)||(yield Ld(e.localStore,m),o=m)});return function(m){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Om.apply(this,arguments)}function Gf(i,e){return km.apply(this,arguments)}function km(){return km=(0,fe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield jy(i);Xt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(h=>Fp(e.remoteStore,h)),i.setAppCheckTokenChangeListener((h,m)=>Fp(e.remoteStore,m)),i.onlineComponents=e}),km.apply(this,arguments)}function jy(i){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,fe.Z)(function*(i){return i.offlineComponents||(Xt("FirestoreClient","Using default OfflineComponentProvider"),yield Uy(i,new he)),i.offlineComponents}),Nm.apply(this,arguments)}function Fm(i){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,fe.Z)(function*(i){return i.onlineComponents||(Xt("FirestoreClient","Using default OnlineComponentProvider"),yield Gf(i,new At)),i.onlineComponents}),Lm.apply(this,arguments)}function Hy(i){return jy(i).then(e=>e.persistence)}function Zg(i){return jy(i).then(e=>e.localStore)}function Bm(i){return Fm(i).then(e=>e.remoteStore)}function $m(i){return Fm(i).then(e=>e.syncEngine)}function zf(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,fe.Z)(function*(i){const e=yield Fm(i),t=e.eventManager;return t.onListen=Up.bind(null,e.syncEngine),t.onUnlisten=Hp.bind(null,e.syncEngine),t}),Qg.apply(this,arguments)}function zy(i,e,t={}){const o=new xs;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(h,m,E,P,K){const J=new Hf({next:Xe=>{m.enqueueAndForget(()=>Cm(h,Ee));const St=Xe.docs.has(E);!St&&Xe.fromCache?K.reject(new Jt(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):St&&Xe.fromCache&&P&&"server"===P.source?K.reject(new Jt(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):K.resolve(Xe)},error:Xe=>K.reject(Xe)}),Ee=new Vp(Pl(E.path),J,{includeMetadataChanges:!0,Nu:!0});return Lg(h,Ee)}(yield zf(i),i.asyncQueue,e,t,o)})),o.promise}function Wy(i,e,t={}){const o=new xs;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(h,m,E,P,K){const J=new Hf({next:Xe=>{m.enqueueAndForget(()=>Cm(h,Ee)),Xe.fromCache&&"server"===P.source?K.reject(new Jt(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):K.resolve(Xe)},error:Xe=>K.reject(Xe)}),Ee=new Vp(E,J,{includeMetadataChanges:!0,Nu:!0});return Lg(h,Ee)}(yield zf(i),i.asyncQueue,e,t,o)})),o.promise}class zv{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Sp(this,"async_queue_retry"),this.Wc=()=>{const t=td();t&&Xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=td();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=td();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new xs;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!wo(t))throw t;Xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,mi("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const h=Ph.createAndSchedule(this,e,t,o,m=>this.Yc(m));return this.qc.push(h),h}zc(){this.Kc&&pn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Xg(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const h of["next","error","complete"])if(h in o&&"function"==typeof o[h])return!0;return!1}(i)}class Ky{constructor(){this._progressObserver={},this._taskCompletionResolver=new xs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class io extends vu{constructor(e,t,o,h){super(e,t,o,h),this.type="firestore",this._queue=new zv,this._persistenceKey=(null==h?void 0:h.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yv(this),this._firestoreClient.terminate()}}function Ps(i){return i._firestoreClient||Yv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Yv(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ot(i._databaseId,m,i._persistenceKey,(P=t).host,P.ssl,P.experimentalForceLongPolling,P.experimentalAutoDetectLongPolling,P.useFetchStreams));var m,P;i._firestoreClient=new Vy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Yy(i,e,t){const o=new xs;return i.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield Uy(i,t),yield Gf(i,e),o.resolve()}catch(h){const m=h;if(!("FirebaseError"===(E=m).name?E.code===Lt.FAILED_PRECONDITION||E.code===Lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&E instanceof DOMException)||22===E.code||20===E.code||11===E.code))throw m;Fi("Error enabling offline persistence. Falling back to persistence disabled: "+m),o.reject(m)}var E})).then(()=>o.promise)}function Ql(i){if(i._initialized||i._terminated)throw new Jt(Lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eu(T.fromBase64String(e))}catch(t){throw new Jt(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eu(T.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Al{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Iu{constructor(e){this._methodName=e}}class ld{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fr(this._lat,e._lat)||fr(this._long,e._long)}}const Wf=/^__.*__$/;class Kf{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wa(e,this.data,t,this.fieldTransforms)}}class Hh{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gh(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pn()}}class ud{constructor(e,t,o,h,m,E){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=h,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ud(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:o,oa:!1});return h.ua(e),h}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),h=this.ia({path:o,oa:!1});return h.na(),h}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return qf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Gh(this.sa)&&Wf.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class qy{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Wl(e)}da(e,t,o,h=!1){return new ud({sa:e,methodName:t,fa:o,path:wi.emptyPath(),oa:!1,la:h},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Kd(i){const e=i._freezeSettings(),t=Wl(i._databaseId);return new qy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function ig(i,e,t,o,h,m={}){const E=i.da(m.merge||m.mergeFields?2:0,e,t,h);sg("Data must be an object, but it was:",E,o);const P=Jy(o,E);let K,J;if(m.merge)K=new Vs(E.fieldMask),J=E.fieldTransforms;else if(m.mergeFields){const Ee=[];for(const Xe of m.mergeFields){const St=Ym(e,Xe,t);if(!E.contains(St))throw new Jt(Lt.INVALID_ARGUMENT,`Field '${St}' is specified in your field mask but missing from your input data.`);ev(Ee,St)||Ee.push(St)}K=new Vs(Ee),J=E.fieldTransforms.filter(Xe=>K.covers(Xe.field))}else K=null,J=E.fieldTransforms;return new Kf(new Ds(P),K,J)}class Yf extends Iu{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function Gm(i,e,t){return new ud({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class em extends Iu{_toFieldTransform(e){return new nc(e.path,new Mu)}isEqual(e){return e instanceof em}}class Zy extends Iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Gm(this,e,!0),o=this._a.map(m=>zh(m,t)),h=new Ru(o);return new nc(e.path,h)}isEqual(e){return this===e}}class Qy extends Iu{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Gm(this,e,!0),o=this._a.map(m=>zh(m,t)),h=new kl(o);return new nc(e.path,h)}isEqual(e){return this===e}}class Xy extends Iu{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new da(e.It,ec(e.It,this.wa));return new nc(e.path,t)}isEqual(e){return this===e}}function zm(i,e,t,o){const h=i.da(1,e,t);sg("Data must be an object, but it was:",h,o);const m=[],E=Ds.empty();ua(o,(K,J)=>{const Ee=Wh(e,K,t);J=(0,it.m9)(J);const Xe=h.ca(Ee);if(J instanceof Yf)m.push(Ee);else{const St=zh(J,Xe);null!=St&&(m.push(Ee),E.set(Ee,St))}});const P=new Vs(m);return new Hh(E,P,h.fieldTransforms)}function Wm(i,e,t,o,h,m){const E=i.da(1,e,t),P=[Ym(e,o,t)],K=[h];if(m.length%2!=0)throw new Jt(Lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let St=0;St<m.length;St+=2)P.push(Ym(e,m[St])),K.push(m[St+1]);const J=[],Ee=Ds.empty();for(let St=P.length-1;St>=0;--St)if(!ev(J,P[St])){const Bt=P[St];let en=K[St];en=(0,it.m9)(en);const $n=E.ca(Bt);if(en instanceof Yf)J.push(Bt);else{const Qn=zh(en,$n);null!=Qn&&(J.push(Bt),Ee.set(Bt,Qn))}}const Xe=new Vs(J);return new Hh(Ee,Xe,E.fieldTransforms)}function Km(i,e,t,o=!1){return zh(t,i.da(o?4:3,e))}function zh(i,e){if(tm(i=(0,it.m9)(i)))return sg("Unsupported field value:",e,i),Jy(i,e);if(i instanceof Iu)return function(t,o){if(!Gh(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const h=t._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const h=[];let m=0;for(const E of t){let P=zh(E,o.aa(m));null==P&&(P={nullValue:"NULL_VALUE"}),h.push(P),m++}return{arrayValue:{values:h}}}(i,e)}return function(t,o){if(null===(t=(0,it.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ec(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const h=ji.fromDate(t);return{timestampValue:Lu(o.It,h)}}if(t instanceof ji){const h=new ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Lu(o.It,h)}}if(t instanceof ld)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eu)return{bytesValue:ph(o.It,t._byteString)};if(t instanceof as){const h=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(h))throw o.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:oc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${ri(t)}`)}(i,e)}function Jy(i,e){const t={};return vl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(i,(o,h)=>{const m=zh(h,e.ra(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function tm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof ji||i instanceof ld||i instanceof Eu||i instanceof as||i instanceof Iu)}function sg(i,e,t){if(!tm(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=ri(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Ym(i,e,t){if((e=(0,it.m9)(e))instanceof Al)return e._internalPath;if("string"==typeof e)return Wh(i,e);throw qf("Field path arguments must be of type string or ",i,!1,void 0,t)}const nm=new RegExp("[~\\*/\\[\\]]");function Wh(i,e,t){if(e.search(nm)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Al(...e.split("."))._internalPath}catch(o){throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qf(i,e,t,o,h){const m=o&&!o.isEmpty(),E=void 0!==h;let P=`Function ${e}() called with invalid data`;t&&(P+=" (via `toFirestore()`)"),P+=". ";let K="";return(m||E)&&(K+=" (found",m&&(K+=` in field ${o}`),E&&(K+=` in document ${h}`),K+=")"),new Jt(Lt.INVALID_ARGUMENT,P+i+K)}function ev(i,e){return i.some(t=>t.isEqual(e))}class Kh{constructor(e,t,o,h,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new as(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qm extends Kh{data(){return super.data()}}function Zf(i,e){return"string"==typeof e?Wh(i,e):e instanceof Al?e._internalPath:e._delegate._internalPath}function Zm(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Jt(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yh{}function cd(i,...e){for(const t of e)i=t._apply(i);return i}class tv extends Yh{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=Kd(e.firestore),o=function(h,m,E,P,K,J,Ee){let Xe;if(K.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){iy(Ee,J);const Bt=[];for(const en of Ee)Bt.push(ry(P,h,en));Xe={arrayValue:{values:Bt}}}else Xe=ry(P,h,Ee)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||iy(Ee,J),Xe=Km(E,"where",Ee,"in"===J||"not-in"===J);const St=Lo.create(K,J,Xe);return function(Bt,en){if(en.dt()){const Qn=rh(Bt);if(null!==Qn&&!Qn.isEqual(en.field))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Qn.toString()}' and '${en.field.toString()}'`);const zi=sf(Bt);null!==zi&&sy(0,en.field,zi)}const $n=function(Qn,zi){for(const Ss of Qn.filters)if(zi.indexOf(Ss.op)>=0)return Ss.op;return null}(Bt,function(Qn){switch(Qn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(en.op));if(null!==$n)throw new Jt(Lt.INVALID_ARGUMENT,$n===en.op?`Invalid query. You cannot use more than one '${en.op.toString()}' filter.`:`Invalid query. You cannot use '${en.op.toString()}' filters with '${$n.toString()}' filters.`)}(h,St),St}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new js(e.firestore,e.converter,function(h,m){const E=h.filters.concat([m]);return new ja(h.path,h.collectionGroup,h.explicitOrderBy.slice(),E,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,o))}}class nv extends Yh{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,h,m){if(null!==o.startAt)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new os(h,m);return function(P,K){if(null===sf(P)){const J=rh(P);null!==J&&sy(0,J,K.field)}}(o,E),E}(e._query,this.ma,this.pa);return new js(e.firestore,e.converter,function(o,h){const m=o.explicitOrderBy.concat([h]);return new ja(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Xm extends Yh{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new js(e.firestore,e.converter,Ol(e._query,this.Ia,this.Ta))}}class Jm extends Yh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=ny(e,this.type,this.Ea,this.Aa);return new js(e.firestore,e.converter,(h=t,new ja((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,h,o.endAt)));var o,h}}class ey extends Yh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=ny(e,this.type,this.Ea,this.Aa);return new js(e.firestore,e.converter,(h=t,new ja((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,h)));var o,h}}function ny(i,e,t,o){if(t[0]=(0,it.m9)(t[0]),t[0]instanceof Kh)return function(h,m,E,P,K){if(!P)throw new Jt(Lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const J=[];for(const Ee of Ju(h))if(Ee.field.isKeyField())J.push(te(m,P.key));else{const Xe=P.data.field(Ee.field);if(ne(Xe))throw new Jt(Lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Xe){const St=Ee.field.canonicalString();throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${St}' (used as the orderBy) does not exist.`)}J.push(Xe)}return new Rl(J,K)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const h=Kd(i.firestore);return function(m,E,P,K,J,Ee){const Xe=m.explicitOrderBy;if(J.length>Xe.length)throw new Jt(Lt.INVALID_ARGUMENT,`Too many arguments provided to ${K}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const St=[];for(let Bt=0;Bt<J.length;Bt++){const en=J[Bt];if(Xe[Bt].field.isKeyField()){if("string"!=typeof en)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${K}(), but got a ${typeof en}`);if(!ih(m)&&-1!==en.indexOf("/"))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${K}() must be a plain document ID, but '${en}' contains a slash.`);const $n=m.path.child(Jr.fromString(en));if(!gn.isDocumentKey($n))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${K}() must result in a valid document path, but '${$n}' is not because it contains an odd number of segments.`);const Qn=new gn($n);St.push(te(E,Qn))}else{const $n=Km(P,K,en);St.push($n)}}return new Rl(St,Ee)}(i._query,i.firestore._databaseId,h,e,t,o)}}function ry(i,e,t){if("string"==typeof(t=(0,it.m9)(t))){if(""===t)throw new Jt(Lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ih(e)&&-1!==t.indexOf("/"))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Jr.fromString(t));if(!gn.isDocumentKey(o))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return te(i,new gn(o))}if(t instanceof as)return te(i,t._key);throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ri(t)}.`)}function iy(i,e){if(!Array.isArray(i)||0===i.length)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sy(i,e,t){if(!t.isEqual(e))throw new Jt(Lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rm{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return M(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(j(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pn()}}convertObject(e,t){const o={};return ua(e.fields,(h,m)=>{o[h]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new ld(M(e.latitude),M(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=ue(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(nt(e));default:return null}}convertTimestamp(e){const t=I(e);return new ji(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Jr.fromString(e);sr(Yn(o));const h=new an(o.get(1),o.get(3)),m=new gn(o.popFirst(5));return h.isEqual(t)||mi(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function og(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class av extends rm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new as(this.firestore,null,t)}}class Yd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qd extends Kh{constructor(e,t,o,h,m,E){super(e,t,o,h,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ag(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Zf("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class ag extends qd{data(e={}){return super.data(e)}}class Zd{constructor(e,t,o,h){this._firestore=e,this._userDataWriter=t,this._snapshot=h,this.metadata=new Yd(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new ag(this._firestore,this._userDataWriter,o.key,o,new Yd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Jt(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(E=>({type:"added",doc:new ag(o._firestore,o._userDataWriter,E.doc.key,E.doc,new Yd(o._snapshot.mutatedKeys.has(E.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(E=>h||3!==E.type).map(E=>{const P=new ag(o._firestore,o._userDataWriter,E.doc.key,E.doc,new Yd(o._snapshot.mutatedKeys.has(E.doc.key),o._snapshot.fromCache),o.query.converter);let K=-1,J=-1;return 0!==E.type&&(K=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),J=m.indexOf(E.doc.key)),{type:lv(E.type),doc:P,oldIndex:K,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pn()}}function uv(i,e){return i instanceof qd&&e instanceof qd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Zd&&e instanceof Zd&&i._firestore===e._firestore&&Yg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class dd extends rm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new as(this.firestore,null,t)}}function oy(i,e,t){i=Ir(i,as);const o=Ir(i.firestore,io),h=og(i.converter,e,t);return Zh(o,[ig(Kd(o),"setDoc",i._key,h,null!==i.converter,t).toMutation(i._key,gs.none())])}function qh(i,e,t,...o){i=Ir(i,as);const h=Ir(i.firestore,io),m=Kd(h);let E;return E="string"==typeof(e=(0,it.m9)(e))||e instanceof Al?Wm(m,"updateDoc",i._key,e,t,o):zm(m,"updateDoc",i._key,e),Zh(h,[E.toMutation(i._key,gs.exists(!0))])}function ay(i,...e){var t,o,h;i=(0,it.m9)(i);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Xg(e[E])||(m=e[E],E++);const P={includeMetadataChanges:m.includeMetadataChanges};if(Xg(e[E])){const Xe=e[E];e[E]=null===(t=Xe.next)||void 0===t?void 0:t.bind(Xe),e[E+1]=null===(o=Xe.error)||void 0===o?void 0:o.bind(Xe),e[E+2]=null===(h=Xe.complete)||void 0===h?void 0:h.bind(Xe)}let K,J,Ee;if(i instanceof as)J=Ir(i.firestore,io),Ee=Pl(i._key.path),K={next:Xe=>{e[E]&&e[E](hv(J,i,Xe))},error:e[E+1],complete:e[E+2]};else{const Xe=Ir(i,js);J=Ir(Xe.firestore,io),Ee=Xe._query;const St=new dd(J);K={next:Bt=>{e[E]&&e[E](new Zd(J,St,Xe,Bt))},error:e[E+1],complete:e[E+2]},Zm(i._query)}return function(Xe,St,Bt,en){const $n=new Hf(en),Qn=new Vp(St,$n,Bt);return Xe.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Lg(yield zf(Xe),Qn)})),()=>{$n.bc(),Xe.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Cm(yield zf(Xe),Qn)}))}}(Ps(J),Ee,P,K)}function Zh(i,e){return function(t,o){const h=new xs;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function $g(i,e,t){return ql.apply(this,arguments)}(yield $m(t),o,h)})),h.promise}(Ps(i),e)}function hv(i,e,t){const o=t.docs.get(e._key),h=new dd(i);return new qd(i,h,e._key,o,new Yd(t.hasPendingWrites,t.fromCache),e.converter)}const Tc={maxAttempts:5};class pv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kd(e)}set(e,t,o){this._verifyNotCommitted();const h=Qd(e,this._firestore),m=og(h.converter,t,o),E=ig(this._dataReader,"WriteBatch.set",h._key,m,null!==h.converter,o);return this._mutations.push(E.toMutation(h._key,gs.none())),this}update(e,t,o,...h){this._verifyNotCommitted();const m=Qd(e,this._firestore);let E;return E="string"==typeof(t=(0,it.m9)(t))||t instanceof Al?Wm(this._dataReader,"WriteBatch.update",m._key,t,o,h):zm(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(E.toMutation(m._key,gs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qd(e,this._firestore);return this._mutations=this._mutations.concat(new su(t._key,gs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(Lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qd(i,e){if((i=(0,it.m9)(i)).firestore!==e)throw new Jt(Lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Sc extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kd(e)}get(e){const t=Qd(e,this._firestore),o=new av(this._firestore);return this._transaction.lookup([t._key]).then(h=>{if(!h||1!==h.length)return pn();const m=h[0];if(m.isFoundDocument())return new Kh(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new Kh(this._firestore,o,t._key,null,t.converter);throw pn()})}set(e,t,o){const h=Qd(e,this._firestore),m=og(h.converter,t,o),E=ig(this._dataReader,"Transaction.set",h._key,m,null!==h.converter,o);return this._transaction.set(h._key,E),this}update(e,t,o,...h){const m=Qd(e,this._firestore);let E;return E="string"==typeof(t=(0,it.m9)(t))||t instanceof Al?Wm(this._dataReader,"Transaction.update",m._key,t,o,h):zm(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,E),this}delete(e){const t=Qd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qd(e,this._firestore),o=new dd(this._firestore);return super.get(e).then(h=>new qd(this._firestore,o,t._key,h._document,new Yd(!1,!1),t.converter))}}function sm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Jt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function yv(){if(typeof Uint8Array>"u")throw new Jt("unimplemented","Uint8Arrays are not available in this environment.")}function ly(){if(!function Rc(){return typeof atob<"u"}())throw new Jt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Zn=q.SDK_VERSION,(0,q._registerComponent)(new ut.wA("firestore",(t,{instanceIdentifier:o,options:h})=>{const m=t.getProvider("app").getImmediate(),E=new io(new bu(t.getProvider("auth-internal")),new Ja(t.getProvider("app-check-internal")),function(P,K){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Jt(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new an(P.options.projectId,K)}(m,o),m);return h=Object.assign({useFetchStreams:e},h),E._setSettings(h),E},"PUBLIC").setMultipleInstances(!0)),(0,q.registerVersion)(kr,"3.7.3",i),(0,q.registerVersion)(kr,"3.7.3","esm2017")}();class Qf{constructor(e){this._delegate=e}static fromBase64String(e){return ly(),new Qf(Eu.fromBase64String(e))}static fromUint8Array(e){return yv(),new Qf(Eu.fromUint8Array(e))}toBase64(){return ly(),this._delegate.toBase64()}toUint8Array(){return yv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Xf(i){return function u_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class vv{enableIndexedDbPersistence(e,t){return function tg(i,e){Ql(i=Ir(i,io));const t=Ps(i),o=i._freezeSettings(),h=new At;return Yy(t,h,new Te(h,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qv(i){Ql(i=Ir(i,io));const e=Ps(i),t=i._freezeSettings(),o=new At;return Yy(e,o,new vt(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Hm(i){if(i._initialized&&!i._terminated)throw new Jt(Lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xs;return i._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(o){if(!Zo.C())return Promise.resolve();const h=o+"main";yield Zo.delete(h)}),function(o){return t.apply(this,arguments)})(vc(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof an||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function _u(i,e,t,o={}){var h;const m=(i=Ir(i,vu))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let E,P;if("string"==typeof o.mockUserToken)E=o.mockUserToken,P=hr.MOCK_USER;else{E=(0,it.Sg)(o.mockUserToken,null===(h=i._app)||void 0===h?void 0:h.options.projectId);const K=o.mockUserToken.sub||o.mockUserToken.user_id;if(!K)throw new Jt(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new hr(K)}i._authCredentials=new la(new gl(E,P))}}(this._delegate,e,t,o)}enableNetwork(){return function Dc(i){return function Vm(i){return i.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield Hy(i),t=yield Bm(i);return e.setNetworkEnabled(!0),function(o){const h=En(o);return h._u.delete(0),Th(h)}(t)}))}(Ps(i=Ir(i,io)))}(this._delegate)}disableNetwork(){return function ng(i){return function Vv(i){return i.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield Hy(i),t=yield Bm(i);return e.setNetworkEnabled(!1),(o=(0,fe.Z)(function*(h){const m=En(h);m._u.add(0),yield Sl(m),m.gu.set("Offline")}),function(h){return o.apply(this,arguments)})(t);var o}))}(Ps(i=Ir(i,io)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,un("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zv(i){return function(e){const t=new xs;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function Lh(i,e){return Bh.apply(this,arguments)}(yield $m(e),t)})),t.promise}(Ps(i=Ir(i,io)))}(this._delegate)}onSnapshotsInSync(e){return function i_(i,e){return function jv(i,e){const t=new Hf(e);return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return o=yield zf(i),h=t,En(o).Ru.add(h),void h.next();var o,h})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return o=yield zf(i),h=t,void En(o).Ru.delete(h);var o,h}))}}(Ps(i=Ir(i,io)),Xg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Jt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tp(this,Kg(this._delegate,e))}catch(t){throw ol(t,"collection()","Firestore.collection()")}}doc(e){try{return new Xl(this,Jp(this._delegate,e))}catch(t){throw ol(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pl(this,function l0(i,e){if(i=Ir(i,vu),$t("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(Lt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new js(i,null,(t=e,new ja(Jr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ol(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ku(i,e,t){i=Ir(i,io);const o=Object.assign(Object.assign({},Tc),t);return function(h){if(h.maxAttempts<1)throw new Jt(Lt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,m,E){const P=new xs;return h.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const K=yield function Gy(i){return Fm(i).then(e=>e.datastore)}(h);new Pm(h.asyncQueue,K,E,m,P).run()})),P.promise}(Ps(i),h=>e(new Sc(i,h)),o)}(this._delegate,t=>e(new cy(this,t)))}batch(){return Ps(this._delegate),new dy(new pv(this._delegate,e=>Zh(this._delegate,e)))}loadBundle(e){return function jh(i,e){const t=Ps(i=Ir(i,io)),o=new Ky;return function Hv(i,e,t,o){const h=function(m,E){let P;return P="string"==typeof m?(new TextEncoder).encode(m):m,K=function(K,J){if(K instanceof Uint8Array)return Mm(K,J);if(K instanceof ArrayBuffer)return Mm(new Uint8Array(K),J);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new ad(K,E);var K}(t,Wl(e));i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function ee(i,e,t){const o=En(i);var h;(h=(0,fe.Z)(function*(m,E,P){try{const K=yield E.getMetadata();if(yield function(St,Bt){const en=En(St),$n=eo(Bt.createTime);return en.persistence.runTransaction("hasNewerBundle","readonly",Qn=>en.Ns.getBundleMetadata(Qn,Bt.id)).then(Qn=>!!Qn&&Qn.createTime.compareTo($n)>=0)}(m.localStore,K))return yield E.close(),P._completeWith({taskState:"Success",documentsLoaded:(St=K).totalDocuments,bytesLoaded:St.totalBytes,totalDocuments:St.totalDocuments,totalBytes:St.totalBytes}),Promise.resolve(new Set);P._updateProgress(Sm(K));const J=new Ly(K,m.localStore,E.It);let Ee=yield E.mc();for(;Ee;){const St=yield J.Fu(Ee);St&&P._updateProgress(St),Ee=yield E.mc()}const Xe=yield J.complete();return yield Wu(m,Xe.Lu,void 0),yield function(St,Bt){const en=En(St);return en.persistence.runTransaction("Save bundle","readwrite",$n=>en.Ns.saveBundleMetadata($n,Bt))}(m.localStore,K),P._completeWith(Xe.progress),Promise.resolve(Xe.Bu)}catch(K){return Fi("SyncEngine",`Loading bundle failed with ${K}`),P._failWith(K),Promise.resolve(new Set)}var St}),function(m,E,P){return h.apply(this,arguments)})(o,e,t).then(h=>{o.sharedClientState.notifyBundleLoaded(h)})}(yield $m(i),h,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Jg(i,e){return function Gv(i,e){return i.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,o){const h=En(t);return h.persistence.runTransaction("Get named query","readonly",m=>h.Ns.getNamedQuery(m,o))}(yield Zg(i),e)}))}(Ps(i=Ir(i,io)),e).then(t=>t?new js(i,null,t.query):null)}(this._delegate,e).then(t=>t?new pl(this,t):null)}}class Jf extends rm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(new Eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Xl.forKey(t,this.firestore,null)}}class cy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}get(e){const t=Qh(e);return this._delegate.get(t).then(o=>new ep(this._firestore,new qd(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const h=Qh(e);return o?(sm("Transaction.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Qh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Qh(e);return this._delegate.delete(t),this}}class dy{constructor(e){this._delegate=e}set(e,t,o){const h=Qh(e);return o?(sm("WriteBatch.set",o),this._delegate.set(h,t,o)):this._delegate.set(h,t),this}update(e,t,o,...h){const m=Qh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...h),this}delete(e){const t=Qh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new ag(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ug(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Xd.INSTANCES;let h=o.get(e);h||(h=new WeakMap,o.set(e,h));let m=h.get(t);return m||(m=new Xd(e,new Jf(e),t),h.set(t,m)),m}}Xd.INSTANCES=new WeakMap;class Xl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Jt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xl(t,new as(t._delegate,o,new gn(e)))}static forKey(e,t,o){return new Xl(t,new as(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new tp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tp(this.firestore,Kg(this._delegate,e))}catch(t){throw ol(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,it.m9)(e))instanceof as&&xm(this._delegate,e)}set(e,t){t=sm("DocumentReference.set",t);try{return t?oy(this._delegate,e,t):oy(this._delegate,e)}catch(o){throw ol(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?qh(this._delegate,e):qh(this._delegate,e,t,...o)}catch(h){throw ol(h,"updateDoc()","DocumentReference.update()")}}delete(){return function n_(i){return Zh(Ir(i.firestore,io),[new su(i._key,gs.none())])}(this._delegate)}onSnapshot(...e){const t=hy(e),o=fy(e,h=>new ep(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return ay(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jv(i){i=Ir(i,as);const e=Ir(i.firestore,io),t=Ps(e),o=new dd(e);return function Um(i,e){const t=new xs;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(o=(0,fe.Z)(function*(h,m,E){try{const P=yield function(K,J){const Ee=En(K);return Ee.persistence.runTransaction("read document","readonly",Xe=>Ee.localDocuments.getDocument(Xe,J))}(h,m);P.isFoundDocument()?E.resolve(P):P.isNoDocument()?E.resolve(null):E.reject(new Jt(Lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const K=Oh(P,`Failed to get document '${m} from cache`);E.reject(K)}}),function(h,m,E){return o.apply(this,arguments)})(yield Zg(i),e,t);var o})),t.promise}(t,i._key).then(h=>new qd(e,o,i._key,h,new Yd(null!==h&&h.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function e_(i){i=Ir(i,as);const e=Ir(i.firestore,io);return zy(Ps(e),i._key,{source:"server"}).then(t=>hv(e,i,t))}(this._delegate):function va(i){i=Ir(i,as);const e=Ir(i.firestore,io);return zy(Ps(e),i._key).then(t=>hv(e,i,t))}(this._delegate),t.then(o=>new ep(this.firestore,new qd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Xl(this.firestore,this._delegate.withConverter(e?Xd.getInstance(this.firestore,e):null))}}function ol(i,e,t){return i.message=i.message.replace(e,t),i}function hy(i){for(const e of i)if("object"==typeof e&&!Xf(e))return e;return{}}function fy(i,e){var t,o;let h;return h=Xf(i[0])?i[0]:Xf(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{h.next&&h.next(e(m))},error:null===(t=h.error)||void 0===t?void 0:t.bind(h),complete:null===(o=h.complete)||void 0===o?void 0:o.bind(h)}}class ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Xl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uv(this._delegate,e._delegate)}}class ug extends ep{data(e){const t=this._delegate.data(e);return function Fo(i,e){i||pn()}(void 0!==t),t}}class pl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}where(e,t,o){try{return new pl(this.firestore,cd(this._delegate,function Qm(i,e,t){const o=e,h=Zf("where",i);return new tv(h,o,t)}(e,t,o)))}catch(h){throw ol(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pl(this.firestore,cd(this._delegate,function Qv(i,e="asc"){const t=e,o=Zf("orderBy",i);return new nv(o,t)}(e,t)))}catch(o){throw ol(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pl(this.firestore,cd(this._delegate,function rv(i){return To("limit",i),new Xm("limit",i,"F")}(e)))}catch(t){throw ol(t,"limit()","Query.limit()")}}limitToLast(e){try{return new pl(this.firestore,cd(this._delegate,function iv(i){return To("limitToLast",i),new Xm("limitToLast",i,"L")}(e)))}catch(t){throw ol(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pl(this.firestore,cd(this._delegate,function Xv(...i){return new Jm("startAt",i,!0)}(...e)))}catch(t){throw ol(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pl(this.firestore,cd(this._delegate,function sv(...i){return new Jm("startAfter",i,!1)}(...e)))}catch(t){throw ol(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pl(this.firestore,cd(this._delegate,function ov(...i){return new ey("endBefore",i,!1)}(...e)))}catch(t){throw ol(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pl(this.firestore,cd(this._delegate,function ty(...i){return new ey("endAt",i,!0)}(...e)))}catch(t){throw ol(t,"endAt()","Query.endAt()")}}isEqual(e){return Yg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function t_(i){i=Ir(i,js);const e=Ir(i.firestore,io),t=Ps(e),o=new dd(e);return function Uv(i,e){const t=new xs;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(o=(0,fe.Z)(function*(h,m,E){try{const P=yield Ka(h,m,!0),K=new hl(m,P.Hi),J=K.Wu(P.documents),Ee=K.applyChanges(J,!1);E.resolve(Ee.snapshot)}catch(P){const K=Oh(P,`Failed to execute query '${m} against cache`);E.reject(K)}}),function(h,m,E){return o.apply(this,arguments)})(yield Zg(i),e,t);var o})),t.promise}(t,i._query).then(h=>new Zd(e,o,i,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function dv(i){i=Ir(i,js);const e=Ir(i.firestore,io),t=Ps(e),o=new dd(e);return Wy(t,i._query,{source:"server"}).then(h=>new Zd(e,o,i,h))}(this._delegate):function cv(i){i=Ir(i,js);const e=Ir(i.firestore,io),t=Ps(e),o=new dd(e);return Zm(i._query),Wy(t,i._query).then(h=>new Zd(e,o,i,h))}(this._delegate),t.then(o=>new py(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=hy(e),o=fy(e,h=>new py(this.firestore,new Zd(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return ay(this._delegate,t,o)}withConverter(e){return new pl(this.firestore,this._delegate.withConverter(e?Xd.getInstance(this.firestore,e):null))}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ug(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class py{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ug(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new c_(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new ug(this._firestore,o))})}isEqual(e){return uv(this._delegate,e._delegate)}}class tp extends pl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xl(this.firestore,e):null}doc(e){try{return new Xl(this.firestore,void 0===e?Jp(this._delegate):Jp(this._delegate,e))}catch(t){throw ol(t,"doc()","CollectionReference.doc()")}}add(e){return function r_(i,e){const t=Ir(i.firestore,io),o=Jp(i),h=og(i.converter,e);return Zh(t,[ig(Kd(i.firestore),"addDoc",o._key,h,null!==i.converter,{}).toMutation(o._key,gs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Xl(this.firestore,t))}isEqual(e){return xm(this._delegate,e._delegate)}withConverter(e){return new tp(this.firestore,this._delegate.withConverter(e?Xd.getInstance(this.firestore,e):null))}}function Qh(i){return Ir(i,as)}class gy{constructor(...e){this._delegate=new Al(...e)}static documentId(){return new gy(wi.keyField().canonicalString())}isEqual(e){return(e=(0,it.m9)(e))instanceof Al&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gv(){return new em("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xh(e)}static delete(){const e=function Yu(){return new Yf("deleteField")}();return e._methodName="FieldValue.delete",new Xh(e)}static arrayUnion(...e){const t=function mv(...i){return new Zy("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xh(t)}static arrayRemove(...e){const t=function o_(...i){return new Qy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xh(t)}static increment(e){const t=function a_(i){return new Xy("increment",i)}(e);return t._methodName="FieldValue.increment",new Xh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const d_={Firestore:uy,GeoPoint:ld,Timestamp:ji,Blob:Qf,Transaction:cy,WriteBatch:dy,DocumentReference:Xl,DocumentSnapshot:ep,Query:pl,QueryDocumentSnapshot:ug,QuerySnapshot:py,CollectionReference:tp,FieldPath:gy,FieldValue:Xh,setLogLevel:function om(i){!function Ii(i){ni.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function f_(i){(function h_(i,e){i.INTERNAL.registerComponent(new ut.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),h=t.getProvider("firestore").getImmediate();return e(o,h)},"PUBLIC").setServiceProps(Object.assign({},d_)))})(i,(e,t)=>new uy(e,t,new vv)),i.registerVersion("@firebase/firestore-compat","0.2.3")}(De.Z);var Jd=V(1205),p_=V(440);function _v(i,e){return function g_(i,e=X.z){return new W.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function my(i,e){return _v(i,e).pipe((0,we.U)(t=>({payload:t,type:"query"})))}function cg(i,e){return my(i,e).pipe((0,me.O)(void 0),Ce(),(0,we.U)(([t,o])=>{const h=o.payload.docChanges(),m=h.map(E=>({type:E.type,payload:E}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((E,P)=>{const K=h.find(Ee=>Ee.doc.ref.isEqual(E.ref)),J=null==t?void 0:t.payload.docs.find(Ee=>Ee.ref.isEqual(E.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(E.metadata)||!K&&J&&JSON.stringify(J.metadata)===JSON.stringify(E.metadata)||m.push({type:"modified",payload:{oldIndex:P,newIndex:P,type:"modified",doc:E}})}),m}))}function yy(i,e,t){return cg(i,t).pipe((0,be.R)((o,h)=>function Ev(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Iv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return am(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return am(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return am(i,e.oldIndex,1)}return i}(i,o))}),i}(o,h.map(m=>m.payload),e),[]),(0,qe.x)(),(0,we.U)(o=>o.map(h=>({type:h.type,payload:h}))))}function am(i,e,t,...o){const h=i.slice();return h.splice(e,t,...o),h}function vy(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}V(127);class _y{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=cg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,we.U)(o=>o.filter(h=>e.indexOf(h.type)>-1)))),t.pipe((0,me.O)(void 0),Ce(),(0,Ge.h)(([o,h])=>h.length>0||!o),(0,we.U)(([o,h])=>h),Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,be.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=vy(e);return yy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return my(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Se.iC)}get(e){return(0,Oe.D)(this.query.get(e)).pipe(Se.iC)}add(e){return this.ref.add(e)}doc(e){return new Ey(this.ref.doc(e),this.afs)}}class Ey{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:h,query:m}=Dv(o,t);return new _y(h,m,this.afs)}snapshotChanges(){return function m_(i,e){return _v(i,e).pipe((0,me.O)(void 0),Ce(),(0,we.U)(([t,o])=>o.exists?null!=t&&t.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,we.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Oe.D)(this.ref.get(e)).pipe(Se.iC)}}class wv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cg(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Ge.h)(t=>t.length>0),Se.iC):cg(this.query,this.afs.schedulers.outsideAngular).pipe(Se.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,be.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=vy(e);return yy(this.query,t,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges(e={}){return my(this.query,this.afs.schedulers.outsideAngular).pipe((0,we.U)(o=>o.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),Se.iC)}get(e){return(0,Oe.D)(this.query.get(e)).pipe(Se.iC)}}const bv=new c.OlP("angularfire2.enableFirestorePersistence"),Cv=new c.OlP("angularfire2.firestore.persistenceSettings"),Jh=new c.OlP("angularfire2.firestore.settings"),y_=new c.OlP("angularfire2.firestore.use-emulator");function Dv(i,e=(t=>t)){return{query:e(i),ref:i}}let np=(()=>{class i{constructor(t,o,h,m,E,P,K,J,Ee,Xe,St,Bt,en,$n,Qn,zi,Ss){this.schedulers=K;const $i=(0,ot.on)(t,P,o),ho=Ee;Xe&&(0,Jd.nw)($i,P,St,en,$n,Qn,Bt,zi),[this.firestore,this.persistenceEnabled$]=(0,ot.cc)(`${$i.name}.firestore`,"AngularFirestore",$i.name,()=>{const Gi=P.runOutsideAngular(()=>$i.firestore());if(m&&Gi.settings(m),ho&&Gi.useEmulator(...ho),h&&!(0,It.PM)(E)){const qi=()=>{try{return(0,Oe.D)(Gi.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(_a){return typeof console<"u"&&console.warn(_a),(0,Ae.of)(!1)}};return[Gi,P.runOutsideAngular(qi)]}return[Gi,(0,Ae.of)(!1)]},[m,ho,h])}collection(t,o){let h;h="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:E}=Dv(h,o),P=this.schedulers.ngZone.run(()=>m);return new _y(P,E,this)}collectionGroup(t,o){const h=o||(E=>E),m=this.firestore.collectionGroup(t);return new wv(h(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const h=this.schedulers.ngZone.run(()=>o);return new Ey(h,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(c.LFG(ot.Dh),c.LFG(ot.xv,8),c.LFG(bv,8),c.LFG(Jh,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Se.HU),c.LFG(Cv,8),c.LFG(y_,8),c.LFG(Jd.zQ,8),c.LFG(Jd.Qv,8),c.LFG(Jd.L6,8),c.LFG(Jd._Q,8),c.LFG(Jd.rT,8),c.LFG(Jd.lh,8),c.LFG(Jd.f7,8),c.LFG(p_.nm,8))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(on,pt,V)=>{"use strict";V.d(pt,{Dh:()=>Le,GT:()=>Se,cc:()=>Ge,hO:()=>qe,on:()=>Ce,pX:()=>Ae,xv:()=>Ke});var c=V(4650),X=V(127),W=V(5813);on=V.hmd(on);const Oe=["ngOnDestroy"],Ae=(De,fe,q,ut={})=>new Proxy(De,{get:(st,it)=>q.runOutsideAngular(()=>{var He;if(De[it])return!(null===(He=null==ut?void 0:ut.spy)||void 0===He)&&He.get&&ut.spy.get(it,De[it]),De[it];if(Oe.indexOf(it)>-1)return()=>{};const ze=fe.toPromise().then(re=>{const Ze=re&&re[it];return"function"==typeof Ze?Ze.bind(re):Ze&&Ze.then?Ze.then(ce=>q.run(()=>ce)):q.run(()=>Ze)});return new Proxy(()=>{},{get:(re,Ze)=>ze[Ze],apply:(re,Ze,ce)=>ze.then(ge=>{var ve;const ie=ge&&ge(...ce);return!(null===(ve=null==ut?void 0:ut.spy)||void 0===ve)&&ve.apply&&ut.spy.apply(it,ce,ie),ie})})})}),Se=(De,fe)=>{fe.forEach(q=>{Object.getOwnPropertyNames(q.prototype||q).forEach(ut=>{Object.defineProperty(De.prototype,ut,Object.getOwnPropertyDescriptor(q.prototype||q,ut))})})};class me{constructor(fe){return fe}}const Le=new c.OlP("angularfire2.app.options"),Ke=new c.OlP("angularfire2.app.name");function Ce(De,fe,q){const st="object"==typeof q&&q||{};st.name=st.name||"string"==typeof q&&q||"[DEFAULT]";const He=X.Z.apps.filter(ze=>ze&&ze.name===st.name)[0]||fe.runOutsideAngular(()=>X.Z.initializeApp(De,st));try{JSON.stringify(De)!==JSON.stringify(He.options)&&we("error",`${He.name} Firebase App already initialized with different options${on.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ze){}return new me(He)}const we=(De,...fe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...fe)},be={provide:me,useFactory:Ce,deps:[Le,c.R0b,[new c.FiY,Ke]]};let qe=(()=>{class De{constructor(q){X.Z.registerVersion("angularfire",W.q4.full,"core"),X.Z.registerVersion("angularfire",W.q4.full,"app-compat"),X.Z.registerVersion("angular",c.q4F.full,q.toString())}static initializeApp(q,ut){return{ngModule:De,providers:[{provide:Le,useValue:q},{provide:Ke,useValue:ut}]}}}return De.\u0275fac=function(q){return new(q||De)(c.LFG(c.Lbi))},De.\u0275mod=c.oAB({type:De}),De.\u0275inj=c.cJS({providers:[be]}),De})();function Ge(De,fe,q,ut,st){const[,it,He]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===De)||[];if(it)return function ot(De,fe){try{return De.toString()===fe.toString()}catch(q){return De===fe}}(st,He)||(ke("error",`${fe} was already initialized on the ${q} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),ke("warn",{is:st,was:He})),it;{const ze=ut();return globalThis.\u0275AngularfireInstanceCache.push([De,ze,st]),ze}}const It=!!on.hot,ke=(De,...fe)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(on,pt,V)=>{"use strict";V.d(pt,{q4:()=>br,iC:()=>oi,fc:()=>is,HU:()=>Tn,vb:()=>ue,JM:()=>ne});var c=V(4650),X=V(5867),W=V(5861),Oe=V(9681),Ae=V(2090),Se=V(4859),me=V(1877),Le=V(8766);const Ke="@firebase/installations",Ce="0.5.16",be=`w:${Ce}`,qe="FIS_v2",fe=new Ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q($){return $ instanceof Ae.ZR&&$.code.includes("request-failed")}function ut({projectId:$}){return`https://firebaseinstallations.googleapis.com/v1/projects/${$}/installations`}function st($){return{token:$.token,requestStatus:2,expiresIn:ge($.expiresIn),creationTime:Date.now()}}function it($,G){return He.apply(this,arguments)}function He(){return(He=(0,W.Z)(function*($,G){const Be=(yield G.json()).error;return fe.create("request-failed",{requestName:$,serverCode:Be.code,serverMessage:Be.message,serverStatus:Be.status})})).apply(this,arguments)}function ze({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function re($,{refreshToken:G}){const te=ze($);return te.append("Authorization",function ve($){return`${qe} ${$}`}(G)),te}function Ze($){return ce.apply(this,arguments)}function ce(){return(ce=(0,W.Z)(function*($){const G=yield $();return G.status>=500&&G.status<600?$():G})).apply(this,arguments)}function ge($){return Number($.replace("s","000"))}function ie($,G){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,W.Z)(function*({appConfig:$,heartbeatServiceProvider:G},{fid:te}){const Be=ut($),mt=ze($),Nt=G.getImmediate({optional:!0});if(Nt){const Sr=yield Nt.getHeartbeatsHeader();Sr&&mt.append("x-firebase-client",Sr)}const In={method:"POST",headers:mt,body:JSON.stringify({fid:te,authVersion:qe,appId:$.appId,sdkVersion:be})},zn=yield Ze(()=>fetch(Be,In));if(zn.ok){const Sr=yield zn.json();return{fid:Sr.fid||te,registrationStatus:2,refreshToken:Sr.refreshToken,authToken:st(Sr.authToken)}}throw yield it("Create Installation",zn)})).apply(this,arguments)}function Ie($){return new Promise(G=>{setTimeout(G,$)})}const Ve=/^[cdef][\w-]{21}$/;function $e(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const te=function Ue($){return function et($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return Ve.test(te)?te:""}catch($){return""}}function Ne($){return`${$.appName}!${$.appId}`}const tt=new Map;function _t($,G){const te=Ne($);zt(te,G),function wn($,G){const te=function tr(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=$=>{zt($.data.key,$.data.fid)}),er}();te&&te.postMessage({key:$,fid:G}),function qn(){0===tt.size&&er&&(er.close(),er=null)}()}(te,G)}function zt($,G){const te=tt.get($);if(te)for(const Be of te)Be(G)}let er=null;const cr="firebase-installations-store";let Mr=null;function Ln(){return Mr||(Mr=(0,Le.X3)("firebase-installations-database",1,{upgrade:($,G)=>{0===G&&$.createObjectStore(cr)}})),Mr}function jn($,G){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,W.Z)(function*($,G){const te=Ne($),mt=(yield Ln()).transaction(cr,"readwrite"),Nt=mt.objectStore(cr),qt=yield Nt.get(te);return yield Nt.put(G,te),yield mt.done,(!qt||qt.fid!==G.fid)&&_t($,G.fid),G})).apply(this,arguments)}function Qt($){return ii.apply(this,arguments)}function ii(){return(ii=(0,W.Z)(function*($){const G=Ne($),Be=(yield Ln()).transaction(cr,"readwrite");yield Be.objectStore(cr).delete(G),yield Be.done})).apply(this,arguments)}function Rr($,G){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,W.Z)(function*($,G){const te=Ne($),mt=(yield Ln()).transaction(cr,"readwrite"),Nt=mt.objectStore(cr),qt=yield Nt.get(te),In=G(qt);return void 0===In?yield Nt.delete(te):yield Nt.put(In,te),yield mt.done,In&&(!qt||qt.fid!==In.fid)&&_t($,In.fid),In})).apply(this,arguments)}function Kr($){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,W.Z)(function*($){let G;const te=yield Rr($.appConfig,Be=>{const mt=xn(Be),Nt=Sn($,mt);return G=Nt.registrationPromise,Nt.installationEntry});return""===te.fid?{installationEntry:yield G}:{installationEntry:te,registrationPromise:G}})).apply(this,arguments)}function xn($){return fi($||{fid:$e(),registrationStatus:0})}function Sn($,G){if(0===G.registrationStatus){if(!navigator.onLine)return{installationEntry:G,registrationPromise:Promise.reject(fe.create("app-offline"))};const te={fid:G.fid,registrationStatus:1,registrationTime:Date.now()},Be=function Bn($,G){return yi.apply(this,arguments)}($,te);return{installationEntry:te,registrationPromise:Be}}return 1===G.registrationStatus?{installationEntry:G,registrationPromise:_r($)}:{installationEntry:G}}function yi(){return(yi=(0,W.Z)(function*($,G){try{const te=yield ie($,G);return jn($.appConfig,te)}catch(te){throw q(te)&&409===te.customData.serverCode?yield Qt($.appConfig):yield jn($.appConfig,{fid:G.fid,registrationStatus:0}),te}})).apply(this,arguments)}function _r($){return Er.apply(this,arguments)}function Er(){return(Er=(0,W.Z)(function*($){let G=yield Gr($.appConfig);for(;1===G.registrationStatus;)yield Ie(100),G=yield Gr($.appConfig);if(0===G.registrationStatus){const{installationEntry:te,registrationPromise:Be}=yield Kr($);return Be||te}return G})).apply(this,arguments)}function Gr($){return Rr($,G=>{if(!G)throw fe.create("installation-not-found");return fi(G)})}function fi($){return function ki($){return 1===$.registrationStatus&&$.registrationTime+1e4<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function wr($,G){return bi.apply(this,arguments)}function bi(){return(bi=(0,W.Z)(function*({appConfig:$,heartbeatServiceProvider:G},te){const Be=dr($,te),mt=re($,te),Nt=G.getImmediate({optional:!0});if(Nt){const Sr=yield Nt.getHeartbeatsHeader();Sr&&mt.append("x-firebase-client",Sr)}const In={method:"POST",headers:mt,body:JSON.stringify({installation:{sdkVersion:be,appId:$.appId}})},zn=yield Ze(()=>fetch(Be,In));if(zn.ok)return st(yield zn.json());throw yield it("Generate Auth Token",zn)})).apply(this,arguments)}function dr($,{fid:G}){return`${ut($)}/${G}/authTokens:generate`}function Wn($){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,W.Z)(function*($,G=!1){let te;const Be=yield Rr($.appConfig,Nt=>{if(!Vn(Nt))throw fe.create("not-registered");const qt=Nt.authToken;if(!G&&Ye(qt))return Nt;if(1===qt.requestStatus)return te=nn($,G),Nt;{if(!navigator.onLine)throw fe.create("app-offline");const In=Qe(Nt);return te=Hn($,In),In}});return te?yield te:Be.authToken})).apply(this,arguments)}function nn($,G){return jt.apply(this,arguments)}function jt(){return(jt=(0,W.Z)(function*($,G){let te=yield vn($.appConfig);for(;1===te.authToken.requestStatus;)yield Ie(100),te=yield vn($.appConfig);const Be=te.authToken;return 0===Be.requestStatus?Wn($,G):Be})).apply(this,arguments)}function vn($){return Rr($,G=>{if(!Vn(G))throw fe.create("not-registered");return function Ct($){return 1===$.requestStatus&&$.requestTime+1e4<Date.now()}(G.authToken)?Object.assign(Object.assign({},G),{authToken:{requestStatus:0}}):G})}function Hn($,G){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,W.Z)(function*($,G){try{const te=yield wr($,G),Be=Object.assign(Object.assign({},G),{authToken:te});return yield jn($.appConfig,Be),te}catch(te){if(!q(te)||401!==te.customData.serverCode&&404!==te.customData.serverCode){const Be=Object.assign(Object.assign({},G),{authToken:{requestStatus:0}});yield jn($.appConfig,Be)}else yield Qt($.appConfig);throw te}})).apply(this,arguments)}function Vn($){return void 0!==$&&2===$.registrationStatus}function Ye($){return 2===$.requestStatus&&!function Fe($){const G=Date.now();return G<$.creationTime||$.creationTime+$.expiresIn<G+36e5}($)}function Qe($){const G={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:G})}function An(){return(An=(0,W.Z)(function*($){const G=$,{installationEntry:te,registrationPromise:Be}=yield Kr(G);return Be?Be.catch(console.error):Wn(G).catch(console.error),te.fid})).apply(this,arguments)}function rr(){return(rr=(0,W.Z)(function*($,G=!1){const te=$;return yield zr(te),(yield Wn(te,G)).token})).apply(this,arguments)}function zr($){return bn.apply(this,arguments)}function bn(){return(bn=(0,W.Z)(function*($){const{registrationPromise:G}=yield Kr($);G&&(yield G)})).apply(this,arguments)}function ei($){return fe.create("missing-app-config-values",{valueName:$})}const pi="installations",Pr=$=>{const G=$.getProvider("app").getImmediate(),te=function Fr($){if(!$||!$.options)throw ei("App Configuration");if(!$.name)throw ei("App Name");const G=["projectId","apiKey","appId"];for(const te of G)if(!$.options[te])throw ei(te);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(G);return{app:G,appConfig:te,heartbeatServiceProvider:(0,Oe._getProvider)(G,"heartbeat"),_delete:()=>Promise.resolve()}},Ni=$=>{const G=$.getProvider("app").getImmediate(),te=(0,Oe._getProvider)(G,pi).getImmediate();return{getId:()=>function Et($){return An.apply(this,arguments)}(te),getToken:mt=>function Jn($){return rr.apply(this,arguments)}(te,mt)}};(function vi(){(0,Oe._registerComponent)(new Se.wA(pi,Pr,"PUBLIC")),(0,Oe._registerComponent)(new Se.wA("installations-internal",Ni,"PRIVATE"))})(),(0,Oe.registerVersion)(Ke,Ce),(0,Oe.registerVersion)(Ke,Ce,"esm2017");const gi="@firebase/remote-config",Lr=new Ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Mn{constructor(G,te,Be,mt){this.client=G,this.storage=te,this.storageCache=Be,this.logger=mt}isCachedDataFresh(G,te){if(!te)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Be=Date.now()-te,mt=Be<=G;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Be}. Cache max age millis (minimumFetchIntervalMillis setting): ${G}. Is cache hit: ${mt}.`),mt}fetch(G){var te=this;return(0,W.Z)(function*(){const[Be,mt]=yield Promise.all([te.storage.getLastSuccessfulFetchTimestampMillis(),te.storage.getLastSuccessfulFetchResponse()]);if(mt&&te.isCachedDataFresh(G.cacheMaxAgeMillis,Be))return mt;G.eTag=mt&&mt.eTag;const Nt=yield te.client.fetch(G),qt=[te.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Nt.status&&qt.push(te.storage.setLastSuccessfulFetchResponse(Nt)),yield Promise.all(qt),Nt})()}}function Rn($=navigator){return $.languages&&$.languages[0]||$.language}class Nr{constructor(G,te,Be,mt,Nt,qt){this.firebaseInstallations=G,this.sdkVersion=te,this.namespace=Be,this.projectId=mt,this.apiKey=Nt,this.appId=qt}fetch(G){var te=this;return(0,W.Z)(function*(){var Be,mt,Nt;const[qt,In]=yield Promise.all([te.firebaseInstallations.getId(),te.firebaseInstallations.getToken()]),Sr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${te.projectId}/namespaces/${te.namespace}:fetch?key=${te.apiKey}`,lr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":G.eTag||"*"},vr={sdk_version:te.sdkVersion,app_instance_id:qt,app_instance_id_token:In,app_id:te.appId,language_code:Rn()},ss={method:"POST",headers:lr,body:JSON.stringify(vr)},Co=fetch(Sr,ss),Ds=new Promise((ca,Jo)=>{G.signal.addEventListener(()=>{const Su=new Error("The operation was aborted.");Su.name="AbortError",Jo(Su)})});let xa;try{yield Promise.race([Co,Ds]),xa=yield Co}catch(ca){let Jo="fetch-client-network";throw"AbortError"===(null===(Be=ca)||void 0===Be?void 0:Be.name)&&(Jo="fetch-timeout"),Lr.create(Jo,{originalErrorMessage:null===(mt=ca)||void 0===mt?void 0:mt.message})}let di=xa.status;const Oc=xa.headers.get("ETag")||void 0;let tl,Xo;if(200===xa.status){let ca;try{ca=yield xa.json()}catch(Jo){throw Lr.create("fetch-client-parse",{originalErrorMessage:null===(Nt=Jo)||void 0===Nt?void 0:Nt.message})}tl=ca.entries,Xo=ca.state}if("INSTANCE_STATE_UNSPECIFIED"===Xo?di=500:"NO_CHANGE"===Xo?di=304:("NO_TEMPLATE"===Xo||"EMPTY_CONFIG"===Xo)&&(tl={}),304!==di&&200!==di)throw Lr.create("fetch-status",{httpStatus:di});return{status:di,eTag:Oc,config:tl}})()}}class at{constructor(G,te){this.client=G,this.storage=te}fetch(G){var te=this;return(0,W.Z)(function*(){const Be=(yield te.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return te.attemptFetch(G,Be)})()}attemptFetch(G,{throttleEndTimeMillis:te,backoffCount:Be}){var mt=this;return(0,W.Z)(function*(){yield function mr($,G){return new Promise((te,Be)=>{const mt=Math.max(G-Date.now(),0),Nt=setTimeout(te,mt);$.addEventListener(()=>{clearTimeout(Nt),Be(Lr.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}(G.signal,te);try{const Nt=yield mt.client.fetch(G);return yield mt.storage.deleteThrottleMetadata(),Nt}catch(Nt){if(!function Je($){if(!($ instanceof Ae.ZR&&$.customData))return!1;const G=Number($.customData.httpStatus);return 429===G||500===G||503===G||504===G}(Nt))throw Nt;const qt={throttleEndTimeMillis:Date.now()+(0,Ae.$s)(Be),backoffCount:Be+1};return yield mt.storage.setThrottleMetadata(qt),mt.attemptFetch(G,qt)}})()}}class tn{constructor(G,te,Be,mt,Nt){this.app=G,this._client=te,this._storageCache=Be,this._storage=mt,this._logger=Nt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _n($,G){var te;const Be=$.target.error||void 0;return Lr.create(G,{originalErrorMessage:Be&&(null===(te=Be)||void 0===te?void 0:te.message)})}const or="app_namespace_store";class _i{constructor(G,te,Be,mt=function Es(){return new Promise(($,G)=>{var te;try{const Be=indexedDB.open("firebase_remote_config",1);Be.onerror=mt=>{G(_n(mt,"storage-open"))},Be.onsuccess=mt=>{$(mt.target.result)},Be.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(or,{keyPath:"compositeKey"})}}catch(Be){G(Lr.create("storage-open",{originalErrorMessage:null===(te=Be)||void 0===te?void 0:te.message}))}})}()){this.appId=G,this.appName=te,this.namespace=Be,this.openDbPromise=mt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(G){return this.set("last_fetch_status",G)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(G){return this.set("last_successful_fetch_timestamp_millis",G)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(G){return this.set("last_successful_fetch_response",G)}getActiveConfig(){return this.get("active_config")}setActiveConfig(G){return this.set("active_config",G)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(G){return this.set("active_config_etag",G)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(G){return this.set("throttle_metadata",G)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(G){var te=this;return(0,W.Z)(function*(){const Be=yield te.openDbPromise;return new Promise((mt,Nt)=>{var qt;const zn=Be.transaction([or],"readonly").objectStore(or),Sr=te.createCompositeKey(G);try{const lr=zn.get(Sr);lr.onerror=vr=>{Nt(_n(vr,"storage-get"))},lr.onsuccess=vr=>{const ss=vr.target.result;mt(ss?ss.value:void 0)}}catch(lr){Nt(Lr.create("storage-get",{originalErrorMessage:null===(qt=lr)||void 0===qt?void 0:qt.message}))}})})()}set(G,te){var Be=this;return(0,W.Z)(function*(){const mt=yield Be.openDbPromise;return new Promise((Nt,qt)=>{var In;const Sr=mt.transaction([or],"readwrite").objectStore(or),lr=Be.createCompositeKey(G);try{const vr=Sr.put({compositeKey:lr,value:te});vr.onerror=ss=>{qt(_n(ss,"storage-set"))},vr.onsuccess=()=>{Nt()}}catch(vr){qt(Lr.create("storage-set",{originalErrorMessage:null===(In=vr)||void 0===In?void 0:In.message}))}})})()}delete(G){var te=this;return(0,W.Z)(function*(){const Be=yield te.openDbPromise;return new Promise((mt,Nt)=>{var qt;const zn=Be.transaction([or],"readwrite").objectStore(or),Sr=te.createCompositeKey(G);try{const lr=zn.delete(Sr);lr.onerror=vr=>{Nt(_n(vr,"storage-delete"))},lr.onsuccess=()=>{mt()}}catch(lr){Nt(Lr.create("storage-delete",{originalErrorMessage:null===(qt=lr)||void 0===qt?void 0:qt.message}))}})})()}createCompositeKey(G){return[this.appId,this.appName,this.namespace,G].join()}}class Zi{constructor(G){this.storage=G}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var G=this;return(0,W.Z)(function*(){const te=G.storage.getLastFetchStatus(),Be=G.storage.getLastSuccessfulFetchTimestampMillis(),mt=G.storage.getActiveConfig(),Nt=yield te;Nt&&(G.lastFetchStatus=Nt);const qt=yield Be;qt&&(G.lastSuccessfulFetchTimestampMillis=qt);const In=yield mt;In&&(G.activeConfig=In)})()}setLastFetchStatus(G){return this.lastFetchStatus=G,this.storage.setLastFetchStatus(G)}setLastSuccessfulFetchTimestampMillis(G){return this.lastSuccessfulFetchTimestampMillis=G,this.storage.setLastSuccessfulFetchTimestampMillis(G)}setActiveConfig(G){return this.activeConfig=G,this.storage.setActiveConfig(G)}}function Wi(){return ra.apply(this,arguments)}function ra(){return(ra=(0,W.Z)(function*(){if(!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch($){return!1}})).apply(this,arguments)}!function ls(){(0,Oe._registerComponent)(new Se.wA("remote-config",function $(G,{instanceIdentifier:te}){const Be=G.getProvider("app").getImmediate(),mt=G.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Lr.create("registration-window");if(!(0,Ae.hl)())throw Lr.create("indexed-db-unavailable");const{projectId:Nt,apiKey:qt,appId:In}=Be.options;if(!Nt)throw Lr.create("registration-project-id");if(!qt)throw Lr.create("registration-api-key");if(!In)throw Lr.create("registration-app-id");const zn=new _i(In,Be.name,te=te||"firebase"),Sr=new Zi(zn),lr=new me.Yd(gi);lr.logLevel=me.in.ERROR;const vr=new Nr(mt,Oe.SDK_VERSION,te,Nt,qt,In),ss=new at(vr,zn),Co=new Mn(ss,zn,Sr,lr),Ds=new tn(Be,Co,Sr,zn,lr);return function ye($){const G=(0,Ae.m9)($);G._initializePromise||(G._initializePromise=G._storageCache.loadFromStorage().then(()=>{G._isInitializationComplete=!0}))}(Ds),Ds},"PUBLIC").setMultipleInstances(!0)),(0,Oe.registerVersion)(gi,"0.3.15"),(0,Oe.registerVersion)(gi,"0.3.15","esm2017")}();const Vo="/firebase-messaging-sw.js",Xi="/firebase-cloud-messaging-push-scope",Os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",so="google.c.a.c_id",Uo="google.c.a.c_l",us="google.c.a.ts",Is="google.c.a.e";var zs=(()=>{return($=zs||(zs={})).PUSH_RECEIVED="push-received",$.NOTIFICATION_CLICKED="notification-clicked",zs;var $})();function As($){const G=new Uint8Array($);return btoa(String.fromCharCode(...G)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ws($){const te=($+"=".repeat((4-$.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Be=atob(te),mt=new Uint8Array(Be.length);for(let Nt=0;Nt<Be.length;++Nt)mt[Nt]=Be.charCodeAt(Nt);return mt}const ia="fcm_token_details_db",Vi="fcm_token_object_Store";function Ws($){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,W.Z)(function*($){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Nt=>Nt.name).includes(ia))return null;let G=null;return(yield(0,Le.X3)(ia,5,{upgrade:(Be=(0,W.Z)(function*(mt,Nt,qt,In){var zn;if(Nt<2||!mt.objectStoreNames.contains(Vi))return;const Sr=In.objectStore(Vi),lr=yield Sr.index("fcmSenderId").get($);if(yield Sr.clear(),lr)if(2===Nt){const vr=lr;if(!vr.auth||!vr.p256dh||!vr.endpoint)return;G={token:vr.fcmToken,createTime:null!==(zn=vr.createTime)&&void 0!==zn?zn:Date.now(),subscriptionOptions:{auth:vr.auth,p256dh:vr.p256dh,endpoint:vr.endpoint,swScope:vr.swScope,vapidKey:"string"==typeof vr.vapidKey?vr.vapidKey:As(vr.vapidKey)}}}else if(3===Nt){const vr=lr;G={token:vr.fcmToken,createTime:vr.createTime,subscriptionOptions:{auth:As(vr.auth),p256dh:As(vr.p256dh),endpoint:vr.endpoint,swScope:vr.swScope,vapidKey:As(vr.vapidKey)}}}else if(4===Nt){const vr=lr;G={token:vr.fcmToken,createTime:vr.createTime,subscriptionOptions:{auth:As(vr.auth),p256dh:As(vr.p256dh),endpoint:vr.endpoint,swScope:vr.swScope,vapidKey:As(vr.vapidKey)}}}}),function(Nt,qt,In,zn){return Be.apply(this,arguments)})})).close(),yield(0,Le.Lj)(ia),yield(0,Le.Lj)("fcm_vapid_details_db"),yield(0,Le.Lj)("undefined"),xo(G)?G:null;var Be}),Ao.apply(this,arguments)}function xo($){if(!$||!$.subscriptionOptions)return!1;const{subscriptionOptions:G}=$;return"number"==typeof $.createTime&&$.createTime>0&&"string"==typeof $.token&&$.token.length>0&&"string"==typeof G.auth&&G.auth.length>0&&"string"==typeof G.p256dh&&G.p256dh.length>0&&"string"==typeof G.endpoint&&G.endpoint.length>0&&"string"==typeof G.swScope&&G.swScope.length>0&&"string"==typeof G.vapidKey&&G.vapidKey.length>0}const ds="firebase-messaging-store";let Bs=null;function Ji(){return Bs||(Bs=(0,Le.X3)("firebase-messaging-database",1,{upgrade:($,G)=>{0===G&&$.createObjectStore(ds)}})),Bs}function jo($){return fo.apply(this,arguments)}function fo(){return(fo=(0,W.Z)(function*($){const G=po($),Be=yield(yield Ji()).transaction(ds).objectStore(ds).get(G);if(Be)return Be;{const mt=yield Ws($.appConfig.senderId);if(mt)return yield cs($,mt),mt}})).apply(this,arguments)}function cs($,G){return sa.apply(this,arguments)}function sa(){return(sa=(0,W.Z)(function*($,G){const te=po($),mt=(yield Ji()).transaction(ds,"readwrite");return yield mt.objectStore(ds).put(G,te),yield mt.done,G})).apply(this,arguments)}function Za($){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,W.Z)(function*($){const G=po($),Be=(yield Ji()).transaction(ds,"readwrite");yield Be.objectStore(ds).delete(G),yield Be.done})).apply(this,arguments)}function po({appConfig:$}){return $.appId}const si=new Ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ks($,G){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,W.Z)(function*($,G){var te;const Be=yield Ri($),mt=Po(G),Nt={method:"POST",headers:Be,body:JSON.stringify(mt)};let qt;try{qt=yield(yield fetch(Ro($.appConfig),Nt)).json()}catch(In){throw si.create("token-subscribe-failed",{errorInfo:null===(te=In)||void 0===te?void 0:te.toString()})}if(qt.error)throw si.create("token-subscribe-failed",{errorInfo:qt.error.message});if(!qt.token)throw si.create("token-subscribe-no-token");return qt.token})).apply(this,arguments)}function Bi($,G){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,W.Z)(function*($,G){var te;const Be=yield Ri($),mt=Po(G.subscriptionOptions),Nt={method:"PATCH",headers:Be,body:JSON.stringify(mt)};let qt;try{qt=yield(yield fetch(`${Ro($.appConfig)}/${G.token}`,Nt)).json()}catch(In){throw si.create("token-update-failed",{errorInfo:null===(te=In)||void 0===te?void 0:te.toString()})}if(qt.error)throw si.create("token-update-failed",{errorInfo:qt.error.message});if(!qt.token)throw si.create("token-update-no-token");return qt.token})).apply(this,arguments)}function es($,G){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,W.Z)(function*($,G){var te;const mt={method:"DELETE",headers:yield Ri($)};try{const qt=yield(yield fetch(`${Ro($.appConfig)}/${G}`,mt)).json();if(qt.error)throw si.create("token-unsubscribe-failed",{errorInfo:qt.error.message})}catch(Nt){throw si.create("token-unsubscribe-failed",{errorInfo:null===(te=Nt)||void 0===te?void 0:te.toString()})}})).apply(this,arguments)}function Ro({projectId:$}){return`https://fcmregistrations.googleapis.com/v1/projects/${$}/registrations`}function Ri($){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,W.Z)(function*({appConfig:$,installations:G}){const te=yield G.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$.apiKey,"x-goog-firebase-installations-auth":`FIS ${te}`})})).apply(this,arguments)}function Po({p256dh:$,auth:G,endpoint:te,vapidKey:Be}){const mt={web:{endpoint:te,auth:G,p256dh:$}};return Be!==Os&&(mt.web.applicationPubKey=Be),mt}const ao=6048e5;function ts($){return C.apply(this,arguments)}function C(){return(C=(0,W.Z)(function*($){const G=yield Dn($.swRegistration,$.vapidKey),te={vapidKey:$.vapidKey,swScope:$.swRegistration.scope,endpoint:G.endpoint,auth:As(G.getKey("auth")),p256dh:As(G.getKey("p256dh"))},Be=yield jo($.firebaseDependencies);if(Be){if(Yr(Be.subscriptionOptions,te))return Date.now()>=Be.createTime+ao?U($,{token:Be.token,createTime:Date.now(),subscriptionOptions:te}):Be.token;try{yield es($.firebaseDependencies,Be.token)}catch(mt){console.warn(mt)}return Tt($.firebaseDependencies,te)}return Tt($.firebaseDependencies,te)})).apply(this,arguments)}function z($){return w.apply(this,arguments)}function w(){return(w=(0,W.Z)(function*($){const G=yield jo($.firebaseDependencies);G&&(yield es($.firebaseDependencies,G.token),yield Za($.firebaseDependencies));const te=yield $.swRegistration.pushManager.getSubscription();return!te||te.unsubscribe()})).apply(this,arguments)}function U($,G){return pe.apply(this,arguments)}function pe(){return(pe=(0,W.Z)(function*($,G){try{const te=yield Bi($.firebaseDependencies,G),Be=Object.assign(Object.assign({},G),{token:te,createTime:Date.now()});return yield cs($.firebaseDependencies,Be),te}catch(te){throw yield z($),te}})).apply(this,arguments)}function Tt($,G){return fn.apply(this,arguments)}function fn(){return(fn=(0,W.Z)(function*($,G){const Be={token:yield Ks($,G),createTime:Date.now(),subscriptionOptions:G};return yield cs($,Be),Be.token})).apply(this,arguments)}function Dn($,G){return yr.apply(this,arguments)}function yr(){return(yr=(0,W.Z)(function*($,G){return(yield $.pushManager.getSubscription())||$.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ws(G)})})).apply(this,arguments)}function Yr($,G){return G.vapidKey===$.vapidKey&&G.endpoint===$.endpoint&&G.auth===$.auth&&G.p256dh===$.p256dh}function ln($){const G={from:$.from,collapseKey:$.collapse_key,messageId:$.fcmMessageId};return function ti($,G){if(!G.notification)return;$.notification={};const te=G.notification.title;te&&($.notification.title=te);const Be=G.notification.body;Be&&($.notification.body=Be);const mt=G.notification.image;mt&&($.notification.image=mt);const Nt=G.notification.icon;Nt&&($.notification.icon=Nt)}(G,$),function H($,G){!G.data||($.data=G.data)}(G,$),function B($,G){var te,Be,mt,Nt,qt;if(!(G.fcmOptions||null!==(te=G.notification)&&void 0!==te&&te.click_action))return;$.fcmOptions={};const In=null!==(mt=null===(Be=G.fcmOptions)||void 0===Be?void 0:Be.link)&&void 0!==mt?mt:null===(Nt=G.notification)||void 0===Nt?void 0:Nt.click_action;In&&($.fcmOptions.link=In);const zn=null===(qt=G.fcmOptions)||void 0===qt?void 0:qt.analytics_label;zn&&($.fcmOptions.analyticsLabel=zn)}(G,$),G}function k($){return"object"==typeof $&&!!$&&so in $}function oe($,G){const te=[];for(let Be=0;Be<$.length;Be++)te.push($.charAt(Be)),Be<G.length&&te.push(G.charAt(Be));return te.join("")}function mn($){return si.create("missing-app-config-values",{valueName:$})}oe("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oe("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pi{constructor(G,te,Be){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const mt=function bt($){if(!$||!$.options)throw mn("App Configuration Object");if(!$.name)throw mn("App Name");const G=["projectId","apiKey","appId","messagingSenderId"],{options:te}=$;for(const Be of G)if(!te[Be])throw mn(Be);return{appName:$.name,projectId:te.projectId,apiKey:te.apiKey,appId:te.appId,senderId:te.messagingSenderId}}(G);this.firebaseDependencies={app:G,appConfig:mt,installations:te,analyticsProvider:Be}}_delete(){return Promise.resolve()}}function Yt($){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,W.Z)(function*($){var G;try{$.swRegistration=yield navigator.serviceWorker.register(Vo,{scope:Xi}),$.swRegistration.update().catch(()=>{})}catch(te){throw si.create("failed-service-worker-registration",{browserErrorMessage:null===(G=te)||void 0===G?void 0:G.message})}})).apply(this,arguments)}function Ys($,G){return mo.apply(this,arguments)}function mo(){return(mo=(0,W.Z)(function*($,G){if(!G&&!$.swRegistration&&(yield Yt($)),G||!$.swRegistration){if(!(G instanceof ServiceWorkerRegistration))throw si.create("invalid-sw-registration");$.swRegistration=G}})).apply(this,arguments)}function ui($,G){return Go.apply(this,arguments)}function Go(){return(Go=(0,W.Z)(function*($,G){G?$.vapidKey=G:$.vapidKey||($.vapidKey=Os)})).apply(this,arguments)}function qs(){return(qs=(0,W.Z)(function*($,G){if(!navigator)throw si.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw si.create("permission-blocked");return yield ui($,null==G?void 0:G.vapidKey),yield Ys($,null==G?void 0:G.serviceWorkerRegistration),ts($)})).apply(this,arguments)}function oa($,G,te){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,W.Z)(function*($,G,te){const Be=Ia(G);(yield $.firebaseDependencies.analyticsProvider.get()).logEvent(Be,{message_id:te[so],message_name:te[Uo],message_time:te[us],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ia($){switch($){case zs.NOTIFICATION_CLICKED:return"notification_open";case zs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wa(){return(wa=(0,W.Z)(function*($,G){const te=G.data;if(!te.isFirebaseMessaging)return;$.onMessageHandler&&te.messageType===zs.PUSH_RECEIVED&&("function"==typeof $.onMessageHandler?$.onMessageHandler(ln(te)):$.onMessageHandler.next(ln(te)));const Be=te.data;k(Be)&&"1"===Be[Is]&&(yield oa($,te.messageType,Be))})).apply(this,arguments)}const Zs="@firebase/messaging",zo=$=>{const G=new Pi($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),$.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",te=>function Oo($,G){return wa.apply(this,arguments)}(G,te)),G},Qs=$=>{const G=$.getProvider("messaging").getImmediate();return{getToken:Be=>function $s($,G){return qs.apply(this,arguments)}(G,Be)}};function Xs(){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,W.Z)(function*(){try{yield(0,Ae.eu)()}catch($){return!1}return typeof window<"u"&&(0,Ae.hl)()&&(0,Ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lo(){(0,Oe._registerComponent)(new Se.wA("messaging",zo,"PUBLIC")),(0,Oe._registerComponent)(new Se.wA("messaging-internal",Qs,"PRIVATE")),(0,Oe.registerVersion)(Zs,"0.11.0"),(0,Oe.registerVersion)(Zs,"0.11.0","esm2017")}();const vo="analytics",No="firebase_id",_o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oa="https://www.googletagmanager.com/gtag/js",Ui=new me.Yd("@firebase/analytics");function O($){return Promise.all($.map(G=>G.catch(te=>te)))}function Q($,G){const te=document.createElement("script");te.src=`${Oa}?l=${$}&id=${G}`,te.async=!0,document.head.appendChild(te)}function se($,G,te,Be,mt,Nt){return Me.apply(this,arguments)}function Me(){return(Me=(0,W.Z)(function*($,G,te,Be,mt,Nt){const qt=Be[mt];try{if(qt)yield G[qt];else{const zn=(yield O(te)).find(Sr=>Sr.measurementId===mt);zn&&(yield G[zn.appId])}}catch(In){Ui.error(In)}$("config",mt,Nt)})).apply(this,arguments)}function Ft($,G,te,Be,mt){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,W.Z)(function*($,G,te,Be,mt){try{let Nt=[];if(mt&&mt.send_to){let qt=mt.send_to;Array.isArray(qt)||(qt=[qt]);const In=yield O(te);for(const zn of qt){const Sr=In.find(vr=>vr.measurementId===zn),lr=Sr&&G[Sr.appId];if(!lr){Nt=[];break}Nt.push(lr)}}0===Nt.length&&(Nt=Object.values(G)),yield Promise.all(Nt),$("event",Be,mt||{})}catch(Nt){Ui.error(Nt)}})).apply(this,arguments)}function kr($){const G=window.document.getElementsByTagName("script");for(const te of Object.values(G))if(te.src&&te.src.includes(Oa)&&te.src.includes($))return te;return null}const Zn=new Ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xt=new class Ii{constructor(G={},te=1e3){this.throttleMetadata=G,this.intervalMillis=te}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,te){this.throttleMetadata[G]=te}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function mi($){return new Headers({Accept:"application/json","x-goog-api-key":$})}function Fi($){return hs.apply(this,arguments)}function hs(){return(hs=(0,W.Z)(function*($){var G;const{appId:te,apiKey:Be}=$,mt={method:"GET",headers:mi(Be)},Nt=_o.replace("{app-id}",te),qt=yield fetch(Nt,mt);if(200!==qt.status&&304!==qt.status){let In="";try{const zn=yield qt.json();null!==(G=zn.error)&&void 0!==G&&G.message&&(In=zn.error.message)}catch(zn){}throw Zn.create("config-fetch-failed",{httpStatus:qt.status,responseMessage:In})}return qt.json()})).apply(this,arguments)}function pn($){return sr.apply(this,arguments)}function sr(){return(sr=(0,W.Z)(function*($,G=Xt,te){const{appId:Be,apiKey:mt,measurementId:Nt}=$.options;if(!Be)throw Zn.create("no-app-id");if(!mt){if(Nt)return{measurementId:Nt,appId:Be};throw Zn.create("no-api-key")}const qt=G.getThrottleMetadata(Be)||{backoffCount:0,throttleEndTimeMillis:Date.now()},In=new xs;return setTimeout((0,W.Z)(function*(){In.abort()}),void 0!==te?te:6e4),Fo({appId:Be,apiKey:mt,measurementId:Nt},qt,In,G)})).apply(this,arguments)}function Fo($,G,te){return En.apply(this,arguments)}function En(){return(En=(0,W.Z)(function*($,{throttleEndTimeMillis:G,backoffCount:te},Be,mt=Xt){var Nt,qt;const{appId:In,measurementId:zn}=$;try{yield Lt(Be,G)}catch(Sr){if(zn)return Ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${zn} provided in the "measurementId" field in the local Firebase config. [${null===(Nt=Sr)||void 0===Nt?void 0:Nt.message}]`),{appId:In,measurementId:zn};throw Sr}try{const Sr=yield Fi($);return mt.deleteThrottleMetadata(In),Sr}catch(Sr){const lr=Sr;if(!Jt(lr)){if(mt.deleteThrottleMetadata(In),zn)return Ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${zn} provided in the "measurementId" field in the local Firebase config. [${null==lr?void 0:lr.message}]`),{appId:In,measurementId:zn};throw Sr}const vr=503===Number(null===(qt=null==lr?void 0:lr.customData)||void 0===qt?void 0:qt.httpStatus)?(0,Ae.$s)(te,mt.intervalMillis,30):(0,Ae.$s)(te,mt.intervalMillis),ss={throttleEndTimeMillis:Date.now()+vr,backoffCount:te+1};return mt.setThrottleMetadata(In,ss),Ui.debug(`Calling attemptFetch again in ${vr} millis`),Fo($,ss,Be,mt)}})).apply(this,arguments)}function Lt($,G){return new Promise((te,Be)=>{const mt=Math.max(G-Date.now(),0),Nt=setTimeout(te,mt);$.addEventListener(()=>{clearTimeout(Nt),Be(Zn.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}function Jt($){if(!($ instanceof Ae.ZR&&$.customData))return!1;const G=Number($.customData.httpStatus);return 429===G||500===G||503===G||504===G}class xs{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let gl,fr;function la(){return(la=(0,W.Z)(function*($,G,te,Be,mt){if(mt&&mt.global)$("event",te,Be);else{const Nt=yield G;$("event",te,Object.assign(Object.assign({},Be),{send_to:Nt}))}})).apply(this,arguments)}function ll($){fr=$}function xl($){gl=$}function ji(){return pr.apply(this,arguments)}function pr(){return(pr=(0,W.Z)(function*(){var $;if(!(0,Ae.hl)())return Ui.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ae.eu)()}catch(G){return Ui.warn(Zn.create("indexeddb-unavailable",{errorInfo:null===($=G)||void 0===$?void 0:$.toString()}).message),!1}return!0})).apply(this,arguments)}function Jr(){return(Jr=(0,W.Z)(function*($,G,te,Be,mt,Nt,qt){var In;const zn=pn($);zn.then(Co=>{te[Co.measurementId]=Co.appId,$.options.measurementId&&Co.measurementId!==$.options.measurementId&&Ui.warn(`The measurement ID in the local Firebase config (${$.options.measurementId}) does not match the measurement ID fetched from the server (${Co.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Co=>Ui.error(Co)),G.push(zn);const Sr=ji().then(Co=>{if(Co)return Be.getId()}),[lr,vr]=yield Promise.all([zn,Sr]);kr(Nt)||Q(Nt,lr.measurementId),fr&&(mt("consent","default",fr),ll(void 0)),mt("js",new Date);const ss=null!==(In=null==qt?void 0:qt.config)&&void 0!==In?In:{};return ss.origin="firebase",ss.update=!0,null!=vr&&(ss[No]=vr),mt("config",lr.measurementId,ss),gl&&(mt("set",gl),xl(void 0)),lr.measurementId})).apply(this,arguments)}class Cs{constructor(G){this.app=G}_delete(){return delete wi[this.app.options.appId],Promise.resolve()}}let wi={},gn=[];const Fa={};let Cu,Yo,Ca="dataLayer",Io=!1;function Ta($,G,te){!function Du(){const $=[];if((0,Ae.ru)()&&$.push("This is a browser extension environment."),(0,Ae.zI)()||$.push("Cookies are not available."),$.length>0){const G=$.map((Be,mt)=>`(${mt+1}) ${Be}`).join(" "),te=Zn.create("invalid-analytics-context",{errorInfo:G});Ui.warn(te.message)}}();const Be=$.options.appId;if(!Be)throw Zn.create("no-app-id");if(!$.options.apiKey){if(!$.options.measurementId)throw Zn.create("no-api-key");Ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${$.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wi[Be])throw Zn.create("already-exists",{id:Be});if(!Io){!function F($){let G=[];Array.isArray(window[$])?G=window[$]:window[$]=G}(Ca);const{wrappedGtag:Nt,gtagCore:qt}=function qr($,G,te,Be,mt){let Nt=function(...qt){window[Be].push(arguments)};return window[mt]&&"function"==typeof window[mt]&&(Nt=window[mt]),window[mt]=function On($,G,te,Be){function Nt(){return(Nt=(0,W.Z)(function*(qt,In,zn){try{"event"===qt?yield Ft($,G,te,In,zn):"config"===qt?yield se($,G,te,Be,In,zn):"consent"===qt?$("consent","update",zn):$("set",In)}catch(Sr){Ui.error(Sr)}})).apply(this,arguments)}return function mt(qt,In,zn){return Nt.apply(this,arguments)}}(Nt,$,G,te),{gtagCore:Nt,wrappedGtag:window[mt]}}(wi,gn,Fa,Ca,"gtag");Yo=Nt,Cu=qt,Io=!0}return wi[Be]=function Ms($,G,te,Be,mt,Nt,qt){return Jr.apply(this,arguments)}($,gn,Fa,G,Cu,Ca,te),new Cs($)}function $a(){return ul.apply(this,arguments)}function ul(){return(ul=(0,W.Z)(function*(){if((0,Ae.ru)()||!(0,Ae.zI)()||!(0,Ae.hl)())return!1;try{return yield(0,Ae.eu)()}catch($){return!1}})).apply(this,arguments)}const wo="@firebase/analytics";!function bo(){(0,Oe._registerComponent)(new Se.wA(vo,(G,{options:te})=>Ta(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),te),"PUBLIC")),(0,Oe._registerComponent)(new Se.wA("analytics-internal",function $(G){try{const te=G.getProvider(vo).getImmediate();return{logEvent:(Be,mt,Nt)=>function tu($,G,te,Be){$=(0,Ae.m9)($),function wu($,G,te,Be,mt){return la.apply(this,arguments)}(Yo,wi[$.app.options.appId],G,te,Be).catch(mt=>Ui.error(mt))}(te,Be,mt,Nt)}}catch(te){throw Zn.create("interop-component-reg-failed",{reason:te})}},"PRIVATE")),(0,Oe.registerVersion)(wo,"0.8.4"),(0,Oe.registerVersion)(wo,"0.8.4","esm2017")}();var yl=V(4408),Qo=V(7565);const Ns=new class Tu extends Qo.v{}(class Ml extends yl.o{constructor(G,te){super(G,te),this.scheduler=G,this.work=te}schedule(G,te=0){return te>0?super.schedule(G,te):(this.delay=te,this.state=G,this.scheduler.flush(this),this)}execute(G,te){return te>0||this.closed?super.execute(G,te):this._execute(G,te)}requestAsyncId(G,te,Be=0){return null!=Be&&Be>0||null==Be&&this.delay>0?super.requestAsyncId(G,te,Be):(G.flush(this),0)}});var ua=V(4986),vl=V(8505),Oi=V(5363),ci=V(9468);const br=new c.GfV("7.5.0"),Kn="__angularfire_symbol__analyticsIsSupportedValue",Aa="__angularfire_symbol__analyticsIsSupported",Ur="__angularfire_symbol__remoteConfigIsSupportedValue",Vs="__angularfire_symbol__remoteConfigIsSupported",Rc="__angularfire_symbol__messagingIsSupportedValue",T="__angularfire_symbol__messagingIsSupported";function ne($,G,te){if(G){if(1===G.length)return G[0];const Nt=G.filter(qt=>qt.app===te);if(1===Nt.length)return Nt[0]}return te.container.getProvider($).getImmediate({optional:!0})}globalThis[Aa]||(globalThis[Aa]=$a().then($=>globalThis[Kn]=$).catch(()=>globalThis[Kn]=!1)),globalThis[T]||(globalThis[T]=Xs().then($=>globalThis[Rc]=$).catch(()=>globalThis[Rc]=!1)),globalThis[Vs]||(globalThis[Vs]=Wi().then($=>globalThis[Ur]=$).catch(()=>globalThis[Ur]=!1));const ue=($,G)=>{const te=G?[G]:(0,X.C6)(),Be=[];return te.forEach(mt=>{mt.container.getProvider($).instances.forEach(qt=>{Be.includes(qt)||Be.push(qt)})}),Be};function nt(){}class Ot{constructor(G,te=Ns){this.zone=G,this.delegate=te}now(){return this.delegate.now()}schedule(G,te,Be){const mt=this.zone;return this.delegate.schedule(function(qt){mt.runGuarded(()=>{G.apply(this,[qt])})},te,Be)}}class an{constructor(G){this.zone=G,this.task=null}call(G,te){const Be=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nt,{},nt,nt)),te.pipe((0,vl.b)({next:Be,complete:Be,error:Be})).subscribe(G).add(Be)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tn=(()=>{class ${constructor(te){this.ngZone=te,this.outsideAngular=te.runOutsideAngular(()=>new Ot(Zone.current)),this.insideAngular=te.run(()=>new Ot(Zone.current,ua.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return $.\u0275fac=function(te){return new(te||$)(c.LFG(c.R0b))},$.\u0275prov=c.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();function kn(){const $=globalThis.\u0275AngularFireScheduler;if(!$)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return $}function is($){return $.pipe((0,Oi.Q)(kn().outsideAngular))}function oi($){return kn(),function Js($){return function(te){return(te=te.lift(new an($.ngZone))).pipe((0,ci.R)($.outsideAngular),(0,Oi.Q)($.insideAngular))}}(kn())($)}},3228:(on,pt,V)=>{"use strict";V.d(pt,{On:()=>He,DM:()=>ze});var X=V(9751),W=V(4968),Oe={error:"cordova_not_available"},Ae={error:"plugin_not_installed"};function Se(ie){if(typeof window<"u"&&window.angular){var Ie=window.document,et=window.angular.element(Ie.querySelector("[ng-app]")||Ie.body).injector();if(et)return et.get("$q")(function(We,$e){ie(We,$e)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(We,$e){ie(We,$e)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function me(ie,Pe,Ie,et){void 0===et&&(et={});var Ve,We,$e=Se(function(Ue,Ne){Ve=et.destruct?Ge(ie,Pe,Ie,et,function(){for(var tt=[],_t=0;_t<arguments.length;_t++)tt[_t]=arguments[_t];return Ue(tt)},function(){for(var tt=[],_t=0;_t<arguments.length;_t++)tt[_t]=arguments[_t];return Ne(tt)}):Ge(ie,Pe,Ie,et,Ue,Ne),We=Ne});return Ve&&Ve.error&&($e.catch(function(){}),"function"==typeof We&&We(Ve.error)),$e}function Le(ie,Pe,Ie,et){return void 0===et&&(et={}),Se(function(Ve,We){var $e=Ge(ie,Pe,Ie,et);$e?$e.error?We($e.error):$e.then&&$e.then(Ve).catch(We):We({error:"unexpected_error"})})}function Ke(ie,Pe,Ie,et){return void 0===et&&(et={}),new X.y(function(Ve){var We;return We=et.destruct?Ge(ie,Pe,Ie,et,function(){for(var $e=[],Ue=0;Ue<arguments.length;Ue++)$e[Ue]=arguments[Ue];return Ve.next($e)},function(){for(var $e=[],Ue=0;Ue<arguments.length;Ue++)$e[Ue]=arguments[Ue];return Ve.error($e)}):Ge(ie,Pe,Ie,et,Ve.next.bind(Ve),Ve.error.bind(Ve)),We&&We.error&&(Ve.error(We.error),Ve.complete()),function(){try{if(et.clearFunction)return et.clearWithArgs?Ge(ie,et.clearFunction,Ie,et,Ve.next.bind(Ve),Ve.error.bind(Ve)):Ge(ie,et.clearFunction,[])}catch($e){console.warn("Unable to clear the previous observable watch for",ie.constructor.getPluginName(),Pe),console.warn($e)}}})}function Ce(ie,Pe){return Pe=typeof window<"u"&&Pe?ke(window,Pe):Pe||(typeof window<"u"?window:{}),(0,W.R)(Pe,ie)}function we(ie,Pe,Ie){var et,Ve;"string"==typeof ie?et=ie:(et=ie.constructor.getPluginRef(),Ie=ie.constructor.getPluginName(),Ve=ie.constructor.getPluginInstallName());var We=It(et);return!(!We||Pe&&typeof We[Pe]>"u")||(typeof window>"u"||!window.cordova?(function fe(ie,Pe){typeof process>"u"&&console.warn(Pe?"Native: tried calling "+ie+"."+Pe+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+ie+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(Ie,Pe),Oe):(function De(ie,Pe,Ie){console.warn(Ie?"Native: tried calling "+ie+"."+Ie+", but the "+ie+" plugin is not installed.":"Native: tried accessing the "+ie+" plugin but it's not installed."),Pe&&console.warn("Install the "+ie+" plugin: 'ionic cordova plugin add "+Pe+"'")}(Ie,Ve,Pe),Ae))}function Ge(ie,Pe,Ie,et,Ve,We){void 0===et&&(et={}),Ie=function qe(ie,Pe,Ie,et){if(void 0===Pe&&(Pe={}),Pe.sync)return ie;if("reverse"===Pe.callbackOrder)ie.unshift(et),ie.unshift(Ie);else if("node"===Pe.callbackStyle)ie.push(function(Ue,Ne){Ue?et(Ue):Ie(Ne)});else if("object"===Pe.callbackStyle&&Pe.successName&&Pe.errorName){var Ve={};Ve[Pe.successName]=Ie,Ve[Pe.errorName]=et,ie.push(Ve)}else if(typeof Pe.successIndex<"u"||typeof Pe.errorIndex<"u"){var We=function(){Pe.successIndex>ie.length?ie[Pe.successIndex]=Ie:ie.splice(Pe.successIndex,0,Ie)},$e=function(){Pe.errorIndex>ie.length?ie[Pe.errorIndex]=et:ie.splice(Pe.errorIndex,0,et)};Pe.successIndex>Pe.errorIndex?($e(),We()):(We(),$e())}else ie.push(Ie),ie.push(et);return ie}(Ie,et,Ve,We);var $e=we(ie,Pe);if(!0===$e){var Ue=It(ie.constructor.getPluginRef());return Ue[Pe].apply(Ue,Ie)}return $e}function It(ie){return typeof window<"u"?ke(window,ie):null}function ke(ie,Pe){for(var Ie=Pe.split("."),et=ie,Ve=0;Ve<Ie.length;Ve++){if(!et)return null;et=et[Ie[Ve]]}return et}var He=function(){function ie(){}return ie.installed=function(){return!0===we(this.pluginRef)},ie.getPlugin=function(){return typeof window<"u"?function st(ie,Pe){for(var Ie=Pe.split("."),et=ie,Ve=0;Ve<Ie.length;Ve++){if(!et)return null;et=et[Ie[Ve]]}return et}(window,this.pluginRef):null},ie.getPluginName=function(){return this.pluginName},ie.getPluginRef=function(){return this.pluginRef},ie.getPluginInstallName=function(){return this.plugin},ie.getSupportedPlatforms=function(){return this.platforms},ie.pluginName="",ie.pluginRef="",ie.plugin="",ie.repo="",ie.platforms=[],ie.install="",ie}();function ze(ie,Pe,Ie,et){return function(ie,Pe,Ie){return void 0===Ie&&(Ie={}),function(){for(var et=[],Ve=0;Ve<arguments.length;Ve++)et[Ve]=arguments[Ve];return Ie.sync?Ge(ie,Pe,et,Ie):Ie.observable?Ke(ie,Pe,et,Ie):Ie.eventObservable&&Ie.event?Ce(Ie.event,Ie.element):Ie.otherPromise?Le(ie,Pe,et,Ie):me(ie,Pe,et,Ie)}}(ie,Pe,Ie).apply(this,et)}!function c(){if(typeof process>"u"){var ie=typeof window<"u"?window:{},Ie=Date.now(),et=!1;ie.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-Ie)+" ms"),et=!0}),setTimeout(function(){!et&&ie.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}()},5956:(on,pt,V)=>{"use strict";V.d(pt,{w:()=>Oe});var c=V(655),X=V(3228),W=V(4650),Oe=function(Ae){function Se(){return null!==Ae&&Ae.apply(this,arguments)||this}return(0,c.ZT)(Se,Ae),Se.prototype.vibrate=function(me){return(0,X.DM)(this,"vibrate",{sync:!0},arguments)},Se.pluginName="Vibration",Se.plugin="cordova-plugin-vibration",Se.pluginRef="navigator",Se.repo="https://github.com/apache/cordova-plugin-vibration",Se.platforms=["Android","iOS","Windows"],Se.\u0275fac=function(){var me;return function(Ke){return(me||(me=W.n5z(Se)))(Ke||Se)}}(),Se.\u0275prov=W.Yz7({token:Se,factory:function(me){return Se.\u0275fac(me)}}),Se}(X.On)},2090:(on,pt,V)=>{"use strict";V.d(pt,{$s:()=>vn,BH:()=>We,DV:()=>cr,Dv:()=>_r,G6:()=>it,GJ:()=>Pn,L:()=>Le,LL:()=>tt,Pz:()=>Ve,Sg:()=>$e,UG:()=>ot,UI:()=>Ln,US:()=>Se,Wj:()=>fi,Wl:()=>zt,Yr:()=>st,ZB:()=>we,ZR:()=>Ne,aH:()=>et,b$:()=>De,cI:()=>Ut,dS:()=>wr,eu:()=>ze,g5:()=>W,gK:()=>Er,gQ:()=>Kr,h$:()=>me,hl:()=>He,hu:()=>X,jU:()=>It,lb:()=>ki,m9:()=>Vn,ne:()=>Dr,p$:()=>Ce,pd:()=>Vr,r3:()=>hn,ru:()=>ke,tV:()=>Ke,uI:()=>Ge,ug:()=>bi,vZ:()=>jn,w1:()=>q,w9:()=>qn,xO:()=>ii,xb:()=>Mr,z$:()=>qe,zI:()=>re,zd:()=>Rr});const X=function(Ye,Fe){if(!Ye)throw W(Fe)},W=function(Ye){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ye)},Oe=function(Ye){const Fe=[];let Qe=0;for(let Ct=0;Ct<Ye.length;Ct++){let Et=Ye.charCodeAt(Ct);Et<128?Fe[Qe++]=Et:Et<2048?(Fe[Qe++]=Et>>6|192,Fe[Qe++]=63&Et|128):55296==(64512&Et)&&Ct+1<Ye.length&&56320==(64512&Ye.charCodeAt(Ct+1))?(Et=65536+((1023&Et)<<10)+(1023&Ye.charCodeAt(++Ct)),Fe[Qe++]=Et>>18|240,Fe[Qe++]=Et>>12&63|128,Fe[Qe++]=Et>>6&63|128,Fe[Qe++]=63&Et|128):(Fe[Qe++]=Et>>12|224,Fe[Qe++]=Et>>6&63|128,Fe[Qe++]=63&Et|128)}return Fe},Se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ye,Fe){if(!Array.isArray(Ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Qe=Fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ct=[];for(let Et=0;Et<Ye.length;Et+=3){const An=Ye[Et],Jn=Et+1<Ye.length,rr=Jn?Ye[Et+1]:0,zr=Et+2<Ye.length,bn=zr?Ye[Et+2]:0;let Re=(15&rr)<<2|bn>>6,Dt=63&bn;zr||(Dt=64,Jn||(Re=64)),Ct.push(Qe[An>>2],Qe[(3&An)<<4|rr>>4],Qe[Re],Qe[Dt])}return Ct.join("")},encodeString(Ye,Fe){return this.HAS_NATIVE_SUPPORT&&!Fe?btoa(Ye):this.encodeByteArray(Oe(Ye),Fe)},decodeString(Ye,Fe){return this.HAS_NATIVE_SUPPORT&&!Fe?atob(Ye):function(Ye){const Fe=[];let Qe=0,Ct=0;for(;Qe<Ye.length;){const Et=Ye[Qe++];if(Et<128)Fe[Ct++]=String.fromCharCode(Et);else if(Et>191&&Et<224){const An=Ye[Qe++];Fe[Ct++]=String.fromCharCode((31&Et)<<6|63&An)}else if(Et>239&&Et<365){const zr=((7&Et)<<18|(63&Ye[Qe++])<<12|(63&Ye[Qe++])<<6|63&Ye[Qe++])-65536;Fe[Ct++]=String.fromCharCode(55296+(zr>>10)),Fe[Ct++]=String.fromCharCode(56320+(1023&zr))}else{const An=Ye[Qe++],Jn=Ye[Qe++];Fe[Ct++]=String.fromCharCode((15&Et)<<12|(63&An)<<6|63&Jn)}}return Fe.join("")}(this.decodeStringToByteArray(Ye,Fe))},decodeStringToByteArray(Ye,Fe){this.init_();const Qe=Fe?this.charToByteMapWebSafe_:this.charToByteMap_,Ct=[];for(let Et=0;Et<Ye.length;){const An=Qe[Ye.charAt(Et++)],rr=Et<Ye.length?Qe[Ye.charAt(Et)]:0;++Et;const bn=Et<Ye.length?Qe[Ye.charAt(Et)]:64;++Et;const je=Et<Ye.length?Qe[Ye.charAt(Et)]:64;if(++Et,null==An||null==rr||null==bn||null==je)throw Error();Ct.push(An<<2|rr>>4),64!==bn&&(Ct.push(rr<<4&240|bn>>2),64!==je&&Ct.push(bn<<6&192|je))}return Ct},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ye=0;Ye<this.ENCODED_VALS.length;Ye++)this.byteToCharMap_[Ye]=this.ENCODED_VALS.charAt(Ye),this.charToByteMap_[this.byteToCharMap_[Ye]]=Ye,this.byteToCharMapWebSafe_[Ye]=this.ENCODED_VALS_WEBSAFE.charAt(Ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ye]]=Ye,Ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ye)]=Ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ye)]=Ye)}}},me=function(Ye){const Fe=Oe(Ye);return Se.encodeByteArray(Fe,!0)},Le=function(Ye){return me(Ye).replace(/\./g,"")},Ke=function(Ye){try{return Se.decodeString(Ye,!0)}catch(Fe){console.error("base64Decode failed: ",Fe)}return null};function Ce(Ye){return we(void 0,Ye)}function we(Ye,Fe){if(!(Fe instanceof Object))return Fe;switch(Fe.constructor){case Date:return new Date(Fe.getTime());case Object:void 0===Ye&&(Ye={});break;case Array:Ye=[];break;default:return Fe}for(const Qe in Fe)!Fe.hasOwnProperty(Qe)||!be(Qe)||(Ye[Qe]=we(Ye[Qe],Fe[Qe]));return Ye}function be(Ye){return"__proto__"!==Ye}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function ot(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ye){return!1}}function It(){return"object"==typeof self&&self.self===self}function ke(){const Ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ye&&void 0!==Ye.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function q(){const Ye=qe();return Ye.indexOf("MSIE ")>=0||Ye.indexOf("Trident/")>=0}function st(){return!1}function it(){return!ot()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){return"object"==typeof indexedDB}function ze(){return new Promise((Ye,Fe)=>{try{let Qe=!0;const Ct="validate-browser-context-for-indexeddb-analytics-module",Et=self.indexedDB.open(Ct);Et.onsuccess=()=>{Et.result.close(),Qe||self.indexedDB.deleteDatabase(Ct),Ye(!0)},Et.onupgradeneeded=()=>{Qe=!1},Et.onerror=()=>{var An;Fe((null===(An=Et.error)||void 0===An?void 0:An.message)||"")}}catch(Qe){Fe(Qe)}})}function re(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ie=()=>{try{return function Ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ye=process.env.__FIREBASE_DEFAULTS__;return Ye?JSON.parse(Ye):void 0})()||(()=>{if(typeof document>"u")return;let Ye;try{Ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Qe){return}const Fe=Ye&&Ke(Ye[1]);return Fe&&JSON.parse(Fe)})()}catch(Ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ye}`)}},et=()=>{var Ye;return null===(Ye=ie())||void 0===Ye?void 0:Ye.config},Ve=Ye=>{var Fe;return null===(Fe=ie())||void 0===Fe?void 0:Fe[`_${Ye}`]};class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Fe,Qe)=>{this.resolve=Fe,this.reject=Qe})}wrapCallback(Fe){return(Qe,Ct)=>{Qe?this.reject(Qe):this.resolve(Ct),"function"==typeof Fe&&(this.promise.catch(()=>{}),1===Fe.length?Fe(Qe):Fe(Qe,Ct))}}}function $e(Ye,Fe){if(Ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ct=Fe||"demo-project",Et=Ye.iat||0,An=Ye.sub||Ye.user_id;if(!An)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Jn=Object.assign({iss:`https://securetoken.google.com/${Ct}`,aud:Ct,iat:Et,exp:Et+3600,auth_time:Et,sub:An,user_id:An,firebase:{sign_in_provider:"custom",identities:{}}},Ye);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(Jn)),""].join(".")}class Ne extends Error{constructor(Fe,Qe,Ct){super(Qe),this.code=Fe,this.customData=Ct,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(Fe,Qe,Ct){this.service=Fe,this.serviceName=Qe,this.errors=Ct}create(Fe,...Qe){const Ct=Qe[0]||{},Et=`${this.service}/${Fe}`,An=this.errors[Fe],Jn=An?function _t(Ye,Fe){return Ye.replace(Kt,(Qe,Ct)=>{const Et=Fe[Ct];return null!=Et?String(Et):`<${Ct}?>`})}(An,Ct):"Error";return new Ne(Et,`${this.serviceName}: ${Jn} (${Et}).`,Ct)}}const Kt=/\{\$([^}]+)}/g;function Ut(Ye){return JSON.parse(Ye)}function zt(Ye){return JSON.stringify(Ye)}const wn=function(Ye){let Fe={},Qe={},Ct={},Et="";try{const An=Ye.split(".");Fe=Ut(Ke(An[0])||""),Qe=Ut(Ke(An[1])||""),Et=An[2],Ct=Qe.d||{},delete Qe.d}catch(An){}return{header:Fe,claims:Qe,data:Ct,signature:Et}},qn=function(Ye){const Qe=wn(Ye).claims;return!!Qe&&"object"==typeof Qe&&Qe.hasOwnProperty("iat")},Pn=function(Ye){const Fe=wn(Ye).claims;return"object"==typeof Fe&&!0===Fe.admin};function hn(Ye,Fe){return Object.prototype.hasOwnProperty.call(Ye,Fe)}function cr(Ye,Fe){if(Object.prototype.hasOwnProperty.call(Ye,Fe))return Ye[Fe]}function Mr(Ye){for(const Fe in Ye)if(Object.prototype.hasOwnProperty.call(Ye,Fe))return!1;return!0}function Ln(Ye,Fe,Qe){const Ct={};for(const Et in Ye)Object.prototype.hasOwnProperty.call(Ye,Et)&&(Ct[Et]=Fe.call(Qe,Ye[Et],Et,Ye));return Ct}function jn(Ye,Fe){if(Ye===Fe)return!0;const Qe=Object.keys(Ye),Ct=Object.keys(Fe);for(const Et of Qe){if(!Ct.includes(Et))return!1;const An=Ye[Et],Jn=Fe[Et];if(Wt(An)&&Wt(Jn)){if(!jn(An,Jn))return!1}else if(An!==Jn)return!1}for(const Et of Ct)if(!Qe.includes(Et))return!1;return!0}function Wt(Ye){return null!==Ye&&"object"==typeof Ye}function ii(Ye){const Fe=[];for(const[Qe,Ct]of Object.entries(Ye))Array.isArray(Ct)?Ct.forEach(Et=>{Fe.push(encodeURIComponent(Qe)+"="+encodeURIComponent(Et))}):Fe.push(encodeURIComponent(Qe)+"="+encodeURIComponent(Ct));return Fe.length?"&"+Fe.join("&"):""}function Rr(Ye){const Fe={};return Ye.replace(/^\?/,"").split("&").forEach(Ct=>{if(Ct){const[Et,An]=Ct.split("=");Fe[decodeURIComponent(Et)]=decodeURIComponent(An)}}),Fe}function Vr(Ye){const Fe=Ye.indexOf("?");if(!Fe)return"";const Qe=Ye.indexOf("#",Fe);return Ye.substring(Fe,Qe>0?Qe:void 0)}class Kr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Fe=1;Fe<this.blockSize;++Fe)this.pad_[Fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Fe,Qe){Qe||(Qe=0);const Ct=this.W_;if("string"==typeof Fe)for(let je=0;je<16;je++)Ct[je]=Fe.charCodeAt(Qe)<<24|Fe.charCodeAt(Qe+1)<<16|Fe.charCodeAt(Qe+2)<<8|Fe.charCodeAt(Qe+3),Qe+=4;else for(let je=0;je<16;je++)Ct[je]=Fe[Qe]<<24|Fe[Qe+1]<<16|Fe[Qe+2]<<8|Fe[Qe+3],Qe+=4;for(let je=16;je<80;je++){const Re=Ct[je-3]^Ct[je-8]^Ct[je-14]^Ct[je-16];Ct[je]=4294967295&(Re<<1|Re>>>31)}let bn,yt,Et=this.chain_[0],An=this.chain_[1],Jn=this.chain_[2],rr=this.chain_[3],zr=this.chain_[4];for(let je=0;je<80;je++){je<40?je<20?(bn=rr^An&(Jn^rr),yt=1518500249):(bn=An^Jn^rr,yt=1859775393):je<60?(bn=An&Jn|rr&(An|Jn),yt=2400959708):(bn=An^Jn^rr,yt=3395469782);const Re=(Et<<5|Et>>>27)+bn+zr+yt+Ct[je]&4294967295;zr=rr,rr=Jn,Jn=4294967295&(An<<30|An>>>2),An=Et,Et=Re}this.chain_[0]=this.chain_[0]+Et&4294967295,this.chain_[1]=this.chain_[1]+An&4294967295,this.chain_[2]=this.chain_[2]+Jn&4294967295,this.chain_[3]=this.chain_[3]+rr&4294967295,this.chain_[4]=this.chain_[4]+zr&4294967295}update(Fe,Qe){if(null==Fe)return;void 0===Qe&&(Qe=Fe.length);const Ct=Qe-this.blockSize;let Et=0;const An=this.buf_;let Jn=this.inbuf_;for(;Et<Qe;){if(0===Jn)for(;Et<=Ct;)this.compress_(Fe,Et),Et+=this.blockSize;if("string"==typeof Fe){for(;Et<Qe;)if(An[Jn]=Fe.charCodeAt(Et),++Jn,++Et,Jn===this.blockSize){this.compress_(An),Jn=0;break}}else for(;Et<Qe;)if(An[Jn]=Fe[Et],++Jn,++Et,Jn===this.blockSize){this.compress_(An),Jn=0;break}}this.inbuf_=Jn,this.total_+=Qe}digest(){const Fe=[];let Qe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Et=this.blockSize-1;Et>=56;Et--)this.buf_[Et]=255&Qe,Qe/=256;this.compress_(this.buf_);let Ct=0;for(let Et=0;Et<5;Et++)for(let An=24;An>=0;An-=8)Fe[Ct]=this.chain_[Et]>>An&255,++Ct;return Fe}}function Dr(Ye,Fe){const Qe=new xn(Ye,Fe);return Qe.subscribe.bind(Qe)}class xn{constructor(Fe,Qe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Qe,this.task.then(()=>{Fe(this)}).catch(Ct=>{this.error(Ct)})}next(Fe){this.forEachObserver(Qe=>{Qe.next(Fe)})}error(Fe){this.forEachObserver(Qe=>{Qe.error(Fe)}),this.close(Fe)}complete(){this.forEachObserver(Fe=>{Fe.complete()}),this.close()}subscribe(Fe,Qe,Ct){let Et;if(void 0===Fe&&void 0===Qe&&void 0===Ct)throw new Error("Missing Observer.");Et=function Bn(Ye,Fe){if("object"!=typeof Ye||null===Ye)return!1;for(const Qe of Fe)if(Qe in Ye&&"function"==typeof Ye[Qe])return!0;return!1}(Fe,["next","error","complete"])?Fe:{next:Fe,error:Qe,complete:Ct},void 0===Et.next&&(Et.next=yi),void 0===Et.error&&(Et.error=yi),void 0===Et.complete&&(Et.complete=yi);const An=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Et.error(this.finalError):Et.complete()}catch(Jn){}}),this.observers.push(Et),An}unsubscribeOne(Fe){void 0===this.observers||void 0===this.observers[Fe]||(delete this.observers[Fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Fe){if(!this.finalized)for(let Qe=0;Qe<this.observers.length;Qe++)this.sendOne(Qe,Fe)}sendOne(Fe,Qe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Fe])try{Qe(this.observers[Fe])}catch(Ct){typeof console<"u"&&console.error&&console.error(Ct)}})}close(Fe){this.finalized||(this.finalized=!0,void 0!==Fe&&(this.finalError=Fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yi(){}const _r=function(Ye,Fe,Qe,Ct){let Et;if(Ct<Fe?Et="at least "+Fe:Ct>Qe&&(Et=0===Qe?"none":"no more than "+Qe),Et)throw new Error(Ye+" failed: Was called with "+Ct+(1===Ct?" argument.":" arguments.")+" Expects "+Et+".")};function Er(Ye,Fe){return`${Ye} failed: ${Fe} argument `}function fi(Ye,Fe,Qe,Ct){if((!Ct||Qe)&&"function"!=typeof Qe)throw new Error(Er(Ye,Fe)+"must be a valid function.")}function ki(Ye,Fe,Qe,Ct){if((!Ct||Qe)&&("object"!=typeof Qe||null===Qe))throw new Error(Er(Ye,Fe)+"must be a valid context object.")}const wr=function(Ye){const Fe=[];let Qe=0;for(let Ct=0;Ct<Ye.length;Ct++){let Et=Ye.charCodeAt(Ct);if(Et>=55296&&Et<=56319){const An=Et-55296;Ct++,X(Ct<Ye.length,"Surrogate pair missing trail surrogate."),Et=65536+(An<<10)+(Ye.charCodeAt(Ct)-56320)}Et<128?Fe[Qe++]=Et:Et<2048?(Fe[Qe++]=Et>>6|192,Fe[Qe++]=63&Et|128):Et<65536?(Fe[Qe++]=Et>>12|224,Fe[Qe++]=Et>>6&63|128,Fe[Qe++]=63&Et|128):(Fe[Qe++]=Et>>18|240,Fe[Qe++]=Et>>12&63|128,Fe[Qe++]=Et>>6&63|128,Fe[Qe++]=63&Et|128)}return Fe},bi=function(Ye){let Fe=0;for(let Qe=0;Qe<Ye.length;Qe++){const Ct=Ye.charCodeAt(Qe);Ct<128?Fe++:Ct<2048?Fe+=2:Ct>=55296&&Ct<=56319?(Fe+=4,Qe++):Fe+=3}return Fe};function vn(Ye,Fe=1e3,Qe=2){const Ct=Fe*Math.pow(Qe,Ye),Et=Math.round(.5*Ct*(Math.random()-.5)*2);return Math.min(144e5,Ct+Et)}function Vn(Ye){return Ye&&Ye._delegate?Ye._delegate:Ye}},8779:(on,pt,V)=>{"use strict";V.d(pt,{dr:()=>Rr,oU:()=>Kr,cs:()=>Vi,YG:()=>yi,Sm:()=>_r,PM:()=>Er,FN:()=>Gr,Zi:()=>fi,tO:()=>ki,Dq:()=>wr,wI:()=>Wn,W2:()=>Ar,jY:()=>Ye,Gu:()=>Fe,gu:()=>Qe,pK:()=>Jn,Ie:()=>rr,Q$:()=>Dt,q_:()=>Mt,z0:()=>nr,fG:()=>Fr,zc:()=>ei,jP:()=>ws,Nd:()=>Ai,VI:()=>cn,t9:()=>xi,n0:()=>Di,PQ:()=>lt,wd:()=>Pt,sr:()=>Mn,Pc:()=>ts,r4:()=>Ri,IN:()=>Ks,as:()=>tr,YI:()=>Ao,QI:()=>Pn,j9:()=>hn,yF:()=>Bi});var c=V(4650),X=V(433),W=V(655),Oe=V(4968),Ae=V(7579),Se=V(1135),me=V(2435),be=(V(8834),V(3953),V(3880),V(1911),V(9658)),qe=V(5730),Ge=V(697),It=(V(4292),V(4414)),fe=(V(3457),V(4349),V(1308)),ze=V(9300),re=V(3900),Ze=V(1884),ce=V(6895);const ve=be.i,Ie=["*"],Ne=C=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(C):"function"==typeof requestAnimationFrame?requestAnimationFrame(C):setTimeout(C),tt=C=>!!C.resolveComponentFactory;let _t=(()=>{class C{constructor(w,U){this.injector=w,this.el=U,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(w){this.el.nativeElement.value=this.lastValue=w??"",Kt(this.el)}handleChangeEvent(w,U){w===this.el.nativeElement&&(U!==this.lastValue&&(this.lastValue=U,this.onChange(U)),Kt(this.el))}_handleBlurEvent(w){w===this.el.nativeElement&&(this.onTouched(),Kt(this.el))}registerOnChange(w){this.onChange=w}registerOnTouched(w){this.onTouched=w}setDisabledState(w){this.el.nativeElement.disabled=w}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let w;try{w=this.injector.get(X.a5)}catch(pe){}if(!w)return;w.statusChanges&&(this.statusChanges=w.statusChanges.subscribe(()=>Kt(this.el)));const U=w.control;U&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Tt=>{if(typeof U[Tt]<"u"){const fn=U[Tt].bind(U);U[Tt]=(...Dn)=>{fn(...Dn),Kt(this.el)}}})}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.zs3),c.Y36(c.SBq))},C.\u0275dir=c.lG2({type:C,hostBindings:function(w,U){1&w&&c.NdJ("ionBlur",function(Tt){return U._handleBlurEvent(Tt.target)})}}),C})();const Kt=C=>{Ne(()=>{const z=C.nativeElement,w=null!=z.value&&z.value.toString().length>0,U=Ut(z);zt(z,U);const pe=z.closest("ion-item");pe&&zt(pe,w?[...U,"item-has-value"]:U)})},Ut=C=>{const z=C.classList,w=[];for(let U=0;U<z.length;U++){const pe=z.item(U);null!==pe&&wn(pe,"ng-")&&w.push(`ion-${pe.substring(3)}`)}return w},zt=(C,z)=>{const w=C.classList;w.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),w.add(...z)},wn=(C,z)=>C.substring(0,z.length)===z;let tr=(()=>{class C extends _t{constructor(w,U){super(w,U)}_handleIonChange(w){this.handleChangeEvent(w,w.value)}registerOnChange(w){super.registerOnChange(U=>{w(""===U?null:parseFloat(U))})}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.zs3),c.Y36(c.SBq))},C.\u0275dir=c.lG2({type:C,selectors:[["ion-input","type","number"]],hostBindings:function(w,U){1&w&&c.NdJ("ionChange",function(Tt){return U._handleIonChange(Tt.target)})},features:[c._Bn([{provide:X.JU,useExisting:C,multi:!0}]),c.qOj]}),C})(),Pn=(()=>{class C extends _t{constructor(w,U){super(w,U)}_handleChangeEvent(w){this.handleChangeEvent(w,w.value)}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.zs3),c.Y36(c.SBq))},C.\u0275dir=c.lG2({type:C,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(w,U){1&w&&c.NdJ("ionChange",function(Tt){return U._handleChangeEvent(Tt.target)})},features:[c._Bn([{provide:X.JU,useExisting:C,multi:!0}]),c.qOj]}),C})(),hn=(()=>{class C extends _t{constructor(w,U){super(w,U)}_handleInputEvent(w){this.handleChangeEvent(w,w.value)}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.zs3),c.Y36(c.SBq))},C.\u0275dir=c.lG2({type:C,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(w,U){1&w&&c.NdJ("ionChange",function(Tt){return U._handleInputEvent(Tt.target)})},features:[c._Bn([{provide:X.JU,useExisting:C,multi:!0}]),c.qOj]}),C})();const cr=(C,z)=>{const w=C.prototype;z.forEach(U=>{Object.defineProperty(w,U,{get(){return this.el[U]},set(pe){this.z.runOutsideAngular(()=>this.el[U]=pe)}})})},Mr=(C,z)=>{const w=C.prototype;z.forEach(U=>{w[U]=function(){const pe=arguments;return this.z.runOutsideAngular(()=>this.el[U].apply(this.el,pe))}})},Ln=(C,z,w)=>{w.forEach(U=>C[U]=(0,Oe.R)(z,U))};function Wt(C){return function(w){const{defineCustomElementFn:U,inputs:pe,methods:Tt}=C;return void 0!==U&&U(),pe&&cr(w,pe),Tt&&Mr(w,Tt),w}}let Rr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-app"]],ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0})],C),C})(),Kr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],C),C})(),yi=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],C),C})(),_r=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["collapse"]})],C),C})(),Er=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],C),C})(),Gr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["mode"]})],C),C})(),fi=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],C),C})(),ki=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","mode"]})],C),C})(),wr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","mode"]})],C),C})(),Wn=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],C),C})(),Ar=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],C),C})(),Ye=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["fixed"]})],C),C})(),Fe=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],C),C})(),Qe=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],C),C})(),Jn=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],C),C})(),rr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],C),C})(),Dt=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],C),C})(),Mt=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],C),C})(),nr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],C),C})(),Fr=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["autoHide","color","disabled","menu","mode","type"]})],C),C})(),ei=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-menu-toggle"]],inputs:{autoHide:"autoHide",menu:"menu"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["autoHide","menu"]})],C),C})(),Ai=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-row"]],ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0})],C),C})(),cn=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],C),C})(),xi=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement,Ln(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],C),C})(),Di=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["disabled","value"]})],C),C})(),lt=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-spinner"]],inputs:{color:"color",duration:"duration",name:"name",paused:"paused"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","duration","name","paused"]})],C),C})(),Pt=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","size"]})],C),C})(),Mn=(()=>{let C=class{constructor(w,U,pe){this.z=pe,w.detach(),this.el=U.nativeElement}};return C.\u0275fac=function(w){return new(w||C)(c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(c.R0b))},C.\u0275cmp=c.Xpm({type:C,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ie,decls:1,vars:0,template:function(w,U){1&w&&(c.F$t(),c.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,W.gn)([Wt({defineCustomElementFn:void 0,inputs:["color","mode"]})],C),C})();class Rn{constructor(z={}){this.data=z}get(z){return this.data[z]}}let Nr=(()=>{class C{constructor(w,U){this.zone=w,this.appRef=U}create(w,U,pe){return new mr(w,U,pe,this.appRef,this.zone)}}return C.\u0275fac=function(w){return new(w||C)(c.LFG(c.R0b),c.LFG(c.z2F))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac}),C})();class mr{constructor(z,w,U,pe,Tt){this.resolverOrInjector=z,this.injector=w,this.location=U,this.appRef=pe,this.zone=Tt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(z,w,U,pe){return this.zone.run(()=>new Promise(Tt=>{Tt(Je(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,z,w,U,pe))}))}removeViewFromDom(z,w){return this.zone.run(()=>new Promise(U=>{const pe=this.elRefMap.get(w);if(pe){pe.destroy(),this.elRefMap.delete(w);const Tt=this.elEventsMap.get(w);Tt&&(Tt(),this.elEventsMap.delete(w))}U()}))}}const Je=(C,z,w,U,pe,Tt,fn,Dn,yr,Yr,ln)=>{let ti;const H=c.zs3.create({providers:tn(Yr),parent:w});if(z&&tt(z)){const bt=z.resolveComponentFactory(yr);ti=U?U.createComponent(bt,U.length,H):bt.create(H)}else{if(!U)return null;ti=U.createComponent(yr,{index:U.indexOf,injector:H,environmentInjector:z})}const B=ti.instance,k=ti.location.nativeElement;if(Yr&&Object.assign(B,Yr),ln)for(const bt of ln)k.classList.add(bt);const oe=wt(C,B,k);return Dn.appendChild(k),U||pe.attachView(ti.hostView),ti.changeDetectorRef.reattach(),Tt.set(k,ti),fn.set(k,oe),k},at=[Ge.L,Ge.a,Ge.b,Ge.c,Ge.d],wt=(C,z,w)=>C.run(()=>{const U=at.filter(pe=>"function"==typeof z[pe]).map(pe=>{const Tt=fn=>z[pe](fn.detail);return w.addEventListener(pe,Tt),()=>w.removeEventListener(pe,Tt)});return()=>U.forEach(pe=>pe())}),Gt=new c.OlP("NavParamsToken"),tn=C=>[{provide:Gt,useValue:C},{provide:Rn,useFactory:_n,deps:[Gt]}],_n=C=>new Rn(C),li=(C,z)=>((C=C.filter(w=>w.stackId!==z.stackId)).push(z),C),_i=(C,z)=>{const w=C.createUrlTree(["."],{relativeTo:z});return C.serializeUrl(w)},ls=(C,z)=>{if(!C)return;const w=Mi(z);for(let U=0;U<w.length;U++){if(U>=C.length)return w[U];if(w[U]!==C[U])return}},Mi=C=>C.split("/").map(z=>z.trim()).filter(z=>""!==z),Qi=C=>{C&&(C.ref.destroy(),C.unlistenEvents())};class Wi{constructor(z,w,U,pe,Tt,fn){this.containerEl=w,this.router=U,this.navCtrl=pe,this.zone=Tt,this.location=fn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==z?Mi(z):void 0}createView(z,w){var U;const pe=_i(this.router,w),Tt=null===(U=null==z?void 0:z.location)||void 0===U?void 0:U.nativeElement,fn=wt(this.zone,z.instance,Tt);return{id:this.nextId++,stackId:ls(this.tabsPrefix,pe),unlistenEvents:fn,element:Tt,ref:z,url:pe}}getExistingView(z){const w=_i(this.router,z),U=this.views.find(pe=>pe.url===w);return U&&U.ref.changeDetectorRef.reattach(),U}setActive(z){var w,U;const pe=this.navCtrl.consumeTransition();let{direction:Tt,animation:fn,animationBuilder:Dn}=pe;const yr=this.activeView,Yr=((C,z)=>!z||C.stackId!==z.stackId)(z,yr);Yr&&(Tt="back",fn=void 0);const ln=this.views.slice();let ti;const H=this.router;H.getCurrentNavigation?ti=H.getCurrentNavigation():!(null===(w=H.navigations)||void 0===w)&&w.value&&(ti=H.navigations.value),null!==(U=null==ti?void 0:ti.extras)&&void 0!==U&&U.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const B=this.views.includes(z),k=this.insertView(z,Tt);B||z.ref.changeDetectorRef.detectChanges();const oe=z.animationBuilder;return void 0===Dn&&"back"===Tt&&!Yr&&void 0!==oe&&(Dn=oe),yr&&(yr.animationBuilder=Dn),this.zone.runOutsideAngular(()=>this.wait(()=>(yr&&yr.ref.changeDetectorRef.detach(),z.ref.changeDetectorRef.reattach(),this.transition(z,yr,fn,this.canGoBack(1),!1,Dn).then(()=>ra(z,k,ln,this.location,this.zone)).then(()=>({enteringView:z,direction:Tt,animation:fn,tabSwitch:Yr})))))}canGoBack(z,w=this.getActiveStackId()){return this.getStack(w).length>z}pop(z,w=this.getActiveStackId()){return this.zone.run(()=>{var U,pe;const Tt=this.getStack(w);if(Tt.length<=z)return Promise.resolve(!1);const fn=Tt[Tt.length-z-1];let Dn=fn.url;const yr=fn.savedData;if(yr){const ln=yr.get("primary");null!==(pe=null===(U=null==ln?void 0:ln.route)||void 0===U?void 0:U._routerState)&&void 0!==pe&&pe.snapshot.url&&(Dn=ln.route._routerState.snapshot.url)}const{animationBuilder:Yr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Dn,Object.assign(Object.assign({},fn.savedExtras),{animation:Yr})).then(()=>!0)})}startBackTransition(){const z=this.activeView;if(z){const w=this.getStack(z.stackId),U=w[w.length-2],pe=U.animationBuilder;return this.wait(()=>this.transition(U,z,"back",this.canGoBack(2),!0,pe))}return Promise.resolve()}endBackTransition(z){z?(this.skipTransition=!0,this.pop(1)):this.activeView&&Vo(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(z){const w=this.getStack(z);return w.length>0?w[w.length-1]:void 0}getRootUrl(z){const w=this.getStack(z);return w.length>0?w[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Qi),this.activeView=void 0,this.views=[]}getStack(z){return this.views.filter(w=>w.stackId===z)}insertView(z,w){return this.activeView=z,this.views=((C,z,w)=>"root"===w?li(C,z):"forward"===w?((C,z)=>(C.indexOf(z)>=0?C=C.filter(U=>U.stackId!==z.stackId||U.id<=z.id):C.push(z),C))(C,z):((C,z)=>C.indexOf(z)>=0?C.filter(U=>U.stackId!==z.stackId||U.id<=z.id):li(C,z))(C,z))(this.views,z,w),this.views.slice()}transition(z,w,U,pe,Tt,fn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(w===z)return Promise.resolve(!1);const Dn=z?z.element:void 0,yr=w?w.element:void 0,Yr=this.containerEl;return Dn&&Dn!==yr&&(Dn.classList.add("ion-page"),Dn.classList.add("ion-page-invisible"),Dn.parentElement!==Yr&&Yr.appendChild(Dn),Yr.commit)?Yr.commit(Dn,yr,{deepWait:!0,duration:void 0===U?0:void 0,direction:U,showGoBack:pe,progressAnimation:Tt,animationBuilder:fn}):Promise.resolve(!1)}wait(z){return(0,W.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const w=this.runningTask=z();return w.finally(()=>this.runningTask=void 0),w})}}const ra=(C,z,w,U,pe)=>"function"==typeof requestAnimationFrame?new Promise(Tt=>{requestAnimationFrame(()=>{Vo(C,z,w,U,pe),Tt()})}):Promise.resolve(),Vo=(C,z,w,U,pe)=>{pe.run(()=>w.filter(Tt=>!z.includes(Tt)).forEach(Qi)),z.forEach(Tt=>{const Dn=U.path().split("?")[0].split("#")[0];if(Tt!==C&&Tt.url!==Dn){const yr=Tt.element;yr.setAttribute("aria-hidden","true"),yr.classList.add("ion-page-hidden"),Tt.ref.changeDetectorRef.detach()}})};let Xi=(()=>{class C{get(w,U){const pe=Ls();return pe?pe.get(w,U):null}getBoolean(w,U){const pe=Ls();return!!pe&&pe.getBoolean(w,U)}getNumber(w,U){const pe=Ls();return pe?pe.getNumber(w,U):0}}return C.\u0275fac=function(w){return new(w||C)},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Os=new c.OlP("USERCONFIG"),Ls=()=>{if(typeof window<"u"){const C=window.Ionic;if(null!=C&&C.config)return C.config}return null};let so=(()=>{class C{constructor(w,U){this.doc=w,this.backButton=new Ae.x,this.keyboardDidShow=new Ae.x,this.keyboardDidHide=new Ae.x,this.pause=new Ae.x,this.resume=new Ae.x,this.resize=new Ae.x,U.run(()=>{var pe;let Tt;this.win=w.defaultView,this.backButton.subscribeWithPriority=function(fn,Dn){return this.subscribe(yr=>yr.register(fn,Yr=>U.run(()=>Dn(Yr))))},us(this.pause,w,"pause"),us(this.resume,w,"resume"),us(this.backButton,w,"ionBackButton"),us(this.resize,this.win,"resize"),us(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),us(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(fn=>{Tt=fn}),null!==(pe=this.win)&&void 0!==pe&&pe.cordova?w.addEventListener("deviceready",()=>{Tt("cordova")},{once:!0}):Tt("dom")})}is(w){return(0,be.a)(this.win,w)}platforms(){return(0,be.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(w){return Uo(this.win.location.href,w)}isLandscape(){return!this.isPortrait()}isPortrait(){var w,U;return null===(U=(w=this.win).matchMedia)||void 0===U?void 0:U.call(w,"(orientation: portrait)").matches}testUserAgent(w){const U=this.win.navigator;return!!((null==U?void 0:U.userAgent)&&U.userAgent.indexOf(w)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return C.\u0275fac=function(w){return new(w||C)(c.LFG(ce.K0),c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Uo=(C,z)=>{z=z.replace(/[[\]\\]/g,"\\$&");const U=new RegExp("[\\?&]"+z+"=([^&#]*)").exec(C);return U?decodeURIComponent(U[1].replace(/\+/g," ")):null},us=(C,z,w)=>{z&&z.addEventListener(w,U=>{C.next(null!=U?U.detail:void 0)})};let Is=(()=>{class C{constructor(w,U,pe,Tt){this.location=U,this.serializer=pe,this.router=Tt,this.direction=zs,this.animated=As,this.guessDirection="forward",this.lastNavId=-1,Tt&&Tt.events.subscribe(fn=>{if(fn instanceof me.OD){const Dn=fn.restoredState?fn.restoredState.navigationId:fn.id;this.guessDirection=Dn<this.lastNavId?"back":"forward",this.guessAnimation=fn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?fn.id:Dn}}),w.backButton.subscribeWithPriority(0,fn=>{this.pop(),fn()})}navigateForward(w,U={}){return this.setDirection("forward",U.animated,U.animationDirection,U.animation),this.navigate(w,U)}navigateBack(w,U={}){return this.setDirection("back",U.animated,U.animationDirection,U.animation),this.navigate(w,U)}navigateRoot(w,U={}){return this.setDirection("root",U.animated,U.animationDirection,U.animation),this.navigate(w,U)}back(w={animated:!0,animationDirection:"back"}){return this.setDirection("back",w.animated,w.animationDirection,w.animation),this.location.back()}pop(){return(0,W.mG)(this,void 0,void 0,function*(){let w=this.topOutlet;for(;w&&!(yield w.pop());)w=w.parentOutlet})}setDirection(w,U,pe,Tt){this.direction=w,this.animated=Gs(w,U,pe),this.animationBuilder=Tt}setTopOutlet(w){this.topOutlet=w}consumeTransition(){let U,w="root";const pe=this.animationBuilder;return"auto"===this.direction?(w=this.guessDirection,U=this.guessAnimation):(U=this.animated,w=this.direction),this.direction=zs,this.animated=As,this.animationBuilder=void 0,{direction:w,animation:U,animationBuilder:pe}}navigate(w,U){if(Array.isArray(w))return this.router.navigate(w,U);{const pe=this.serializer.parse(w.toString());return void 0!==U.queryParams&&(pe.queryParams=Object.assign({},U.queryParams)),void 0!==U.fragment&&(pe.fragment=U.fragment),this.router.navigateByUrl(pe,U)}}}return C.\u0275fac=function(w){return new(w||C)(c.LFG(so),c.LFG(ce.Ye),c.LFG(me.Hx),c.LFG(me.F0,8))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Gs=(C,z,w)=>{if(!1!==z){if(void 0!==w)return w;if("forward"===C||"back"===C)return C;if("root"===C&&!0===z)return"forward"}},zs="auto",As=void 0;let ws=(()=>{class C{constructor(w,U,pe,Tt,fn,Dn,yr,Yr,ln,ti,H,B,k){this.parentContexts=w,this.location=U,this.config=fn,this.navCtrl=Dn,this.componentFactoryResolver=yr,this.parentOutlet=k,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Se.X(null),this.stackEvents=new c.vpe,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.nativeEl=ln.nativeElement,this.name=pe||me.eC,this.tabsPrefix="true"===Tt?_i(ti,B):void 0,this.stackCtrl=new Wi(this.tabsPrefix,this.nativeEl,ti,Dn,H,Yr),w.onChildOutletCreated(this.name,this)}set animation(w){this.nativeEl.animation=w}set animated(w){this.nativeEl.animated=w}set swipeGesture(w){this._swipeGesture=w,this.nativeEl.swipeHandler=w?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:U=>this.stackCtrl.endBackTransition(U)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const w=this.getContext();null!=w&&w.route&&this.activateWith(w.route,w.resolver||null)}new Promise(w=>(0,qe.c)(this.nativeEl,w)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(w,U){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const U=this.getContext();this.activatedView.savedData=new Map(U.children.contexts);const pe=this.activatedView.savedData.get("primary");if(pe&&U.route&&(pe.route=Object.assign({},U.route)),this.activatedView.savedExtras={},U.route){const Tt=U.route.snapshot;this.activatedView.savedExtras.queryParams=Tt.queryParams,this.activatedView.savedExtras.fragment=Tt.fragment}}const w=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,U){var pe;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=w;let Tt,fn=this.stackCtrl.getExistingView(w);if(fn){Tt=this.activated=fn.ref;const Dn=fn.savedData;Dn&&(this.getContext().children.contexts=Dn),this.updateActivatedRouteProxy(Tt.instance,w)}else{const Dn=w._futureSnapshot;if(null==Dn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const yr=this.parentContexts.getOrCreateContext(this.name).children,Yr=new Se.X(null),ln=this.createActivatedRouteProxy(Yr,w),ti=new ia(ln,yr,this.location.injector),H=null!==(pe=Dn.routeConfig.component)&&void 0!==pe?pe:Dn.component;if((U=U||this.componentFactoryResolver)&&tt(U)){const B=U.resolveComponentFactory(H);Tt=this.activated=this.location.createComponent(B,this.location.length,ti)}else Tt=this.activated=this.location.createComponent(H,{index:this.location.length,injector:ti,environmentInjector:null!=U?U:this.environmentInjector});Yr.next(Tt.instance),fn=this.stackCtrl.createView(this.activated,w),this.proxyMap.set(Tt.instance,ln),this.currentActivatedRoute$.next({component:Tt.instance,activatedRoute:w})}this.activatedView=fn,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(fn).then(Dn=>{this.activateEvents.emit(Tt.instance),this.stackEvents.emit(Dn)})}canGoBack(w=1,U){return this.stackCtrl.canGoBack(w,U)}pop(w=1,U){return this.stackCtrl.pop(w,U)}getLastUrl(w){const U=this.stackCtrl.getLastUrl(w);return U?U.url:void 0}getLastRouteView(w){return this.stackCtrl.getLastUrl(w)}getRootView(w){return this.stackCtrl.getRootUrl(w)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(w,U){const pe=new me.gz;return pe._futureSnapshot=U._futureSnapshot,pe._routerState=U._routerState,pe.snapshot=U.snapshot,pe.outlet=U.outlet,pe.component=U.component,pe._paramMap=this.proxyObservable(w,"paramMap"),pe._queryParamMap=this.proxyObservable(w,"queryParamMap"),pe.url=this.proxyObservable(w,"url"),pe.params=this.proxyObservable(w,"params"),pe.queryParams=this.proxyObservable(w,"queryParams"),pe.fragment=this.proxyObservable(w,"fragment"),pe.data=this.proxyObservable(w,"data"),pe}proxyObservable(w,U){return w.pipe((0,ze.h)(pe=>!!pe),(0,re.w)(pe=>this.currentActivatedRoute$.pipe((0,ze.h)(Tt=>null!==Tt&&Tt.component===pe),(0,re.w)(Tt=>Tt&&Tt.activatedRoute[U]),(0,Ze.x)())))}updateActivatedRouteProxy(w,U){const pe=this.proxyMap.get(w);if(!pe)throw new Error("Could not find activated route proxy for view");pe._futureSnapshot=U._futureSnapshot,pe._routerState=U._routerState,pe.snapshot=U.snapshot,pe.outlet=U.outlet,pe.component=U.component,this.currentActivatedRoute$.next({component:w,activatedRoute:U})}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(me.y6),c.Y36(c.s_b),c.$8M("name"),c.$8M("tabs"),c.Y36(Xi),c.Y36(Is),c.Y36(c._Vd,8),c.Y36(ce.Ye),c.Y36(c.SBq),c.Y36(me.F0),c.Y36(c.R0b),c.Y36(me.gz),c.Y36(C,12))},C.\u0275dir=c.lG2({type:C,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),C})();class ia{constructor(z,w,U){this.route=z,this.childContexts=w,this.parent=U}get(z,w){return z===me.gz?this.route:z===me.y6?this.childContexts:this.parent.get(z,w)}}let Vi=(()=>{class C{constructor(w,U,pe){this.routerOutlet=w,this.navCtrl=U,this.config=pe}onClick(w){var U;const pe=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(U=this.routerOutlet)&&void 0!==U&&U.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),w.preventDefault()):null!=pe&&(this.navCtrl.navigateBack(pe,{animation:this.routerAnimation}),w.preventDefault())}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(ws,8),c.Y36(Is),c.Y36(Xi))},C.\u0275dir=c.lG2({type:C,selectors:[["ion-back-button"]],hostBindings:function(w,U){1&w&&c.NdJ("click",function(Tt){return U.onClick(Tt)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),C})(),Ao=(()=>{class C{constructor(w,U,pe,Tt,fn){this.locationStrategy=w,this.navCtrl=U,this.elementRef=pe,this.router=Tt,this.routerLink=fn,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var w;if(null!==(w=this.routerLink)&&void 0!==w&&w.urlTree){const U=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=U}}onClick(w){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),w.preventDefault()}}return C.\u0275fac=function(w){return new(w||C)(c.Y36(ce.S$),c.Y36(Is),c.Y36(c.SBq),c.Y36(me.F0),c.Y36(me.rH,8))},C.\u0275dir=c.lG2({type:C,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(w,U){1&w&&c.NdJ("click",function(Tt){return U.onClick(Tt)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[c.TTD]}),C})();class cs{constructor(z){this.ctrl=z}create(z){return this.ctrl.create(z||{})}dismiss(z,w,U){return this.ctrl.dismiss(z,w,U)}getTop(){return this.ctrl.getTop()}}class si{}let Ks=(()=>{class C extends cs{constructor(w,U,pe,Tt){super(It.m),this.angularDelegate=w,this.resolver=U,this.injector=pe,this.environmentInjector=Tt}create(w){var U;return super.create(Object.assign(Object.assign({},w),{delegate:this.angularDelegate.create(null!==(U=this.resolver)&&void 0!==U?U:this.environmentInjector,this.injector)}))}}return C.\u0275fac=function(w){return new(w||C)(c.LFG(Nr),c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(si,8))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac}),C})(),Ki=(()=>{class C extends cs{constructor(w,U,pe,Tt){super(It.c),this.angularDelegate=w,this.resolver=U,this.injector=pe,this.environmentInjector=Tt}create(w){var U;return super.create(Object.assign(Object.assign({},w),{delegate:this.angularDelegate.create(null!==(U=this.resolver)&&void 0!==U?U:this.environmentInjector,this.injector)}))}}return C.\u0275fac=function(w){return new(w||C)(c.LFG(Nr),c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(si,8))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac}),C})(),Bi=(()=>{class C extends cs{constructor(){super(It.t)}}return C.\u0275fac=function(w){return new(w||C)},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();class Ri{shouldDetach(z){return!1}shouldAttach(z){return!1}store(z,w){}retrieve(z){return null}shouldReuseRoute(z,w){if(z.routeConfig!==w.routeConfig)return!1;const U=z.params,pe=w.params,Tt=Object.keys(U),fn=Object.keys(pe);if(Tt.length!==fn.length)return!1;for(const Dn of Tt)if(pe[Dn]!==U[Dn])return!1;return!0}}const Ho=(C,z,w)=>()=>{if(z.defaultView&&typeof window<"u"){(C=>{const z=window,w=z.Ionic;w&&w.config&&"Object"!==w.config.constructor.name||(z.Ionic=z.Ionic||{},z.Ionic.config=Object.assign(Object.assign({},z.Ionic.config),C))})(Object.assign(Object.assign({},C),{_zoneGate:Tt=>w.run(Tt)}));const pe="__zone_symbol__addEventListener"in z.body?"__zone_symbol__addEventListener":"addEventListener";return function ge(){var C=[];if(typeof window<"u"){var z=window;(!z.customElements||z.Element&&(!z.Element.prototype.closest||!z.Element.prototype.matches||!z.Element.prototype.remove||!z.Element.prototype.getRootNode))&&C.push(V.e(6748).then(V.t.bind(V,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||z.NodeList&&!z.NodeList.prototype.forEach||!z.fetch||!function(){try{var U=new URL("b","http://a");return U.pathname="c%20d","http://a/c%20d"===U.href&&U.searchParams}catch(pe){return!1}}()||typeof WeakMap>"u")&&C.push(V.e(2214).then(V.t.bind(V,4144,23)))}return Promise.all(C)}().then(()=>((C,z)=>typeof window>"u"?Promise.resolve():(0,fe.p)().then(()=>(ve(),(0,fe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",null,[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),z))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Ne,jmp:Tt=>w.runOutsideAngular(Tt),ael(Tt,fn,Dn,yr){Tt[pe](fn,Dn,yr)},rel(Tt,fn,Dn,yr){Tt.removeEventListener(fn,Dn,yr)}}))}};let ts=(()=>{class C{static forRoot(w){return{ngModule:C,providers:[{provide:Os,useValue:w},{provide:c.ip1,useFactory:Ho,multi:!0,deps:[Os,ce.K0,c.R0b]}]}}}return C.\u0275fac=function(w){return new(w||C)},C.\u0275mod=c.oAB({type:C}),C.\u0275inj=c.cJS({providers:[Nr,Ks,Ki],imports:[[ce.ez]]}),C})()},8834:(on,pt,V)=>{"use strict";V.d(pt,{c:()=>It});var c=V(5730),X=V(3457);let W;const Ae=ke=>ke.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=ke=>{if(void 0===W){const fe=void 0!==ke.style.webkitAnimationName;W=void 0===ke.style.animationName&&fe?"-webkit-":""}return W},me=(ke,De,fe)=>{const q=De.startsWith("animation")?Se(ke):"";ke.style.setProperty(q+De,fe)},Le=(ke,De)=>{const fe=De.startsWith("animation")?Se(ke):"";ke.style.removeProperty(fe+De)},we=[],ot=(ke=[],De)=>{if(void 0!==De){const fe=Array.isArray(De)?De:[De];return[...ke,...fe]}return ke},It=ke=>{let De,fe,q,ut,st,it,ce,We,$e,Ue,Ne,Ut,zt,He=[],ze=[],re=[],Ze=!1,ge={},ve=[],ie=[],Pe={},Ie=0,et=!1,Ve=!1,tt=!0,_t=!1,Kt=!0,wn=!1;const er=ke,tr=[],qn=[],Pn=[],hn=[],cr=[],Mr=[],Ln=[],jn=[],Wt=[],Qt=[],ii="function"==typeof AnimationEffect||void 0!==X.w&&"function"==typeof X.w.AnimationEffect,Rr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&ii,Kr=()=>Qt,yi=(_e,rt)=>((null!=rt&&rt.oneTimeCallback?qn:tr).push({c:_e,o:rt}),zt),Er=()=>{if(Rr)Qt.forEach(_e=>{_e.cancel()}),Qt.length=0;else{const _e=Pn.slice();(0,c.r)(()=>{_e.forEach(rt=>{Le(rt,"animation-name"),Le(rt,"animation-duration"),Le(rt,"animation-timing-function"),Le(rt,"animation-iteration-count"),Le(rt,"animation-delay"),Le(rt,"animation-play-state"),Le(rt,"animation-fill-mode"),Le(rt,"animation-direction")})})}},Gr=()=>{cr.forEach(_e=>{null!=_e&&_e.parentNode&&_e.parentNode.removeChild(_e)}),cr.length=0},Vn=()=>void 0!==st?st:ce?ce.getFill():"both",Ye=()=>void 0!==$e?$e:void 0!==it?it:ce?ce.getDirection():"normal",Fe=()=>et?"linear":void 0!==q?q:ce?ce.getEasing():"linear",Qe=()=>Ve?0:void 0!==Ue?Ue:void 0!==fe?fe:ce?ce.getDuration():0,Ct=()=>void 0!==ut?ut:ce?ce.getIterations():1,Et=()=>void 0!==Ne?Ne:void 0!==De?De:ce?ce.getDelay():0,pi=()=>{0!==Ie&&(Ie--,0===Ie&&((()=>{Gn(),jn.forEach(Pt=>Pt()),Wt.forEach(Pt=>Pt());const _e=tt?1:0,rt=ve,ft=ie,Rt=Pe;Pn.forEach(Pt=>{const rn=Pt.classList;rt.forEach(Mn=>rn.add(Mn)),ft.forEach(Mn=>rn.remove(Mn));for(const Mn in Rt)Rt.hasOwnProperty(Mn)&&me(Pt,Mn,Rt[Mn])}),tr.forEach(Pt=>Pt.c(_e,zt)),qn.forEach(Pt=>Pt.c(_e,zt)),qn.length=0,Kt=!0,tt&&(_t=!0),tt=!0})(),ce&&ce.animationFinish()))},Ci=(_e=!0)=>{Gr();const rt=(ke=>(ke.forEach(De=>{for(const fe in De)if(De.hasOwnProperty(fe)){const q=De[fe];if("easing"===fe)De["animation-timing-function"]=q,delete De[fe];else{const ut=Ae(fe);ut!==fe&&(De[ut]=q,delete De[fe])}}}),ke))(He);Pn.forEach(ft=>{if(rt.length>0){const Rt=((ke=[])=>ke.map(De=>{const fe=De.offset,q=[];for(const ut in De)De.hasOwnProperty(ut)&&"offset"!==ut&&q.push(`${ut}: ${De[ut]};`);return`${100*fe}% { ${q.join(" ")} }`}).join(" "))(rt);Ut=void 0!==ke?ke:(ke=>{let De=we.indexOf(ke);return De<0&&(De=we.push(ke)-1),`ion-animation-${De}`})(Rt);const Pt=((ke,De,fe)=>{var q;const ut=(ke=>{const De=void 0!==ke.getRootNode?ke.getRootNode():ke;return De.head||De})(fe),st=Se(fe),it=ut.querySelector("#"+ke);if(it)return it;const He=(null!==(q=fe.ownerDocument)&&void 0!==q?q:document).createElement("style");return He.id=ke,He.textContent=`@${st}keyframes ${ke} { ${De} } @${st}keyframes ${ke}-alt { ${De} }`,ut.appendChild(He),He})(Ut,Rt,ft);cr.push(Pt),me(ft,"animation-duration",`${Qe()}ms`),me(ft,"animation-timing-function",Fe()),me(ft,"animation-delay",`${Et()}ms`),me(ft,"animation-fill-mode",Vn()),me(ft,"animation-direction",Ye());const rn=Ct()===1/0?"infinite":Ct().toString();me(ft,"animation-iteration-count",rn),me(ft,"animation-play-state","paused"),_e&&me(ft,"animation-name",`${Pt.id}-alt`),(0,c.r)(()=>{me(ft,"animation-name",Pt.id||null)})}})},Ni=(_e=!0)=>{(()=>{Mr.forEach(Rt=>Rt()),Ln.forEach(Rt=>Rt());const _e=ze,rt=re,ft=ge;Pn.forEach(Rt=>{const Pt=Rt.classList;_e.forEach(rn=>Pt.add(rn)),rt.forEach(rn=>Pt.remove(rn));for(const rn in ft)ft.hasOwnProperty(rn)&&me(Rt,rn,ft[rn])})})(),He.length>0&&(Rr?(Pn.forEach(_e=>{const rt=_e.animate(He,{id:er,delay:Et(),duration:Qe(),easing:Fe(),iterations:Ct(),fill:Vn(),direction:Ye()});rt.pause(),Qt.push(rt)}),Qt.length>0&&(Qt[0].onfinish=()=>{pi()})):Ci(_e)),Ze=!0},vi=_e=>{if(_e=Math.min(Math.max(_e,0),.9999),Rr)Qt.forEach(rt=>{rt.currentTime=rt.effect.getComputedTiming().delay+Qe()*_e,rt.pause()});else{const rt=`-${Qe()*_e}ms`;Pn.forEach(ft=>{He.length>0&&(me(ft,"animation-delay",rt),me(ft,"animation-play-state","paused"))})}},gi=_e=>{Qt.forEach(rt=>{rt.effect.updateTiming({delay:Et(),duration:Qe(),easing:Fe(),iterations:Ct(),fill:Vn(),direction:Ye()})}),void 0!==_e&&vi(_e)},_s=(_e=!0,rt)=>{(0,c.r)(()=>{Pn.forEach(ft=>{me(ft,"animation-name",Ut||null),me(ft,"animation-duration",`${Qe()}ms`),me(ft,"animation-timing-function",Fe()),me(ft,"animation-delay",void 0!==rt?`-${rt*Qe()}ms`:`${Et()}ms`),me(ft,"animation-fill-mode",Vn()||null),me(ft,"animation-direction",Ye()||null);const Rt=Ct()===1/0?"infinite":Ct().toString();me(ft,"animation-iteration-count",Rt),_e&&me(ft,"animation-name",`${Ut}-alt`),(0,c.r)(()=>{me(ft,"animation-name",Ut||null)})})})},ir=(_e=!1,rt=!0,ft)=>(_e&&hn.forEach(Rt=>{Rt.update(_e,rt,ft)}),Rr?gi(ft):_s(rt,ft),zt),ai=()=>{Ze&&(Rr?Qt.forEach(_e=>{_e.pause()}):Pn.forEach(_e=>{me(_e,"animation-play-state","paused")}),wn=!0)},cn=()=>{We=void 0,pi()},Gn=()=>{We&&clearTimeout(We)},ae=_e=>new Promise(rt=>{null!=_e&&_e.sync&&(Ve=!0,yi(()=>Ve=!1,{oneTimeCallback:!0})),Ze||Ni(),_t&&(Rr?(vi(0),gi()):_s(),_t=!1),Kt&&(Ie=hn.length+1,Kt=!1),yi(()=>rt(),{oneTimeCallback:!0}),hn.forEach(ft=>{ft.play()}),Rr?(Qt.forEach(_e=>{_e.play()}),(0===He.length||0===Pn.length)&&pi()):(()=>{if(Gn(),(0,c.r)(()=>{Pn.forEach(_e=>{He.length>0&&me(_e,"animation-play-state","running")})}),0===He.length||0===Pn.length)pi();else{const _e=Et()||0,rt=Qe()||0,ft=Ct()||1;isFinite(ft)&&(We=setTimeout(cn,_e+rt*ft+100)),((ke,De)=>{let fe;const q={passive:!0},st=it=>{ke===it.target&&(fe&&fe(),Gn(),(0,c.r)(()=>{Pn.forEach(_e=>{Le(_e,"animation-duration"),Le(_e,"animation-delay"),Le(_e,"animation-play-state")}),(0,c.r)(pi)}))};ke&&(ke.addEventListener("webkitAnimationEnd",st,q),ke.addEventListener("animationend",st,q),fe=()=>{ke.removeEventListener("webkitAnimationEnd",st,q),ke.removeEventListener("animationend",st,q)})})(Pn[0])}})(),wn=!1}),lt=(_e,rt)=>{const ft=He[0];return void 0===ft||void 0!==ft.offset&&0!==ft.offset?He=[{offset:0,[_e]:rt},...He]:ft[_e]=rt,zt};return zt={parentAnimation:ce,elements:Pn,childAnimations:hn,id:er,animationFinish:pi,from:lt,to:(_e,rt)=>{const ft=He[He.length-1];return void 0===ft||void 0!==ft.offset&&1!==ft.offset?He=[...He,{offset:1,[_e]:rt}]:ft[_e]=rt,zt},fromTo:(_e,rt,ft)=>lt(_e,rt).to(_e,ft),parent:_e=>(ce=_e,zt),play:ae,pause:()=>(hn.forEach(_e=>{_e.pause()}),ai(),zt),stop:()=>{hn.forEach(_e=>{_e.stop()}),Ze&&(Er(),Ze=!1),et=!1,Ve=!1,Kt=!0,$e=void 0,Ue=void 0,Ne=void 0,Ie=0,_t=!1,tt=!0,wn=!1},destroy:_e=>(hn.forEach(rt=>{rt.destroy(_e)}),(_e=>{Er(),_e&&Gr()})(_e),Pn.length=0,hn.length=0,He.length=0,tr.length=0,qn.length=0,Ze=!1,Kt=!0,zt),keyframes:_e=>{const rt=He!==_e;return He=_e,rt&&(_e=>{Rr?Kr().forEach(rt=>{if(rt.effect.setKeyframes)rt.effect.setKeyframes(_e);else{const ft=new KeyframeEffect(rt.effect.target,_e,rt.effect.getTiming());rt.effect=ft}}):Ci()})(He),zt},addAnimation:_e=>{if(null!=_e)if(Array.isArray(_e))for(const rt of _e)rt.parent(zt),hn.push(rt);else _e.parent(zt),hn.push(_e);return zt},addElement:_e=>{if(null!=_e)if(1===_e.nodeType)Pn.push(_e);else if(_e.length>=0)for(let rt=0;rt<_e.length;rt++)Pn.push(_e[rt]);else console.error("Invalid addElement value");return zt},update:ir,fill:_e=>(st=_e,ir(!0),zt),direction:_e=>(it=_e,ir(!0),zt),iterations:_e=>(ut=_e,ir(!0),zt),duration:_e=>(!Rr&&0===_e&&(_e=1),fe=_e,ir(!0),zt),easing:_e=>(q=_e,ir(!0),zt),delay:_e=>(De=_e,ir(!0),zt),getWebAnimations:Kr,getKeyframes:()=>He,getFill:Vn,getDirection:Ye,getDelay:Et,getIterations:Ct,getEasing:Fe,getDuration:Qe,afterAddRead:_e=>(jn.push(_e),zt),afterAddWrite:_e=>(Wt.push(_e),zt),afterClearStyles:(_e=[])=>{for(const rt of _e)Pe[rt]="";return zt},afterStyles:(_e={})=>(Pe=_e,zt),afterRemoveClass:_e=>(ie=ot(ie,_e),zt),afterAddClass:_e=>(ve=ot(ve,_e),zt),beforeAddRead:_e=>(Mr.push(_e),zt),beforeAddWrite:_e=>(Ln.push(_e),zt),beforeClearStyles:(_e=[])=>{for(const rt of _e)ge[rt]="";return zt},beforeStyles:(_e={})=>(ge=_e,zt),beforeRemoveClass:_e=>(re=ot(re,_e),zt),beforeAddClass:_e=>(ze=ot(ze,_e),zt),onFinish:yi,isRunning:()=>0!==Ie&&!wn,progressStart:(_e=!1,rt)=>(hn.forEach(ft=>{ft.progressStart(_e,rt)}),ai(),et=_e,Ze||Ni(),ir(!1,!0,rt),zt),progressStep:_e=>(hn.forEach(rt=>{rt.progressStep(_e)}),vi(_e),zt),progressEnd:(_e,rt,ft)=>(et=!1,hn.forEach(Rt=>{Rt.progressEnd(_e,rt,ft)}),void 0!==ft&&(Ue=ft),_t=!1,tt=!0,0===_e?($e="reverse"===Ye()?"normal":"reverse","reverse"===$e&&(tt=!1),Rr?(ir(),vi(1-rt)):(Ne=(1-rt)*Qe()*-1,ir(!1,!1))):1===_e&&(Rr?(ir(),vi(rt)):(Ne=rt*Qe()*-1,ir(!1,!1))),void 0!==_e&&(yi(()=>{Ue=void 0,$e=void 0,Ne=void 0},{oneTimeCallback:!0}),ce||ae()),zt)}}},4349:(on,pt,V)=>{"use strict";V.d(pt,{G:()=>Ae});class X{constructor(me,Le,Ke,Ce,we){this.id=Le,this.name=Ke,this.disableScroll=we,this.priority=1e6*Ce+Le,this.ctrl=me}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const me=this.ctrl.capture(this.name,this.id,this.priority);return me&&this.disableScroll&&this.ctrl.disableScroll(this.id),me}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class W{constructor(me,Le,Ke,Ce){this.id=Le,this.disable=Ke,this.disableScroll=Ce,this.ctrl=me}block(){if(this.ctrl){if(this.disable)for(const me of this.disable)this.ctrl.disableGesture(me,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const me of this.disable)this.ctrl.enableGesture(me,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Oe="backdrop-no-scroll",Ae=new class c{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(me){var Le;return new X(this,this.newID(),me.name,null!==(Le=me.priority)&&void 0!==Le?Le:0,!!me.disableScroll)}createBlocker(me={}){return new W(this,this.newID(),me.disable,!!me.disableScroll)}start(me,Le,Ke){return this.canStart(me)?(this.requestedStart.set(Le,Ke),!0):(this.requestedStart.delete(Le),!1)}capture(me,Le,Ke){if(!this.start(me,Le,Ke))return!1;const Ce=this.requestedStart;let we=-1e4;if(Ce.forEach(be=>{we=Math.max(we,be)}),we===Ke){this.capturedId=Le,Ce.clear();const be=new CustomEvent("ionGestureCaptured",{detail:{gestureName:me}});return document.dispatchEvent(be),!0}return Ce.delete(Le),!1}release(me){this.requestedStart.delete(me),this.capturedId===me&&(this.capturedId=void 0)}disableGesture(me,Le){let Ke=this.disabledGestures.get(me);void 0===Ke&&(Ke=new Set,this.disabledGestures.set(me,Ke)),Ke.add(Le)}enableGesture(me,Le){const Ke=this.disabledGestures.get(me);void 0!==Ke&&Ke.delete(Le)}disableScroll(me){this.disabledScroll.add(me),1===this.disabledScroll.size&&document.body.classList.add(Oe)}enableScroll(me){this.disabledScroll.delete(me),0===this.disabledScroll.size&&document.body.classList.remove(Oe)}canStart(me){return!(void 0!==this.capturedId||this.isDisabled(me))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(me){const Le=this.disabledGestures.get(me);return!!(Le&&Le.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(on,pt,V)=>{"use strict";V.r(pt),V.d(pt,{MENU_BACK_BUTTON_PRIORITY:()=>Ae,OVERLAY_BACK_BUTTON_PRIORITY:()=>Oe,blockHardwareBackButton:()=>X,startHardwareBackButton:()=>W});var c=V(5861);const X=()=>{document.addEventListener("backbutton",()=>{})},W=()=>{const Se=document;let me=!1;Se.addEventListener("backbutton",()=>{if(me)return;let Le=0,Ke=[];const Ce=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(qe,Ge){Ke.push({priority:qe,handler:Ge,id:Le++})}}});Se.dispatchEvent(Ce);const we=function(){var qe=(0,c.Z)(function*(Ge){try{if(null!=Ge&&Ge.handler){const ot=Ge.handler(be);null!=ot&&(yield ot)}}catch(ot){console.error(ot)}});return function(ot){return qe.apply(this,arguments)}}(),be=()=>{if(Ke.length>0){let qe={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Ke.forEach(Ge=>{Ge.priority>=qe.priority&&(qe=Ge)}),me=!0,Ke=Ke.filter(Ge=>Ge.id!==qe.id),we(qe).then(()=>me=!1)}};be()})},Oe=100,Ae=99},5730:(on,pt,V)=>{"use strict";V.d(pt,{a:()=>me,b:()=>Le,c:()=>W,d:()=>Ge,e:()=>ot,f:()=>qe,g:()=>Ke,h:()=>ut,i:()=>Se,j:()=>Oe,k:()=>be,l:()=>It,m:()=>we,n:()=>ke,o:()=>q,p:()=>fe,q:()=>st,r:()=>Ce,s:()=>it,t:()=>c,u:()=>De});const c=(He,ze=0)=>new Promise(re=>{X(He,ze,re)}),X=(He,ze=0,re)=>{let Ze,ce;const ge={passive:!0},ie=()=>{Ze&&Ze()},Pe=Ie=>{(void 0===Ie||He===Ie.target)&&(ie(),re(Ie))};return He&&(He.addEventListener("webkitTransitionEnd",Pe,ge),He.addEventListener("transitionend",Pe,ge),ce=setTimeout(Pe,ze+500),Ze=()=>{ce&&(clearTimeout(ce),ce=void 0),He.removeEventListener("webkitTransitionEnd",Pe,ge),He.removeEventListener("transitionend",Pe,ge)}),ie},W=(He,ze)=>{He.componentOnReady?He.componentOnReady().then(re=>ze(re)):Ce(()=>ze(He))},Oe=(He,ze=[])=>{const re={};return ze.forEach(Ze=>{He.hasAttribute(Ze)&&(null!==He.getAttribute(Ze)&&(re[Ze]=He.getAttribute(Ze)),He.removeAttribute(Ze))}),re},Ae=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Se=(He,ze)=>{let re=Ae;return ze&&ze.length>0&&(re=re.filter(Ze=>!ze.includes(Ze))),Oe(He,re)},me=(He,ze,re,Ze)=>{var ce;if(typeof window<"u"){const ge=window,ve=null===(ce=null==ge?void 0:ge.Ionic)||void 0===ce?void 0:ce.config;if(ve){const ie=ve.get("_ael");if(ie)return ie(He,ze,re,Ze);if(ve._ael)return ve._ael(He,ze,re,Ze)}}return He.addEventListener(ze,re,Ze)},Le=(He,ze,re,Ze)=>{var ce;if(typeof window<"u"){const ge=window,ve=null===(ce=null==ge?void 0:ge.Ionic)||void 0===ce?void 0:ce.config;if(ve){const ie=ve.get("_rel");if(ie)return ie(He,ze,re,Ze);if(ve._rel)return ve._rel(He,ze,re,Ze)}}return He.removeEventListener(ze,re,Ze)},Ke=(He,ze=He)=>He.shadowRoot||ze,Ce=He=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(He):"function"==typeof requestAnimationFrame?requestAnimationFrame(He):setTimeout(He),we=He=>!!He.shadowRoot&&!!He.attachShadow,be=He=>{const ze=He.closest("ion-item");return ze?ze.querySelector("ion-label"):null},qe=He=>{if(He.focus(),He.classList.contains("ion-focusable")){const ze=He.closest("ion-app");ze&&ze.setFocus([He])}},Ge=(He,ze)=>{let re;const Ze=He.getAttribute("aria-labelledby"),ce=He.id;let ge=null!==Ze&&""!==Ze.trim()?Ze:ze+"-lbl",ve=null!==Ze&&""!==Ze.trim()?document.getElementById(Ze):be(He);return ve?(null===Ze&&(ve.id=ge),re=ve.textContent,ve.setAttribute("aria-hidden","true")):""!==ce.trim()&&(ve=document.querySelector(`label[for="${ce}"]`),ve&&(""!==ve.id?ge=ve.id:ve.id=ge=`${ce}-lbl`,re=ve.textContent)),{label:ve,labelId:ge,labelText:re}},ot=(He,ze,re,Ze,ce)=>{if(He||we(ze)){let ge=ze.querySelector("input.aux-input");ge||(ge=ze.ownerDocument.createElement("input"),ge.type="hidden",ge.classList.add("aux-input"),ze.appendChild(ge)),ge.disabled=ce,ge.name=re,ge.value=Ze||""}},It=(He,ze,re)=>Math.max(He,Math.min(ze,re)),ke=(He,ze)=>{if(!He){const re="ASSERT: "+ze;throw console.error(re),new Error(re)}},De=He=>He.timeStamp||Date.now(),fe=He=>{if(He){const ze=He.changedTouches;if(ze&&ze.length>0){const re=ze[0];return{x:re.clientX,y:re.clientY}}if(void 0!==He.pageX)return{x:He.pageX,y:He.pageY}}return{x:0,y:0}},q=He=>{const ze="rtl"===document.dir;switch(He){case"start":return ze;case"end":return!ze;default:throw new Error(`"${He}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ut=(He,ze)=>{const re=He._original||He;return{_original:He,emit:st(re.emit.bind(re),ze)}},st=(He,ze=0)=>{let re;return(...Ze)=>{clearTimeout(re),re=setTimeout(He,ze,...Ze)}},it=(He,ze)=>{if(null!=He||(He={}),null!=ze||(ze={}),He===ze)return!0;const re=Object.keys(He);if(re.length!==Object.keys(ze).length)return!1;for(const Ze of re)if(!(Ze in ze)||He[Ze]!==ze[Ze])return!1;return!0}},4292:(on,pt,V)=>{"use strict";V.d(pt,{m:()=>we});var c=V(5861),X=V(7593),W=V(5730),Oe=V(9658),Ae=V(8834);const Se=be=>(0,Ae.c)().duration(be?400:300),me=be=>{let qe,Ge;const ot=be.width+8,It=(0,Ae.c)(),ke=(0,Ae.c)();be.isEndSide?(qe=ot+"px",Ge="0px"):(qe=-ot+"px",Ge="0px"),It.addElement(be.menuInnerEl).fromTo("transform",`translateX(${qe})`,`translateX(${Ge})`);const fe="ios"===(0,Oe.b)(be),q=fe?.2:.25;return ke.addElement(be.backdropEl).fromTo("opacity",.01,q),Se(fe).addAnimation([It,ke])},Le=be=>{let qe,Ge;const ot=(0,Oe.b)(be),It=be.width;be.isEndSide?(qe=-It+"px",Ge=It+"px"):(qe=It+"px",Ge=-It+"px");const ke=(0,Ae.c)().addElement(be.menuInnerEl).fromTo("transform",`translateX(${Ge})`,"translateX(0px)"),De=(0,Ae.c)().addElement(be.contentEl).fromTo("transform","translateX(0px)",`translateX(${qe})`),fe=(0,Ae.c)().addElement(be.backdropEl).fromTo("opacity",.01,.32);return Se("ios"===ot).addAnimation([ke,De,fe])},Ke=be=>{const qe=(0,Oe.b)(be),Ge=be.width*(be.isEndSide?-1:1)+"px",ot=(0,Ae.c)().addElement(be.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`);return Se("ios"===qe).addAnimation(ot)},we=(()=>{const be=new Map,qe=[],Ge=function(){var We=(0,c.Z)(function*($e){const Ue=yield ut($e);return!!Ue&&Ue.open()});return function(Ue){return We.apply(this,arguments)}}(),ot=function(){var We=(0,c.Z)(function*($e){const Ue=yield void 0!==$e?ut($e):st();return void 0!==Ue&&Ue.close()});return function(Ue){return We.apply(this,arguments)}}(),It=function(){var We=(0,c.Z)(function*($e){const Ue=yield ut($e);return!!Ue&&Ue.toggle()});return function(Ue){return We.apply(this,arguments)}}(),ke=function(){var We=(0,c.Z)(function*($e,Ue){const Ne=yield ut(Ue);return Ne&&(Ne.disabled=!$e),Ne});return function(Ue,Ne){return We.apply(this,arguments)}}(),De=function(){var We=(0,c.Z)(function*($e,Ue){const Ne=yield ut(Ue);return Ne&&(Ne.swipeGesture=$e),Ne});return function(Ue,Ne){return We.apply(this,arguments)}}(),fe=function(){var We=(0,c.Z)(function*($e){if(null!=$e){const Ue=yield ut($e);return void 0!==Ue&&Ue.isOpen()}return void 0!==(yield st())});return function(Ue){return We.apply(this,arguments)}}(),q=function(){var We=(0,c.Z)(function*($e){const Ue=yield ut($e);return!!Ue&&!Ue.disabled});return function(Ue){return We.apply(this,arguments)}}(),ut=function(){var We=(0,c.Z)(function*($e){return yield Ve(),"start"===$e||"end"===$e?et(tt=>tt.side===$e&&!tt.disabled)||et(tt=>tt.side===$e):null!=$e?et(Ne=>Ne.menuId===$e):et(Ne=>!Ne.disabled)||(qe.length>0?qe[0].el:void 0)});return function(Ue){return We.apply(this,arguments)}}(),st=function(){var We=(0,c.Z)(function*(){return yield Ve(),ie()});return function(){return We.apply(this,arguments)}}(),it=function(){var We=(0,c.Z)(function*(){return yield Ve(),Pe()});return function(){return We.apply(this,arguments)}}(),He=function(){var We=(0,c.Z)(function*(){return yield Ve(),Ie()});return function(){return We.apply(this,arguments)}}(),ze=(We,$e)=>{be.set(We,$e)},ce=We=>{const $e=We.side;qe.filter(Ue=>Ue.side===$e&&Ue!==We).forEach(Ue=>Ue.disabled=!0)},ge=function(){var We=(0,c.Z)(function*($e,Ue,Ne){if(Ie())return!1;if(Ue){const tt=yield st();tt&&$e.el!==tt&&(yield tt.setOpen(!1,!1))}return $e._setOpen(Ue,Ne)});return function(Ue,Ne,tt){return We.apply(this,arguments)}}(),ie=()=>et(We=>We._isOpen),Pe=()=>qe.map(We=>We.el),Ie=()=>qe.some(We=>We.isAnimating),et=We=>{const $e=qe.find(We);if(void 0!==$e)return $e.el},Ve=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(We=>new Promise($e=>(0,W.c)(We,$e))));return ze("reveal",Ke),ze("push",Le),ze("overlay",me),typeof document<"u"&&document.addEventListener("ionBackButton",We=>{const $e=ie();$e&&We.detail.register(X.MENU_BACK_BUTTON_PRIORITY,()=>$e.close())}),{registerAnimation:ze,get:ut,getMenus:it,getOpen:st,isEnabled:q,swipeGesture:De,isAnimating:He,isOpen:fe,enable:ke,toggle:It,close:ot,open:Ge,_getOpenSync:ie,_createAnimation:(We,$e)=>{const Ue=be.get(We);if(!Ue)throw new Error("animation not registered");return Ue($e)},_register:We=>{qe.indexOf(We)<0&&(We.disabled||ce(We),qe.push(We))},_unregister:We=>{const $e=qe.indexOf(We);$e>-1&&qe.splice($e,1)},_setOpen:ge,_setActiveMenu:ce}})()},3457:(on,pt,V)=>{"use strict";V.d(pt,{w:()=>c});const c=typeof window<"u"?window:void 0},1308:(on,pt,V)=>{"use strict";V.d(pt,{B:()=>Xr,H:()=>Pn,a:()=>tt,b:()=>Fr,c:()=>Di,e:()=>Wn,f:()=>xi,g:()=>_t,h:()=>tr,i:()=>dr,j:()=>Ye,k:()=>ei,p:()=>It,r:()=>Pr,s:()=>Ge});var c=V(5861);let W,Oe,Ae,Se=!1,me=!1,Le=!1,Ke=!1,Ce=!1;const we=typeof window<"u"?window:{},be=we.document||{head:{}},qe={$flags$:0,$resourcesUrl$:"",jmp:ae=>ae(),raf:ae=>requestAnimationFrame(ae),ael:(ae,ye,lt,ht)=>ae.addEventListener(ye,lt,ht),rel:(ae,ye,lt,ht)=>ae.removeEventListener(ye,lt,ht),ce:(ae,ye)=>new CustomEvent(ae,ye)},Ge=ae=>{Object.assign(qe,ae)},It=ae=>Promise.resolve(ae),ke=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ae){}return!1})(),De=(ae,ye,lt,ht)=>{lt&&lt.map(([gt,_e,rt])=>{const ft=q(ae,gt),Rt=fe(ye,rt),Pt=ut(gt);qe.ael(ft,_e,Rt,Pt),(ye.$rmListeners$=ye.$rmListeners$||[]).push(()=>qe.rel(ft,_e,Rt,Pt))})},fe=(ae,ye)=>lt=>{try{256&ae.$flags$?ae.$lazyInstance$[ye](lt):(ae.$queuedListeners$=ae.$queuedListeners$||[]).push([ye,lt])}catch(ht){gi(ht)}},q=(ae,ye)=>4&ye?be:8&ye?we:16&ye?be.body:ae,ut=ae=>0!=(2&ae),re="s-id",Ze="sty-id",ve="http://www.w3.org/1999/xlink",Ie=new WeakMap,et=(ae,ye,lt)=>{let ht=Or.get(ae);ke&&lt?(ht=ht||new CSSStyleSheet,"string"==typeof ht?ht=ye:ht.replaceSync(ye)):ht=ye,Or.set(ae,ht)},Ve=(ae,ye,lt,ht)=>{let gt=$e(ye,lt);const _e=Or.get(gt);if(ae=11===ae.nodeType?ae:be,_e)if("string"==typeof _e){let ft,rt=Ie.get(ae=ae.head||ae);rt||Ie.set(ae,rt=new Set),rt.has(gt)||(ae.host&&(ft=ae.querySelector(`[${Ze}="${gt}"]`))?ft.innerHTML=_e:(ft=be.createElement("style"),ft.innerHTML=_e,ae.insertBefore(ft,ae.querySelector("link"))),rt&&rt.add(gt))}else ae.adoptedStyleSheets.includes(_e)||(ae.adoptedStyleSheets=[...ae.adoptedStyleSheets,_e]);return gt},$e=(ae,ye)=>"sc-"+(ye&&32&ae.$flags$?ae.$tagName$+"-"+ye:ae.$tagName$),Ue=ae=>ae.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),tt=ae=>Wr.push(ae),_t=ae=>Ci(ae).$modeName$,Kt={},er=ae=>"object"==(ae=typeof ae)||"function"===ae,tr=(ae,ye,...lt)=>{let ht=null,gt=null,_e=null,rt=!1,ft=!1;const Rt=[],Pt=Mn=>{for(let Rn=0;Rn<Mn.length;Rn++)ht=Mn[Rn],Array.isArray(ht)?Pt(ht):null!=ht&&"boolean"!=typeof ht&&((rt="function"!=typeof ae&&!er(ht))&&(ht=String(ht)),rt&&ft?Rt[Rt.length-1].$text$+=ht:Rt.push(rt?qn(null,ht):ht),ft=rt)};if(Pt(lt),ye){ye.key&&(gt=ye.key),ye.name&&(_e=ye.name);{const Mn=ye.className||ye.class;Mn&&(ye.class="object"!=typeof Mn?Mn:Object.keys(Mn).filter(Rn=>Mn[Rn]).join(" "))}}if("function"==typeof ae)return ae(null===ye?{}:ye,Rt,cr);const rn=qn(ae,null);return rn.$attrs$=ye,Rt.length>0&&(rn.$children$=Rt),rn.$key$=gt,rn.$name$=_e,rn},qn=(ae,ye)=>({$flags$:0,$tag$:ae,$text$:ye,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Pn={},cr={forEach:(ae,ye)=>ae.map(Mr).forEach(ye),map:(ae,ye)=>ae.map(Mr).map(ye).map(Ln)},Mr=ae=>({vattrs:ae.$attrs$,vchildren:ae.$children$,vkey:ae.$key$,vname:ae.$name$,vtag:ae.$tag$,vtext:ae.$text$}),Ln=ae=>{if("function"==typeof ae.vtag){const lt=Object.assign({},ae.vattrs);return ae.vkey&&(lt.key=ae.vkey),ae.vname&&(lt.name=ae.vname),tr(ae.vtag,lt,...ae.vchildren||[])}const ye=qn(ae.vtag,ae.vtext);return ye.$attrs$=ae.vattrs,ye.$children$=ae.vchildren,ye.$key$=ae.vkey,ye.$name$=ae.vname,ye},jn=(ae,ye,lt,ht,gt,_e)=>{if(lt!==ht){let rt=vi(ae,ye),ft=ye.toLowerCase();if("class"===ye){const Rt=ae.classList,Pt=Qt(lt),rn=Qt(ht);Rt.remove(...Pt.filter(Mn=>Mn&&!rn.includes(Mn))),Rt.add(...rn.filter(Mn=>Mn&&!Pt.includes(Mn)))}else if("style"===ye){for(const Rt in lt)(!ht||null==ht[Rt])&&(Rt.includes("-")?ae.style.removeProperty(Rt):ae.style[Rt]="");for(const Rt in ht)(!lt||ht[Rt]!==lt[Rt])&&(Rt.includes("-")?ae.style.setProperty(Rt,ht[Rt]):ae.style[Rt]=ht[Rt])}else if("key"!==ye)if("ref"===ye)ht&&ht(ae);else if(rt||"o"!==ye[0]||"n"!==ye[1]){const Rt=er(ht);if((rt||Rt&&null!==ht)&&!gt)try{if(ae.tagName.includes("-"))ae[ye]=ht;else{const rn=ht??"";"list"===ye?rt=!1:(null==lt||ae[ye]!=rn)&&(ae[ye]=rn)}}catch(rn){}let Pt=!1;ft!==(ft=ft.replace(/^xlink\:?/,""))&&(ye=ft,Pt=!0),null==ht||!1===ht?(!1!==ht||""===ae.getAttribute(ye))&&(Pt?ae.removeAttributeNS(ve,ye):ae.removeAttribute(ye)):(!rt||4&_e||gt)&&!Rt&&(ht=!0===ht?"":ht,Pt?ae.setAttributeNS(ve,ye,ht):ae.setAttribute(ye,ht))}else ye="-"===ye[2]?ye.slice(3):vi(we,ft)?ft.slice(2):ft[2]+ye.slice(3),lt&&qe.rel(ae,ye,lt,!1),ht&&qe.ael(ae,ye,ht,!1)}},Wt=/\s/,Qt=ae=>ae?ae.split(Wt):[],ii=(ae,ye,lt,ht)=>{const gt=11===ye.$elm$.nodeType&&ye.$elm$.host?ye.$elm$.host:ye.$elm$,_e=ae&&ae.$attrs$||Kt,rt=ye.$attrs$||Kt;for(ht in _e)ht in rt||jn(gt,ht,_e[ht],void 0,lt,ye.$flags$);for(ht in rt)jn(gt,ht,_e[ht],rt[ht],lt,ye.$flags$)},Rr=(ae,ye,lt,ht)=>{const gt=ye.$children$[lt];let rt,ft,Rt,_e=0;if(Se||(Le=!0,"slot"===gt.$tag$&&(W&&ht.classList.add(W+"-s"),gt.$flags$|=gt.$children$?2:1)),null!==gt.$text$)rt=gt.$elm$=be.createTextNode(gt.$text$);else if(1&gt.$flags$)rt=gt.$elm$=be.createTextNode("");else{if(Ke||(Ke="svg"===gt.$tag$),rt=gt.$elm$=be.createElementNS(Ke?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&gt.$flags$?"slot-fb":gt.$tag$),Ke&&"foreignObject"===gt.$tag$&&(Ke=!1),ii(null,gt,Ke),(ae=>null!=ae)(W)&&rt["s-si"]!==W&&rt.classList.add(rt["s-si"]=W),gt.$children$)for(_e=0;_e<gt.$children$.length;++_e)ft=Rr(ae,gt,_e,rt),ft&&rt.appendChild(ft);"svg"===gt.$tag$?Ke=!1:"foreignObject"===rt.tagName&&(Ke=!0)}return rt["s-hn"]=Ae,3&gt.$flags$&&(rt["s-sr"]=!0,rt["s-cr"]=Oe,rt["s-sn"]=gt.$name$||"",Rt=ae&&ae.$children$&&ae.$children$[lt],Rt&&Rt.$tag$===gt.$tag$&&ae.$elm$&&Vr(ae.$elm$,!1)),rt},Vr=(ae,ye)=>{qe.$flags$|=1;const lt=ae.childNodes;for(let ht=lt.length-1;ht>=0;ht--){const gt=lt[ht];gt["s-hn"]!==Ae&&gt["s-ol"]&&(yi(gt).insertBefore(gt,Bn(gt)),gt["s-ol"].remove(),gt["s-ol"]=void 0,Le=!0),ye&&Vr(gt,ye)}qe.$flags$&=-2},Kr=(ae,ye,lt,ht,gt,_e)=>{let ft,rt=ae["s-cr"]&&ae["s-cr"].parentNode||ae;for(rt.shadowRoot&&rt.tagName===Ae&&(rt=rt.shadowRoot);gt<=_e;++gt)ht[gt]&&(ft=Rr(null,lt,gt,ae),ft&&(ht[gt].$elm$=ft,rt.insertBefore(ft,Bn(ye))))},Dr=(ae,ye,lt,ht,gt)=>{for(;ye<=lt;++ye)(ht=ae[ye])&&(gt=ht.$elm$,wr(ht),me=!0,gt["s-ol"]?gt["s-ol"].remove():Vr(gt,!0),gt.remove())},Sn=(ae,ye)=>ae.$tag$===ye.$tag$&&("slot"===ae.$tag$?ae.$name$===ye.$name$:ae.$key$===ye.$key$),Bn=ae=>ae&&ae["s-ol"]||ae,yi=ae=>(ae["s-ol"]?ae["s-ol"]:ae).parentNode,_r=(ae,ye)=>{const lt=ye.$elm$=ae.$elm$,ht=ae.$children$,gt=ye.$children$,_e=ye.$tag$,rt=ye.$text$;let ft;null===rt?(Ke="svg"===_e||"foreignObject"!==_e&&Ke,"slot"===_e||ii(ae,ye,Ke),null!==ht&&null!==gt?((ae,ye,lt,ht)=>{let mr,Je,gt=0,_e=0,rt=0,ft=0,Rt=ye.length-1,Pt=ye[0],rn=ye[Rt],Mn=ht.length-1,Rn=ht[0],Nr=ht[Mn];for(;gt<=Rt&&_e<=Mn;)if(null==Pt)Pt=ye[++gt];else if(null==rn)rn=ye[--Rt];else if(null==Rn)Rn=ht[++_e];else if(null==Nr)Nr=ht[--Mn];else if(Sn(Pt,Rn))_r(Pt,Rn),Pt=ye[++gt],Rn=ht[++_e];else if(Sn(rn,Nr))_r(rn,Nr),rn=ye[--Rt],Nr=ht[--Mn];else if(Sn(Pt,Nr))("slot"===Pt.$tag$||"slot"===Nr.$tag$)&&Vr(Pt.$elm$.parentNode,!1),_r(Pt,Nr),ae.insertBefore(Pt.$elm$,rn.$elm$.nextSibling),Pt=ye[++gt],Nr=ht[--Mn];else if(Sn(rn,Rn))("slot"===Pt.$tag$||"slot"===Nr.$tag$)&&Vr(rn.$elm$.parentNode,!1),_r(rn,Rn),ae.insertBefore(rn.$elm$,Pt.$elm$),rn=ye[--Rt],Rn=ht[++_e];else{for(rt=-1,ft=gt;ft<=Rt;++ft)if(ye[ft]&&null!==ye[ft].$key$&&ye[ft].$key$===Rn.$key$){rt=ft;break}rt>=0?(Je=ye[rt],Je.$tag$!==Rn.$tag$?mr=Rr(ye&&ye[_e],lt,rt,ae):(_r(Je,Rn),ye[rt]=void 0,mr=Je.$elm$),Rn=ht[++_e]):(mr=Rr(ye&&ye[_e],lt,_e,ae),Rn=ht[++_e]),mr&&yi(Pt.$elm$).insertBefore(mr,Bn(Pt.$elm$))}gt>Rt?Kr(ae,null==ht[Mn+1]?null:ht[Mn+1].$elm$,lt,ht,_e,Mn):_e>Mn&&Dr(ye,gt,Rt)})(lt,ht,ye,gt):null!==gt?(null!==ae.$text$&&(lt.textContent=""),Kr(lt,null,ye,gt,0,gt.length-1)):null!==ht&&Dr(ht,0,ht.length-1),Ke&&"svg"===_e&&(Ke=!1)):(ft=lt["s-cr"])?ft.parentNode.textContent=rt:ae.$text$!==rt&&(lt.data=rt)},Er=ae=>{const ye=ae.childNodes;let lt,ht,gt,_e,rt,ft;for(ht=0,gt=ye.length;ht<gt;ht++)if(lt=ye[ht],1===lt.nodeType){if(lt["s-sr"])for(rt=lt["s-sn"],lt.hidden=!1,_e=0;_e<gt;_e++)if(ft=ye[_e].nodeType,ye[_e]["s-hn"]!==lt["s-hn"]||""!==rt){if(1===ft&&rt===ye[_e].getAttribute("slot")){lt.hidden=!0;break}}else if(1===ft||3===ft&&""!==ye[_e].textContent.trim()){lt.hidden=!0;break}Er(lt)}},Gr=[],fi=ae=>{let ye,lt,ht,gt,_e,rt,ft=0;const Rt=ae.childNodes,Pt=Rt.length;for(;ft<Pt;ft++){if(ye=Rt[ft],ye["s-sr"]&&(lt=ye["s-cr"])&&lt.parentNode)for(ht=lt.parentNode.childNodes,gt=ye["s-sn"],rt=ht.length-1;rt>=0;rt--)lt=ht[rt],!lt["s-cn"]&&!lt["s-nr"]&&lt["s-hn"]!==ye["s-hn"]&&(ki(lt,gt)?(_e=Gr.find(rn=>rn.$nodeToRelocate$===lt),me=!0,lt["s-sn"]=lt["s-sn"]||gt,_e?_e.$slotRefNode$=ye:Gr.push({$slotRefNode$:ye,$nodeToRelocate$:lt}),lt["s-sr"]&&Gr.map(rn=>{ki(rn.$nodeToRelocate$,lt["s-sn"])&&(_e=Gr.find(Mn=>Mn.$nodeToRelocate$===lt),_e&&!rn.$slotRefNode$&&(rn.$slotRefNode$=_e.$slotRefNode$))})):Gr.some(rn=>rn.$nodeToRelocate$===lt)||Gr.push({$nodeToRelocate$:lt}));1===ye.nodeType&&fi(ye)}},ki=(ae,ye)=>1===ae.nodeType?null===ae.getAttribute("slot")&&""===ye||ae.getAttribute("slot")===ye:ae["s-sn"]===ye||""===ye,wr=ae=>{ae.$attrs$&&ae.$attrs$.ref&&ae.$attrs$.ref(null),ae.$children$&&ae.$children$.map(wr)},dr=ae=>Ci(ae).$hostElement$,Wn=(ae,ye,lt)=>{const ht=dr(ae);return{emit:gt=>Ar(ht,ye,{bubbles:!!(4&lt),composed:!!(2&lt),cancelable:!!(1&lt),detail:gt})}},Ar=(ae,ye,lt)=>{const ht=qe.ce(ye,lt);return ae.dispatchEvent(ht),ht},nn=(ae,ye)=>{ye&&!ae.$onRenderResolve$&&ye["s-p"]&&ye["s-p"].push(new Promise(lt=>ae.$onRenderResolve$=lt))},jt=(ae,ye)=>{if(ae.$flags$|=16,!(4&ae.$flags$))return nn(ae,ae.$ancestorComponent$),Di(()=>vn(ae,ye));ae.$flags$|=512},vn=(ae,ye)=>{const ht=ae.$lazyInstance$;let gt;return ye&&(ae.$flags$|=256,ae.$queuedListeners$&&(ae.$queuedListeners$.map(([_e,rt])=>Qe(ht,_e,rt)),ae.$queuedListeners$=null),gt=Qe(ht,"componentWillLoad")),gt=Ct(gt,()=>Qe(ht,"componentWillRender")),Ct(gt,()=>Hn(ae,ht,ye))},Hn=function(){var ae=(0,c.Z)(function*(ye,lt,ht){const gt=ye.$hostElement$,rt=gt["s-rc"];ht&&(ae=>{const ye=ae.$cmpMeta$,lt=ae.$hostElement$,ht=ye.$flags$,_e=Ve(lt.shadowRoot?lt.shadowRoot:lt.getRootNode(),ye,ae.$modeName$);10&ht&&(lt["s-sc"]=_e,lt.classList.add(_e+"-h"),2&ht&&lt.classList.add(_e+"-s"))})(ye);Nn(ye,lt),rt&&(rt.map(Rt=>Rt()),gt["s-rc"]=void 0);{const Rt=gt["s-p"],Pt=()=>Vn(ye);0===Rt.length?Pt():(Promise.all(Rt).then(Pt),ye.$flags$|=4,Rt.length=0)}});return function(lt,ht,gt){return ae.apply(this,arguments)}}(),Nn=(ae,ye,lt)=>{try{ye=ye.render&&ye.render(),ae.$flags$&=-17,ae.$flags$|=2,((ae,ye)=>{const lt=ae.$hostElement$,ht=ae.$cmpMeta$,gt=ae.$vnode$||qn(null,null),_e=(ae=>ae&&ae.$tag$===Pn)(ye)?ye:tr(null,null,ye);if(Ae=lt.tagName,ht.$attrsToReflect$&&(_e.$attrs$=_e.$attrs$||{},ht.$attrsToReflect$.map(([rt,ft])=>_e.$attrs$[ft]=lt[rt])),_e.$tag$=null,_e.$flags$|=4,ae.$vnode$=_e,_e.$elm$=gt.$elm$=lt.shadowRoot||lt,W=lt["s-sc"],Oe=lt["s-cr"],Se=0!=(1&ht.$flags$),me=!1,_r(gt,_e),qe.$flags$|=1,Le){fi(_e.$elm$);let rt,ft,Rt,Pt,rn,Mn,Rn=0;for(;Rn<Gr.length;Rn++)rt=Gr[Rn],ft=rt.$nodeToRelocate$,ft["s-ol"]||(Rt=be.createTextNode(""),Rt["s-nr"]=ft,ft.parentNode.insertBefore(ft["s-ol"]=Rt,ft));for(Rn=0;Rn<Gr.length;Rn++)if(rt=Gr[Rn],ft=rt.$nodeToRelocate$,rt.$slotRefNode$){for(Pt=rt.$slotRefNode$.parentNode,rn=rt.$slotRefNode$.nextSibling,Rt=ft["s-ol"];Rt=Rt.previousSibling;)if(Mn=Rt["s-nr"],Mn&&Mn["s-sn"]===ft["s-sn"]&&Pt===Mn.parentNode&&(Mn=Mn.nextSibling,!Mn||!Mn["s-nr"])){rn=Mn;break}(!rn&&Pt!==ft.parentNode||ft.nextSibling!==rn)&&ft!==rn&&(!ft["s-hn"]&&ft["s-ol"]&&(ft["s-hn"]=ft["s-ol"].parentNode.nodeName),Pt.insertBefore(ft,rn))}else 1===ft.nodeType&&(ft.hidden=!0)}me&&Er(_e.$elm$),qe.$flags$&=-2,Gr.length=0})(ae,ye)}catch(ht){gi(ht,ae.$hostElement$)}return null},Vn=ae=>{const lt=ae.$hostElement$,gt=ae.$lazyInstance$,_e=ae.$ancestorComponent$;Qe(gt,"componentDidRender"),64&ae.$flags$?Qe(gt,"componentDidUpdate"):(ae.$flags$|=64,Et(lt),Qe(gt,"componentDidLoad"),ae.$onReadyResolve$(lt),_e||Fe()),ae.$onInstanceResolve$(lt),ae.$onRenderResolve$&&(ae.$onRenderResolve$(),ae.$onRenderResolve$=void 0),512&ae.$flags$&&xr(()=>jt(ae,!1)),ae.$flags$&=-517},Ye=ae=>{{const ye=Ci(ae),lt=ye.$hostElement$.isConnected;return lt&&2==(18&ye.$flags$)&&jt(ye,!1),lt}},Fe=ae=>{Et(be.documentElement),xr(()=>Ar(we,"appload",{detail:{namespace:"ionic"}}))},Qe=(ae,ye,lt)=>{if(ae&&ae[ye])try{return ae[ye](lt)}catch(ht){gi(ht)}},Ct=(ae,ye)=>ae&&ae.then?ae.then(ye):ye(),Et=ae=>ae.classList.add("hydrated"),Jn=(ae,ye,lt,ht,gt,_e,rt)=>{let ft,Rt,Pt,rn;if(1===_e.nodeType){for(ft=_e.getAttribute("c-id"),ft&&(Rt=ft.split("."),(Rt[0]===rt||"0"===Rt[0])&&(Pt={$flags$:0,$hostId$:Rt[0],$nodeId$:Rt[1],$depth$:Rt[2],$index$:Rt[3],$tag$:_e.tagName.toLowerCase(),$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ye.push(Pt),_e.removeAttribute("c-id"),ae.$children$||(ae.$children$=[]),ae.$children$[Pt.$index$]=Pt,ae=Pt,ht&&"0"===Pt.$depth$&&(ht[Pt.$index$]=Pt.$elm$))),rn=_e.childNodes.length-1;rn>=0;rn--)Jn(ae,ye,lt,ht,gt,_e.childNodes[rn],rt);if(_e.shadowRoot)for(rn=_e.shadowRoot.childNodes.length-1;rn>=0;rn--)Jn(ae,ye,lt,ht,gt,_e.shadowRoot.childNodes[rn],rt)}else if(8===_e.nodeType)Rt=_e.nodeValue.split("."),(Rt[1]===rt||"0"===Rt[1])&&(ft=Rt[0],Pt={$flags$:0,$hostId$:Rt[1],$nodeId$:Rt[2],$depth$:Rt[3],$index$:Rt[4],$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===ft?(Pt.$elm$=_e.nextSibling,Pt.$elm$&&3===Pt.$elm$.nodeType&&(Pt.$text$=Pt.$elm$.textContent,ye.push(Pt),_e.remove(),ae.$children$||(ae.$children$=[]),ae.$children$[Pt.$index$]=Pt,ht&&"0"===Pt.$depth$&&(ht[Pt.$index$]=Pt.$elm$))):Pt.$hostId$===rt&&("s"===ft?(Pt.$tag$="slot",_e["s-sn"]=Rt[5]?Pt.$name$=Rt[5]:"",_e["s-sr"]=!0,ht&&(Pt.$elm$=be.createElement(Pt.$tag$),Pt.$name$&&Pt.$elm$.setAttribute("name",Pt.$name$),_e.parentNode.insertBefore(Pt.$elm$,_e),_e.remove(),"0"===Pt.$depth$&&(ht[Pt.$index$]=Pt.$elm$)),lt.push(Pt),ae.$children$||(ae.$children$=[]),ae.$children$[Pt.$index$]=Pt):"r"===ft&&(ht?_e.remove():(gt["s-cr"]=_e,_e["s-cn"]=!0))));else if(ae&&"style"===ae.$tag$){const Mn=qn(null,_e.textContent);Mn.$elm$=_e,Mn.$index$="0",ae.$children$=[Mn]}},rr=(ae,ye)=>{if(1===ae.nodeType){let lt=0;for(;lt<ae.childNodes.length;lt++)rr(ae.childNodes[lt],ye);if(ae.shadowRoot)for(lt=0;lt<ae.shadowRoot.childNodes.length;lt++)rr(ae.shadowRoot.childNodes[lt],ye)}else if(8===ae.nodeType){const lt=ae.nodeValue.split(".");"o"===lt[0]&&(ye.set(lt[1]+"."+lt[2],ae),ae.nodeValue="",ae["s-en"]=lt[3])}},je=(ae,ye,lt)=>{if(ye.$members$){ae.watchers&&(ye.$watchers$=ae.watchers);const ht=Object.entries(ye.$members$),gt=ae.prototype;if(ht.map(([_e,[rt]])=>{31&rt||2&lt&&32&rt?Object.defineProperty(gt,_e,{get(){return((ae,ye)=>Ci(this).$instanceValues$.get(ye))(0,_e)},set(ft){((ae,ye,lt,ht)=>{const gt=Ci(ae),_e=gt.$hostElement$,rt=gt.$instanceValues$.get(ye),ft=gt.$flags$,Rt=gt.$lazyInstance$;lt=((ae,ye)=>null==ae||er(ae)?ae:4&ye?"false"!==ae&&(""===ae||!!ae):2&ye?parseFloat(ae):1&ye?String(ae):ae)(lt,ht.$members$[ye][0]);const Pt=Number.isNaN(rt)&&Number.isNaN(lt);if((!(8&ft)||void 0===rt)&&lt!==rt&&!Pt&&(gt.$instanceValues$.set(ye,lt),Rt)){if(ht.$watchers$&&128&ft){const Mn=ht.$watchers$[ye];Mn&&Mn.map(Rn=>{try{Rt[Rn](lt,rt,ye)}catch(Nr){gi(Nr,_e)}})}2==(18&ft)&&jt(gt,!1)}})(this,_e,ft,ye)},configurable:!0,enumerable:!0}):1&lt&&64&rt&&Object.defineProperty(gt,_e,{value(...ft){const Rt=Ci(this);return Rt.$onInstancePromise$.then(()=>Rt.$lazyInstance$[_e](...ft))}})}),1&lt){const _e=new Map;gt.attributeChangedCallback=function(rt,ft,Rt){qe.jmp(()=>{const Pt=_e.get(rt);if(this.hasOwnProperty(Pt))Rt=this[Pt],delete this[Pt];else if(gt.hasOwnProperty(Pt)&&"number"==typeof this[Pt]&&this[Pt]==Rt)return;this[Pt]=(null!==Rt||"boolean"!=typeof this[Pt])&&Rt})},ae.observedAttributes=ht.filter(([rt,ft])=>15&ft[0]).map(([rt,ft])=>{const Rt=ft[1]||rt;return _e.set(Rt,rt),512&ft[0]&&ye.$attrsToReflect$.push([rt,Rt]),Rt})}}return ae},Re=function(){var ae=(0,c.Z)(function*(ye,lt,ht,gt,_e){if(0==(32&lt.$flags$)){{if(lt.$flags$|=32,(_e=ir(ht)).then){const Pt=()=>{};_e=yield _e,Pt()}_e.isProxied||(ht.$watchers$=_e.watchers,je(_e,ht,2),_e.isProxied=!0);const Rt=()=>{};lt.$flags$|=8;try{new _e(lt)}catch(Pt){gi(Pt)}lt.$flags$&=-9,lt.$flags$|=128,Rt(),Dt(lt.$lazyInstance$)}if(_e.style){let Rt=_e.style;"string"!=typeof Rt&&(Rt=Rt[lt.$modeName$=(ae=>Wr.map(ye=>ye(ae)).find(ye=>!!ye))(ye)]);const Pt=$e(ht,lt.$modeName$);if(!Or.has(Pt)){const rn=()=>{};et(Pt,Rt,!!(1&ht.$flags$)),rn()}}}const rt=lt.$ancestorComponent$,ft=()=>jt(lt,!0);rt&&rt["s-rc"]?rt["s-rc"].push(ft):ft()});return function(lt,ht,gt,_e,rt){return ae.apply(this,arguments)}}(),Dt=ae=>{Qe(ae,"connectedCallback")},Cn=ae=>{const ye=ae["s-cr"]=be.createComment("");ye["s-cn"]=!0,ae.insertBefore(ye,ae.firstChild)},Fr=(ae,ye={})=>{const ht=[],gt=ye.exclude||[],_e=we.customElements,rt=be.head,ft=rt.querySelector("meta[charset]"),Rt=be.createElement("style"),Pt=[],rn=be.querySelectorAll(`[${Ze}]`);let Mn,Rn=!0,Nr=0;for(Object.assign(qe,ye),qe.$resourcesUrl$=new URL(ye.resourcesUrl||"./",be.baseURI).href,qe.$flags$|=2;Nr<rn.length;Nr++)et(rn[Nr].getAttribute(Ze),Ue(rn[Nr].innerHTML),!0);ae.map(mr=>{mr[1].map(Je=>{const at={$flags$:Je[0],$tagName$:Je[1],$members$:Je[2],$listeners$:Je[3]};at.$members$=Je[2],at.$listeners$=Je[3],at.$attrsToReflect$=[],at.$watchers$={};const wt=at.$tagName$,Gt=class extends HTMLElement{constructor(tn){super(tn),Ni(tn=this,at),1&at.$flags$&&tn.attachShadow({mode:"open",delegatesFocus:!!(16&at.$flags$)})}connectedCallback(){Mn&&(clearTimeout(Mn),Mn=null),Rn?Pt.push(this):qe.jmp(()=>(ae=>{if(0==(1&qe.$flags$)){const ye=Ci(ae),lt=ye.$cmpMeta$,ht=()=>{};if(1&ye.$flags$)De(ae,ye,lt.$listeners$),Dt(ye.$lazyInstance$);else{let gt;if(ye.$flags$|=1,gt=ae.getAttribute(re),gt){if(1&lt.$flags$){const _e=Ve(ae.shadowRoot,lt,ae.getAttribute("s-mode"));ae.classList.remove(_e+"-h",_e+"-s")}((ae,ye,lt,ht)=>{const _e=ae.shadowRoot,rt=[],Rt=_e?[]:null,Pt=ht.$vnode$=qn(ye,null);qe.$orgLocNodes$||rr(be.body,qe.$orgLocNodes$=new Map),ae[re]=lt,ae.removeAttribute(re),Jn(Pt,rt,[],Rt,ae,ae,lt),rt.map(rn=>{const Mn=rn.$hostId$+"."+rn.$nodeId$,Rn=qe.$orgLocNodes$.get(Mn),Nr=rn.$elm$;Rn&&""===Rn["s-en"]&&Rn.parentNode.insertBefore(Nr,Rn.nextSibling),_e||(Nr["s-hn"]=ye,Rn&&(Nr["s-ol"]=Rn,Nr["s-ol"]["s-nr"]=Nr)),qe.$orgLocNodes$.delete(Mn)}),_e&&Rt.map(rn=>{rn&&_e.appendChild(rn)})})(ae,lt.$tagName$,gt,ye)}gt||12&lt.$flags$&&Cn(ae);{let _e=ae;for(;_e=_e.parentNode||_e.host;)if(1===_e.nodeType&&_e.hasAttribute("s-id")&&_e["s-p"]||_e["s-p"]){nn(ye,ye.$ancestorComponent$=_e);break}}lt.$members$&&Object.entries(lt.$members$).map(([_e,[rt]])=>{if(31&rt&&ae.hasOwnProperty(_e)){const ft=ae[_e];delete ae[_e],ae[_e]=ft}}),xr(()=>Re(ae,ye,lt))}ht()}})(this))}disconnectedCallback(){qe.jmp(()=>(ae=>{if(0==(1&qe.$flags$)){const ye=Ci(this),lt=ye.$lazyInstance$;ye.$rmListeners$&&(ye.$rmListeners$.map(ht=>ht()),ye.$rmListeners$=void 0),Qe(lt,"disconnectedCallback")}})())}componentOnReady(){return Ci(this).$onReadyPromise$}};at.$lazyBundleId$=mr[0],!gt.includes(wt)&&!_e.get(wt)&&(ht.push(wt),_e.define(wt,je(Gt,at,1)))})}),Rt.innerHTML=ht+"{visibility:hidden}.hydrated{visibility:inherit}",Rt.setAttribute("data-styles",""),rt.insertBefore(Rt,ft?ft.nextSibling:rt.firstChild),Rn=!1,Pt.length?Pt.map(mr=>mr.connectedCallback()):qe.jmp(()=>Mn=setTimeout(Fe,30))},ei=ae=>{const ye=new URL(ae,qe.$resourcesUrl$);return ye.origin!==we.location.origin?ye.href:ye.pathname},pi=new WeakMap,Ci=ae=>pi.get(ae),Pr=(ae,ye)=>pi.set(ye.$lazyInstance$=ae,ye),Ni=(ae,ye)=>{const lt={$flags$:0,$hostElement$:ae,$cmpMeta$:ye,$instanceValues$:new Map};return lt.$onInstancePromise$=new Promise(ht=>lt.$onInstanceResolve$=ht),lt.$onReadyPromise$=new Promise(ht=>lt.$onReadyResolve$=ht),ae["s-p"]=[],ae["s-rc"]=[],De(ae,lt,ye.$listeners$),pi.set(ae,lt)},vi=(ae,ye)=>ye in ae,gi=(ae,ye)=>(0,console.error)(ae,ye),_s=new Map,ir=(ae,ye,lt)=>{const ht=ae.$tagName$.replace(/-/g,"_"),gt=ae.$lazyBundleId$,_e=_s.get(gt);return _e?_e[ht]:V(863)(`./${gt}.entry.js`).then(rt=>(_s.set(gt,rt),rt[ht]),gi)},Or=new Map,Wr=[],Lr=[],ai=[],Ai=(ae,ye)=>lt=>{ae.push(lt),Ce||(Ce=!0,ye&&4&qe.$flags$?xr(Gn):qe.raf(Gn))},cn=ae=>{for(let ye=0;ye<ae.length;ye++)try{ae[ye](performance.now())}catch(lt){gi(lt)}ae.length=0},Gn=()=>{cn(Lr),cn(ai),(Ce=Lr.length>0)&&qe.raf(Gn)},xr=ae=>It().then(ae),xi=Ai(Lr,!1),Di=Ai(ai,!0),Xr={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},697:(on,pt,V)=>{"use strict";V.d(pt,{L:()=>Oe,a:()=>Ae,b:()=>Se,c:()=>me,d:()=>Le,e:()=>ze,g:()=>ce,l:()=>it,s:()=>re,t:()=>we});var c=V(5861),X=V(1308),W=V(5730);const Oe="ionViewWillEnter",Ae="ionViewDidEnter",Se="ionViewWillLeave",me="ionViewDidLeave",Le="ionViewWillUnload",we=ge=>new Promise((ve,ie)=>{(0,X.c)(()=>{be(ge),qe(ge).then(Pe=>{Pe.animation&&Pe.animation.destroy(),Ge(ge),ve(Pe)},Pe=>{Ge(ge),ie(Pe)})})}),be=ge=>{const ve=ge.enteringEl,ie=ge.leavingEl;Ze(ve,ie,ge.direction),ge.showGoBack?ve.classList.add("can-go-back"):ve.classList.remove("can-go-back"),re(ve,!1),ve.style.setProperty("pointer-events","none"),ie&&(re(ie,!1),ie.style.setProperty("pointer-events","none"))},qe=function(){var ge=(0,c.Z)(function*(ve){const ie=yield ot(ve);return ie&&X.B.isBrowser?It(ie,ve):ke(ve)});return function(ie){return ge.apply(this,arguments)}}(),Ge=ge=>{const ve=ge.enteringEl,ie=ge.leavingEl;ve.classList.remove("ion-page-invisible"),ve.style.removeProperty("pointer-events"),void 0!==ie&&(ie.classList.remove("ion-page-invisible"),ie.style.removeProperty("pointer-events"))},ot=function(){var ge=(0,c.Z)(function*(ve){return ve.leavingEl&&ve.animated&&0!==ve.duration?ve.animationBuilder?ve.animationBuilder:"ios"===ve.mode?(yield Promise.resolve().then(V.bind(V,3953))).iosTransitionAnimation:(yield Promise.resolve().then(V.bind(V,3880))).mdTransitionAnimation:void 0});return function(ie){return ge.apply(this,arguments)}}(),It=function(){var ge=(0,c.Z)(function*(ve,ie){yield De(ie,!0);const Pe=ve(ie.baseEl,ie);ut(ie.enteringEl,ie.leavingEl);const Ie=yield q(Pe,ie);return ie.progressCallback&&ie.progressCallback(void 0),Ie&&st(ie.enteringEl,ie.leavingEl),{hasCompleted:Ie,animation:Pe}});return function(ie,Pe){return ge.apply(this,arguments)}}(),ke=function(){var ge=(0,c.Z)(function*(ve){const ie=ve.enteringEl,Pe=ve.leavingEl;return yield De(ve,!1),ut(ie,Pe),st(ie,Pe),{hasCompleted:!0}});return function(ie){return ge.apply(this,arguments)}}(),De=function(){var ge=(0,c.Z)(function*(ve,ie){const Ie=(void 0!==ve.deepWait?ve.deepWait:ie)?[ze(ve.enteringEl),ze(ve.leavingEl)]:[He(ve.enteringEl),He(ve.leavingEl)];yield Promise.all(Ie),yield fe(ve.viewIsReady,ve.enteringEl)});return function(ie,Pe){return ge.apply(this,arguments)}}(),fe=function(){var ge=(0,c.Z)(function*(ve,ie){ve&&(yield ve(ie))});return function(ie,Pe){return ge.apply(this,arguments)}}(),q=(ge,ve)=>{const ie=ve.progressCallback,Pe=new Promise(Ie=>{ge.onFinish(et=>Ie(1===et))});return ie?(ge.progressStart(!0),ie(ge)):ge.play(),Pe},ut=(ge,ve)=>{it(ve,Se),it(ge,Oe)},st=(ge,ve)=>{it(ge,Ae),it(ve,me)},it=(ge,ve)=>{if(ge){const ie=new CustomEvent(ve,{bubbles:!1,cancelable:!1});ge.dispatchEvent(ie)}},He=ge=>ge?new Promise(ve=>(0,W.c)(ge,ve)):Promise.resolve(),ze=function(){var ge=(0,c.Z)(function*(ve){const ie=ve;if(ie){if(null!=ie.componentOnReady){if(null!=(yield ie.componentOnReady()))return}else if(null!=ie.__registerHost)return void(yield new Promise(Ie=>(0,W.r)(Ie)));yield Promise.all(Array.from(ie.children).map(ze))}});return function(ie){return ge.apply(this,arguments)}}(),re=(ge,ve)=>{ve?(ge.setAttribute("aria-hidden","true"),ge.classList.add("ion-page-hidden")):(ge.hidden=!1,ge.removeAttribute("aria-hidden"),ge.classList.remove("ion-page-hidden"))},Ze=(ge,ve,ie)=>{void 0!==ge&&(ge.style.zIndex="back"===ie?"99":"101"),void 0!==ve&&(ve.style.zIndex="100")},ce=ge=>ge.classList.contains("ion-page")?ge:ge.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ge},1911:(on,pt,V)=>{"use strict";V.r(pt),V.d(pt,{GESTURE_CONTROLLER:()=>c.G,createGesture:()=>Ke});var c=V(4349);const X=(qe,Ge,ot,It)=>{const ke=W(qe)?{capture:!!It.capture,passive:!!It.passive}:!!It.capture;let De,fe;return qe.__zone_symbol__addEventListener?(De="__zone_symbol__addEventListener",fe="__zone_symbol__removeEventListener"):(De="addEventListener",fe="removeEventListener"),qe[De](Ge,ot,ke),()=>{qe[fe](Ge,ot,ke)}},W=qe=>{if(void 0===Oe)try{const Ge=Object.defineProperty({},"passive",{get:()=>{Oe=!0}});qe.addEventListener("optsTest",()=>{},Ge)}catch(Ge){Oe=!1}return!!Oe};let Oe;const me=qe=>qe instanceof Document?qe:qe.ownerDocument,Ke=qe=>{let Ge=!1,ot=!1,It=!0,ke=!1;const De=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},qe),fe=De.canStart,q=De.onWillStart,ut=De.onStart,st=De.onEnd,it=De.notCaptured,He=De.onMove,ze=De.threshold,re=De.passive,Ze=De.blurOnStart,ce={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ge=((qe,Ge,ot)=>{const It=ot*(Math.PI/180),ke="x"===qe,De=Math.cos(It),fe=Ge*Ge;let q=0,ut=0,st=!1,it=0;return{start(He,ze){q=He,ut=ze,it=0,st=!0},detect(He,ze){if(!st)return!1;const re=He-q,Ze=ze-ut,ce=re*re+Ze*Ze;if(ce<fe)return!1;const ge=Math.sqrt(ce),ve=(ke?re:Ze)/ge;return it=ve>De?1:ve<-De?-1:0,st=!1,!0},isGesture:()=>0!==it,getDirection:()=>it}})(De.direction,De.threshold,De.maxAngle),ve=c.G.createGesture({name:qe.gestureName,priority:qe.gesturePriority,disableScroll:qe.disableScroll}),Ie=()=>{!Ge||(ke=!1,He&&He(ce))},et=()=>!!ve.capture()&&(Ge=!0,It=!1,ce.startX=ce.currentX,ce.startY=ce.currentY,ce.startTime=ce.currentTime,q?q(ce).then(We):We(),!0),We=()=>{Ze&&(()=>{if(typeof document<"u"){const _t=document.activeElement;null!=_t&&_t.blur&&_t.blur()}})(),ut&&ut(ce),It=!0},$e=()=>{Ge=!1,ot=!1,ke=!1,It=!0,ve.release()},Ue=_t=>{const Kt=Ge,Ut=It;if($e(),Ut){if(Ce(ce,_t),Kt)return void(st&&st(ce));it&&it(ce)}},Ne=((qe,Ge,ot,It,ke)=>{let De,fe,q,ut,st,it,He,ze=0;const re=Ve=>{ze=Date.now()+2e3,Ge(Ve)&&(!fe&&ot&&(fe=X(qe,"touchmove",ot,ke)),q||(q=X(Ve.target,"touchend",ce,ke)),ut||(ut=X(Ve.target,"touchcancel",ce,ke)))},Ze=Ve=>{ze>Date.now()||!Ge(Ve)||(!it&&ot&&(it=X(me(qe),"mousemove",ot,ke)),He||(He=X(me(qe),"mouseup",ge,ke)))},ce=Ve=>{ve(),It&&It(Ve)},ge=Ve=>{ie(),It&&It(Ve)},ve=()=>{fe&&fe(),q&&q(),ut&&ut(),fe=q=ut=void 0},ie=()=>{it&&it(),He&&He(),it=He=void 0},Pe=()=>{ve(),ie()},Ie=(Ve=!0)=>{Ve?(De||(De=X(qe,"touchstart",re,ke)),st||(st=X(qe,"mousedown",Ze,ke))):(De&&De(),st&&st(),De=st=void 0,Pe())};return{enable:Ie,stop:Pe,destroy:()=>{Ie(!1),It=ot=Ge=void 0}}})(De.el,_t=>{const Kt=be(_t);return!(ot||!It||(we(_t,ce),ce.startX=ce.currentX,ce.startY=ce.currentY,ce.startTime=ce.currentTime=Kt,ce.velocityX=ce.velocityY=ce.deltaX=ce.deltaY=0,ce.event=_t,fe&&!1===fe(ce))||(ve.release(),!ve.start()))&&(ot=!0,0===ze?et():(ge.start(ce.startX,ce.startY),!0))},_t=>{Ge?!ke&&It&&(ke=!0,Ce(ce,_t),requestAnimationFrame(Ie)):(Ce(ce,_t),ge.detect(ce.currentX,ce.currentY)&&(!ge.isGesture()||!et())&&tt())},Ue,{capture:!1,passive:re}),tt=()=>{$e(),Ne.stop(),it&&it(ce)};return{enable(_t=!0){_t||(Ge&&Ue(void 0),$e()),Ne.enable(_t)},destroy(){ve.destroy(),Ne.destroy()}}},Ce=(qe,Ge)=>{if(!Ge)return;const ot=qe.currentX,It=qe.currentY,ke=qe.currentTime;we(Ge,qe);const De=qe.currentX,fe=qe.currentY,ut=(qe.currentTime=be(Ge))-ke;if(ut>0&&ut<100){const it=(fe-It)/ut;qe.velocityX=(De-ot)/ut*.7+.3*qe.velocityX,qe.velocityY=.7*it+.3*qe.velocityY}qe.deltaX=De-qe.startX,qe.deltaY=fe-qe.startY,qe.event=Ge},we=(qe,Ge)=>{let ot=0,It=0;if(qe){const ke=qe.changedTouches;if(ke&&ke.length>0){const De=ke[0];ot=De.clientX,It=De.clientY}else void 0!==qe.pageX&&(ot=qe.pageX,It=qe.pageY)}Ge.currentX=ot,Ge.currentY=It},be=qe=>qe.timeStamp||Date.now()},9658:(on,pt,V)=>{"use strict";V.d(pt,{a:()=>we,b:()=>Ie,c:()=>W,g:()=>Ce,i:()=>et});var c=V(1308);class X{constructor(){this.m=new Map}reset(We){this.m=new Map(Object.entries(We))}get(We,$e){const Ue=this.m.get(We);return void 0!==Ue?Ue:$e}getBoolean(We,$e=!1){const Ue=this.m.get(We);return void 0===Ue?$e:"string"==typeof Ue?"true"===Ue:!!Ue}getNumber(We,$e){const Ue=parseFloat(this.m.get(We));return isNaN(Ue)?void 0!==$e?$e:NaN:Ue}set(We,$e){this.m.set(We,$e)}}const W=new X,Ke="ionic-persist-config",Ce=Ve=>be(Ve),we=(Ve,We)=>("string"==typeof Ve&&(We=Ve,Ve=void 0),Ce(Ve).includes(We)),be=(Ve=window)=>{if(typeof Ve>"u")return[];Ve.Ionic=Ve.Ionic||{};let We=Ve.Ionic.platforms;return null==We&&(We=Ve.Ionic.platforms=qe(Ve),We.forEach($e=>Ve.document.documentElement.classList.add(`plt-${$e}`))),We},qe=Ve=>{const We=W.get("platform");return Object.keys(ie).filter($e=>{const Ue=null==We?void 0:We[$e];return"function"==typeof Ue?Ue(Ve):ie[$e](Ve)})},ot=Ve=>!!(ge(Ve,/iPad/i)||ge(Ve,/Macintosh/i)&&st(Ve)),De=Ve=>ge(Ve,/android|sink/i),st=Ve=>ve(Ve,"(any-pointer:coarse)"),He=Ve=>ze(Ve)||re(Ve),ze=Ve=>!!(Ve.cordova||Ve.phonegap||Ve.PhoneGap),re=Ve=>{const We=Ve.Capacitor;return!(null==We||!We.isNative)},ge=(Ve,We)=>We.test(Ve.navigator.userAgent),ve=(Ve,We)=>{var $e;return null===($e=Ve.matchMedia)||void 0===$e?void 0:$e.call(Ve,We).matches},ie={ipad:ot,iphone:Ve=>ge(Ve,/iPhone/i),ios:Ve=>ge(Ve,/iPhone|iPod/i)||ot(Ve),android:De,phablet:Ve=>{const We=Ve.innerWidth,$e=Ve.innerHeight,Ue=Math.min(We,$e),Ne=Math.max(We,$e);return Ue>390&&Ue<520&&Ne>620&&Ne<800},tablet:Ve=>{const We=Ve.innerWidth,$e=Ve.innerHeight,Ue=Math.min(We,$e),Ne=Math.max(We,$e);return ot(Ve)||(Ve=>De(Ve)&&!ge(Ve,/mobile/i))(Ve)||Ue>460&&Ue<820&&Ne>780&&Ne<1400},cordova:ze,capacitor:re,electron:Ve=>ge(Ve,/electron/i),pwa:Ve=>{var We;return!(!(null===(We=Ve.matchMedia)||void 0===We?void 0:We.call(Ve,"(display-mode: standalone)").matches)&&!Ve.navigator.standalone)},mobile:st,mobileweb:Ve=>st(Ve)&&!He(Ve),desktop:Ve=>!st(Ve),hybrid:He};let Pe;const Ie=Ve=>Ve&&(0,c.g)(Ve)||Pe,et=(Ve={})=>{if(typeof window>"u")return;const We=window.document,$e=window,Ue=$e.Ionic=$e.Ionic||{},Ne={};Ve._ael&&(Ne.ael=Ve._ael),Ve._rel&&(Ne.rel=Ve._rel),Ve._ce&&(Ne.ce=Ve._ce),(0,c.s)(Ne);const tt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Ve=>{try{const We=Ve.sessionStorage.getItem(Ke);return null!==We?JSON.parse(We):{}}catch(We){return{}}})($e)),{persistConfig:!1}),Ue.config),(Ve=>{const We={};return Ve.location.search.slice(1).split("&").map($e=>$e.split("=")).map(([$e,Ue])=>[decodeURIComponent($e),decodeURIComponent(Ue)]).filter(([$e])=>((Ve,We)=>Ve.substr(0,We.length)===We)($e,"ionic:")).map(([$e,Ue])=>[$e.slice("ionic:".length),Ue]).forEach(([$e,Ue])=>{We[$e]=Ue}),We})($e)),Ve);W.reset(tt),W.getBoolean("persistConfig")&&((Ve,We)=>{try{Ve.sessionStorage.setItem(Ke,JSON.stringify(We))}catch($e){return}})($e,tt),be($e),Ue.config=W,Ue.mode=Pe=W.get("mode",We.documentElement.getAttribute("mode")||(we($e,"ios")?"ios":"md")),W.set("mode",Pe),We.documentElement.setAttribute("mode",Pe),We.documentElement.classList.add(Pe),W.getBoolean("_testing")&&W.set("animated",!1);const _t=Ut=>{var zt;return null===(zt=Ut.tagName)||void 0===zt?void 0:zt.startsWith("ION-")},Kt=Ut=>["ios","md"].includes(Ut);(0,c.a)(Ut=>{for(;Ut;){const zt=Ut.mode||Ut.getAttribute("mode");if(zt){if(Kt(zt))return zt;_t(Ut)&&console.warn('Invalid ionic mode: "'+zt+'", expected: "ios" or "md"')}Ut=Ut.parentElement}return Pe})}},3953:(on,pt,V)=>{"use strict";V.r(pt),V.d(pt,{iosTransitionAnimation:()=>qe,shadow:()=>me});var c=V(8834),X=V(697);V(3457),V(1308);const Se=Ge=>document.querySelector(`${Ge}.ion-cloned-element`),me=Ge=>Ge.shadowRoot||Ge,Le=Ge=>{const ot="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs"),It="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=ot){const ke=ot.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=ke?ke.querySelector(It):null}return Ge.querySelector(It)},Ke=(Ge,ot)=>{const It="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs");let ke=[];if(null!=It){const De=It.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=De&&(ke=De.querySelectorAll("ion-buttons"))}else ke=Ge.querySelectorAll("ion-buttons");for(const De of ke){const fe=De.closest("ion-header"),q=fe&&!fe.classList.contains("header-collapse-condense-inactive"),ut=De.querySelector("ion-back-button"),st=De.classList.contains("buttons-collapse"),it="start"===De.slot||""===De.slot;if(null!==ut&&it&&(st&&q&&ot||!st))return ut}return null},we=(Ge,ot,It,ke,De,fe)=>{const q=ot?`calc(100% - ${fe.right+4}px)`:fe.left-4+"px",ut=ot?"7px":"-7px",st=ot?"-4px":"4px",it=ot?"-4px":"4px",He=ot?"right":"left",ze=ot?"left":"right",ce=It?[{offset:0,opacity:1,transform:`translate3d(${st}, ${fe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ut}, ${De.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ut}, ${De.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${st}, ${fe.top-46}px, 0) scale(1)`}],ie=It?[{offset:0,opacity:1,transform:`translate3d(${it}, ${fe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${it}, ${fe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${it}, ${fe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${it}, ${fe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${it}, ${fe.top-46}px, 0) scale(1)`}],Pe=(0,c.c)(),Ie=(0,c.c)(),et=Se("ion-back-button"),Ve=me(et).querySelector(".button-text"),We=me(et).querySelector("ion-icon");et.text=ke.text,et.mode=ke.mode,et.icon=ke.icon,et.color=ke.color,et.disabled=ke.disabled,et.style.setProperty("display","block"),et.style.setProperty("position","fixed"),Ie.addElement(We),Pe.addElement(Ve),Pe.beforeStyles({"transform-origin":`${He} center`}).beforeAddWrite(()=>{ke.style.setProperty("display","none"),et.style.setProperty(He,q)}).afterAddWrite(()=>{ke.style.setProperty("display",""),et.style.setProperty("display","none"),et.style.removeProperty(He)}).keyframes(ce),Ie.beforeStyles({"transform-origin":`${ze} center`}).keyframes(ie),Ge.addAnimation([Pe,Ie])},be=(Ge,ot,It,ke,De,fe)=>{const q=ot?`calc(100% - ${De.right}px)`:`${De.left}px`,ut=ot?"-18px":"18px",st=ot?"right":"left",ze=It?[{offset:0,opacity:0,transform:`translate3d(${ut}, ${fe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ut}, ${fe.top-4}px, 0) scale(0.5)`}],re=Se("ion-title"),Ze=(0,c.c)();re.innerText=ke.innerText,re.size=ke.size,re.color=ke.color,Ze.addElement(re),Ze.beforeStyles({"transform-origin":`${st} center`,height:"46px",display:"",position:"relative",[st]:q}).beforeAddWrite(()=>{ke.style.setProperty("display","none")}).afterAddWrite(()=>{ke.style.setProperty("display",""),re.style.setProperty("display","none")}).keyframes(ze),Ge.addAnimation(Ze)},qe=(Ge,ot)=>{var It;try{const ke="cubic-bezier(0.32,0.72,0,1)",De="opacity",fe="transform",q="0%",st="rtl"===Ge.ownerDocument.dir,it=st?"-99.5%":"99.5%",He=st?"33%":"-33%",ze=ot.enteringEl,re=ot.leavingEl,Ze="back"===ot.direction,ce=ze.querySelector(":scope > ion-content"),ge=ze.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ve=ze.querySelectorAll(":scope > ion-header > ion-toolbar"),ie=(0,c.c)(),Pe=(0,c.c)();if(ie.addElement(ze).duration((null!==(It=ot.duration)&&void 0!==It?It:0)||540).easing(ot.easing||ke).fill("both").beforeRemoveClass("ion-page-invisible"),re&&null!=Ge){const We=(0,c.c)();We.addElement(Ge),ie.addAnimation(We)}if(ce||0!==ve.length||0!==ge.length?(Pe.addElement(ce),Pe.addElement(ge)):Pe.addElement(ze.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ie.addAnimation(Pe),Ze?Pe.beforeClearStyles([De]).fromTo("transform",`translateX(${He})`,`translateX(${q})`).fromTo(De,.8,1):Pe.beforeClearStyles([De]).fromTo("transform",`translateX(${it})`,`translateX(${q})`),ce){const We=me(ce).querySelector(".transition-effect");if(We){const $e=We.querySelector(".transition-cover"),Ue=We.querySelector(".transition-shadow"),Ne=(0,c.c)(),tt=(0,c.c)(),_t=(0,c.c)();Ne.addElement(We).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),tt.addElement($e).beforeClearStyles([De]).fromTo(De,0,.1),_t.addElement(Ue).beforeClearStyles([De]).fromTo(De,.03,.7),Ne.addAnimation([tt,_t]),Pe.addAnimation([Ne])}}const Ie=ze.querySelector("ion-header.header-collapse-condense"),{forward:et,backward:Ve}=((Ge,ot,It,ke,De)=>{const fe=Ke(ke,It),q=Le(De),ut=Le(ke),st=Ke(De,It),it=null!==fe&&null!==q&&!It,He=null!==ut&&null!==st&&It;if(it){const ze=q.getBoundingClientRect(),re=fe.getBoundingClientRect();be(Ge,ot,It,q,ze,re),we(Ge,ot,It,fe,ze,re)}else if(He){const ze=ut.getBoundingClientRect(),re=st.getBoundingClientRect();be(Ge,ot,It,ut,ze,re),we(Ge,ot,It,st,ze,re)}return{forward:it,backward:He}})(ie,st,Ze,ze,re);if(ve.forEach(We=>{const $e=(0,c.c)();$e.addElement(We),ie.addAnimation($e);const Ue=(0,c.c)();Ue.addElement(We.querySelector("ion-title"));const Ne=(0,c.c)(),tt=Array.from(We.querySelectorAll("ion-buttons,[menuToggle]")),_t=We.closest("ion-header"),Kt=null==_t?void 0:_t.classList.contains("header-collapse-condense-inactive");let Ut;Ut=tt.filter(Ze?qn=>{const Pn=qn.classList.contains("buttons-collapse");return Pn&&!Kt||!Pn}:qn=>!qn.classList.contains("buttons-collapse")),Ne.addElement(Ut);const zt=(0,c.c)();zt.addElement(We.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const wn=(0,c.c)();wn.addElement(me(We).querySelector(".toolbar-background"));const er=(0,c.c)(),tr=We.querySelector("ion-back-button");if(tr&&er.addElement(tr),$e.addAnimation([Ue,Ne,zt,wn,er]),Ne.fromTo(De,.01,1),zt.fromTo(De,.01,1),Ze)Kt||Ue.fromTo("transform",`translateX(${He})`,`translateX(${q})`).fromTo(De,.01,1),zt.fromTo("transform",`translateX(${He})`,`translateX(${q})`),er.fromTo(De,.01,1);else if(Ie||Ue.fromTo("transform",`translateX(${it})`,`translateX(${q})`).fromTo(De,.01,1),zt.fromTo("transform",`translateX(${it})`,`translateX(${q})`),wn.beforeClearStyles([De,"transform"]),(null==_t?void 0:_t.translucent)?wn.fromTo("transform",st?"translateX(-100%)":"translateX(100%)","translateX(0px)"):wn.fromTo(De,.01,"var(--opacity)"),et||er.fromTo(De,.01,1),tr&&!et){const Pn=(0,c.c)();Pn.addElement(me(tr).querySelector(".button-text")).fromTo("transform",st?"translateX(-100px)":"translateX(100px)","translateX(0px)"),$e.addAnimation(Pn)}}),re){const We=(0,c.c)(),$e=re.querySelector(":scope > ion-content"),Ue=re.querySelectorAll(":scope > ion-header > ion-toolbar"),Ne=re.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if($e||0!==Ue.length||0!==Ne.length?(We.addElement($e),We.addElement(Ne)):We.addElement(re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ie.addAnimation(We),Ze){We.beforeClearStyles([De]).fromTo("transform",`translateX(${q})`,st?"translateX(-100%)":"translateX(100%)");const tt=(0,X.g)(re);ie.afterAddWrite(()=>{"normal"===ie.getDirection()&&tt.style.setProperty("display","none")})}else We.fromTo("transform",`translateX(${q})`,`translateX(${He})`).fromTo(De,1,.8);if($e){const tt=me($e).querySelector(".transition-effect");if(tt){const _t=tt.querySelector(".transition-cover"),Kt=tt.querySelector(".transition-shadow"),Ut=(0,c.c)(),zt=(0,c.c)(),wn=(0,c.c)();Ut.addElement(tt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),zt.addElement(_t).beforeClearStyles([De]).fromTo(De,.1,0),wn.addElement(Kt).beforeClearStyles([De]).fromTo(De,.7,.03),Ut.addAnimation([zt,wn]),We.addAnimation([Ut])}}Ue.forEach(tt=>{const _t=(0,c.c)();_t.addElement(tt);const Kt=(0,c.c)();Kt.addElement(tt.querySelector("ion-title"));const Ut=(0,c.c)(),zt=tt.querySelectorAll("ion-buttons,[menuToggle]"),wn=tt.closest("ion-header"),er=null==wn?void 0:wn.classList.contains("header-collapse-condense-inactive"),tr=Array.from(zt).filter(Ln=>{const jn=Ln.classList.contains("buttons-collapse");return jn&&!er||!jn});Ut.addElement(tr);const qn=(0,c.c)(),Pn=tt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Pn.length>0&&qn.addElement(Pn);const hn=(0,c.c)();hn.addElement(me(tt).querySelector(".toolbar-background"));const cr=(0,c.c)(),Mr=tt.querySelector("ion-back-button");if(Mr&&cr.addElement(Mr),_t.addAnimation([Kt,Ut,qn,cr,hn]),ie.addAnimation(_t),cr.fromTo(De,.99,0),Ut.fromTo(De,.99,0),qn.fromTo(De,.99,0),Ze){if(er||Kt.fromTo("transform",`translateX(${q})`,st?"translateX(-100%)":"translateX(100%)").fromTo(De,.99,0),qn.fromTo("transform",`translateX(${q})`,st?"translateX(-100%)":"translateX(100%)"),hn.beforeClearStyles([De,"transform"]),(null==wn?void 0:wn.translucent)?hn.fromTo("transform","translateX(0px)",st?"translateX(-100%)":"translateX(100%)"):hn.fromTo(De,"var(--opacity)",0),Mr&&!Ve){const jn=(0,c.c)();jn.addElement(me(Mr).querySelector(".button-text")).fromTo("transform",`translateX(${q})`,`translateX(${(st?-124:124)+"px"})`),_t.addAnimation(jn)}}else er||Kt.fromTo("transform",`translateX(${q})`,`translateX(${He})`).fromTo(De,.99,0).afterClearStyles([fe,De]),qn.fromTo("transform",`translateX(${q})`,`translateX(${He})`).afterClearStyles([fe,De]),cr.afterClearStyles([De]),Kt.afterClearStyles([De]),Ut.afterClearStyles([De])})}return ie}catch(ke){throw ke}}},3880:(on,pt,V)=>{"use strict";V.r(pt),V.d(pt,{mdTransitionAnimation:()=>Ae});var c=V(8834),X=V(697);V(3457),V(1308);const Ae=(Se,me)=>{var Le,Ke,Ce;const qe="back"===me.direction,ot=me.leavingEl,It=(0,X.g)(me.enteringEl),ke=It.querySelector("ion-toolbar"),De=(0,c.c)();if(De.addElement(It).fill("both").beforeRemoveClass("ion-page-invisible"),qe?De.duration((null!==(Le=me.duration)&&void 0!==Le?Le:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration((null!==(Ke=me.duration)&&void 0!==Ke?Ke:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),ke){const fe=(0,c.c)();fe.addElement(ke),De.addAnimation(fe)}if(ot&&qe){De.duration((null!==(Ce=me.duration)&&void 0!==Ce?Ce:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const fe=(0,c.c)();fe.addElement((0,X.g)(ot)).onFinish(q=>{1===q&&fe.elements.length>0&&fe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(fe)}return De}},4414:(on,pt,V)=>{"use strict";V.d(pt,{B:()=>$e,a:()=>Le,b:()=>Ke,c:()=>qe,d:()=>Ze,e:()=>ot,f:()=>ge,g:()=>Pe,h:()=>Se,i:()=>et,j:()=>De,k:()=>ze,m:()=>we,s:()=>We,t:()=>Ge});var c=V(5861),X=V(9658),W=V(7593),Oe=V(5730);let Ae=0;const Se=new WeakMap,me=Ue=>({create:Ne=>It(Ue,Ne),dismiss:(Ne,tt,_t)=>it(document,Ne,tt,Ue,_t),getTop:()=>(0,c.Z)(function*(){return ze(document,Ue)})()}),Le=me("ion-alert"),Ke=me("ion-action-sheet"),we=me("ion-modal"),qe=me("ion-popover"),Ge=me("ion-toast"),ot=Ue=>{typeof document<"u"&&st(document);const Ne=Ae++;Ue.overlayIndex=Ne,Ue.hasAttribute("id")||(Ue.id=`ion-overlay-${Ne}`)},It=(Ue,Ne)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(Ue).then(()=>{const tt=document.createElement(Ue);return tt.classList.add("overlay-hidden"),Object.assign(tt,Object.assign(Object.assign({},Ne),{hasController:!0})),ve(document).appendChild(tt),new Promise(_t=>(0,Oe.c)(tt,_t))}):Promise.resolve(),ke='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',De=(Ue,Ne)=>{let tt=Ue.querySelector(ke);const _t=null==tt?void 0:tt.shadowRoot;_t&&(tt=_t.querySelector(ke)||tt),tt?(0,Oe.f)(tt):Ne.focus()},q=(Ue,Ne)=>{const tt=Array.from(Ue.querySelectorAll(ke));let _t=tt.length>0?tt[tt.length-1]:null;const Kt=null==_t?void 0:_t.shadowRoot;Kt&&(_t=Kt.querySelector(ke)||_t),_t?_t.focus():Ne.focus()},st=Ue=>{0===Ae&&(Ae=1,Ue.addEventListener("focus",Ne=>{((Ue,Ne)=>{const tt=ze(Ne,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),_t=Ue.target;tt&&_t&&!tt.classList.contains("ion-disable-focus-trap")&&(tt.shadowRoot?(()=>{if(tt.contains(_t))tt.lastFocus=_t;else{const zt=tt.lastFocus;De(tt,tt),zt===Ne.activeElement&&q(tt,tt),tt.lastFocus=Ne.activeElement}})():(()=>{if(tt===_t)tt.lastFocus=void 0;else{const zt=(0,Oe.g)(tt);if(!zt.contains(_t))return;const wn=zt.querySelector(".ion-overlay-wrapper");if(!wn)return;if(wn.contains(_t))tt.lastFocus=_t;else{const er=tt.lastFocus;De(wn,tt),er===Ne.activeElement&&q(wn,tt),tt.lastFocus=Ne.activeElement}}})())})(Ne,Ue)},!0),Ue.addEventListener("ionBackButton",Ne=>{const tt=ze(Ue);null!=tt&&tt.backdropDismiss&&Ne.detail.register(W.OVERLAY_BACK_BUTTON_PRIORITY,()=>tt.dismiss(void 0,$e))}),Ue.addEventListener("keyup",Ne=>{if("Escape"===Ne.key){const tt=ze(Ue);null!=tt&&tt.backdropDismiss&&tt.dismiss(void 0,$e)}}))},it=(Ue,Ne,tt,_t,Kt)=>{const Ut=ze(Ue,_t,Kt);return Ut?Ut.dismiss(Ne,tt):Promise.reject("overlay does not exist")},ze=(Ue,Ne,tt)=>{const _t=((Ue,Ne)=>(void 0===Ne&&(Ne="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ue.querySelectorAll(Ne)).filter(tt=>tt.overlayIndex>0)))(Ue,Ne).filter(Kt=>!(Ue=>Ue.classList.contains("overlay-hidden"))(Kt));return void 0===tt?_t[_t.length-1]:_t.find(Kt=>Kt.id===tt)},re=(Ue=!1)=>{const tt=ve(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!tt||(Ue?tt.setAttribute("aria-hidden","true"):tt.removeAttribute("aria-hidden"))},Ze=function(){var Ue=(0,c.Z)(function*(Ne,tt,_t,Kt,Ut){var zt,wn;if(Ne.presented)return;re(!0),Ne.presented=!0,Ne.willPresent.emit(),null===(zt=Ne.willPresentShorthand)||void 0===zt||zt.emit();const er=(0,X.b)(Ne),tr=Ne.enterAnimation?Ne.enterAnimation:X.c.get(tt,"ios"===er?_t:Kt);(yield ie(Ne,tr,Ne.el,Ut))&&(Ne.didPresent.emit(),null===(wn=Ne.didPresentShorthand)||void 0===wn||wn.emit()),"ION-TOAST"!==Ne.el.tagName&&ce(Ne.el),Ne.keyboardClose&&(null===document.activeElement||!Ne.el.contains(document.activeElement))&&Ne.el.focus()});return function(tt,_t,Kt,Ut,zt){return Ue.apply(this,arguments)}}(),ce=function(){var Ue=(0,c.Z)(function*(Ne){let tt=document.activeElement;if(!tt)return;const _t=null==tt?void 0:tt.shadowRoot;_t&&(tt=_t.querySelector(ke)||tt),yield Ne.onDidDismiss(),tt.focus()});return function(tt){return Ue.apply(this,arguments)}}(),ge=function(){var Ue=(0,c.Z)(function*(Ne,tt,_t,Kt,Ut,zt,wn){var er,tr;if(!Ne.presented)return!1;re(!1),Ne.presented=!1;try{Ne.el.style.setProperty("pointer-events","none"),Ne.willDismiss.emit({data:tt,role:_t}),null===(er=Ne.willDismissShorthand)||void 0===er||er.emit({data:tt,role:_t});const qn=(0,X.b)(Ne),Pn=Ne.leaveAnimation?Ne.leaveAnimation:X.c.get(Kt,"ios"===qn?Ut:zt);"gesture"!==_t&&(yield ie(Ne,Pn,Ne.el,wn)),Ne.didDismiss.emit({data:tt,role:_t}),null===(tr=Ne.didDismissShorthand)||void 0===tr||tr.emit({data:tt,role:_t}),Se.delete(Ne),Ne.el.classList.add("overlay-hidden"),Ne.el.style.removeProperty("pointer-events")}catch(qn){console.error(qn)}return Ne.el.remove(),!0});return function(tt,_t,Kt,Ut,zt,wn,er){return Ue.apply(this,arguments)}}(),ve=Ue=>Ue.querySelector("ion-app")||Ue.body,ie=function(){var Ue=(0,c.Z)(function*(Ne,tt,_t,Kt){_t.classList.remove("overlay-hidden");const zt=tt(Ne.el,Kt);(!Ne.animated||!X.c.getBoolean("animated",!0))&&zt.duration(0),Ne.keyboardClose&&zt.beforeAddWrite(()=>{const er=_t.ownerDocument.activeElement;null!=er&&er.matches("input,ion-input, ion-textarea")&&er.blur()});const wn=Se.get(Ne)||[];return Se.set(Ne,[...wn,zt]),yield zt.play(),!0});return function(tt,_t,Kt,Ut){return Ue.apply(this,arguments)}}(),Pe=(Ue,Ne)=>{let tt;const _t=new Promise(Kt=>tt=Kt);return Ie(Ue,Ne,Kt=>{tt(Kt.detail)}),_t},Ie=(Ue,Ne,tt)=>{const _t=Kt=>{(0,Oe.b)(Ue,Ne,_t),tt(Kt)};(0,Oe.a)(Ue,Ne,_t)},et=Ue=>"cancel"===Ue||Ue===$e,Ve=Ue=>Ue(),We=(Ue,Ne)=>{if("function"==typeof Ue)return X.c.get("_zoneGate",Ve)(()=>{try{return Ue(Ne)}catch(_t){throw _t}})},$e="backdrop"},4120:(on,pt,V)=>{"use strict";V.d(pt,{r:()=>Ae});var c=V(4004),X=V(7579),W=V(4650),Oe=V(7407);let Ae=(()=>{class Se{constructor(Le){this.db=Le,this.subject=new X.x}createUser(Le){const Ke=JSON.parse(JSON.stringify(Le));return this.db.collection("user").add(Ke)}getAllUsers(){return this.db.collection("user").snapshotChanges().pipe((0,c.U)(Ke=>Ke.map(Ce=>Object.assign({postId:Ce.payload.doc.id},Ce.payload.doc.data()))))}getUserbyId(Le){return this.db.doc("user/huuh").valueChanges()}getChangeUser(){return this.subject.asObservable()}setUser(){this.subject.next(!0)}}return Se.\u0275fac=function(Le){return new(Le||Se)(W.LFG(Oe.ST))},Se.\u0275prov=W.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},3786:(on,pt,V)=>{"use strict";V.d(pt,{M:()=>Oe});var c=V(655),X=V(4650),W=V(8779);let Oe=(()=>{class Ae{constructor(me){this.toastController=me}presentToast(me,Le){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:me,duration:2e3,color:Le,position:"bottom"})).present()})}}return Ae.\u0275fac=function(me){return new(me||Ae)(X.LFG(W.yF))},Ae.\u0275prov=X.Yz7({token:Ae,factory:Ae.\u0275fac,providedIn:"root"}),Ae})()},3292:(on,pt,V)=>{"use strict";var c=V(1481),X=V(4650),W=V(2435),Oe=V(8779),Ae=V(2011),Se=V(1205),me=V(9751),Le=V(9646),Ke=V(8996),Ce=V(4986),we=V(4482),be=V(5403),Ge=V(4004),ot=V(3900),It=V(5813),ke=V(3942),De=V(5861),fe=V(9681),q=V(2090),ut=V(4859);const st="firebasestorage.googleapis.com",it="storageBucket";class Ze extends q.ZR{constructor(a,l,p=0){super(ce(a),`Firebase Storage: ${l} (${ce(a)})`),this.status_=p,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return ce(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ce(u){return"storage/"+u}function ge(){return new Ze("unknown","An unknown error occurred, please check the error payload for server response.")}function Ve(){return new Ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function We(){return new Ze("canceled","User canceled the upload/download.")}function tt(){return new Ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zt(u){return new Ze("invalid-argument",u)}function wn(){return new Ze("app-deleted","The Firebase app was deleted.")}function er(u){return new Ze("invalid-root-operation","The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tr(u,a){return new Ze("invalid-format","String does not match format '"+u+"': "+a)}function qn(u){throw new Ze("internal-error","Internal error: "+u)}class Pn{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let p;try{p=Pn.makeFromUrl(a,l)}catch(_){return new Pn(a,"")}if(""===p.path)return p;throw function Ue(u){return new Ze("invalid-default-bucket","Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let p=null;const _="([A-Za-z0-9.\\-_]+)",ee=new RegExp("^gs://"+_+"(/(.*))?$","i");function Te(So){So.path_=decodeURIComponent(So.path)}const At=l.replace(/[.]/g,"\\."),Ts=[{regex:ee,indices:{bucket:1,path:3},postModify:function x(So){"/"===So.path.charAt(So.path.length-1)&&(So.path_=So.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${At}/v[A-Za-z0-9_]+/b/${_}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Te},{regex:new RegExp(`^https?://${l===st?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${_}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Te}];for(let So=0;So<Ts.length;So++){const vu=Ts[So],_u=vu.regex.exec(a);if(_u){let js=_u[vu.indices.path];js||(js=""),p=new Pn(_u[vu.indices.bucket],js),vu.postModify(p);break}}if(null==p)throw function $e(u){return new Ze("invalid-url","Invalid URL '"+u+"'.")}(a);return p}}class hn{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function Qt(u){return"string"==typeof u||u instanceof String}function ii(u){return Rr()&&u instanceof Blob}function Rr(){return typeof Blob<"u"&&!(0,q.UG)()}function Vr(u,a,l,p){if(p<a)throw zt(`Invalid value for '${u}'. Expected ${a} or greater.`);if(p>l)throw zt(`Invalid value for '${u}'. Expected ${l} or less.`)}function Kr(u,a,l){let p=a;return null==l&&(p=`https://${a}`),`${l}://${p}/v0${u}`}function Dr(u){const a=encodeURIComponent;let l="?";for(const p in u)u.hasOwnProperty(p)&&(l=l+(a(p)+"=")+a(u[p])+"&");return l=l.slice(0,-1),l}var xn=(()=>{return(u=xn||(xn={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",xn;var u})();function Sn(u,a){const l=u>=500&&u<600,_=-1!==[408,429].indexOf(u),x=-1!==a.indexOf(u);return l||_||x}class Bn{constructor(a,l,p,_,x,L,ee,he,Te,vt,At,$t=!0){this.url_=a,this.method_=l,this.headers_=p,this.body_=_,this.successCodes_=x,this.additionalRetryCodes_=L,this.callback_=ee,this.errorCallback_=he,this.timeout_=Te,this.progressCallback_=vt,this.connectionFactory_=At,this.retry=$t,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((un,Fn)=>{this.resolve_=un,this.reject_=Fn,this.start_()})}start_(){const l=(p,_)=>{const x=this.resolve_,L=this.reject_,ee=_.connection;if(_.wasSuccessCode)try{const he=this.callback_(ee,ee.getResponse());!function Ln(u){return void 0!==u}(he)?x():x(he)}catch(he){L(he)}else if(null!==ee){const he=ge();he.serverResponse=ee.getErrorText(),L(this.errorCallback_?this.errorCallback_(ee,he):he)}else L(_.canceled?this.appDelete_?wn():We():Ve())};this.canceled_?l(0,new yi(!1,null,!0)):this.backoffId_=function cr(u,a,l){let p=1,_=null,x=null,L=!1,ee=0;function he(){return 2===ee}let Te=!1;function vt(...ri){Te||(Te=!0,a.apply(null,ri))}function At(ri){_=setTimeout(()=>{_=null,u(un,he())},ri)}function $t(){x&&clearTimeout(x)}function un(ri,...Ir){if(Te)return void $t();if(ri)return $t(),void vt.call(null,ri,...Ir);if(he()||L)return $t(),void vt.call(null,ri,...Ir);let Ts;p<64&&(p*=2),1===ee?(ee=2,Ts=0):Ts=1e3*(p+Math.random()),At(Ts)}let Fn=!1;function $r(ri){Fn||(Fn=!0,$t(),!Te&&(null!==_?(ri||(ee=2),clearTimeout(_),At(0)):ri||(ee=1)))}return At(0),x=setTimeout(()=>{L=!0,$r(!0)},l),$r}((p,_)=>{if(_)return void p(!1,new yi(!1,null,!0));const x=this.connectionFactory_();this.pendingConnection_=x;const L=ee=>{null!==this.progressCallback_&&this.progressCallback_(ee.loaded,ee.lengthComputable?ee.total:-1)};null!==this.progressCallback_&&x.addUploadProgressListener(L),x.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&x.removeUploadProgressListener(L),this.pendingConnection_=null;const ee=x.getErrorCode()===xn.NO_ERROR,he=x.getStatus();if((!ee||Sn(he,this.additionalRetryCodes_))&&this.retry){const vt=x.getErrorCode()===xn.ABORT;return void p(!1,new yi(!1,null,vt))}const Te=-1!==this.successCodes_.indexOf(he);p(!0,new yi(Te,x))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Mr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class yi{constructor(a,l,p){this.wasSuccessCode=a,this.connection=l,this.canceled=!!p}}function bi(...u){const a=function wr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let p=0;p<u.length;p++)l.append(u[p]);return l.getBlob()}if(Rr())return new Blob(u);throw new Ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nn{constructor(a,l){this.data=a,this.contentType=l||null}}function jt(u,a){switch(u){case Ar.RAW:return new nn(vn(a));case Ar.BASE64:case Ar.BASE64URL:return new nn(Nn(u,a));case Ar.DATA_URL:return new nn(function Ye(u){const a=new Vn(u);return a.base64?Nn(Ar.BASE64,a.rest):function Hn(u){let a;try{a=decodeURIComponent(u)}catch(l){throw tr(Ar.DATA_URL,"Malformed data URL.")}return vn(a)}(a.rest)}(a),function Fe(u){return new Vn(u).contentType}(a))}throw ge()}function vn(u){const a=[];for(let l=0;l<u.length;l++){let p=u.charCodeAt(l);p<=127?a.push(p):p<=2047?a.push(192|p>>6,128|63&p):55296==(64512&p)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(p=65536|(1023&p)<<10|1023&u.charCodeAt(++l),a.push(240|p>>18,128|p>>12&63,128|p>>6&63,128|63&p)):a.push(239,191,189):56320==(64512&p)?a.push(239,191,189):a.push(224|p>>12,128|p>>6&63,128|63&p)}return new Uint8Array(a)}function Nn(u,a){switch(u){case Ar.BASE64:{const _=-1!==a.indexOf("-"),x=-1!==a.indexOf("_");if(_||x)throw tr(u,"Invalid character '"+(_?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const _=-1!==a.indexOf("+"),x=-1!==a.indexOf("/");if(_||x)throw tr(u,"Invalid character '"+(_?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Wn(u){if(typeof atob>"u")throw function Ut(u){return new Ze("unsupported-environment",`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(_){throw _.message.includes("polyfill")?_:tr(u,"Invalid character found")}const p=new Uint8Array(l.length);for(let _=0;_<l.length;_++)p[_]=l.charCodeAt(_);return p}class Vn{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw tr(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const p=l[1]||null;null!=p&&(this.base64=function Qe(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(p,";base64"),this.contentType=this.base64?p.substring(0,p.length-7):p),this.rest=a.substring(a.indexOf(",")+1)}}class Ct{constructor(a,l){let p=0,_="";ii(a)?(this.data_=a,p=a.size,_=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),p=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),p=a.length),this.size_=p,this.type_=_}size(){return this.size_}type(){return this.type_}slice(a,l){if(ii(this.data_)){const _=function dr(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===_?null:new Ct(_)}{const p=new Uint8Array(this.data_.buffer,a,l-a);return new Ct(p,!0)}}static getBlob(...a){if(Rr()){const l=a.map(p=>p instanceof Ct?p.data_:p);return new Ct(bi.apply(null,l))}{const l=a.map(L=>Qt(L)?jt(Ar.RAW,L).data:L.data_);let p=0;l.forEach(L=>{p+=L.byteLength});const _=new Uint8Array(p);let x=0;return l.forEach(L=>{for(let ee=0;ee<L.length;ee++)_[x++]=L[ee]}),new Ct(_,!0)}}uploadData(){return this.data_}}function Et(u){let a;try{a=JSON.parse(u)}catch(l){return null}return function Wt(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function rr(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function zr(u,a){return a}class bn{constructor(a,l,p,_){this.server=a,this.local=l||a,this.writable=!!p,this.xform=_||zr}}let yt=null;function Re(){if(yt)return yt;const u=[];u.push(new bn("bucket")),u.push(new bn("generation")),u.push(new bn("metageneration")),u.push(new bn("name","fullPath",!0));const l=new bn("name");l.xform=function a(x,L){return function je(u){return!Qt(u)||u.length<2?u:rr(u)}(L)},u.push(l);const _=new bn("size");return _.xform=function p(x,L){return void 0!==L?Number(L):L},u.push(_),u.push(new bn("timeCreated")),u.push(new bn("updated")),u.push(new bn("md5Hash",null,!0)),u.push(new bn("cacheControl",null,!0)),u.push(new bn("contentDisposition",null,!0)),u.push(new bn("contentEncoding",null,!0)),u.push(new bn("contentLanguage",null,!0)),u.push(new bn("contentType",null,!0)),u.push(new bn("metadata","customMetadata",!0)),yt=u,yt}function Cn(u,a,l){const p=Et(a);return null===p?null:function Mt(u,a,l){const p={type:"file"},_=l.length;for(let x=0;x<_;x++){const L=l[x];p[L.local]=L.xform(p,a[L.server])}return function Dt(u,a){Object.defineProperty(u,"ref",{get:function l(){const x=new Pn(u.bucket,u.fullPath);return a._makeStorageReference(x)}})}(p,u),p}(u,p,l)}function Fr(u,a){const l={},p=a.length;for(let _=0;_<p;_++){const x=a[_];x.writable&&(l[x.server]=u[x.local])}return JSON.stringify(l)}const ei="prefixes";class Ni{constructor(a,l,p,_){this.url=a,this.method=l,this.handler=p,this.timeout=_,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function vi(u){if(!u)throw ge()}function gi(u,a){return function l(p,_){const x=Cn(u,_,a);return vi(null!==x),x}}function Or(u){return function a(l,p){let _;return _=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function Ie(){return new Ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Pe(){return new Ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function ie(u){return new Ze("quota-exceeded","Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function et(u){return new Ze("unauthorized","User does not have permission to access '"+u+"'.")}(u.path):p,_.status=l.getStatus(),_.serverResponse=p.serverResponse,_}}function Wr(u){const a=Or(u);return function l(p,_){let x=a(p,_);return 404===p.getStatus()&&(x=function ve(u){return new Ze("object-not-found","Object '"+u+"' does not exist.")}(u.path)),x.serverResponse=_.serverResponse,x}}function Lr(u,a,l){const _=Kr(a.fullServerUrl(),u.host,u._protocol),L=u.maxOperationRetryTime,ee=new Ni(_,"GET",gi(u,l),L);return ee.errorHandler=Wr(a),ee}function ai(u,a,l,p,_){const x={};x.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(x.delimiter=l),p&&(x.pageToken=p),_&&(x.maxResults=_);const ee=Kr(a.bucketOnlyServerUrl(),u.host,u._protocol),Te=u.maxOperationRetryTime,vt=new Ni(ee,"GET",function _s(u,a){return function l(p,_){const x=function Pr(u,a,l){const p=Et(l);return null===p?null:function Ci(u,a,l){const p={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[ei])for(const _ of l[ei]){const x=_.replace(/\/$/,""),L=u._makeStorageReference(new Pn(a,x));p.prefixes.push(L)}if(l.items)for(const _ of l.items){const x=u._makeStorageReference(new Pn(a,_.name));p.items.push(x)}return p}(u,a,p)}(u,a,_);return vi(null!==x),x}}(u,a.bucket),Te);return vt.urlParams=x,vt.errorHandler=Or(a),vt}function Di(u,a,l){const p=Object.assign({},l);return p.fullPath=u.path,p.size=a.size(),p.contentType||(p.contentType=function xi(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),p}class ae{constructor(a,l,p,_){this.current=a,this.total=l,this.finalized=!!p,this.metadata=_||null}}function ye(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch(_){vi(!1)}return vi(!!l&&-1!==(a||["active"]).indexOf(l)),l}const rt={STATE_CHANGED:"state_changed"},ft={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Rt(u){switch(u){case"running":case"pausing":case"canceling":return ft.RUNNING;case"paused":return ft.PAUSED;case"success":return ft.SUCCESS;case"canceled":return ft.CANCELED;default:return ft.ERROR}}class Pt{constructor(a,l,p){if(function jn(u){return"function"==typeof u}(a)||null!=l||null!=p)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=p?p:void 0;else{const x=a;this.next=x.next,this.error=x.error,this.complete=x.complete}}}function rn(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}class Rn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xn.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xn.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xn.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,p,_){if(this.sent_)throw qn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==_)for(const x in _)_.hasOwnProperty(x)&&this.xhr_.setRequestHeader(x,_[x].toString());return void 0!==p?this.xhr_.send(p):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(a){return-1}}getResponse(){if(!this.sent_)throw qn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class Nr extends Rn{initXhr(){this.xhr_.responseType="text"}}function mr(){return new Nr}class tn{constructor(a,l,p=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=p,this._mappings=Re(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=_=>{if(this._request=void 0,this._chunkMultiplier=1,_._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const x=this.isExponentialBackoffExpired();if(Sn(_.status,[])){if(!x)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();_=Ve()}this._error=_,this._transition("error")}},this._metadataErrorHandler=_=>{this._request=void 0,_._codeEquals("canceled")?this.completeTransitions_():(this._error=_,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((_,x)=>{this._resolve=_,this._reject=x,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,p])=>{switch(this._state){case"running":a(l,p);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const p=function lt(u,a,l,p,_){const x=a.bucketOnlyServerUrl(),L=Di(a,p,_),ee={name:L.fullPath},he=Kr(x,u.host,u._protocol),vt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${p.size()}`,"X-Goog-Upload-Header-Content-Type":L.contentType,"Content-Type":"application/json; charset=utf-8"},At=Fr(L,l),Fn=new Ni(he,"POST",function un($r){let ri;ye($r);try{ri=$r.getResponseHeader("X-Goog-Upload-URL")}catch(Ir){vi(!1)}return vi(Qt(ri)),ri},u.maxUploadRetryTime);return Fn.urlParams=ee,Fn.headers=vt,Fn.body=At,Fn.errorHandler=Or(a),Fn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(p,mr,a,l);this._request=_,_.getPromise().then(x=>{this._request=void 0,this._uploadUrl=x,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,p)=>{const _=function ht(u,a,l,p){const he=new Ni(l,"POST",function x(Te){const vt=ye(Te,["active","final"]);let At=null;try{At=Te.getResponseHeader("X-Goog-Upload-Size-Received")}catch(un){vi(!1)}At||vi(!1);const $t=Number(At);return vi(!isNaN($t)),new ae($t,p.size(),"final"===vt)},u.maxUploadRetryTime);return he.headers={"X-Goog-Upload-Command":"query"},he.errorHandler=Or(a),he}(this._ref.storage,this._ref._location,a,this._blob),x=this._ref.storage._makeRequest(_,mr,l,p);this._request=x,x.getPromise().then(L=>{this._request=void 0,this._updateProgress(L.current),this._needToFetchStatus=!1,L.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new ae(this._transferred,this._blob.size()),p=this._uploadUrl;this._resolveToken((_,x)=>{let L;try{L=function _e(u,a,l,p,_,x,L,ee){const he=new ae(0,0);if(L?(he.current=L.current,he.total=L.total):(he.current=0,he.total=p.size()),p.size()!==he.total)throw function _t(){return new Ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Te=he.total-he.current;let vt=Te;_>0&&(vt=Math.min(vt,_));const At=he.current;let un="";un=0===vt?"finalize":Te===vt?"upload, finalize":"upload";const Fn={"X-Goog-Upload-Command":un,"X-Goog-Upload-Offset":`${he.current}`},$r=p.slice(At,At+vt);if(null===$r)throw tt();const Ts=new Ni(l,"POST",function ri(So,vu){const _u=ye(So,["active","final"]),as=he.current+vt,js=p.size();let Zl;return Zl="final"===_u?gi(a,x)(So,vu):null,new ae(as,js,"final"===_u,Zl)},a.maxUploadRetryTime);return Ts.headers=Fn,Ts.body=$r.uploadData(),Ts.progressCallback=ee||null,Ts.errorHandler=Or(u),Ts}(this._ref._location,this._ref.storage,p,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(he){return this._error=he,void this._transition("error")}const ee=this._ref.storage._makeRequest(L,mr,_,x,!1);this._request=ee,ee.getPromise().then(he=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(he.current),he.finalized?(this._metadata=he.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const p=Lr(this._ref.storage,this._ref._location,this._mappings),_=this._ref.storage._makeRequest(p,mr,a,l);this._request=_,_.getPromise().then(x=>{this._request=void 0,this._metadata=x,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const p=function Xr(u,a,l,p,_){const x=a.bucketOnlyServerUrl(),L={"X-Goog-Upload-Protocol":"multipart"},he=function ee(){let Ts="";for(let So=0;So<2;So++)Ts+=Math.random().toString().slice(2);return Ts}();L["Content-Type"]="multipart/related; boundary="+he;const Te=Di(a,p,_),vt=Fr(Te,l),un=Ct.getBlob("--"+he+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vt+"\r\n--"+he+"\r\nContent-Type: "+Te.contentType+"\r\n\r\n",p,"\r\n--"+he+"--");if(null===un)throw tt();const Fn={name:Te.fullPath},$r=Kr(x,u.host,u._protocol),Ir=u.maxUploadRetryTime,To=new Ni($r,"POST",gi(u,l),Ir);return To.urlParams=Fn,To.headers=L,To.body=un.uploadData(),To.errorHandler=Or(a),To}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),_=this._ref.storage._makeRequest(p,mr,a,l);this._request=_,_.getPromise().then(x=>{this._request=void 0,this._metadata=x,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=We(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Rt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,p,_){const x=new Pt(l||void 0,p||void 0,_||void 0);return this._addObserver(x),()=>{this._removeObserver(x)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Rt(this._state)){case ft.SUCCESS:rn(this._resolve.bind(null,this.snapshot))();break;case ft.CANCELED:case ft.ERROR:rn(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Rt(this._state)){case ft.RUNNING:case ft.PAUSED:a.next&&rn(a.next.bind(a,this.snapshot))();break;case ft.SUCCESS:a.complete&&rn(a.complete.bind(a))();break;default:a.error&&rn(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class _n{constructor(a,l){this._service=a,this._location=l instanceof Pn?l:Pn.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new _n(a,l)}get root(){const a=new Pn(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rr(this._location.path)}get storage(){return this._service}get parent(){const a=function An(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new Pn(this._location.bucket,a);return new _n(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw er(a)}}function ls(u,a,l){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,De.Z)(function*(u,a,l){const _=yield Qi(u,{pageToken:l});a.prefixes.push(..._.prefixes),a.items.push(..._.items),null!=_.nextPageToken&&(yield ls(u,a,_.nextPageToken))})).apply(this,arguments)}function Qi(u,a){null!=a&&"number"==typeof a.maxResults&&Vr("options.maxResults",1,1e3,a.maxResults);const l=a||{},p=ai(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(p,mr)}function Vo(u){u._throwIfRoot("getDownloadURL");const a=function cn(u,a,l){const _=Kr(a.fullServerUrl(),u.host,u._protocol),L=u.maxOperationRetryTime,ee=new Ni(_,"GET",function ir(u,a){return function l(p,_){const x=Cn(u,_,a);return vi(null!==x),function nr(u,a,l,p){const _=Et(a);if(null===_||!Qt(_.downloadTokens))return null;const x=_.downloadTokens;if(0===x.length)return null;const L=encodeURIComponent;return x.split(",").map(Te=>{const At=u.fullPath;return Kr("/b/"+L(u.bucket)+"/o/"+L(At),l,p)+Dr({alt:"media",token:Te})})[0]}(x,_,u.host,u._protocol)}}(u,l),L);return ee.errorHandler=Wr(a),ee}(u.storage,u._location,Re());return u.storage.makeRequestWithTokens(a,mr).then(l=>{if(null===l)throw function Kt(){return new Ze("no-download-url","The given file does not have any download URLs.")}();return l})}function Os(u,a){const l=function Jn(u,a){const l=a.split("/").filter(p=>p.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),p=new Pn(u._location.bucket,l);return new _n(u.storage,p)}function Uo(u,a){if(u instanceof zs){const l=u;if(null==l._bucket)throw function Ne(){return new Ze("no-default-bucket","No default bucket found. Did you set the '"+it+"' property when initializing the app?")}();const p=new _n(l,l._bucket);return null!=a?Uo(p,a):p}return void 0!==a?Os(u,a):u}function us(u,a){if(a&&function Ls(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof zs)return function so(u,a){return new _n(u,a)}(u,a);throw zt("To use ref(service, url), the first argument must be a Storage instance.")}return Uo(u,a)}function Is(u,a){const l=null==a?void 0:a[it];return null==l?null:Pn.makeFromBucketSpec(l,u)}class zs{constructor(a,l,p,_,x){this.app=a,this._authProvider=l,this._appCheckProvider=p,this._url=_,this._firebaseVersion=x,this._bucket=null,this._host=st,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=_?Pn.makeFromBucketSpec(_,this._host):Is(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?Pn.makeFromBucketSpec(this._url,a):Is(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){Vr("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){Vr("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,De.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const p=yield l.getToken();if(null!==p)return p.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,De.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new _n(this,a)}_makeRequest(a,l,p,_,x=!0){if(this._deleted)return new hn(wn());{const L=function ki(u,a,l,p,_,x,L=!0){const ee=Dr(u.urlParams),he=u.url+ee,Te=Object.assign({},u.headers);return function Gr(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Te,a),function _r(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Te,l),function Er(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Te,x),function fi(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Te,p),new Bn(he,u.method,Te,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,_,L)}(a,this._appId,p,_,l,this._firebaseVersion,x);return this._requests.add(L),L.getPromise().then(()=>this._requests.delete(L),()=>this._requests.delete(L)),L}}makeRequestWithTokens(a,l){var p=this;return(0,De.Z)(function*(){const[_,x]=yield Promise.all([p._getAuthToken(),p._getAppCheckToken()]);return p._makeRequest(a,l,_,x).getPromise()})()}}const As="@firebase/storage";function jo(u,a){return us(u=(0,q.m9)(u),a)}function po(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),p=u.getProvider("auth-internal"),_=u.getProvider("app-check-internal");return new zs(l,p,_,a,fe.SDK_VERSION)}!function go(){(0,fe._registerComponent)(new ut.wA("storage",po,"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(As,"0.9.14",""),(0,fe.registerVersion)(As,"0.9.14","esm2017")}();class si{constructor(a,l,p){this._delegate=a,this.task=l,this.ref=p}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ks{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new si(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(p=>{if(a)return a(new si(p,this,this._ref))},l)}on(a,l,p,_){let x;return l&&(x="function"==typeof l?L=>l(new si(L,this,this._ref)):{next:l.next?L=>l.next(new si(L,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,x,p||void 0,_||void 0)}}class Ki{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Bi(a,this._service))}get items(){return this._delegate.items.map(a=>new Bi(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bi{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function fo(u,a){return Os(u,a)}(this._delegate,a);return new Bi(l,this.storage)}get root(){return new Bi(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Bi(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new Ks(function Ao(u,a,l){return function Es(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new tn(u,new Ct(a),l)}(u=(0,q.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=Ar.RAW,p){this._throwIfRoot("putString");const _=jt(l,a),x=Object.assign({},p);return null==x.contentType&&null!=_.contentType&&(x.contentType=_.contentType),new Ks(new tn(this._delegate,new Ct(_.data,!0),x),this)}listAll(){return function ds(u){return function Zi(u){const a={prefixes:[],items:[]};return ls(u,a).then(()=>a)}(u=(0,q.m9)(u))}(this._delegate).then(a=>new Ki(a,this.storage))}list(a){return function Ti(u,a){return Qi(u=(0,q.m9)(u),a)}(this._delegate,a||void 0).then(l=>new Ki(l,this.storage))}getMetadata(){return function xo(u){return function Wi(u){u._throwIfRoot("getMetadata");const a=Lr(u.storage,u._location,Re());return u.storage.makeRequestWithTokens(a,mr)}(u=(0,q.m9)(u))}(this._delegate)}updateMetadata(a){return function oo(u,a){return function ra(u,a){u._throwIfRoot("updateMetadata");const l=function Gn(u,a,l,p){const x=Kr(a.fullServerUrl(),u.host,u._protocol),ee=Fr(l,p),Te=u.maxOperationRetryTime,vt=new Ni(x,"PATCH",gi(u,p),Te);return vt.headers={"Content-Type":"application/json; charset=utf-8"},vt.body=ee,vt.errorHandler=Wr(a),vt}(u.storage,u._location,a,Re());return u.storage.makeRequestWithTokens(l,mr)}(u=(0,q.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function Bs(u){return Vo(u=(0,q.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Ji(u){return function Xi(u){u._throwIfRoot("deleteObject");const a=function xr(u,a){const p=Kr(a.fullServerUrl(),u.host,u._protocol),ee=new Ni(p,"DELETE",function L(he,Te){},u.maxOperationRetryTime);return ee.successCodes=[200,204],ee.errorHandler=Wr(a),ee}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,mr)}(u=(0,q.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw er(a)}}class Mo{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(es(a))throw zt("ref() expected a child path but got a URL, use refFromURL instead.");return new Bi(jo(this._delegate,a),this)}refFromURL(a){if(!es(a))throw zt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Pn.makeFromUrl(a,this._delegate.host)}catch(l){throw zt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bi(jo(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,p={}){!function sa(u,a,l,p={}){!function Gs(u,a,l,p={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:_}=p;_&&(u._overrideAuthToken="string"==typeof _?_:(0,q.Sg)(_,u.app.options.projectId))}(u,a,l,p)}(this._delegate,a,l,p)}}function es(u){return/^[A-Za-z]+:\/\//.test(u)}function Ho(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),p=u.getProvider("storage").getImmediate({identifier:a});return new Mo(l,p)}!function Po(u){const a={TaskState:ft,TaskEvent:rt,StringFormat:Ar,Storage:Mo,Reference:Bi};u.INTERNAL.registerComponent(new ut.wA("storage-compat",Ho,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.1.22")}(ke.Z);var ao=V(440),ts=V(127);function z(u){const a=function C(u){return new me.y(a=>{const l=L=>a.next(L);l(u.snapshot);const x=u.on("state_changed",l);return u.then(L=>{l(L),a.complete()},L=>{l(u.snapshot),(L=>{a.error(L)})(L)}),function(){x()}}).pipe(function qe(u,a=Ce.z){return(0,we.e)((l,p)=>{let _=null,x=null,L=null;const ee=()=>{if(_){_.unsubscribe(),_=null;const Te=x;x=null,p.next(Te)}};function he(){const Te=L+u,vt=a.now();if(vt<Te)return _=this.schedule(void 0,Te-vt),void p.add(_);ee()}l.subscribe((0,be.x)(p,Te=>{x=Te,L=a.now(),_||(_=a.schedule(he,u),p.add(_))},()=>{ee(),p.complete()},void 0,()=>{x=_=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,Ge.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function w(u){return{getDownloadURL:()=>(0,Le.of)(void 0).pipe(It.fc,(0,ot.w)(()=>u.getDownloadURL()),It.iC),getMetadata:()=>(0,Le.of)(void 0).pipe(It.fc,(0,ot.w)(()=>u.getMetadata()),It.iC),delete:()=>(0,Ke.D)(u.delete()),child:a=>w(u.child(a)),updateMetadata:a=>(0,Ke.D)(u.updateMetadata(a)),put:(a,l)=>z(u.put(a,l)),putString:(a,l,p)=>z(u.putString(a,l,p)),list:a=>(0,Ke.D)(u.list(a)),listAll:()=>(0,Ke.D)(u.listAll())}}const U=new X.OlP("angularfire2.storageBucket"),pe=new X.OlP("angularfire2.storage.maxUploadRetryTime"),Tt=new X.OlP("angularfire2.storage.maxOperationRetryTime"),fn=new X.OlP("angularfire2.storage.use-emulator");let Dn=(()=>{class u{constructor(l,p,_,x,L,ee,he,Te,vt,At){const $t=(0,Ae.on)(l,L,p);this.storage=(0,Ae.cc)(`${$t.name}.storage.${_}`,"AngularFireStorage",$t.name,()=>{const un=L.runOutsideAngular(()=>$t.storage(_||void 0)),Fn=vt;return Fn&&un.useEmulator(...Fn),he&&un.setMaxUploadRetryTime(he),Te&&un.setMaxOperationRetryTime(Te),un},[he,Te])}ref(l){return w(this.storage.ref(l))}refFromURL(l){return w(this.storage.refFromURL(l))}upload(l,p,_){return w(this.storage.ref(l)).put(p,_)}}return u.\u0275fac=function(l){return new(l||u)(X.LFG(Ae.Dh),X.LFG(Ae.xv,8),X.LFG(U,8),X.LFG(X.Lbi),X.LFG(X.R0b),X.LFG(It.HU),X.LFG(pe,8),X.LFG(Tt,8),X.LFG(fn,8),X.LFG(ao.nm,8))},u.\u0275prov=X.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Yr=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=X.oAB({type:u}),u.\u0275inj=X.cJS({}),u})(),ln=(()=>{class u{constructor(){ts.Z.registerVersion("angularfire",It.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=X.oAB({type:u}),u.\u0275inj=X.cJS({providers:[Dn],imports:[Yr]}),u})();var ti=V(6451),H=V(3099),B=V(5026),k=V(1884),oe=V(8421),bt=V(4671),mn=V(5032),Pi=V(7669);V(1277);var mo=V(1877);const ui="@firebase/database",Go="0.13.10";let $s="";function qs(u){$s=u}class oa{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,q.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,q.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class Pa{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,q.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const Ia=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new oa(a)}}catch(a){}return new Pa},Oo=Ia("localStorage"),wa=Ia("sessionStorage"),Zs=new mo.Yd("@firebase/database"),bs=function(){let u=1;return function(){return u++}}(),zo=function(u){const a=(0,q.dS)(u),l=new q.gQ;l.update(a);const p=l.digest();return q.US.encodeByteArray(p)},Qs=function(...u){let a="";for(let l=0;l<u.length;l++){const p=u[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?a+=Qs.apply(null,p):a+="object"==typeof p?(0,q.Wl)(p):p,a+=" "}return a};let lo=null,Xs=!0;const Xa=function(u,a){(0,q.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Zs.logLevel=mo.in.VERBOSE,lo=Zs.log.bind(Zs),a&&wa.set("logging_enabled",!0)):"function"==typeof u?lo=u:(lo=null,wa.remove("logging_enabled"))},ns=function(...u){if(!0===Xs&&(Xs=!1,null===lo&&!0===wa.get("logging_enabled")&&Xa(!0)),lo){const a=Qs.apply(null,u);lo(a)}},Wo=function(u){return function(...a){ns(u,...a)}},ba=function(...u){const a="FIREBASE INTERNAL ERROR: "+Qs(...u);Zs.error(a)},yo=function(...u){const a=`FIREBASE FATAL ERROR: ${Qs(...u)}`;throw Zs.error(a),new Error(a)},rs=function(...u){const a="FIREBASE WARNING: "+Qs(...u);Zs.warn(a)},al=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},vo="[MIN_NAME]",No="[MAX_NAME]",aa=function(u,a){if(u===a)return 0;if(u===vo||a===No)return-1;if(a===vo||u===No)return 1;{const l=qr(u),p=qr(a);return null!==l?null!==p?l-p==0?u.length-a.length:l-p:-1:null!==p?1:u<a?-1:1}},ks=function(u,a){return u===a?0:u<a?-1:1},_o=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,q.Wl)(a))},Oa=function(u){if("object"!=typeof u||null===u)return(0,q.Wl)(u);const a=[];for(const p in u)a.push(p);a.sort();let l="{";for(let p=0;p<a.length;p++)0!==p&&(l+=","),l+=(0,q.Wl)(a[p]),l+=":",l+=Oa(u[a[p]]);return l+="}",l},Ui=function(u,a){const l=u.length;if(l<=a)return[u];const p=[];for(let _=0;_<l;_+=a)p.push(u.substring(_,_+a>l?l:_+a));return p};function O(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const Q=function(u){(0,q.hu)(!al(u),"Invalid JSON number");const p=1023;let _,x,L,ee,he;0===u?(x=0,L=0,_=1/u==-1/0?1:0):(_=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(ee=Math.min(Math.floor(Math.log(u)/Math.LN2),p),x=ee+p,L=Math.round(u*Math.pow(2,52-ee)-Math.pow(2,52))):(x=0,L=Math.round(u/Math.pow(2,-1074))));const Te=[];for(he=52;he;he-=1)Te.push(L%2?1:0),L=Math.floor(L/2);for(he=11;he;he-=1)Te.push(x%2?1:0),x=Math.floor(x/2);Te.push(_?1:0),Te.reverse();const vt=Te.join("");let At="";for(he=0;he<64;he+=8){let $t=parseInt(vt.substr(he,8),2).toString(16);1===$t.length&&($t="0"+$t),At+=$t}return At.toLowerCase()},Ft=new RegExp("^-?(0*)\\d{1,10}$"),Ht=-2147483648,On=2147483647,qr=function(u){if(Ft.test(u)){const a=Number(u);if(a>=Ht&&a<=On)return a}return null},kr=function(u){try{u()}catch(a){setTimeout(()=>{throw rs("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},Zn=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class ni{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(a))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ei{constructor(a,l,p){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(_=>this.auth_=_)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(ns("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,p):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(a)}}let Ii=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const sr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jt="websocket",xs="long_polling";class gl{constructor(a,l,p,_,x=!1,L="",ee=!1){this.secure=l,this.namespace=p,this.webSocketOnly=_,this.nodeAdmin=x,this.persistenceKey=L,this.includeNamespaceInQueryParams=ee,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Oo.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&Oo.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function la(u,a,l){let p;if((0,q.hu)("string"==typeof a,"typeof type must == string"),(0,q.hu)("object"==typeof l,"typeof params must == object"),a===Jt)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==xs)throw new Error("Unknown connection type: "+a);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function wu(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const _=[];return O(l,(x,L)=>{_.push(x+"="+L)}),p+_.join("&")}class bu{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,q.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,q.p$)(this.counters_)}}const Eo={},Ko={};function ka(u){const a=u.toString();return Eo[a]||(Eo[a]=new bu),Eo[a]}class eu{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<p.length;++_)p[_]&&kr(()=>{this.onMessage_(p[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Io{constructor(a,l,p,_,x,L,ee){this.connId=a,this.repoInfo=l,this.applicationId=p,this.appCheckToken=_,this.authToken=x,this.transportSessionId=L,this.lastSessionId=ee,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wo(a),this.stats_=ka(l),this.urlFn=he=>(this.appCheckToken&&(he.ac=this.appCheckToken),la(l,xs,he))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new eu(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,q.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new La((...x)=>{const[L,ee,he,Te,vt]=x;if(this.incrementIncomingBytes_(x),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===L)this.id=ee,this.password=he;else{if("close"!==L)throw new Error("Unrecognized command received: "+L);ee?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ee,()=>{this.onClosed_()})):this.onClosed_()}},(...x)=>{const[L,ee]=x;this.incrementIncomingBytes_(x),this.myPacketOrderer.handleResponse(L,ee)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&sr.test(location.hostname)&&(p.r="f");const _=this.urlFn(p);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Io.forceAllow_=!0}static forceDisallow(){Io.forceDisallow_=!0}static isAvailable(){return!((0,q.Yr)()||!Io.forceAllow_&&(Io.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,q.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,q.h$)(l),_=Ui(p,1840);for(let x=0;x<_.length;x++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[x]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=a,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,q.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class La{constructor(a,l,p,_){if(this.onDisconnect=p,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,q.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=bs(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=La.createIFrame_();let x="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(x='<script>document.domain="'+document.domain+'";<\/script>');const L="<html><body>"+x+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(L),this.myIFrame.doc.close()}catch(ee){ns("frame writing exception"),ee.stack&&ns(ee.stack),ns(ee)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||ns("No IE domain setting required")}catch(l){const p=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),p="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const L=this.pendingSegs.shift();p=p+"&seg"+_+"="+L.seg+"&ts"+_+"="+L.ts+"&d"+_+"="+L.d,_++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,p){this.pendingSegs.push({seg:a,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},_=setTimeout(p,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(_),p()})}addTag(a,l){(0,q.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=a,p.onload=p.onreadystatechange=function(){const _=p.readyState;(!_||"loaded"===_||"complete"===_)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{ns("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let fs=null;typeof MozWebSocket<"u"?fs=MozWebSocket:typeof WebSocket<"u"&&(fs=WebSocket);let Ba=(()=>{class u{constructor(l,p,_,x,L,ee,he){this.connId=l,this.applicationId=_,this.appCheckToken=x,this.authToken=L,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wo(this.connId),this.stats_=ka(p),this.connURL=u.connectionURL_(p,ee,he,x,_),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,_,x,L){const ee={v:"5"};return!(0,q.Yr)()&&typeof location<"u"&&location.hostname&&sr.test(location.hostname)&&(ee.r="f"),p&&(ee.s=p),_&&(ee.ls=_),x&&(ee.ac=x),L&&(ee.p=L),la(l,Jt,ee)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Oo.set("previous_websocket_failure",!0);try{let _;if((0,q.Yr)()){_={headers:{"User-Agent":`Firebase/5/${$s}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(_.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(_.headers["X-Firebase-AppCheck"]=this.appCheckToken);const L=process.env,ee=0===this.connURL.indexOf("wss://")?L.HTTPS_PROXY||L.https_proxy:L.HTTP_PROXY||L.http_proxy;ee&&(_.proxy={origin:ee})}this.mySock=new fs(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const x=_.message||_.data;return x&&this.log_(x),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const x=_.message||_.data;x&&this.log_(x),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(l=!0)}return!l&&null!==fs&&!u.forceDisallow_}static previouslyFailed(){return Oo.isInMemoryStorage||!0===Oo.get("previous_websocket_failure")}markConnectionHealthy(){Oo.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const _=(0,q.cI)(p);this.onMessage(_)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,q.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const _=this.extractFrameCount_(p);null!==_&&this.appendFrame_(_)}}send(l){this.resetKeepAlive();const p=(0,q.Wl)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const _=Ui(p,16384);_.length>1&&this.sendString_(String(_.length));for(let x=0;x<_.length;x++)this.sendString_(_[x])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),$a=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Io,Ba]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const p=Ba&&Ba.isAvailable();let _=p&&!Ba.previouslyFailed();if(l.webSocketOnly&&(p||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[Ba];else{const x=this.transports_=[];for(const L of u.ALL_TRANSPORTS)L&&L.isAvailable()&&x.push(L);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class Tu{constructor(a,l,p,_,x,L,ee,he,Te,vt){this.id=a,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=_,this.authToken_=x,this.onMessage_=L,this.onReady_=ee,this.onDisconnect_=he,this.onKill_=Te,this.lastSessionId=vt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wo("c:"+this.id+":"),this.transportManager_=new $a(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const _=a.healthyTimeout||0;_>0&&(this.healthyTimeout_=Zn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=_o("t",a),p=_o("d",a);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=_o("t",a),p=_o("d",a);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=_o("t",a);if("d"in a){const p=a.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?ba("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ba("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,p=a.v,_=a.h;this.sessionId=a.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),Zn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Oo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ns{put(a,l,p,_){}merge(a,l,p,_){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,p){}onDisconnectMerge(a,l,p){}onDisconnectCancel(a,l){}reportStats(a){}}class Li{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,q.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const p=[...this.listeners_[a]];for(let _=0;_<p.length;_++)p[_].callback.apply(p[_].context,l)}}on(a,l,p){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:p});const _=this.getInitialEvent(a);_&&l.apply(p,_)}off(a,l,p){this.validateEventType_(a);const _=this.listeners_[a]||[];for(let x=0;x<_.length;x++)if(_[x].callback===l&&(!p||p===_[x].context))return void _.splice(x,1)}validateEventType_(a){(0,q.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class ua extends Li{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ua}getInitialEvent(a){return(0,q.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}class ci{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let p=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[p]=this.pieces_[_],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function br(){return new ci("")}function Kn(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Aa(u){return u.pieces_.length-u.pieceNum_}function Ur(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new ci(u.pieces_,a)}function Vs(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function T(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function S(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new ci(a,0)}function I(u,a){const l=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);if(a instanceof ci)for(let p=a.pieceNum_;p<a.pieces_.length;p++)l.push(a.pieces_[p]);else{const p=a.split("/");for(let _=0;_<p.length;_++)p[_].length>0&&l.push(p[_])}return new ci(l,0)}function M(u){return u.pieceNum_>=u.pieces_.length}function j(u,a){const l=Kn(u),p=Kn(a);if(null===l)return a;if(l===p)return j(Ur(u),Ur(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function ne(u,a){const l=T(u,0),p=T(a,0);for(let _=0;_<l.length&&_<p.length;_++){const x=aa(l[_],p[_]);if(0!==x)return x}return l.length===p.length?0:l.length<p.length?-1:1}function ue(u,a){if(Aa(u)!==Aa(a))return!1;for(let l=u.pieceNum_,p=a.pieceNum_;l<=u.pieces_.length;l++,p++)if(u.pieces_[l]!==a.pieces_[p])return!1;return!0}function nt(u,a){let l=u.pieceNum_,p=a.pieceNum_;if(Aa(u)>Aa(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[p])return!1;++l,++p}return!0}class Ot{constructor(a,l){this.errorPrefix_=l,this.parts_=T(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,q.ug)(this.parts_[p]);kn(this)}}function kn(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qr(u))}function Qr(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class Si extends Li{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[a];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new Si}getInitialEvent(a){return(0,q.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const is=1e3;let mt,G=(()=>{class u extends Ns{constructor(l,p,_,x,L,ee,he,Te){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=_,this.onConnectStatus_=x,this.onServerInfoUpdate_=L,this.authTokenProvider_=ee,this.appCheckTokenProvider_=he,this.authOverride_=Te,this.id=u.nextPersistentConnectionId_++,this.log_=Wo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=is,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Te&&!(0,q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Si.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&ua.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,_){const x=++this.requestNumber_,L={r:x,a:l,b:p};this.log_((0,q.Wl)(L)),(0,q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(L),_&&(this.requestCBHash_[x]=_)}get(l){this.initConnection_();const p=new q.BH,x={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:ee=>{const he=ee.d;"ok"===ee.s?p.resolve(he):p.reject(he)}};return this.outstandingGets_.push(x),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),p.promise}listen(l,p,_,x){this.initConnection_();const L=l._queryIdentifier,ee=l._path.toString();this.log_("Listen called for "+ee+" "+L),this.listens.has(ee)||this.listens.set(ee,new Map),(0,q.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,q.hu)(!this.listens.get(ee).has(L),"listen() called twice for same path/queryId.");const he={onComplete:x,hashFn:p,query:l,tag:_};this.listens.get(ee).set(L,he),this.connected_&&this.sendListen_(he)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,_=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(_)})}sendListen_(l){const p=l.query,_=p._path.toString(),x=p._queryIdentifier;this.log_("Listen on "+_+" for "+x);const L={p:_};l.tag&&(L.q=p._queryObject,L.t=l.tag),L.h=l.hashFn(),this.sendRequest("q",L,he=>{const Te=he.d,vt=he.s;u.warnOnListenWarnings_(Te,p),(this.listens.get(_)&&this.listens.get(_).get(x))===l&&(this.log_("listen response",he),"ok"!==vt&&this.removeListen_(_,x),l.onComplete&&l.onComplete(vt,Te))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,q.r3)(l,"w")){const _=(0,q.DV)(l,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const x='".indexOn": "'+p._queryParams.getIndex().toString()+'"',L=p._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${x} at ${L} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,q.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,q.w9)(l)?"auth":"gauth",_={cred:l};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(p,_,x=>{const L=x.s,ee=x.d||"error";this.authToken_===l&&("ok"===L?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(L,ee))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,_=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,_)})}unlisten(l,p){const _=l._path.toString(),x=l._queryIdentifier;this.log_("Unlisten called for "+_+" "+x),(0,q.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,x)&&this.connected_&&this.sendUnlisten_(_,x,l._queryObject,p)}sendUnlisten_(l,p,_,x){this.log_("Unlisten on "+l+" for "+p);const L={p:l};x&&(L.q=_,L.t=x),this.sendRequest("n",L)}onDisconnectPut(l,p,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,_):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:_})}onDisconnectMerge(l,p,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,_):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:_})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,_,x){const L={p,d:_};this.log_("onDisconnect "+l,L),this.sendRequest(l,L,ee=>{x&&setTimeout(()=>{x(ee.s,ee.d)},Math.floor(0))})}put(l,p,_,x){this.putInternal("p",l,p,_,x)}merge(l,p,_,x){this.putInternal("m",l,p,_,x)}putInternal(l,p,_,x,L){this.initConnection_();const ee={p,d:_};void 0!==L&&(ee.h=L),this.outstandingPuts_.push({action:l,request:ee,onComplete:x}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,_=this.outstandingPuts_[l].request,x=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,_,L=>{this.log_(p+" response",L),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),x&&x(L.s,L.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,q.Wl)(l));const p=l.r,_=this.requestCBHash_[p];_&&(delete this.requestCBHash_[p],_(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):ba("Unrecognized action received from server: "+(0,q.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=is,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=is,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=is),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,De.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),_=l.onReady_.bind(l),x=l.onRealtimeDisconnect_.bind(l),L=l.id+":"+u.nextConnectionId_++,ee=l.lastSessionId;let he=!1,Te=null;const vt=function(){Te?Te.close():(he=!0,x())};l.realtime_={close:vt,sendRequest:function(un){(0,q.hu)(Te,"sendRequest call when we're not connected not allowed."),Te.sendRequest(un)}};const $t=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[un,Fn]=yield Promise.all([l.authTokenProvider_.getToken($t),l.appCheckTokenProvider_.getToken($t)]);he?ns("getToken() completed but was canceled"):(ns("getToken() completed. Creating connection."),l.authToken_=un&&un.accessToken,l.appCheckToken_=Fn&&Fn.token,Te=new Tu(L,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,_,x,$r=>{rs($r+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ee))}catch(un){l.log_("Failed to get token: "+un),he||(l.repoInfo_.nodeAdmin&&rs(un),vt())}}})()}interrupt(l){ns("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){ns("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=is,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let _;_=p?p.map(L=>Oa(L)).join("$"):"default";const x=this.removeListen_(l,_);x&&x.onComplete&&x.onComplete("permission_denied")}removeListen_(l,p){const _=new ci(l).toString();let x;if(this.listens.has(_)){const L=this.listens.get(_);x=L.get(p),L.delete(p),0===L.size&&this.listens.delete(_)}else x=void 0;return x}onAuthRevoked_(l,p){ns("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){ns("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,q.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+$s.replace(/\./g,"-")]=1,(0,q.uI)()?l["framework.cordova"]=1:(0,q.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=ua.getInstance().currentlyOnline();return(0,q.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class te{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new te(a,l)}}class Be{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const p=new te(vo,a),_=new te(vo,l);return 0!==this.compare(p,_)}minPost(){return te.MIN}}class Nt extends Be{static get __EMPTY_NODE(){return mt}static set __EMPTY_NODE(a){mt=a}compare(a,l){return aa(a.name,l.name)}isDefinedOn(a){throw(0,q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return te.MIN}maxPost(){return new te(No,mt)}makePost(a,l){return(0,q.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new te(a,mt)}toString(){return".key"}}const qt=new Nt;class In{constructor(a,l,p,_,x=null){this.isReverse_=_,this.resultGenerator_=x,this.nodeStack_=[];let L=1;for(;!a.isEmpty();)if(L=l?p(a.key,l):1,_&&(L*=-1),L<0)a=this.isReverse_?a.left:a.right;else{if(0===L){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Co,zn=(()=>{class u{constructor(l,p,_,x,L){this.key=l,this.value=p,this.color=null!=_?_:u.RED,this.left=null!=x?x:lr.EMPTY_NODE,this.right=null!=L?L:lr.EMPTY_NODE}copy(l,p,_,x,L){return new u(null!=l?l:this.key,null!=p?p:this.value,null!=_?_:this.color,null!=x?x:this.left,null!=L?L:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,_){let x=this;const L=_(l,x.key);return x=L<0?x.copy(null,null,null,x.left.insert(l,p,_),null):0===L?x.copy(null,p,null,null,null):x.copy(null,null,null,null,x.right.insert(l,p,_)),x.fixUp_()}removeMin_(){if(this.left.isEmpty())return lr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let _,x;if(_=this,p(l,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(l,p),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===p(l,_.key)){if(_.right.isEmpty())return lr.EMPTY_NODE;x=_.right.min_(),_=_.copy(x.key,x.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(l,p))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class lr{constructor(a,l=lr.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new lr(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,zn.BLACK,null,null))}remove(a){return new lr(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,zn.BLACK,null,null))}get(a){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(a){let l,p=this.root_,_=null;for(;!p.isEmpty();){if(l=this.comparator_(a,p.key),0===l){if(p.left.isEmpty())return _?_.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(_=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new In(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new In(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new In(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new In(this.root_,null,this.comparator_,!0,a)}}function vr(u,a){return aa(u.name,a.name)}function ss(u,a){return aa(u,a)}lr.EMPTY_NODE=new class Sr{copy(a,l,p,_,x){return this}insert(a,l,p){return new zn(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xa=function(u){return"number"==typeof u?"number:"+Q(u):"string:"+u},di=function(u){if(u.isLeafNode()){const a=u.val();(0,q.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,q.r3)(a,".sv"),"Priority must be a string or number.")}else(0,q.hu)(u===Co||u.isEmpty(),"priority of unexpected type.");(0,q.hu)(u===Co||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Oc,Xo,ca,tl=(()=>{class u{constructor(l,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),di(this.priorityNode_)}static set __childrenNodeConstructor(l){Oc=l}static get __childrenNodeConstructor(){return Oc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return M(l)?this:".priority"===Kn(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const _=Kn(l);return null===_?p:p.isEmpty()&&".priority"!==_?this:((0,q.hu)(".priority"!==_||1===Aa(l),".priority must be the last token in a path"),this.updateImmediateChild(_,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ur(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+xa(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?Q(this.value_):this.value_,this.lazyHash_=zo(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,q.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,_=typeof this.value_,x=u.VALUE_TYPE_ORDER.indexOf(p),L=u.VALUE_TYPE_ORDER.indexOf(_);return(0,q.hu)(x>=0,"Unknown leaf type: "+p),(0,q.hu)(L>=0,"Unknown leaf type: "+_),x===L?"object"===_?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:L-x}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Yi=new class kc extends Be{compare(a,l){const p=a.node.getPriority(),_=l.node.getPriority(),x=p.compareTo(_);return 0===x?aa(a.name,l.name):x}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return te.MIN}maxPost(){return new te(No,new tl("[PRIORITY-POST]",ca))}makePost(a,l){const p=Xo(a);return new te(l,new tl("[PRIORITY-POST]",p))}toString(){return".priority"}},tf=Math.log(2);class Lo{constructor(a){this.count=parseInt(Math.log(a+1)/tf,10),this.current_=this.count-1;const _=(x=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&_}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const fd=function(u,a,l,p){u.sort(a);const _=function(he,Te){const vt=Te-he;let At,$t;if(0===vt)return null;if(1===vt)return At=u[he],$t=l?l(At):At,new zn($t,At.node,zn.BLACK,null,null);{const un=parseInt(vt/2,10)+he,Fn=_(he,un),$r=_(un+1,Te);return At=u[un],$t=l?l(At):At,new zn($t,At.node,zn.BLACK,Fn,$r)}},ee=function(he){let Te=null,vt=null,At=u.length;const $t=function(Fn,$r){const ri=At-Fn,Ir=At;At-=Fn;const To=_(ri+1,Ir),Ts=u[ri],So=l?l(Ts):Ts;un(new zn(So,Ts.node,$r,null,To))},un=function(Fn){Te?(Te.left=Fn,Te=Fn):(vt=Fn,Te=Fn)};for(let Fn=0;Fn<he.count;++Fn){const $r=he.nextBitIsOne(),ri=Math.pow(2,he.count-(Fn+1));$r?$t(ri,zn.BLACK):($t(ri,zn.BLACK),$t(ri,zn.RED))}return vt}(new Lo(u.length));return new lr(p||a,ee)};let qu;const Zu={};class Ua{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,q.hu)(Zu&&Yi,"ChildrenNode.ts has not been loaded"),qu=qu||new Ua({".priority":Zu},{".priority":Yi}),qu}get(a){const l=(0,q.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof lr?l:null}hasIndex(a){return(0,q.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,q.hu)(a!==qt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let _=!1;const x=l.getIterator(te.Wrap);let ee,L=x.getNext();for(;L;)_=_||a.isDefinedOn(L.node),p.push(L),L=x.getNext();ee=_?fd(p,a.getCompare()):Zu;const he=a.toString(),Te=Object.assign({},this.indexSet_);Te[he]=a;const vt=Object.assign({},this.indexes_);return vt[he]=ee,new Ua(vt,Te)}addToIndexes(a,l){const p=(0,q.UI)(this.indexes_,(_,x)=>{const L=(0,q.DV)(this.indexSet_,x);if((0,q.hu)(L,"Missing index implementation for "+x),_===Zu){if(L.isDefinedOn(a.node)){const ee=[],he=l.getIterator(te.Wrap);let Te=he.getNext();for(;Te;)Te.name!==a.name&&ee.push(Te),Te=he.getNext();return ee.push(a),fd(ee,L.getCompare())}return Zu}{const ee=l.get(a.name);let he=_;return ee&&(he=he.remove(new te(a.name,ee))),he.insert(a,a.node)}});return new Ua(p,this.indexSet_)}removeFromIndexes(a,l){const p=(0,q.UI)(this.indexes_,_=>{if(_===Zu)return _;{const x=l.get(a.name);return x?_.remove(new te(a.name,x)):_}});return new Ua(p,this.indexSet_)}}let Qu,Zr=(()=>{class u{constructor(l,p,_){this.children_=l,this.priorityNode_=p,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&di(this.priorityNode_),this.children_.isEmpty()&&(0,q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qu||(Qu=new u(new lr(ss),null,Ua.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qu}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?Qu:p}}getChild(l){const p=Kn(l);return null===p?this:this.getImmediateChild(p).getChild(Ur(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,q.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const _=new te(l,p);let x,L;p.isEmpty()?(x=this.children_.remove(l),L=this.indexMap_.removeFromIndexes(_,this.children_)):(x=this.children_.insert(l,p),L=this.indexMap_.addToIndexes(_,this.children_));const ee=x.isEmpty()?Qu:this.priorityNode_;return new u(x,ee,L)}}updateChild(l,p){const _=Kn(l);if(null===_)return p;{(0,q.hu)(".priority"!==Kn(l)||1===Aa(l),".priority must be the last token in a path");const x=this.getImmediateChild(_).updateChild(Ur(l),p);return this.updateImmediateChild(_,x)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let _=0,x=0,L=!0;if(this.forEachChild(Yi,(ee,he)=>{p[ee]=he.val(l),_++,L&&u.INTEGER_REGEXP_.test(ee)?x=Math.max(x,Number(ee)):L=!1}),!l&&L&&x<2*_){const ee=[];for(const he in p)ee[he]=p[he];return ee}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+xa(this.getPriority().val())+":"),this.forEachChild(Yi,(p,_)=>{const x=_.hash();""!==x&&(l+=":"+p+":"+x)}),this.lazyHash_=""===l?"":zo(l)}return this.lazyHash_}getPredecessorChildName(l,p,_){const x=this.resolveIndex_(_);if(x){const L=x.getPredecessorKey(new te(l,p));return L?L.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const _=p.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new te(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const _=p.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new te(p,this.children_.get(p)):null}forEachChild(l,p){const _=this.resolveIndex_(l);return _?_.inorderTraversal(x=>p(x.name,x.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const _=this.resolveIndex_(p);if(_)return _.getIteratorFrom(l,x=>x);{const x=this.children_.getIteratorFrom(l.name,te.Wrap);let L=x.peek();for(;null!=L&&p.compare(L,l)<0;)x.getNext(),L=x.peek();return x}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const _=this.resolveIndex_(p);if(_)return _.getReverseIteratorFrom(l,x=>x);{const x=this.children_.getReverseIteratorFrom(l.name,te.Wrap);let L=x.peek();for(;null!=L&&p.compare(L,l)>0;)x.getNext(),L=x.peek();return x}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===pd?-1:0}withIndex(l){if(l===qt||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===qt||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const _=this.getIterator(Yi),x=p.getIterator(Yi);let L=_.getNext(),ee=x.getNext();for(;L&&ee;){if(L.name!==ee.name||!L.node.equals(ee.node))return!1;L=_.getNext(),ee=x.getNext()}return null===L&&null===ee}return!1}return!1}}resolveIndex_(l){return l===qt?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const pd=new class nf extends Zr{constructor(){super(new lr(ss),Zr.EMPTY_NODE,Ua.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return Zr.EMPTY_NODE}isEmpty(){return!1}};function os(u,a=null){if(null===u)return Zr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,q.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new tl(u,os(a));if(u instanceof Array){let l=Zr.EMPTY_NODE;return O(u,(p,_)=>{if((0,q.r3)(u,p)&&"."!==p.substring(0,1)){const x=os(_);(x.isLeafNode()||!x.isEmpty())&&(l=l.updateImmediateChild(p,x))}}),l.updatePriority(os(a))}{const l=[];let p=!1;if(O(u,(L,ee)=>{if("."!==L.substring(0,1)){const he=os(ee);he.isEmpty()||(p=p||!he.getPriority().isEmpty(),l.push(new te(L,he)))}}),0===l.length)return Zr.EMPTY_NODE;const x=fd(l,vr,L=>L.name,ss);if(p){const L=fd(l,Yi.getCompare());return new Zr(x,os(a),new Ua({".priority":L},{".priority":Yi}))}return new Zr(x,os(a),Ua.Default)}}Object.defineProperties(te,{MIN:{value:new te(vo,Zr.EMPTY_NODE)},MAX:{value:new te(No,pd)}}),Nt.__EMPTY_NODE=Zr.EMPTY_NODE,tl.__childrenNodeConstructor=Zr,function Ds(u){Co=u}(pd),function Su(u){ca=u}(pd),function Jo(u){Xo=u}(os);class Nc extends Be{constructor(a){super(),this.indexPath_=a,(0,q.hu)(!M(a)&&".priority"!==Kn(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const p=this.extractChild(a.node),_=this.extractChild(l.node),x=p.compareTo(_);return 0===x?aa(a.name,l.name):x}makePost(a,l){const p=os(a),_=Zr.EMPTY_NODE.updateChild(this.indexPath_,p);return new te(l,_)}maxPost(){const a=Zr.EMPTY_NODE.updateChild(this.indexPath_,pd);return new te(No,a)}toString(){return T(this.indexPath_,0).join("/")}}const Xu=new class rf extends Be{compare(a,l){const p=a.node.compareTo(l.node);return 0===p?aa(a.name,l.name):p}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(a,l){const p=os(a);return new te(l,p)}toString(){return".value"}},ja="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",sf=function(){let u=0;const a=[];return function(l){const p=l===u;let _;u=l;const x=new Array(8);for(_=7;_>=0;_--)x[_]=ja.charAt(l%64),l=Math.floor(l/64);(0,q.hu)(0===l,"Cannot push at time == 0");let L=x.join("");if(p){for(_=11;_>=0&&63===a[_];_--)a[_]=0;a[_]++}else for(_=0;_<12;_++)a[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)L+=ja.charAt(a[_]);return(0,q.hu)(20===L.length,"nextPushId: Length should be 20."),L}}(),rh=function(u){if(u===""+On)return"-";const a=qr(u);if(null!=a)return""+(a+1);const l=new Array(u.length);for(let L=0;L<l.length;L++)l[L]=u.charAt(L);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return No;const x=ja.charAt(ja.indexOf(l[p])+1);return l[p]=x,l.slice(0,p+1).join("")},ih=function(u){if(u===""+Ht)return vo;const a=qr(u);if(null!=a)return""+(a-1);const l=new Array(u.length);for(let p=0;p<l.length;p++)l[p]=u.charAt(p);return"-"===l[l.length-1]?1===l.length?""+On:(delete l[l.length-1],l.join("")):(l[l.length-1]=ja.charAt(ja.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function Ju(u){return{type:"value",snapshotNode:u}}function Fs(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Ol(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function Ha(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class Au{constructor(a){this.index_=a}updateChild(a,l,p,_,x,L){(0,q.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ee=a.getImmediateChild(l);return ee.getChild(_).equals(p.getChild(_))&&ee.isEmpty()===p.isEmpty()||(null!=L&&(p.isEmpty()?a.hasChild(l)?L.trackChildChange(Ol(l,ee)):(0,q.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ee.isEmpty()?L.trackChildChange(Fs(l,p)):L.trackChildChange(Ha(l,p,ee))),a.isLeafNode()&&p.isEmpty())?a:a.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(a,l,p){return null!=p&&(a.isLeafNode()||a.forEachChild(Yi,(_,x)=>{l.hasChild(_)||p.trackChildChange(Ol(_,x))}),l.isLeafNode()||l.forEachChild(Yi,(_,x)=>{if(a.hasChild(_)){const L=a.getImmediateChild(_);L.equals(x)||p.trackChildChange(Ha(_,x,L))}else p.trackChildChange(Fs(_,x))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?Zr.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nu{constructor(a){this.indexedFilter_=new Au(a.getIndex()),this.index_=a.getIndex(),this.startPost_=nu.getStartPost_(a),this.endPost_=nu.getEndPost_(a)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){return this.index_.compare(this.getStartPost(),a)<=0&&this.index_.compare(a,this.getEndPost())<=0}updateChild(a,l,p,_,x,L){return this.matches(new te(l,p))||(p=Zr.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,p,_,x,L)}updateFullNode(a,l,p){l.isLeafNode()&&(l=Zr.EMPTY_NODE);let _=l.withIndex(this.index_);_=_.updatePriority(Zr.EMPTY_NODE);const x=this;return l.forEachChild(Yi,(L,ee)=>{x.matches(new te(L,ee))||(_=_.updateImmediateChild(L,Zr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,_,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class Ga{constructor(a){this.rangedFilter_=new nu(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft()}updateChild(a,l,p,_,x,L){return this.rangedFilter_.matches(new te(l,p))||(p=Zr.EMPTY_NODE),a.getImmediateChild(l).equals(p)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,p,_,x,L):this.fullLimitUpdateChild_(a,l,p,x,L)}updateFullNode(a,l,p){let _;if(l.isLeafNode()||l.isEmpty())_=Zr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let x;_=Zr.EMPTY_NODE.withIndex(this.index_),x=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let L=0;for(;x.hasNext()&&L<this.limit_;){const ee=x.getNext();let he;if(he=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ee)<=0:this.index_.compare(ee,this.rangedFilter_.getEndPost())<=0,!he)break;_=_.updateImmediateChild(ee.name,ee.node),L++}}else{let x,L,ee,he;if(_=l.withIndex(this.index_),_=_.updatePriority(Zr.EMPTY_NODE),this.reverse_){he=_.getReverseIterator(this.index_),x=this.rangedFilter_.getEndPost(),L=this.rangedFilter_.getStartPost();const At=this.index_.getCompare();ee=($t,un)=>At(un,$t)}else he=_.getIterator(this.index_),x=this.rangedFilter_.getStartPost(),L=this.rangedFilter_.getEndPost(),ee=this.index_.getCompare();let Te=0,vt=!1;for(;he.hasNext();){const At=he.getNext();!vt&&ee(x,At)<=0&&(vt=!0),vt&&Te<this.limit_&&ee(At,L)<=0?Te++:_=_.updateImmediateChild(At.name,Zr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,_,p)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,p,_,x){let L;if(this.reverse_){const At=this.index_.getCompare();L=($t,un)=>At(un,$t)}else L=this.index_.getCompare();const ee=a;(0,q.hu)(ee.numChildren()===this.limit_,"");const he=new te(l,p),Te=this.reverse_?ee.getFirstChild(this.index_):ee.getLastChild(this.index_),vt=this.rangedFilter_.matches(he);if(ee.hasChild(l)){const At=ee.getImmediateChild(l);let $t=_.getChildAfterChild(this.index_,Te,this.reverse_);for(;null!=$t&&($t.name===l||ee.hasChild($t.name));)$t=_.getChildAfterChild(this.index_,$t,this.reverse_);const un=null==$t?1:L($t,he);if(vt&&!p.isEmpty()&&un>=0)return null!=x&&x.trackChildChange(Ha(l,p,At)),ee.updateImmediateChild(l,p);{null!=x&&x.trackChildChange(Ol(l,At));const $r=ee.updateImmediateChild(l,Zr.EMPTY_NODE);return null!=$t&&this.rangedFilter_.matches($t)?(null!=x&&x.trackChildChange(Fs($t.name,$t.node)),$r.updateImmediateChild($t.name,$t.node)):$r}}return p.isEmpty()?a:vt&&L(Te,he)>=0?(null!=x&&(x.trackChildChange(Ol(Te.name,Te.node)),x.trackChildChange(Fs(l,p))),ee.updateImmediateChild(l,p).updateImmediateChild(Te.name,Zr.EMPTY_NODE)):a}}class Fc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:No}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yi}copy(){const a=new Fc;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function ec(u,a,l){const p=u.copy();return p.startSet_=!0,void 0===a&&(a=null),p.indexStartValue_=a,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function lh(u,a,l){const p=u.copy();return p.endSet_=!0,void 0===a&&(a=null),p.indexEndValue_=a,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function xu(u,a){const l=u.copy();return l.index_=a,l}function Mu(u){const a={};if(u.isDefault())return a;let l;return u.index_===Yi?l="$priority":u.index_===Xu?l="$value":u.index_===qt?l="$key":((0,q.hu)(u.index_ instanceof Nc,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,q.Wl)(l),u.startSet_&&(a.startAt=(0,q.Wl)(u.indexStartValue_),u.startNameSet_&&(a.startAt+=","+(0,q.Wl)(u.indexStartName_))),u.endSet_&&(a.endAt=(0,q.Wl)(u.indexEndValue_),u.endNameSet_&&(a.endAt+=","+(0,q.Wl)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function Ru(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_)),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_)),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==Yi&&(a.i=u.index_.toString()),a}class ps extends Ns{constructor(a,l,p,_){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.log_=Wo("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,q.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,p,_){const x=a._path.toString();this.log_("Listen called for "+x+" "+a._queryIdentifier);const L=ps.getListenId_(a,p),ee={};this.listens_[L]=ee;const he=Mu(a._queryParams);this.restRequest_(x+".json",he,(Te,vt)=>{let At=vt;if(404===Te&&(At=null,Te=null),null===Te&&this.onDataUpdate_(x,At,!1,p),(0,q.DV)(this.listens_,L)===ee){let $t;$t=Te?401===Te?"permission_denied":"rest_error:"+Te:"ok",_($t,null)}})}unlisten(a,l){const p=ps.getListenId_(a,l);delete this.listens_[p]}get(a){const l=Mu(a._queryParams),p=a._path.toString(),_=new q.BH;return this.restRequest_(p+".json",l,(x,L)=>{let ee=L;404===x&&(ee=null,x=null),null===x?(this.onDataUpdate_(p,ee,!1,null),_.resolve(ee)):_.reject(new Error(ee))}),_.promise}refreshAuthToken(a){}restRequest_(a,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,x])=>{_&&_.accessToken&&(l.auth=_.accessToken),x&&x.token&&(l.ac=x.token);const L=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,q.xO)(l);this.log_("Sending REST request for "+L);const ee=new XMLHttpRequest;ee.onreadystatechange=()=>{if(p&&4===ee.readyState){this.log_("REST Response for "+L+" received. status:",ee.status,"response:",ee.responseText);let he=null;if(ee.status>=200&&ee.status<300){try{he=(0,q.cI)(ee.responseText)}catch(Te){rs("Failed to parse JSON response for "+L+": "+ee.responseText)}p(null,he)}else 401!==ee.status&&404!==ee.status&&rs("Got unsuccessful REST response for "+L+" Status: "+ee.status),p(ee.status);p=null}},ee.open("GET",L,!0),ee.send()})}}class kl{constructor(){this.rootNode_=Zr.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function tc(){return{value:null,children:new Map}}function da(u,a,l){if(M(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const p=Kn(a);u.children.has(p)||u.children.set(p,tc()),da(u.children.get(p),a=Ur(a),l)}}function uo(u,a){if(M(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(Yi,(p,_)=>{da(u,new ci(p),_)}),uo(u,a)}}if(u.children.size>0){const l=Kn(a);return a=Ur(a),u.children.has(l)&&uo(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function _l(u,a,l){null!==u.value?l(a,u.value):function nc(u,a){u.children.forEach((l,p)=>{a(p,l)})}(u,(p,_)=>{_l(_,new ci(a.toString()+"/"+p),l)})}class lf{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&O(this.last_,(p,_)=>{l[p]=l[p]-_}),this.last_=a,l}}class Pu{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new lf(a);const p=1e4+2e4*Math.random();Zn(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const a=this.statsListener_.get(),l={};let p=!1;O(a,(_,x)=>{x>0&&(0,q.r3)(this.statsToReport_,_)&&(l[_]=x,p=!0)}),p&&this.server_.reportStats(l),Zn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var za=(()=>{return(u=za||(za={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",za;var u})();function uh(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class ku{constructor(a,l,p){this.path=a,this.affectedTree=l,this.revert=p,this.type=za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(M(this.path)){if(null!=this.affectedTree.value)return(0,q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new ci(a));return new ku(br(),l,this.revert)}}return(0,q.hu)(Kn(this.path)===a,"operationForChild called for unrelated child."),new ku(Ur(this.path),this.affectedTree,this.revert)}}class Wa{constructor(a,l){this.source=a,this.path=l,this.type=za.LISTEN_COMPLETE}operationForChild(a){return M(this.path)?new Wa(this.source,br()):new Wa(this.source,Ur(this.path))}}class Bo{constructor(a,l,p){this.source=a,this.path=l,this.snap=p,this.type=za.OVERWRITE}operationForChild(a){return M(this.path)?new Bo(this.source,br(),this.snap.getImmediateChild(a)):new Bo(this.source,Ur(this.path),this.snap)}}class ru{constructor(a,l,p){this.source=a,this.path=l,this.children=p,this.type=za.MERGE}operationForChild(a){if(M(this.path)){const l=this.children.subtree(new ci(a));return l.isEmpty()?null:l.value?new Bo(this.source,br(),l.value):new ru(this.source,br(),l)}return(0,q.hu)(Kn(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new ru(this.source,Ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nl{constructor(a,l,p){this.node_=a,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(M(a))return this.isFullyInitialized()&&!this.filtered_;const l=Kn(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class iu{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Nu(u,a,l,p,_,x){const L=p.filter(ee=>ee.type===l);L.sort((ee,he)=>function ms(u,a,l){if(null==a.childName||null==l.childName)throw(0,q.g5)("Should only compare child_ events.");const p=new te(a.childName,a.snapshotNode),_=new te(l.childName,l.snapshotNode);return u.index_.compare(p,_)}(u,ee,he)),L.forEach(ee=>{const he=function ch(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,ee,x);_.forEach(Te=>{Te.respondsTo(ee.type)&&a.push(Te.createEvent(he,u.query_))})})}function hi(u,a){return{eventCache:u,serverCache:a}}function Lc(u,a,l,p){return hi(new Nl(a,l,p),u.serverCache)}function ou(u,a,l,p){return hi(u.eventCache,new Nl(a,l,p))}function Ma(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function au(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let ea;class Hi{constructor(a,l=(()=>(ea||(ea=new lr(ks)),ea))()){this.value=a,this.children=l}static fromObject(a){let l=new Hi(null);return O(a,(p,_)=>{l=l.set(new ci(p),_)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:br(),value:this.value};if(M(a))return null;{const p=Kn(a),_=this.children.get(p);if(null!==_){const x=_.findRootMostMatchingPathAndValue(Ur(a),l);return null!=x?{path:I(new ci(p),x.path),value:x.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(M(a))return this;{const l=Kn(a),p=this.children.get(l);return null!==p?p.subtree(Ur(a)):new Hi(null)}}set(a,l){if(M(a))return new Hi(l,this.children);{const p=Kn(a),x=(this.children.get(p)||new Hi(null)).set(Ur(a),l),L=this.children.insert(p,x);return new Hi(this.value,L)}}remove(a){if(M(a))return this.children.isEmpty()?new Hi(null):new Hi(null,this.children);{const l=Kn(a),p=this.children.get(l);if(p){const _=p.remove(Ur(a));let x;return x=_.isEmpty()?this.children.remove(l):this.children.insert(l,_),null===this.value&&x.isEmpty()?new Hi(null):new Hi(this.value,x)}return this}}get(a){if(M(a))return this.value;{const l=Kn(a),p=this.children.get(l);return p?p.get(Ur(a)):null}}setTree(a,l){if(M(a))return l;{const p=Kn(a),x=(this.children.get(p)||new Hi(null)).setTree(Ur(a),l);let L;return L=x.isEmpty()?this.children.remove(p):this.children.insert(p,x),new Hi(this.value,L)}}fold(a){return this.fold_(br(),a)}fold_(a,l){const p={};return this.children.inorderTraversal((_,x)=>{p[_]=x.fold_(I(a,_),l)}),l(a,this.value,p)}findOnPath(a,l){return this.findOnPath_(a,br(),l)}findOnPath_(a,l,p){const _=!!this.value&&p(l,this.value);if(_)return _;if(M(a))return null;{const x=Kn(a),L=this.children.get(x);return L?L.findOnPath_(Ur(a),I(l,x),p):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,br(),l)}foreachOnPath_(a,l,p){if(M(a))return this;{this.value&&p(l,this.value);const _=Kn(a),x=this.children.get(_);return x?x.foreachOnPath_(Ur(a),I(l,_),p):new Hi(null)}}foreach(a){this.foreach_(br(),a)}foreach_(a,l){this.children.inorderTraversal((p,_)=>{_.foreach_(I(a,p),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,p)=>{p.value&&a(l,p.value)})}}class ta{constructor(a){this.writeTree_=a}static empty(){return new ta(new Hi(null))}}function Ra(u,a,l){if(M(a))return new ta(new Hi(l));{const p=u.writeTree_.findRootMostValueAndPath(a);if(null!=p){const _=p.path;let x=p.value;const L=j(_,a);return x=x.updateChild(L,l),new ta(u.writeTree_.set(_,x))}{const _=new Hi(l),x=u.writeTree_.setTree(a,_);return new ta(x)}}}function Bc(u,a,l){let p=u;return O(l,(_,x)=>{p=Ra(p,I(a,_),x)}),p}function rc(u,a){if(M(a))return ta.empty();{const l=u.writeTree_.setTree(a,new Hi(null));return new ta(l)}}function dh(u,a){return null!=lu(u,a)}function lu(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(j(l.path,a)):null}function jr(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Yi,(p,_)=>{a.push(new te(p,_))}):u.writeTree_.children.inorderTraversal((p,_)=>{null!=_.value&&a.push(new te(p,_.value))}),a}function El(u,a){if(M(a))return u;{const l=lu(u,a);return new ta(null!=l?new Hi(l):u.writeTree_.subtree(a))}}function Il(u){return u.writeTree_.isEmpty()}function nl(u,a){return Fu(br(),u.writeTree_,a)}function Fu(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let p=null;return a.children.inorderTraversal((_,x)=>{".priority"===_?((0,q.hu)(null!==x.value,"Priority writes must always be leaf nodes"),p=x.value):l=Fu(I(u,_),x,l)}),!l.getChild(u).isEmpty()&&null!==p&&(l=l.updateChild(I(u,".priority"),p)),l}}function uu(u,a){return Bu(a,u)}function hh(u,a){if(u.snap)return nt(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&nt(I(u.path,l),a))return!0;return!1}function sc(u){return u.visible}function Ed(u,a,l){let p=ta.empty();for(let _=0;_<u.length;++_){const x=u[_];if(a(x)){const L=x.path;let ee;if(x.snap)nt(l,L)?(ee=j(l,L),p=Ra(p,ee,x.snap)):nt(L,l)&&(ee=j(L,l),p=Ra(p,br(),x.snap.getChild(ee)));else{if(!x.children)throw(0,q.g5)("WriteRecord should have .snap or .children");if(nt(l,L))ee=j(l,L),p=Bc(p,ee,x.children);else if(nt(L,l))if(ee=j(L,l),M(ee))p=Bc(p,br(),x.children);else{const he=(0,q.DV)(x.children,Kn(ee));if(he){const Te=he.getChild(Ur(ee));p=Ra(p,br(),Te)}}}}}return p}function fh(u,a,l,p,_){if(p||_){const x=El(u.visibleWrites,a);return!_&&Il(x)?l:_||null!=l||dh(x,br())?nl(Ed(u.allWrites,function(Te){return(Te.visible||_)&&(!p||!~p.indexOf(Te.writeId))&&(nt(Te.path,a)||nt(a,Te.path))},a),l||Zr.EMPTY_NODE):null}{const x=lu(u.visibleWrites,a);if(null!=x)return x;{const L=El(u.visibleWrites,a);return Il(L)?l:null!=l||dh(L,br())?nl(L,l||Zr.EMPTY_NODE):null}}}function Fl(u,a,l,p){return fh(u.writeTree,u.treePath,a,l,p)}function fa(u,a){return function Lu(u,a,l){let p=Zr.EMPTY_NODE;const _=lu(u.visibleWrites,a);if(_)return _.isLeafNode()||_.forEachChild(Yi,(x,L)=>{p=p.updateImmediateChild(x,L)}),p;if(l){const x=El(u.visibleWrites,a);return l.forEachChild(Yi,(L,ee)=>{const he=nl(El(x,new ci(L)),ee);p=p.updateImmediateChild(L,he)}),jr(x).forEach(L=>{p=p.updateImmediateChild(L.name,L.node)}),p}return jr(El(u.visibleWrites,a)).forEach(L=>{p=p.updateImmediateChild(L.name,L.node)}),p}(u.writeTree,u.treePath,a)}function co(u,a,l,p){return function ph(u,a,l,p,_){(0,q.hu)(p||_,"Either existingEventSnap or existingServerSnap must exist");const x=I(a,l);if(dh(u.visibleWrites,x))return null;{const L=El(u.visibleWrites,x);return Il(L)?_.getChild(l):nl(L,_.getChild(l))}}(u.writeTree,u.treePath,a,l,p)}function Ll(u,a){return function eo(u,a){return lu(u.visibleWrites,a)}(u.writeTree,I(u.treePath,a))}function Id(u,a,l){return function wl(u,a,l,p){const _=I(a,l),x=lu(u.visibleWrites,_);return null!=x?x:p.isCompleteForChild(l)?nl(El(u.visibleWrites,_),p.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function rl(u,a){return Bu(I(u.treePath,a),u.writeTree)}function Bu(u,a){return{treePath:u,writeTree:a}}class uf{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,p=a.childName;(0,q.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,q.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(p);if(_){const x=_.type;if("child_added"===l&&"child_removed"===x)this.changeMap.set(p,Ha(p,a.snapshotNode,_.snapshotNode));else if("child_removed"===l&&"child_added"===x)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===x)this.changeMap.set(p,Ol(p,_.oldSnap));else if("child_changed"===l&&"child_added"===x)this.changeMap.set(p,Fs(p,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==x)throw(0,q.g5)("Illegal combination of changes: "+a+" occurred after "+_);this.changeMap.set(p,Ha(p,a.snapshotNode,_.oldSnap))}}else this.changeMap.set(p,a)}getChanges(){return Array.from(this.changeMap.values())}}const $u=new class cf{getCompleteChild(a){return null}getChildAfterChild(a,l,p){return null}};class du{constructor(a,l,p=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const p=null!=this.optCompleteServerCache_?new Nl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Id(this.writes_,a,p)}}getChildAfterChild(a,l,p){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:au(this.viewCache_),x=function cl(u,a,l,p,_,x){return function oc(u,a,l,p,_,x,L){let ee;const he=El(u.visibleWrites,a),Te=lu(he,br());if(null!=Te)ee=Te;else{if(null==l)return[];ee=nl(he,l)}if(ee=ee.withIndex(L),ee.isEmpty()||ee.isLeafNode())return[];{const vt=[],At=L.getCompare(),$t=x?ee.getReverseIteratorFrom(p,L):ee.getIteratorFrom(p,L);let un=$t.getNext();for(;un&&vt.length<_;)0!==At(un,p)&&vt.push(un),un=$t.getNext();return vt}}(u.writeTree,u.treePath,a,l,p,_,x)}(this.writes_,_,l,1,p,a);return 0===x.length?null:x[0]}}function D(u,a,l,p,_,x){const L=a.eventCache;if(null!=Ll(p,l))return a;{let ee,he;if(M(l))if((0,q.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Te=au(a),At=fa(p,Te instanceof Zr?Te:Zr.EMPTY_NODE);ee=u.filter.updateFullNode(a.eventCache.getNode(),At,x)}else{const Te=Fl(p,au(a));ee=u.filter.updateFullNode(a.eventCache.getNode(),Te,x)}else{const Te=Kn(l);if(".priority"===Te){(0,q.hu)(1===Aa(l),"Can't have a priority with additional path components");const vt=L.getNode();he=a.serverCache.getNode();const At=co(p,l,vt,he);ee=null!=At?u.filter.updatePriority(vt,At):L.getNode()}else{const vt=Ur(l);let At;if(L.isCompleteForChild(Te)){he=a.serverCache.getNode();const $t=co(p,l,L.getNode(),he);At=null!=$t?L.getNode().getImmediateChild(Te).updateChild(vt,$t):L.getNode().getImmediateChild(Te)}else At=Id(p,Te,a.serverCache);ee=null!=At?u.filter.updateChild(L.getNode(),Te,At,vt,_,x):L.getNode()}}return Lc(a,ee,L.isFullyInitialized()||M(l),u.filter.filtersNodes())}}function g(u,a,l,p,_,x,L,ee){const he=a.serverCache;let Te;const vt=L?u.filter:u.filter.getIndexedFilter();if(M(l))Te=vt.updateFullNode(he.getNode(),p,null);else if(vt.filtersNodes()&&!he.isFiltered()){const un=he.getNode().updateChild(l,p);Te=vt.updateFullNode(he.getNode(),un,null)}else{const un=Kn(l);if(!he.isCompleteForPath(l)&&Aa(l)>1)return a;const Fn=Ur(l),ri=he.getNode().getImmediateChild(un).updateChild(Fn,p);Te=".priority"===un?vt.updatePriority(he.getNode(),ri):vt.updateChild(he.getNode(),un,ri,Fn,$u,null)}const At=ou(a,Te,he.isFullyInitialized()||M(l),vt.filtersNodes());return D(u,At,l,_,new du(_,At,x),ee)}function v(u,a,l,p,_,x,L){const ee=a.eventCache;let he,Te;const vt=new du(_,a,x);if(M(l))Te=u.filter.updateFullNode(a.eventCache.getNode(),p,L),he=Lc(a,Te,!0,u.filter.filtersNodes());else{const At=Kn(l);if(".priority"===At)Te=u.filter.updatePriority(a.eventCache.getNode(),p),he=Lc(a,Te,ee.isFullyInitialized(),ee.isFiltered());else{const $t=Ur(l),un=ee.getNode().getImmediateChild(At);let Fn;if(M($t))Fn=p;else{const $r=vt.getCompleteChild(At);Fn=null!=$r?".priority"===Vs($t)&&$r.getChild(S($t)).isEmpty()?$r:$r.updateChild($t,p):Zr.EMPTY_NODE}he=un.equals(Fn)?a:Lc(a,u.filter.updateChild(ee.getNode(),At,Fn,$t,vt,L),ee.isFullyInitialized(),u.filter.filtersNodes())}}return he}function A(u,a){return u.eventCache.isCompleteForChild(a)}function de(u,a,l){return l.foreach((p,_)=>{a=a.updateChild(p,_)}),a}function ct(u,a,l,p,_,x,L,ee){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Te,he=a;Te=M(l)?p:new Hi(null).setTree(l,p);const vt=a.serverCache.getNode();return Te.children.inorderTraversal((At,$t)=>{if(vt.hasChild(At)){const Fn=de(0,a.serverCache.getNode().getImmediateChild(At),$t);he=g(u,he,new ci(At),Fn,_,x,L,ee)}}),Te.children.inorderTraversal((At,$t)=>{const un=!a.serverCache.isCompleteForChild(At)&&null===$t.value;if(!vt.hasChild(At)&&!un){const $r=de(0,a.serverCache.getNode().getImmediateChild(At),$t);he=g(u,he,new ci(At),$r,_,x,L,ee)}}),he}class Xn{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const p=this.query_._queryParams,_=new Au(p.getIndex()),x=function af(u){return u.loadsAllData()?new Au(u.getIndex()):u.hasLimit()?new Ga(u):new nu(u)}(p);this.processor_=function wd(u){return{filter:u}}(x);const L=l.serverCache,ee=l.eventCache,he=_.updateFullNode(Zr.EMPTY_NODE,L.getNode(),null),Te=x.updateFullNode(Zr.EMPTY_NODE,ee.getNode(),null),vt=new Nl(he,L.isFullyInitialized(),_.filtersNodes()),At=new Nl(Te,ee.isFullyInitialized(),x.filtersNodes());this.viewCache_=hi(At,vt),this.eventGenerator_=new iu(this.query_)}get query(){return this.query_}}function no(u,a){const l=au(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!M(a)&&!l.getImmediateChild(Kn(a)).isEmpty())?l.getChild(a):null}function ac(u){return 0===u.eventRegistrations_.length}function jc(u,a,l){const p=[];if(l){(0,q.hu)(null==a,"A cancel should cancel all event registrations.");const _=u.query._path;u.eventRegistrations_.forEach(x=>{const L=x.createCancelEvent(l,_);L&&p.push(L)})}if(a){let _=[];for(let x=0;x<u.eventRegistrations_.length;++x){const L=u.eventRegistrations_[x];if(L.matches(a)){if(a.hasAnyCallback()){_=_.concat(u.eventRegistrations_.slice(x+1));break}}else _.push(L)}u.eventRegistrations_=_}else u.eventRegistrations_=[];return p}function bl(u,a,l,p){a.type===za.MERGE&&null!==a.source.queryId&&((0,q.hu)(au(u.viewCache_),"We should always have a full cache before handling merges"),(0,q.hu)(Ma(u.viewCache_),"Missing event cache, even though we have a server cache"));const _=u.viewCache_,x=function Bl(u,a,l,p,_){const x=new uf;let L,ee;if(l.type===za.OVERWRITE){const Te=l;Te.source.fromUser?L=v(u,a,Te.path,Te.snap,p,_,x):((0,q.hu)(Te.source.fromServer,"Unknown source."),ee=Te.source.tagged||a.serverCache.isFiltered()&&!M(Te.path),L=g(u,a,Te.path,Te.snap,p,_,ee,x))}else if(l.type===za.MERGE){const Te=l;Te.source.fromUser?L=function Z(u,a,l,p,_,x,L){let ee=a;return p.foreach((he,Te)=>{const vt=I(l,he);A(a,Kn(vt))&&(ee=v(u,ee,vt,Te,_,x,L))}),p.foreach((he,Te)=>{const vt=I(l,he);A(a,Kn(vt))||(ee=v(u,ee,vt,Te,_,x,L))}),ee}(u,a,Te.path,Te.children,p,_,x):((0,q.hu)(Te.source.fromServer,"Unknown source."),ee=Te.source.tagged||a.serverCache.isFiltered(),L=ct(u,a,Te.path,Te.children,p,_,ee,x))}else if(l.type===za.ACK_USER_WRITE){const Te=l;L=Te.revert?function Yn(u,a,l,p,_,x){let L;if(null!=Ll(p,l))return a;{const ee=new du(p,a,_),he=a.eventCache.getNode();let Te;if(M(l)||".priority"===Kn(l)){let vt;if(a.serverCache.isFullyInitialized())vt=Fl(p,au(a));else{const At=a.serverCache.getNode();(0,q.hu)(At instanceof Zr,"serverChildren would be complete if leaf node"),vt=fa(p,At)}Te=u.filter.updateFullNode(he,vt,x)}else{const vt=Kn(l);let At=Id(p,vt,a.serverCache);null==At&&a.serverCache.isCompleteForChild(vt)&&(At=he.getImmediateChild(vt)),Te=null!=At?u.filter.updateChild(he,vt,At,Ur(l),ee,x):a.eventCache.getNode().hasChild(vt)?u.filter.updateChild(he,vt,Zr.EMPTY_NODE,Ur(l),ee,x):he,Te.isEmpty()&&a.serverCache.isFullyInitialized()&&(L=Fl(p,au(a)),L.isLeafNode()&&(Te=u.filter.updateFullNode(Te,L,x)))}return L=a.serverCache.isFullyInitialized()||null!=Ll(p,br()),Lc(a,Te,L,u.filter.filtersNodes())}}(u,a,Te.path,p,_,x):function Vt(u,a,l,p,_,x,L){if(null!=Ll(_,l))return a;const ee=a.serverCache.isFiltered(),he=a.serverCache;if(null!=p.value){if(M(l)&&he.isFullyInitialized()||he.isCompleteForPath(l))return g(u,a,l,he.getNode().getChild(l),_,x,ee,L);if(M(l)){let Te=new Hi(null);return he.getNode().forEachChild(qt,(vt,At)=>{Te=Te.set(new ci(vt),At)}),ct(u,a,l,Te,_,x,ee,L)}return a}{let Te=new Hi(null);return p.foreach((vt,At)=>{const $t=I(l,vt);he.isCompleteForPath($t)&&(Te=Te.set(vt,he.getNode().getChild($t)))}),ct(u,a,l,Te,_,x,ee,L)}}(u,a,Te.path,Te.affectedTree,p,_,x)}else{if(l.type!==za.LISTEN_COMPLETE)throw(0,q.g5)("Unknown operation type: "+l.type);L=function yn(u,a,l,p,_){const x=a.serverCache;return D(u,ou(a,x.getNode(),x.isFullyInitialized()||M(l),x.isFiltered()),l,p,$u,_)}(u,a,l.path,p,x)}const he=x.getChanges();return function df(u,a,l){const p=a.eventCache;if(p.isFullyInitialized()){const _=p.getNode().isLeafNode()||p.getNode().isEmpty(),x=Ma(u);(l.length>0||!u.eventCache.isFullyInitialized()||_&&!p.getNode().equals(x)||!p.getNode().getPriority().equals(x.getPriority()))&&l.push(Ju(Ma(a)))}}(a,L,he),{viewCache:L,changes:he}}(u.processor_,_,a,l,p);return function bd(u,a){(0,q.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,q.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,x.viewCache),(0,q.hu)(x.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=x.viewCache,Cd(u,x.changes,x.viewCache.eventCache.getNode(),null)}function Cd(u,a,l,p){return function su(u,a,l,p){const _=[],x=[];return a.forEach(L=>{"child_changed"===L.type&&u.index_.indexedValueChanged(L.oldSnap,L.snapshotNode)&&x.push(function sh(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(L.childName,L.snapshotNode))}),Nu(u,_,"child_removed",a,p,l),Nu(u,_,"child_added",a,p,l),Nu(u,_,"child_moved",x,p,l),Nu(u,_,"child_changed",a,p,l),Nu(u,_,"value",a,p,l),_}(u.eventGenerator_,a,l,p?[p]:u.eventRegistrations_)}let Dd,Sd;class hf{constructor(){this.views=new Map}}function uc(u,a,l,p){const _=a.source.queryId;if(null!==_){const x=u.views.get(_);return(0,q.hu)(null!=x,"SyncTree gave us an op for an invalid query."),bl(x,a,l,p)}{let x=[];for(const L of u.views.values())x=x.concat(bl(L,a,l,p));return x}}function pf(u,a,l,p,_){const L=u.views.get(a._queryIdentifier);if(!L){let ee=Fl(l,_?p:null),he=!1;ee?he=!0:p instanceof Zr?(ee=fa(l,p),he=!1):(ee=Zr.EMPTY_NODE,he=!1);const Te=hi(new Nl(ee,he,!1),new Nl(p,_,!1));return new Xn(a,Te)}return L}function pg(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function hu(u,a){let l=null;for(const p of u.views.values())l=l||no(p,a);return l}function fu(u,a){return a._queryParams.loadsAllData()?Td(u):u.views.get(a._queryIdentifier)}function Hc(u,a){return null!=fu(u,a)}function Vu(u){return null!=Td(u)}function Td(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let pa=1;class Ad{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Hi(null),this.pendingWriteTree_=function Vc(){return{visibleWrites:ta.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Gc(u,a,l,p,_){return function $c(u,a,l,p,_){(0,q.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),u.allWrites.push({path:a,snap:l,writeId:p,visible:_}),_&&(u.visibleWrites=Ra(u.visibleWrites,a,l)),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p,_),_?ys(u,new Bo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function il(u,a,l=!1){const p=function ha(u,a){for(let l=0;l<u.allWrites.length;l++){const p=u.allWrites[l];if(p.writeId===a)return p}return null}(u.pendingWriteTree_,a);if(function ic(u,a){const l=u.allWrites.findIndex(ee=>ee.writeId===a);(0,q.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[l];u.allWrites.splice(l,1);let _=p.visible,x=!1,L=u.allWrites.length-1;for(;_&&L>=0;){const ee=u.allWrites[L];ee.visible&&(L>=l&&hh(ee,p.path)?_=!1:nt(p.path,ee.path)&&(x=!0)),L--}return!!_&&(x?(function sp(u){u.visibleWrites=Ed(u.allWrites,sc,br()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=rc(u.visibleWrites,p.path):O(p.children,he=>{u.visibleWrites=rc(u.visibleWrites,I(p.path,he))}),!0))}(u.pendingWriteTree_,a)){let x=new Hi(null);return null!=p.snap?x=x.set(br(),!0):O(p.children,L=>{x=x.set(new ci(L),!0)}),ys(u,new ku(p.path,x,l))}return[]}function zc(u,a,l){return ys(u,new Bo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function pu(u,a,l,p,_=!1){const x=a._path,L=u.syncPointTree_.get(x);let ee=[];if(L&&("default"===a._queryIdentifier||Hc(L,a))){const he=function hm(u,a,l,p){const _=a._queryIdentifier,x=[];let L=[];const ee=Vu(u);if("default"===_)for(const[he,Te]of u.views.entries())L=L.concat(jc(Te,l,p)),ac(Te)&&(u.views.delete(he),Te.query._queryParams.loadsAllData()||x.push(Te.query));else{const he=u.views.get(_);he&&(L=L.concat(jc(he,l,p)),ac(he)&&(u.views.delete(_),he.query._queryParams.loadsAllData()||x.push(he.query)))}return ee&&!Vu(u)&&x.push(new(function op(){return(0,q.hu)(Dd,"Reference.ts has not been loaded"),Dd}())(a._repo,a._path)),{removed:x,events:L}}(L,a,l,p);(function fg(u){return 0===u.views.size})(L)&&(u.syncPointTree_=u.syncPointTree_.remove(x));const Te=he.removed;if(ee=he.events,!_){const vt=-1!==Te.findIndex($t=>$t._queryParams.loadsAllData()),At=u.syncPointTree_.findOnPath(x,($t,un)=>Vu(un));if(vt&&!At){const $t=u.syncPointTree_.subtree(x);if(!$t.isEmpty()){const un=function vg(u){return u.fold((a,l,p)=>{if(l&&Vu(l))return[Td(l)];{let _=[];return l&&(_=pg(l)),O(p,(x,L)=>{_=_.concat(L)}),_}})}($t);for(let Fn=0;Fn<un.length;++Fn){const $r=un[Fn],ri=$r.query,Ir=cp(u,$r);u.listenProvider_.startListening(mh(ri),Yc(u,ri),Ir.hashFn,Ir.onComplete)}}}!At&&Te.length>0&&!p&&(vt?u.listenProvider_.stopListening(mh(a),null):Te.forEach($t=>{const un=u.queryToTagMap.get(gh($t));u.listenProvider_.stopListening(mh($t),un)}))}!function Ry(u,a){for(let l=0;l<a.length;++l){const p=a[l];if(!p._queryParams.loadsAllData()){const _=gh(p),x=u.queryToTagMap.get(_);u.queryToTagMap.delete(_),u.tagToQueryMap.delete(x)}}}(u,Te)}return ee}function Uu(u,a,l,p){const _=xd(u,p);if(null!=_){const x=qc(_),L=x.path,ee=x.queryId,he=j(L,a);return ju(u,L,new Bo(uh(ee),he,l))}return[]}function Wc(u,a,l,p=!1){const _=a._path;let x=null,L=!1;u.syncPointTree_.foreachOnPath(_,($t,un)=>{const Fn=j($t,_);x=x||hu(un,Fn),L=L||Vu(un)});let he,ee=u.syncPointTree_.get(_);ee?(L=L||Vu(ee),x=x||hu(ee,br())):(ee=new hf,u.syncPointTree_=u.syncPointTree_.set(_,ee)),null!=x?he=!0:(he=!1,x=Zr.EMPTY_NODE,u.syncPointTree_.subtree(_).foreachChild((un,Fn)=>{const $r=hu(Fn,br());$r&&(x=x.updateImmediateChild(un,$r))}));const Te=Hc(ee,a);if(!Te&&!a._queryParams.loadsAllData()){const $t=gh(a);(0,q.hu)(!u.queryToTagMap.has($t),"View does not exist, but we have a tag");const un=function yh(){return pa++}();u.queryToTagMap.set($t,un),u.tagToQueryMap.set(un,$t)}let At=function dm(u,a,l,p,_,x){const L=pf(u,a,p,_,x);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,L),function Uc(u,a){u.eventRegistrations_.push(a)}(L,l),function lc(u,a){const l=u.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Yi,(x,L)=>{p.push(Fs(x,L))}),l.isFullyInitialized()&&p.push(Ju(l.getNode())),Cd(u,p,l.getNode(),a)}(L,l)}(ee,a,l,uu(u.pendingWriteTree_,_),x,he);if(!Te&&!L&&!p){const $t=fu(ee,a);At=At.concat(function dp(u,a,l){const p=a._path,_=Yc(u,a),x=cp(u,l),L=u.listenProvider_.startListening(mh(a),_,x.hashFn,x.onComplete),ee=u.syncPointTree_.subtree(p);if(_)(0,q.hu)(!Vu(ee.value),"If we're adding a query, it shouldn't be shadowed");else{const he=ee.fold((Te,vt,At)=>{if(!M(Te)&&vt&&Vu(vt))return[Td(vt).query];{let $t=[];return vt&&($t=$t.concat(pg(vt).map(un=>un.query))),O(At,(un,Fn)=>{$t=$t.concat(Fn)}),$t}});for(let Te=0;Te<he.length;++Te){const vt=he[Te];u.listenProvider_.stopListening(mh(vt),Yc(u,vt))}}return L}(u,a,$t))}return At}function Kc(u,a,l){const _=u.pendingWriteTree_,x=u.syncPointTree_.findOnPath(a,(L,ee)=>{const Te=hu(ee,j(L,a));if(Te)return Te});return fh(_,a,x,l,!0)}function ys(u,a){return lp(a,u.syncPointTree_,null,uu(u.pendingWriteTree_,br()))}function lp(u,a,l,p){if(M(u.path))return up(u,a,l,p);{const _=a.get(br());null==l&&null!=_&&(l=hu(_,br()));let x=[];const L=Kn(u.path),ee=u.operationForChild(L),he=a.children.get(L);if(he&&ee){const Te=l?l.getImmediateChild(L):null,vt=rl(p,L);x=x.concat(lp(ee,he,Te,vt))}return _&&(x=x.concat(uc(_,u,p,l))),x}}function up(u,a,l,p){const _=a.get(br());null==l&&null!=_&&(l=hu(_,br()));let x=[];return a.children.inorderTraversal((L,ee)=>{const he=l?l.getImmediateChild(L):null,Te=rl(p,L),vt=u.operationForChild(L);vt&&(x=x.concat(up(vt,ee,he,Te)))}),_&&(x=x.concat(uc(_,u,p,l))),x}function cp(u,a){const l=a.query,p=Yc(u,l);return{hashFn:()=>(function gr(u){return u.viewCache_.serverCache.getNode()}(a)||Zr.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return p?function gf(u,a,l){const p=xd(u,l);if(p){const _=qc(p),x=_.path,L=_.queryId,ee=j(x,a);return ju(u,x,new Wa(uh(L),ee))}return[]}(u,l._path,p):function yg(u,a){return ys(u,new Wa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const x=function Me(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const p=new Error(u+" at "+a._path.toString()+": "+l);return p.code=u.toUpperCase(),p}(_,l);return pu(u,l,null,x)}}}}function Yc(u,a){const l=gh(a);return u.queryToTagMap.get(l)}function gh(u){return u._path.toString()+"$"+u._queryIdentifier}function xd(u,a){return u.tagToQueryMap.get(a)}function qc(u){const a=u.indexOf("$");return(0,q.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new ci(u.substr(0,a))}}function ju(u,a,l){const p=u.syncPointTree_.get(a);return(0,q.hu)(p,"Missing sync point for query tag that we're tracking"),uc(p,l,uu(u.pendingWriteTree_,a),null)}function mh(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function gg(){return(0,q.hu)(Sd,"Reference.ts has not been loaded"),Sd}())(u._repo,u._path):u}class cc{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new cc(l)}node(){return this.node_}}class mu{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=I(this.path_,a);return new mu(this.syncTree_,l)}node(){return Kc(this.syncTree_,this.path_)}}const _g=function(u,a,l){return u&&"object"==typeof u?((0,q.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?pm(u[".sv"],a,l):"object"==typeof u[".sv"]?Eg(u[".sv"],a):void(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},pm=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,q.hu)(!1,"Unexpected server value: "+u)},Eg=function(u,a,l){u.hasOwnProperty("increment")||(0,q.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,q.hu)(!1,"Unexpected increment value: "+p);const _=a.node();if((0,q.hu)(null!==_&&typeof _<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return p;const L=_.getValue();return"number"!=typeof L?p:L+p},vh=function(u,a,l,p){return Ig(a,new mu(l,u),p)},hc=function(u,a,l){return Ig(u,new cc(a),l)};function Ig(u,a,l){const p=u.getPriority().val(),_=_g(p,a.getImmediateChild(".priority"),l);let x;if(u.isLeafNode()){const L=u,ee=_g(L.getValue(),a,l);return ee!==L.getValue()||_!==L.getPriority().val()?new tl(ee,os(_)):u}{const L=u;return x=L,_!==L.getPriority().val()&&(x=x.updatePriority(new tl(_))),L.forEachChild(Yi,(ee,he)=>{const Te=Ig(he,a.getImmediateChild(ee),l);Te!==he&&(x=x.updateImmediateChild(ee,Te))}),x}}class Md{constructor(a="",l=null,p={children:{},childCount:0}){this.name=a,this.parent=l,this.node=p}}function fc(u,a){let l=a instanceof ci?a:new ci(a),p=u,_=Kn(l);for(;null!==_;){const x=(0,q.DV)(p.node.children,_)||{children:{},childCount:0};p=new Md(_,p,x),l=Ur(l),_=Kn(l)}return p}function Cl(u){return u.node.value}function pc(u,a){u.node.value=a,Rd(u)}function mf(u){return u.node.childCount>0}function ga(u,a){O(u.node.children,(l,p)=>{a(new Md(l,u,p))})}function _h(u,a,l,p){l&&!p&&a(u),ga(u,_=>{_h(_,a,!0,p)}),l&&p&&a(u)}function mc(u){return new ci(null===u.parent?u.name:mc(u.parent)+"/"+u.name)}function Rd(u){null!==u.parent&&function $l(u,a,l){const p=function gc(u){return void 0===Cl(u)&&!mf(u)}(l),_=(0,q.r3)(u.node.children,a);p&&_?(delete u.node.children[a],u.node.childCount--,Rd(u)):!p&&!_&&(u.node.children[a]=l.node,u.node.childCount++,Rd(u))}(u.parent,u.name,u)}const Dl=/[\[\].#$\/\u0000-\u001F\u007F]/,hp=/[\[\].#$\u0000-\u001F\u007F]/,Vl=10485760,yf=function(u){return"string"==typeof u&&0!==u.length&&!Dl.test(u)},Qc=function(u){return"string"==typeof u&&0!==u.length&&!hp.test(u)},ma=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!al(u)||u&&"object"==typeof u&&(0,q.r3)(u,".sv")},Ul=function(u,a,l,p){p&&void 0===a||Eh((0,q.gK)(u,"value"),a,l)},Eh=function(u,a,l){const p=l instanceof ci?new Ot(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Qr(p));if("function"==typeof a)throw new Error(u+"contains a function "+Qr(p)+" with contents = "+a.toString());if(al(a))throw new Error(u+"contains "+a.toString()+" "+Qr(p));if("string"==typeof a&&a.length>Vl/3&&(0,q.ug)(a)>Vl)throw new Error(u+"contains a string greater than "+Vl+" utf8 bytes "+Qr(p)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let _=!1,x=!1;if(O(a,(L,ee)=>{if(".value"===L)_=!0;else if(".priority"!==L&&".sv"!==L&&(x=!0,!yf(L)))throw new Error(u+" contains an invalid key ("+L+") "+Qr(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function an(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,q.ug)(a),kn(u)})(p,L),Eh(u,ee,p),function Tn(u){const a=u.parts_.pop();u.byteLength_-=(0,q.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),_&&x)throw new Error(u+' contains ".value" child '+Qr(p)+" in addition to actual children.")}},vf=function(u,a,l,p){if(p&&void 0===a)return;const _=(0,q.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(_+" must be an object containing the children to replace.");const x=[];O(a,(L,ee)=>{const he=new ci(L);if(Eh(_,ee,I(l,he)),".priority"===Vs(he)&&!ma(ee))throw new Error(_+"contains an invalid value for '"+he.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");x.push(he)}),function(u,a){let l,p;for(l=0;l<a.length;l++){p=a[l];const x=T(p);for(let L=0;L<x.length;L++)if((".priority"!==x[L]||L!==x.length-1)&&!yf(x[L]))throw new Error(u+"contains an invalid key ("+x[L]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(ne);let _=null;for(l=0;l<a.length;l++){if(p=a[l],null!==_&&nt(_,p))throw new Error(u+"contains a path "+_.toString()+" that is ancestor of another path "+p.toString());_=p}}(_,x)},pp=function(u,a,l){if(!l||void 0!==a){if(al(a))throw new Error((0,q.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ma(a))throw new Error((0,q.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hu=function(u,a,l,p){if(!(p&&void 0===l||yf(l)))throw new Error((0,q.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pd=function(u,a,l,p){if(!(p&&void 0===l||Qc(l)))throw new Error((0,q.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Tl=function(u,a){if(".info"===Kn(a))throw new Error(u+" failed = Can't modify data under /.info/")},bg=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!yf(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Qc(u)}(l))throw new Error((0,q.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Od{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yu(u,a){let l=null;for(let p=0;p<a.length;p++){const _=a[p],x=_.getPath();null!==l&&!ue(x,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:x}),l.events.push(_)}l&&u.eventLists_.push(l)}function jl(u,a,l){yu(u,l),gp(u,p=>ue(p,a))}function na(u,a,l){yu(u,l),gp(u,p=>nt(p,a)||nt(a,p))}function gp(u,a){u.recursionDepth_++;let l=!0;for(let p=0;p<u.eventLists_.length;p++){const _=u.eventLists_[p];_&&(a(_.path)?(Py(u.eventLists_[p]),u.eventLists_[p]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function Py(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const p=l.getEventRunner();lo&&ns("event: "+l.toString()),kr(p)}}}const _f="repo_interrupt";class ym{constructor(a,l,p,_){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Od,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tc(),this.transactionQueueTree_=new Md,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Do(u){const l=u.infoData_.getNode(new ci(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function kd(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:Do(u)})}function Ef(u,a,l,p,_){u.dataUpdateCount++;const x=new ci(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let L=[];if(_)if(p){const he=(0,q.UI)(l,Te=>os(Te));L=function gu(u,a,l,p){const _=xd(u,p);if(_){const x=qc(_),L=x.path,ee=x.queryId,he=j(L,a),Te=Hi.fromObject(l);return ju(u,L,new ru(uh(ee),he,Te))}return[]}(u.serverSyncTree_,x,he,_)}else{const he=os(l);L=Uu(u.serverSyncTree_,x,he,_)}else if(p){const he=(0,q.UI)(l,Te=>os(Te));L=function fm(u,a,l){const p=Hi.fromObject(l);return ys(u,new ru({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,p))}(u.serverSyncTree_,x,he)}else{const he=os(l);L=zc(u.serverSyncTree_,x,he)}let ee=x;L.length>0&&(ee=Bd(u,x)),na(u.eventQueue_,ee,L)}function If(u,a){Nd(u,"connected",a),!1===a&&function vp(u){Ld(u,"onDisconnectEvents");const a=kd(u),l=tc();_l(u.onDisconnect_,br(),(_,x)=>{const L=vh(_,x,u.serverSyncTree_,a);da(l,_,L)});let p=[];_l(l,br(),(_,x)=>{p=p.concat(zc(u.serverSyncTree_,_,x));const L=bh(u,_);Bd(u,L)}),u.onDisconnect_=tc(),na(u.eventQueue_,br(),p)}(u)}function Nd(u,a,l){const p=new ci("/.info/"+a),_=os(l);u.infoData_.updateSnapshot(p,_);const x=zc(u.infoSyncTree_,p,_);na(u.eventQueue_,p,x)}function yc(u){return u.nextWriteId_++}function yp(u,a,l,p,_){Ld(u,"set",{path:a.toString(),value:l,priority:p});const x=kd(u),L=os(l,p),ee=Kc(u.serverSyncTree_,a),he=hc(L,ee,x),Te=yc(u),vt=Gc(u.serverSyncTree_,a,he,Te,!0);yu(u.eventQueue_,vt),u.server_.put(a.toString(),L.val(!0),($t,un)=>{const Fn="ok"===$t;Fn||rs("set at "+a+" failed: "+$t);const $r=il(u.serverSyncTree_,Te,!Fn);na(u.eventQueue_,a,$r),Gl(0,_,$t,un)});const At=bh(u,a);Bd(u,At),na(u.eventQueue_,At,[])}function _p(u,a,l){u.server_.onDisconnectCancel(a.toString(),(p,_)=>{"ok"===p&&uo(u.onDisconnect_,a),Gl(0,l,p,_)})}function Fd(u,a,l,p){const _=os(l);u.server_.onDisconnectPut(a.toString(),_.val(!0),(x,L)=>{"ok"===x&&da(u.onDisconnect_,a,_),Gl(0,p,x,L)})}function Cf(u,a,l){let p;p=".info"===Kn(a._path)?pu(u.infoSyncTree_,a,l):pu(u.serverSyncTree_,a,l),jl(u.eventQueue_,a._path,p)}function Dg(u){u.persistentConnection_&&u.persistentConnection_.interrupt(_f)}function Ld(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),ns(l,...a)}function Gl(u,a,l,p){a&&kr(()=>{if("ok"===l)a(null);else{const _=(l||"error").toUpperCase();let x=_;p&&(x+=": "+p);const L=new Error(x);L.code=_,a(L)}})}function Ih(u,a,l){return Kc(u.serverSyncTree_,a,l)||Zr.EMPTY_NODE}function Ep(u,a=u.transactionQueueTree_){if(a||wh(u,a),Cl(a)){const l=Df(u,a);(0,q.hu)(l.length>0,"Sending zero length transaction queue"),l.every(_=>0===_.status)&&function Ip(u,a,l){const p=l.map(Te=>Te.currentWriteId),_=Ih(u,a,p);let x=_;const L=_.hash();for(let Te=0;Te<l.length;Te++){const vt=l[Te];(0,q.hu)(0===vt.status,"tryToSendTransactionQueue_: items in queue should all be run."),vt.status=1,vt.retryCount++;const At=j(a,vt.path);x=x.updateChild(At,vt.currentOutputSnapshotRaw)}const ee=x.val(!0),he=a;u.server_.put(he.toString(),ee,Te=>{Ld(u,"transaction put response",{path:he.toString(),status:Te});let vt=[];if("ok"===Te){const At=[];for(let $t=0;$t<l.length;$t++)l[$t].status=2,vt=vt.concat(il(u.serverSyncTree_,l[$t].currentWriteId)),l[$t].onComplete&&At.push(()=>l[$t].onComplete(null,!0,l[$t].currentOutputSnapshotResolved)),l[$t].unwatcher();wh(u,fc(u.transactionQueueTree_,a)),Ep(u,u.transactionQueueTree_),na(u.eventQueue_,a,vt);for(let $t=0;$t<At.length;$t++)kr(At[$t])}else{if("datastale"===Te)for(let At=0;At<l.length;At++)l[At].status=3===l[At].status?4:0;else{rs("transaction at "+he.toString()+" failed: "+Te);for(let At=0;At<l.length;At++)l[At].status=4,l[At].abortReason=Te}Bd(u,a)}},L)}(u,mc(a),l)}else mf(a)&&ga(a,l=>{Ep(u,l)})}function Bd(u,a){const l=Jc(u,a),p=mc(l);return function Xc(u,a,l){if(0===a.length)return;const p=[];let _=[];const L=a.filter(ee=>0===ee.status).map(ee=>ee.currentWriteId);for(let ee=0;ee<a.length;ee++){const he=a[ee],Te=j(l,he.path);let At,vt=!1;if((0,q.hu)(null!==Te,"rerunTransactionsUnderNode_: relativePath should not be null."),4===he.status)vt=!0,At=he.abortReason,_=_.concat(il(u.serverSyncTree_,he.currentWriteId,!0));else if(0===he.status)if(he.retryCount>=25)vt=!0,At="maxretry",_=_.concat(il(u.serverSyncTree_,he.currentWriteId,!0));else{const $t=Ih(u,he.path,L);he.currentInputSnapshot=$t;const un=a[ee].update($t.val());if(void 0!==un){Eh("transaction failed: Data returned ",un,he.path);let Fn=os(un);"object"==typeof un&&null!=un&&(0,q.r3)(un,".priority")||(Fn=Fn.updatePriority($t.getPriority()));const ri=he.currentWriteId,Ir=kd(u),To=hc(Fn,$t,Ir);he.currentOutputSnapshotRaw=Fn,he.currentOutputSnapshotResolved=To,he.currentWriteId=yc(u),L.splice(L.indexOf(ri),1),_=_.concat(Gc(u.serverSyncTree_,he.path,To,he.currentWriteId,he.applyLocally)),_=_.concat(il(u.serverSyncTree_,ri,!0))}else vt=!0,At="nodata",_=_.concat(il(u.serverSyncTree_,he.currentWriteId,!0))}na(u.eventQueue_,l,_),_=[],vt&&(a[ee].status=2,setTimeout(a[ee].unwatcher,Math.floor(0)),a[ee].onComplete&&p.push("nodata"===At?()=>a[ee].onComplete(null,!1,a[ee].currentInputSnapshot):()=>a[ee].onComplete(new Error(At),!1,null)))}wh(u,u.transactionQueueTree_);for(let ee=0;ee<p.length;ee++)kr(p[ee]);Ep(u,u.transactionQueueTree_)}(u,Df(u,l),p),p}function Jc(u,a){let l,p=u.transactionQueueTree_;for(l=Kn(a);null!==l&&void 0===Cl(p);)p=fc(p,l),l=Kn(a=Ur(a));return p}function Df(u,a){const l=[];return Ka(u,a,l),l.sort((p,_)=>p.order-_.order),l}function Ka(u,a,l){const p=Cl(a);if(p)for(let _=0;_<p.length;_++)l.push(p[_]);ga(a,_=>{Ka(u,_,l)})}function wh(u,a){const l=Cl(a);if(l){let p=0;for(let _=0;_<l.length;_++)2!==l[_].status&&(l[p]=l[_],p++);l.length=p,pc(a,l.length>0?l:void 0)}ga(a,p=>{wh(u,p)})}function bh(u,a){const l=mc(Jc(u,a)),p=fc(u.transactionQueueTree_,a);return function Zc(u,a,l){let p=l?u:u.parent;for(;null!==p;){if(a(p))return!0;p=p.parent}}(p,_=>{Tf(u,_)}),Tf(u,p),_h(p,_=>{Tf(u,_)}),l}function Tf(u,a){const l=Cl(a);if(l){const p=[];let _=[],x=-1;for(let L=0;L<l.length;L++)3===l[L].status||(1===l[L].status?((0,q.hu)(x===L-1,"All SENT items should be at beginning of queue."),x=L,l[L].status=3,l[L].abortReason="set"):((0,q.hu)(0===l[L].status,"Unexpected transaction status in abort"),l[L].unwatcher(),_=_.concat(il(u.serverSyncTree_,l[L].currentWriteId,!0)),l[L].onComplete&&p.push(l[L].onComplete.bind(null,new Error("set"),!1,null))));-1===x?pc(a,void 0):l.length=x+1,na(u.eventQueue_,mc(a),_);for(let L=0;L<p.length;L++)kr(p[L])}}const bp=function(u,a){const l=Sf(u),p=l.namespace;return"firebase.com"===l.domain&&yo(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&yo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gl(l.host,l.secure,p,"ws"===l.scheme||"wss"===l.scheme,a,"",p!==l.subdomain),path:new ci(l.pathString)}},Sf=function(u){let a="",l="",p="",_="",x="",L=!0,ee="https",he=443;if("string"==typeof u){let Te=u.indexOf("//");Te>=0&&(ee=u.substring(0,Te-1),u=u.substring(Te+2));let vt=u.indexOf("/");-1===vt&&(vt=u.length);let At=u.indexOf("?");-1===At&&(At=u.length),a=u.substring(0,Math.min(vt,At)),vt<At&&(_=function Em(u){let a="";const l=u.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let _=l[p];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch(x){}a+="/"+_}return a}(u.substring(vt,At)));const $t=function wp(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?a[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):rs(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,At)));Te=a.indexOf(":"),Te>=0?(L="https"===ee||"wss"===ee,he=parseInt(a.substring(Te+1),10)):Te=a.length;const un=a.slice(0,Te);if("localhost"===un.toLowerCase())l="localhost";else if(un.split(".").length<=2)l=un;else{const Fn=a.indexOf(".");p=a.substring(0,Fn).toLowerCase(),l=a.substring(Fn+1),x=p}"ns"in $t&&(x=$t.ns)}return{host:a,port:he,domain:l,subdomain:p,secure:L,scheme:ee,pathString:_,namespace:x}};class Cp{constructor(a,l,p,_){this.eventType=a,this.eventRegistration=l,this.snapshot=p,this.prevName=_}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,q.Wl)(this.snapshot.exportVal())}}class Dp{constructor(a,l,p){this.eventRegistration=a,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ch{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Br{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new q.BH;return _p(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Tl("OnDisconnect.remove",this._path);const a=new q.BH;return Fd(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Tl("OnDisconnect.set",this._path),Ul("OnDisconnect.set",a,this._path,!1);const l=new q.BH;return Fd(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){Tl("OnDisconnect.setWithPriority",this._path),Ul("OnDisconnect.setWithPriority",a,this._path,!1),pp("OnDisconnect.setWithPriority",l,!1);const p=new q.BH;return function bf(u,a,l,p,_){const x=os(l,p);u.server_.onDisconnectPut(a.toString(),x.val(!0),(L,ee)=>{"ok"===L&&da(u.onDisconnect_,a,x),Gl(0,_,L,ee)})}(this._repo,this._path,a,l,p.wrapCallback(()=>{})),p.promise}update(a){Tl("OnDisconnect.update",this._path),vf("OnDisconnect.update",a,this._path,!1);const l=new q.BH;return function vc(u,a,l,p){if((0,q.xb)(l))return ns("onDisconnect().update() called with empty data.  Don't do anything."),void Gl(0,p,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(_,x)=>{"ok"===_&&O(l,(L,ee)=>{const he=os(ee);da(u.onDisconnect_,I(a,L),he)}),Gl(0,p,_,x)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class $o{constructor(a,l,p,_){this._repo=a,this._path=l,this._queryParams=p,this._orderByCalled=_}get key(){return M(this._path)?null:Vs(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){const a=Ru(this._queryParams),l=Oa(a);return"{}"===l?"default":l}get _queryObject(){return Ru(this._queryParams)}isEqual(a){if(!((a=(0,q.m9)(a))instanceof $o))return!1;const l=this._repo===a._repo,p=ue(this._path,a._path);return l&&p&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Rc(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function _c(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function zl(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===qt){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==vo)throw new Error(p);if("string"!=typeof a)throw new Error(_)}if(u.hasEnd()){if(u.getIndexEndName()!==No)throw new Error(p);if("string"!=typeof l)throw new Error(_)}}else if(u.getIndex()===Yi){if(null!=a&&!ma(a)||null!=l&&!ma(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,q.hu)(u.getIndex()instanceof Nc||u.getIndex()===Xu,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function $d(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class sl extends $o{constructor(a,l){super(a,l,new Fc,!1)}get parent(){const a=S(this._path);return null===a?null:new sl(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class Gu{constructor(a,l,p){this._node=a,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new ci(a),p=ed(this.ref,a);return new Gu(this._node.getChild(l),p,Yi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,_)=>a(new Gu(_,ed(this.ref,p),Yi)))}hasChild(a){const l=new ci(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Tg(u,a){return(u=(0,q.m9)(u))._checkNotDeleted("ref"),void 0!==a?ed(u._root,a):u._root}function Af(u,a){(u=(0,q.m9)(u))._checkNotDeleted("refFromURL");const l=bp(a,u._repo.repoInfo_.nodeAdmin);bg("refFromURL",l);const p=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&yo("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),Tg(u,l.path.toString())}function ed(u,a){return null===Kn((u=(0,q.m9)(u))._path)?(l=a,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Pd("child","path",l,!1)):Pd("child","path",a,!1),new sl(u._repo,I(u._path,a));var l}function td(u,a){u=(0,q.m9)(u),Tl("set",u._path),Ul("set",a,u._path,!1);const l=new q.BH;return yp(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function xf(u,a){vf("update",a,u._path,!1);const l=new q.BH;return function Cg(u,a,l,p){Ld(u,"update",{path:a.toString(),value:l});let _=!0;const x=kd(u),L={};if(O(l,(ee,he)=>{_=!1,L[ee]=vh(I(a,ee),os(he),u.serverSyncTree_,x)}),_)ns("update() called with empty data.  Don't do anything."),Gl(0,p,"ok",void 0);else{const ee=yc(u),he=function mg(u,a,l,p){!function cu(u,a,l,p){(0,q.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:p,visible:!0}),u.visibleWrites=Bc(u.visibleWrites,a,l),u.lastWriteId=p}(u.pendingWriteTree_,a,l,p);const _=Hi.fromObject(l);return ys(u,new ru({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,_))}(u.serverSyncTree_,a,L,ee);yu(u.eventQueue_,he),u.server_.merge(a.toString(),l,(Te,vt)=>{const At="ok"===Te;At||rs("update at "+a+" failed: "+Te);const $t=il(u.serverSyncTree_,ee,!At),un=$t.length>0?Bd(u,a):a;na(u.eventQueue_,un,$t),Gl(0,p,Te,vt)}),O(l,Te=>{const vt=bh(u,I(a,Te));Bd(u,vt)}),na(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function Ap(u){u=(0,q.m9)(u);const a=new Ch(()=>{}),l=new Dh(a);return function wf(u,a,l){const p=function ap(u,a){const l=a._path;let p=null;u.syncPointTree_.foreachOnPath(l,(Te,vt)=>{const At=j(Te,l);p=p||hu(vt,At)});let _=u.syncPointTree_.get(l);_?p=p||hu(_,br()):(_=new hf,u.syncPointTree_=u.syncPointTree_.set(l,_));const x=null!=p,L=x?new Nl(p,!0,!1):null;return function to(u){return Ma(u.viewCache_)}(pf(_,a,uu(u.pendingWriteTree_,a._path),x?L.getNode():Zr.EMPTY_NODE,x))}(u.serverSyncTree_,a);return null!=p?Promise.resolve(p):u.server_.get(a).then(_=>{const x=os(_).withIndex(a._queryParams.getIndex());let L;if(Wc(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())L=zc(u.serverSyncTree_,a._path,x);else{const ee=Yc(u.serverSyncTree_,a);L=Uu(u.serverSyncTree_,a._path,x,ee)}return na(u.eventQueue_,a._path,L),pu(u.serverSyncTree_,a,l,null,!0),x},_=>(Ld(u,"get for query "+(0,q.Wl)(a)+" failed: "+_),Promise.reject(new Error(_))))}(u._repo,u,l).then(p=>new Gu(p,new sl(u._repo,u._path),u._queryParams.getIndex()))}class Dh{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const p=l._queryParams.getIndex();return new Cp("value",this,new Gu(a.snapshotNode,new sl(l._repo,l._path),p))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Dp(this,a,l):null}matches(a){return a instanceof Dh&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xp{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Dp(this,a,l):null}createEvent(a,l){(0,q.hu)(null!=a.childName,"Child events should have a childName.");const p=ed(new sl(l._repo,l._path),a.childName),_=l._queryParams.getIndex();return new Cp(a.type,this,new Gu(a.snapshotNode,p,_),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof xp&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Mf(u,a,l,p,_){let x;if("object"==typeof p&&(x=void 0,_=p),"function"==typeof p&&(x=p),_&&_.onlyOnce){const he=l,Te=(vt,At)=>{Cf(u._repo,u,ee),he(vt,At)};Te.userCallback=l.userCallback,Te.context=l.context,l=Te}const L=new Ch(l,x||void 0),ee="value"===a?new Dh(L):new xp(a,L);return function Hl(u,a,l){let p;p=".info"===Kn(a._path)?Wc(u.infoSyncTree_,a,l):Wc(u.serverSyncTree_,a,l),jl(u.eventQueue_,a._path,p)}(u._repo,u,ee),()=>Cf(u._repo,u,ee)}function Rf(u,a,l,p){return Mf(u,"value",a,l,p)}function Sg(u,a,l,p){return Mf(u,"child_added",a,l,p)}function Mp(u,a,l,p){return Mf(u,"child_changed",a,l,p)}function Th(u,a,l,p){return Mf(u,"child_moved",a,l,p)}function Pf(u,a,l,p){return Mf(u,"child_removed",a,l,p)}function Sl(u,a,l){let p=null;const _=l?new Ch(l):null;"value"===a?p=new Dh(_):a&&(p=new xp(a,_)),Cf(u._repo,u,p)}class dl{}class Vd extends dl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ul("endAt",this._value,a._path,!0);const l=lh(a._queryParams,this._value,this._key);if($d(l),zl(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(a._repo,a._path,l,a._orderByCalled)}}class Rp extends dl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ul("endBefore",this._value,a._path,!1);const l=function ip(u,a,l){let p,_;return u.index_===qt?("string"==typeof a&&(a=ih(a)),_=lh(u,a,l)):(p=null==l?vo:ih(l),_=lh(u,a,p)),_.endBeforeSet_=!0,_}(a._queryParams,this._value,this._key);if($d(l),zl(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $o(a._repo,a._path,l,a._orderByCalled)}}class Of extends dl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ul("startAt",this._value,a._path,!0);const l=ec(a._queryParams,this._value,this._key);if($d(l),zl(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $o(a._repo,a._path,l,a._orderByCalled)}}class zu extends dl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){Ul("startAfter",this._value,a._path,!1);const l=function gd(u,a,l){let p;if(u.index_===qt)"string"==typeof a&&(a=rh(a)),p=ec(u,a,l);else{let _;_=null==l?No:rh(l),p=ec(u,a,_)}return p.startAfterSet_=!0,p}(a._queryParams,this._value,this._key);if($d(l),zl(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $o(a._repo,a._path,l,a._orderByCalled)}}class Im extends dl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(a._repo,a._path,function oh(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class wm extends dl{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $o(a._repo,a._path,function ah(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class xg extends dl{constructor(a){super(),this._path=a}_apply(a){_c(a,"orderByChild");const l=new ci(this._path);if(M(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Nc(l),_=xu(a._queryParams,p);return zl(_),new $o(a._repo,a._path,_,!0)}}class kp extends dl{_apply(a){_c(a,"orderByKey");const l=xu(a._queryParams,qt);return zl(l),new $o(a._repo,a._path,l,!0)}}class Mg extends dl{_apply(a){_c(a,"orderByPriority");const l=xu(a._queryParams,Yi);return zl(l),new $o(a._repo,a._path,l,!0)}}class Ic extends dl{_apply(a){_c(a,"orderByValue");const l=xu(a._queryParams,Xu);return zl(l),new $o(a._repo,a._path,l,!0)}}class Pg extends dl{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(Ul("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Vd(this._value,this._key)._apply(new Of(this._value,this._key)._apply(a))}}function ro(u,...a){let l=(0,q.m9)(u);for(const p of a)l=p._apply(l);return l}(function ff(u){(0,q.hu)(!Dd,"__referenceConstructor has already been defined"),Dd=u})(sl),function My(u){(0,q.hu)(!Sd,"__referenceConstructor has already been defined"),Sd=u}(sl);const Rh={};function Lf(u,a,l,p,_){let x=p||u.options.databaseURL;void 0===x&&(u.options.projectId||yo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ns("Using default host for project ",u.options.projectId),x=`${u.options.projectId}-default-rtdb.firebaseio.com`);let he,Te,L=bp(x,_),ee=L.repoInfo;typeof process<"u"&&process.env&&(Te=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Te?(he=!0,x=`http://${Te}?ns=${ee.namespace}`,L=bp(x,_),ee=L.repoInfo):he=!L.repoInfo.secure;const vt=_&&he?new Ii(Ii.OWNER):new Ei(u.name,u.options,a);bg("Invalid Firebase Database URL",L),M(L.path)||yo("Database URL must point to the root of a Firebase Database (not including a child path).");const At=function Np(u,a,l,p){let _=Rh[a.name];_||(_={},Rh[a.name]=_);let x=_[u.toURLString()];return x&&yo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),x=new ym(u,false,l,p),_[u.toURLString()]=x,x}(ee,u,vt,new ni(u.name,l));return new Fp(At,u)}class Fp{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mp(u,a,l){if(u.stats_=ka(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new ps(u.repoInfo_,(p,_,x,L)=>{Ef(u,p,_,x,L)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>If(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,q.Wl)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new G(u.repoInfo_,a,(p,_,x,L)=>{Ef(u,p,_,x,L)},p=>{If(u,p)},p=>{!function vm(u,a){O(a,(l,p)=>{Nd(u,l,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function Ja(u,a){const l=u.toString();return Ko[l]||(Ko[l]=a()),Ko[l]}(u.repoInfo_,()=>new Pu(u.stats_,u.server_)),u.infoData_=new kl,u.infoSyncTree_=new Ad({startListening:(p,_,x,L)=>{let ee=[];const he=u.infoData_.getNode(p._path);return he.isEmpty()||(ee=zc(u.infoSyncTree_,p._path,he),setTimeout(()=>{L("ok")},0)),ee},stopListening:()=>{}}),Nd(u,"connected",!1),u.serverSyncTree_=new Ad({startListening:(p,_,x,L)=>(u.server_.listen(p,x,_,(ee,he)=>{const Te=L(ee,he);na(u.eventQueue_,p._path,Te)}),[]),stopListening:(p,_)=>{u.server_.unlisten(p,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,br())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Bf(u,a){const l=Rh[a];(!l||l[u.key]!==u)&&yo(`Database ${a}(${u.repoInfo_}) has already been deleted.`),Dg(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&yo("Cannot call "+a+" on a deleted database.")}}function Lp(){$a.IS_TRANSPORT_INITIALIZED&&rs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ud(){Lp(),Io.forceDisallow()}function jd(){Lp(),Ba.forceDisallow(),Io.forceAllow()}function Hd(u,a){Xa(u,a)}const Gd={".sv":"timestamp"};class Lg{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}G.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},G.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function Ng(u){qs(fe.SDK_VERSION),(0,fe._registerComponent)(new ut.wA("database",(a,{instanceIdentifier:l})=>Lf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(ui,Go,u),(0,fe.registerVersion)(ui,Go,"esm2017")}();const kh=new mo.Yd("@firebase/database-compat"),Vp=function(u){kh.warn("FIREBASE WARNING: "+u)};class Ly{constructor(a){this._delegate=a}cancel(a){(0,q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,q.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),p=>a(p)),l}remove(a){(0,q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,q.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),p=>a(p)),l}set(a,l){(0,q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,q.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(a);return l&&p.then(()=>l(null),_=>l(_)),p}setWithPriority(a,l,p){(0,q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,q.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const _=this._delegate.setWithPriority(a,l);return p&&_.then(()=>p(null),x=>p(x)),_}update(a,l){if((0,q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const _={};for(let x=0;x<a.length;++x)_[""+x]=a[x];a=_,Vp("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,q.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(a);return l&&p.then(()=>l(null),_=>l(_)),p}}class Sm{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class wc{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,q.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),Pd("DataSnapshot.child","path",a,!1),new wc(this._database,this._delegate.child(a))}hasChild(a){return(0,q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Pd("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,q.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new wc(this._database,l)))}hasChildren(){return(0,q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,q.Dv)("DataSnapshot.ref",0,0,arguments.length),new hl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ya{constructor(a,l){this.database=a,this._delegate=l}on(a,l,p,_){var x;(0,q.Dv)("Query.on",2,4,arguments.length),(0,q.Wj)("Query.on","callback",l,!1);const L=ya.getCancelAndContextArgs_("Query.on",p,_),ee=(Te,vt)=>{l.call(L.context,new wc(this.database,Te),vt)};ee.userCallback=l,ee.context=L.context;const he=null===(x=L.cancel)||void 0===x?void 0:x.bind(L.context);switch(a){case"value":return Rf(this._delegate,ee,he),l;case"child_added":return Sg(this._delegate,ee,he),l;case"child_removed":return Pf(this._delegate,ee,he),l;case"child_changed":return Mp(this._delegate,ee,he),l;case"child_moved":return Th(this._delegate,ee,he),l;default:throw new Error((0,q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,p){if((0,q.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,q.Wj)("Query.off","callback",l,!0),(0,q.lb)("Query.off","context",p,!0),l){const _=()=>{};_.userCallback=l,_.context=p,Sl(this._delegate,a,_)}else Sl(this._delegate,a)}get(){return Ap(this._delegate).then(a=>new wc(this.database,a))}once(a,l,p,_){(0,q.Dv)("Query.once",1,4,arguments.length),(0,q.Wj)("Query.once","callback",l,!0);const x=ya.getCancelAndContextArgs_("Query.once",p,_),L=new q.BH,ee=(Te,vt)=>{const At=new wc(this.database,Te);l&&l.call(x.context,At,vt),L.resolve(At)};ee.userCallback=l,ee.context=x.context;const he=Te=>{x.cancel&&x.cancel.call(x.context,Te),L.reject(Te)};switch(a){case"value":Rf(this._delegate,ee,he,{onlyOnce:!0});break;case"child_added":Sg(this._delegate,ee,he,{onlyOnce:!0});break;case"child_removed":Pf(this._delegate,ee,he,{onlyOnce:!0});break;case"child_changed":Mp(this._delegate,ee,he,{onlyOnce:!0});break;case"child_moved":Th(this._delegate,ee,he,{onlyOnce:!0});break;default:throw new Error((0,q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return L.promise}limitToFirst(a){return(0,q.Dv)("Query.limitToFirst",1,1,arguments.length),new ya(this.database,ro(this._delegate,function kf(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Im(u)}(a)))}limitToLast(a){return(0,q.Dv)("Query.limitToLast",1,1,arguments.length),new ya(this.database,ro(this._delegate,function Nf(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wm(u)}(a)))}orderByChild(a){return(0,q.Dv)("Query.orderByChild",1,1,arguments.length),new ya(this.database,ro(this._delegate,function Sh(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pd("orderByChild","path",u,!1),new xg(u)}(a)))}orderByKey(){return(0,q.Dv)("Query.orderByKey",0,0,arguments.length),new ya(this.database,ro(this._delegate,function Ah(){return new kp}()))}orderByPriority(){return(0,q.Dv)("Query.orderByPriority",0,0,arguments.length),new ya(this.database,ro(this._delegate,function xh(){return new Mg}()))}orderByValue(){return(0,q.Dv)("Query.orderByValue",0,0,arguments.length),new ya(this.database,ro(this._delegate,function Rg(){return new Ic}()))}startAt(a=null,l){return(0,q.Dv)("Query.startAt",0,2,arguments.length),new ya(this.database,ro(this._delegate,function Op(u=null,a){return Hu("startAt","key",a,!0),new Of(u,a)}(a,l)))}startAfter(a=null,l){return(0,q.Dv)("Query.startAfter",0,2,arguments.length),new ya(this.database,ro(this._delegate,function Ag(u,a){return Hu("startAfter","key",a,!0),new zu(u,a)}(a,l)))}endAt(a=null,l){return(0,q.Dv)("Query.endAt",0,2,arguments.length),new ya(this.database,ro(this._delegate,function Ec(u,a){return Hu("endAt","key",a,!0),new Vd(u,a)}(a,l)))}endBefore(a=null,l){return(0,q.Dv)("Query.endBefore",0,2,arguments.length),new ya(this.database,ro(this._delegate,function Pp(u,a){return Hu("endBefore","key",a,!0),new Rp(u,a)}(a,l)))}equalTo(a,l){return(0,q.Dv)("Query.equalTo",1,2,arguments.length),new ya(this.database,ro(this._delegate,function Mh(u,a){return Hu("equalTo","key",a,!0),new Pg(u,a)}(a,l)))}toString(){return(0,q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,q.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof ya))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,p){const _={cancel:void 0,context:void 0};if(l&&p)_.cancel=l,(0,q.Wj)(a,"cancel",_.cancel,!0),_.context=p,(0,q.lb)(a,"context",_.context,!0);else if(l)if("object"==typeof l&&null!==l)_.context=l;else{if("function"!=typeof l)throw new Error((0,q.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=l}return _}get ref(){return new hl(this.database,new sl(this._delegate._repo,this._delegate._path))}}class hl extends ya{constructor(a,l){super(a,new $o(l._repo,l._path,new Fc,!1)),this.database=a,this._delegate=l}getKey(){return(0,q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new hl(this.database,ed(this._delegate,a))}getParent(){(0,q.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new hl(this.database,a):null}getRoot(){return(0,q.Dv)("Reference.root",0,0,arguments.length),new hl(this.database,this._delegate.root)}set(a,l){(0,q.Dv)("Reference.set",1,2,arguments.length),(0,q.Wj)("Reference.set","onComplete",l,!0);const p=td(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}update(a,l){if((0,q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const _={};for(let x=0;x<a.length;++x)_[""+x]=a[x];a=_,Vp("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tl("Reference.update",this._delegate._path),(0,q.Wj)("Reference.update","onComplete",l,!0);const p=xf(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}setWithPriority(a,l,p){(0,q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,q.Wj)("Reference.setWithPriority","onComplete",p,!0);const _=function Sp(u,a,l){if(Tl("setWithPriority",u._path),Ul("setWithPriority",a,u._path,!1),pp("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new q.BH;return yp(u._repo,u._path,a,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,a,l);return p&&_.then(()=>p(null),x=>p(x)),_}remove(a){(0,q.Dv)("Reference.remove",0,1,arguments.length),(0,q.Wj)("Reference.remove","onComplete",a,!0);const l=function Tp(u){return Tl("remove",u._path),td(u,null)}(this._delegate);return a&&l.then(()=>a(null),p=>a(p)),l}transaction(a,l,p){(0,q.Dv)("Reference.transaction",1,3,arguments.length),(0,q.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,q.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const _=function Bp(u,a,l){var p;if(u=(0,q.m9)(u),Tl("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const _=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,x=new q.BH,ee=Rf(u,()=>{});return function Oy(u,a,l,p,_,x){Ld(u,"transaction on "+a);const L={path:a,update:l,onComplete:p,status:null,order:bs(),applyLocally:x,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ee=Ih(u,a,void 0);L.currentInputSnapshot=ee;const he=L.update(ee.val());if(void 0===he)L.unwatcher(),L.currentOutputSnapshotRaw=null,L.currentOutputSnapshotResolved=null,L.onComplete&&L.onComplete(null,!1,L.currentInputSnapshot);else{Eh("transaction failed: Data returned ",he,L.path),L.status=0;const Te=fc(u.transactionQueueTree_,a),vt=Cl(Te)||[];let At;vt.push(L),pc(Te,vt),"object"==typeof he&&null!==he&&(0,q.r3)(he,".priority")?(At=(0,q.DV)(he,".priority"),(0,q.hu)(ma(At),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):At=(Kc(u.serverSyncTree_,a)||Zr.EMPTY_NODE).getPriority().val();const $t=kd(u),un=os(he,At),Fn=hc(un,ee,$t);L.currentOutputSnapshotRaw=un,L.currentOutputSnapshotResolved=Fn,L.currentWriteId=yc(u);const $r=Gc(u.serverSyncTree_,a,Fn,L.currentWriteId,L.applyLocally);na(u.eventQueue_,a,$r),Ep(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(he,Te,vt)=>{let At=null;he?x.reject(he):(At=new Gu(vt,new sl(u._repo,u._path),Yi),x.resolve(new Lg(Te,At)))},ee,_),x.promise}(this._delegate,a,{applyLocally:p}).then(x=>new Sm(x.committed,new wc(this.database,x.snapshot)));return l&&_.then(x=>l(null,x.committed,x.snapshot),x=>l(x,!1,null)),_}setPriority(a,l){(0,q.Dv)("Reference.setPriority",1,2,arguments.length),(0,q.Wj)("Reference.setPriority","onComplete",l,!0);const p=function Wl(u,a){u=(0,q.m9)(u),Tl("setPriority",u._path),pp("setPriority",a,!1);const l=new q.BH;return yp(u._repo,I(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&p.then(()=>l(null),_=>l(_)),p}push(a,l){(0,q.Dv)("Reference.push",0,2,arguments.length),(0,q.Wj)("Reference.push","onComplete",l,!0);const p=function Ny(u,a){u=(0,q.m9)(u),Tl("push",u._path),Ul("push",a,u._path,!0);const l=Do(u._repo),p=sf(l),_=ed(u,p),x=ed(u,p);let L;return L=null!=a?td(x,a).then(()=>x):Promise.resolve(x),_.then=L.then.bind(L),_.catch=L.then.bind(L,void 0),_}(this._delegate,a),_=p.then(L=>new hl(this.database,L));l&&_.then(()=>l(null),L=>l(L));const x=new hl(this.database,p);return x.then=_.then.bind(_),x.catch=_.catch.bind(_,void 0),x}onDisconnect(){return Tl("Reference.onDisconnect",this._delegate._path),new Ly(new Br(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class $f{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ud,forceLongPolling:jd}}useEmulator(a,l,p={}){!function Yl(u,a,l,p={}){(u=(0,q.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&yo("Cannot call useEmulator() after instance has already been initialized.");const _=u._repoInternal;let x;if(_.repoInfo_.nodeAdmin)p.mockUserToken&&yo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),x=new Ii(Ii.OWNER);else if(p.mockUserToken){const L="string"==typeof p.mockUserToken?p.mockUserToken:(0,q.Sg)(p.mockUserToken,u.app.options.projectId);x=new Ii(L)}!function Kl(u,a,l,p){u.repoInfo_=new gl(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),p&&(u.authTokenProvider_=p)}(_,a,l,x)}(this._delegate,a,l,p)}ref(a){if((0,q.Dv)("database.ref",0,1,arguments.length),a instanceof hl){const l=Af(this._delegate,a.toString());return new hl(this,l)}{const l=Tg(this._delegate,a);return new hl(this,l)}}refFromURL(a){(0,q.Dv)("database.refFromURL",1,1,arguments.length);const p=Af(this._delegate,a);return new hl(this,p)}goOffline(){return(0,q.Dv)("database.goOffline",0,0,arguments.length),function Ph(u){(u=(0,q.m9)(u))._checkNotDeleted("goOffline"),Dg(u._repo)}(this._delegate)}goOnline(){return(0,q.Dv)("database.goOnline",0,0,arguments.length),function Oh(u){(u=(0,q.m9)(u))._checkNotDeleted("goOnline"),function _m(u){u.persistentConnection_&&u.persistentConnection_.resume(_f)}(u._repo)}(this._delegate)}}$f.ServerValue={TIMESTAMP:function bm(){return Gd}(),increment:u=>function Fg(u){return{".sv":{increment:u}}}(u)};var bc=Object.freeze({__proto__:null,initStandalone:function By({app:u,url:a,version:l,customAuthImpl:p,namespace:_,nodeAdmin:x=!1}){qs(l);const L=new ut.zt("auth-internal",new ut.H0("database-standalone"));return L.setComponent(new ut.wA("auth-internal",()=>p,"PRIVATE")),{instance:new $f(Lf(u,L,void 0,a,x),u),namespace:_}}});const Up=$f.ServerValue;function Hp(u){return null==u}function zd(u){return"function"==typeof u.set}function $g(u,a){return zd(a)?a:u.ref(a)}function ql(u,a){if(function Vf(u){return"string"==typeof u}(u))return a.stringCase();if(zd(u))return a.firebaseCase();if(function Nh(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function rd(u,a,l="on",p=Ce.z){return new me.y(_=>{let x=null;return x=u[l](a,(L,ee)=>{p.schedule(()=>{_.next({snapshot:L,prevKey:ee})}),"once"===l&&p.schedule(()=>_.complete())},L=>{p.schedule(()=>_.error(L))}),"on"===l?{unsubscribe(){null!=x&&u.off(a,x)}}:{unsubscribe(){}}}).pipe((0,Ge.U)(_=>{const{snapshot:x,prevKey:L}=_;let ee=null;return x.exists()&&(ee=x.key),{type:a,payload:x,prevKey:L,key:ee}}),(0,H.B)())}function zp(u,a){const l=u.length;for(let p=0;p<l;p++)if(u[p].payload.key===a)return p;return-1}function Wp(u,a){const{payload:l,prevKey:p,key:_}=a,x=zp(u,_),L=function Vg(u,a){if(Hp(a))return 0;{const l=zp(u,a);return-1===l?u.length:l+1}}(u,p);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let ee=null;a.payload.forEach(he=>{const Te={payload:he,type:"value",prevKey:ee,key:he.key};return ee=he.key,u=[...u,Te],!1})}return u;case"child_added":if(x>-1){const ee=u[x-1];(ee&&ee.key||null)!==p&&(u=u.filter(he=>he.payload.key!==l.key)).splice(L,0,a)}else{if(null==p)return[a,...u];(u=u.slice()).splice(L,0,a)}return u;case"child_removed":return u.filter(ee=>ee.payload.key!==l.key);case"child_changed":return u.map(ee=>ee.payload.key===_?a:ee);case"child_moved":if(x>-1){const ee=u.splice(x,1)[0];return(u=u.slice()).splice(L,0,ee),u}return u;default:return u}}function Ug(u){return(Hp(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function id(u,a,l){return function Gp(u,a,l){return rd(u,"value","once",l).pipe((0,ot.w)(p=>{const _=[(0,Le.of)(p)];return a.forEach(x=>_.push(rd(u,x,"on",l))),(0,ti.T)(..._).pipe((0,B.R)(Wp,[]))}),(0,k.x)())}(u,a=Ug(a),l)}function sd(u,a,l){const p=(a=Ug(a)).map(_=>rd(u,_,"on",l));return(0,ti.T)(...p)}function od(u,a){return function(p,_){return ql(p,{stringCase:()=>u.child(p)[a](_),firebaseCase:()=>p[a](_),snapshotCase:()=>p.ref[a](_)})}}function Uf(u){return function(l){return l?ql(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function $h(u,a){return function(){return rd(u,"value","on",a)}}!function jp(u){u.INTERNAL.registerComponent(new ut.wA("database-compat",(a,{instanceIdentifier:l})=>{const p=a.getProvider("app-compat").getImmediate(),_=a.getProvider("database").getImmediate({identifier:l});return new $f(_,p)},"PUBLIC").setServiceProps({Reference:hl,Query:ya,Database:$f,DataSnapshot:wc,enableLogging:Hd,INTERNAL:bc,ServerValue:Up}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.2.10")}(ke.Z);const jg=new X.OlP("angularfire2.realtimeDatabaseURL"),Uh=new X.OlP("angularfire2.database.use-emulator");let Wu=(()=>{class u{constructor(l,p,_,x,L,ee,he,Te,vt,At,$t,un,Fn,$r,ri){this.schedulers=ee;const Ir=he,To=(0,Ae.on)(l,L,p);Te&&(0,Se.nw)(To,L,vt,$t,un,Fn,At,$r),this.database=(0,Ae.cc)(`${To.name}.database.${_}`,"AngularFireDatabase",To.name,()=>{const Ts=L.runOutsideAngular(()=>To.database(_||void 0));return Ir&&Ts.useEmulator(...Ir),Ts},[Ir])}list(l,p){const _=this.schedulers.ngZone.runOutsideAngular(()=>$g(this.database,l));let x=_;return p&&(x=p(_)),function Cc(u,a){const l=a.schedulers.outsideAngular,p=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:od(p,"update"),set:od(p,"set"),push:_=>p.push(_),remove:Uf(p),snapshotChanges:_=>id(u,_,l).pipe(It.iC),stateChanges:_=>sd(u,_,l).pipe(It.iC),auditTrail:_=>function Fh(u,a,l){return function Bh(u,a,l){return function Lh(u,a){return rd(u,"value","on",a).pipe((0,Ge.U)(l=>{let p;return l.payload.forEach(_=>(p=_.key,!1)),{data:l,lastKeyToLoad:p}}))}(u,l).pipe(function Yt(...u){const a=(0,Pi.jO)(u);return(0,we.e)((l,p)=>{const _=u.length,x=new Array(_);let L=u.map(()=>!1),ee=!1;for(let he=0;he<_;he++)(0,oe.Xf)(u[he]).subscribe((0,be.x)(p,Te=>{x[he]=Te,!ee&&!L[he]&&(L[he]=!0,(ee=L.every(bt.y))&&(L=null))},mn.Z));l.subscribe((0,be.x)(p,he=>{if(ee){const Te=[he,...x];p.next(a?a(...Te):Te)}}))})}(a),(0,Ge.U)(([_,x])=>{const L=_.lastKeyToLoad,ee=x.map(he=>he.key);return{actions:x,lastKeyToLoad:L,loadedKeys:ee}}),function Tr(u){return(0,we.e)((a,l)=>{let p=!1,_=0;a.subscribe((0,be.x)(l,x=>(p||(p=!u(x,_++)))&&l.next(x)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,Ge.U)(_=>_.actions))}(u,sd(u,a).pipe((0,B.R)((_,x)=>[..._,x],[])),l)}(u,_,l).pipe(It.iC),valueChanges:(_,x)=>id(u,_,l).pipe((0,Ge.U)(ee=>ee.map(he=>x&&x.idField?Object.assign(Object.assign({},he.payload.val()),{[x.idField]:he.key}):he.payload.val())),It.iC)}}(x,this)}object(l){return function Vh(u,a){return{query:u,snapshotChanges:()=>$h(u,a.schedulers.outsideAngular)().pipe(It.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>$h(u,a.schedulers.outsideAngular)().pipe(It.iC,(0,Ge.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$g(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(X.LFG(Ae.Dh),X.LFG(Ae.xv,8),X.LFG(jg,8),X.LFG(X.Lbi),X.LFG(X.R0b),X.LFG(It.HU),X.LFG(Uh,8),X.LFG(Se.zQ,8),X.LFG(Se.Qv,8),X.LFG(Se.L6,8),X.LFG(Se._Q,8),X.LFG(Se.rT,8),X.LFG(Se.lh,8),X.LFG(Se.f7,8),X.LFG(ao.nm,8))},u.\u0275prov=X.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Kp=(()=>{class u{constructor(){ts.Z.registerVersion("angularfire",It.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=X.oAB({type:u}),u.\u0275inj=X.cJS({providers:[Wu]}),u})();var Hg=V(3786),Yp=V(4120),qp=V(6895);function Gg(u,a){if(1&u){const l=X.EpF();X.TgZ(0,"ion-item",8),X.NdJ("click",function(){X.CHM(l);const _=X.oxw().$implicit,x=X.oxw(2);return X.KtG(x.navigateTo(null==_?null:_.url))}),X._UZ(1,"ion-icon",9),X._uU(2),X.qZA()}if(2&u){const l=X.oxw().$implicit;X.xp6(1),X.Q6J("name",l.icon),X.xp6(1),X.hij(" ",l.title," ")}}function Zp(u,a){if(1&u&&(X.TgZ(0,"ion-list")(1,"ion-menu-toggle",6),X.YNc(2,Gg,3,2,"ion-item",7),X.qZA()()),2&u){const l=a.$implicit;X.xp6(2),X.Q6J("ngIf",null==l?null:l.isShow)}}function Am(u,a){if(1&u&&(X.TgZ(0,"ion-app")(1,"ion-menu",1)(2,"ion-header")(3,"ion-toolbar",2)(4,"ion-title"),X._uU(5,"Menu"),X.qZA()()(),X.TgZ(6,"ion-content",3),X.YNc(7,Zp,3,1,"ion-list",4),X.qZA()(),X._UZ(8,"ion-router-outlet",5),X.qZA()),2&u){const l=X.oxw();X.xp6(7),X.Q6J("ngForOf",l.navigate)}}function Ya(u,a){1&u&&(X.TgZ(0,"ion-app"),X._UZ(1,"img",10),X.qZA())}let zg=(()=>{class u{constructor(l,p,_){this.route=l,this.toaster=p,this.loginService=_,this.navigate=[],this.showSplash=!0,this.subscription=this.loginService.getChangeUser().subscribe(x=>{this.setMenu()})}ngOnInit(){this.setMenu(),setTimeout(()=>{this.showSplash=!1},2500)}setMenu(){this.navigate=[{title:"Posted Jobs",url:"posted-jobs",icon:"briefcase",isForward:"yes",isShow:"true"===sessionStorage.getItem("isRecruiter")},{title:"Saved Jobs",url:"saved-jobs",icon:"briefcase",isForward:"yes",isShow:"true"!==sessionStorage.getItem("isRecruiter")},{title:"Applied Jobs",url:"applied-jobs",icon:"briefcase",isForward:"yes",isShow:"true"!==sessionStorage.getItem("isRecruiter")},{title:"Logout",url:"logout",icon:"log-out",isForward:"no",isShow:!0}]}navigateTo(l){switch(l){case"logout":localStorage.clear(),this.route.navigate([""]),this.toaster.presentToast("Logged out successfully","success");break;case"posted-jobs":this.route.navigate(["posted-jobs"]);break;case"saved-jobs":this.route.navigate(["saved-jobs"]);break;case"applied-jobs":this.route.navigate(["applied-jobs"])}}}return u.\u0275fac=function(l){return new(l||u)(X.Y36(W.F0),X.Y36(Hg.M),X.Y36(Yp.r))},u.\u0275cmp=X.Xpm({type:u,selectors:[["app-root"]],decls:2,vars:2,consts:[[4,"ngIf"],["side","end","menuId","first","contentId","content"],["color","dark"],["color","light"],[4,"ngFor","ngForOf"],["Id","content"],["auto-hide","true"],["routerDirection","pages.isForward ? forward : backward",3,"click",4,"ngIf"],["routerDirection","pages.isForward ? forward : backward",3,"click"],["slot","start",3,"name"],["expand","block","src","/assets/icon/background.png",2,"height","100%","width","100%"]],template:function(l,p){1&l&&(X.YNc(0,Am,9,1,"ion-app",0),X.YNc(1,Ya,2,0,"ion-app",0)),2&l&&(X.Q6J("ngIf",!p.showSplash),X.xp6(1),X.Q6J("ngIf",p.showSplash))},dependencies:[qp.sg,qp.O5,Oe.dr,Oe.W2,Oe.Gu,Oe.gu,Oe.Ie,Oe.q_,Oe.z0,Oe.zc,Oe.wd,Oe.sr,Oe.jP]}),u})();const Qp=[{path:"",loadChildren:()=>V.e(1791).then(V.bind(V,1791)).then(u=>u.StartPageModule)},{path:"login",loadChildren:()=>V.e(8802).then(V.bind(V,8802)).then(u=>u.LoginPageModule)},{path:"register",loadChildren:()=>V.e(7563).then(V.bind(V,7563)).then(u=>u.RegisterPageModule)},{path:"recruiter-home",loadChildren:()=>Promise.all([V.e(8592),V.e(8138)]).then(V.bind(V,8138)).then(u=>u.RecruiterHomePageModule)},{path:"posted-jobs",loadChildren:()=>V.e(8592).then(V.bind(V,3112)).then(u=>u.PostedJobsPageModule)},{path:"applicant-home",loadChildren:()=>Promise.all([V.e(8592),V.e(3295)]).then(V.bind(V,3295)).then(u=>u.ApplicantHomePageModule)},{path:"saved-jobs",loadChildren:()=>V.e(8592).then(V.bind(V,2784)).then(u=>u.SavedJobsPageModule)},{path:"menu",loadChildren:()=>V.e(8592).then(V.bind(V,8935)).then(u=>u.MenuPageModule)},{path:"applied-jobs",loadChildren:()=>V.e(8592).then(V.bind(V,7284)).then(u=>u.AppliedJobsPageModule)},{path:"view-job",loadChildren:()=>Promise.all([V.e(8592),V.e(5830)]).then(V.bind(V,5830)).then(u=>u.ViewJobPageModule)}];let $y=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=X.oAB({type:u}),u.\u0275inj=X.cJS({imports:[W.Bz.forRoot(Qp,{preloadingStrategy:W.wm}),W.Bz]}),u})();var Wd=V(433);const jf_firebase={apiKey:"AIzaSyC3A-z02IXPR9f5FdEfTZh_YSa5PAHJav4",authDomain:"hire-app-acf39.firebaseapp.com",projectId:"hire-app-acf39",storageBucket:"hire-app-acf39.appspot.com",messagingSenderId:"172225722227",appId:"1:172225722227:web:c90baac4a6c5f3ff9e7706",measurementId:"G-4RDTKRZ5V6"};var Xp=V(5956);let Wg=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=X.oAB({type:u,bootstrap:[zg]}),u.\u0275inj=X.cJS({providers:[{provide:W.wN,useClass:Oe.r4},Xp.w],imports:[c.b2,Wd.u5,Wd.UX,Se.ww,ln,Oe.Pc.forRoot(),ln,$y,Ae.hO.initializeApp(jf_firebase),Se.ww,Kp]}),u})();(0,X.G48)(),c.q6().bootstrapModule(Wg).catch(u=>console.log(u))},5867:(on,pt,V)=>{"use strict";V.d(pt,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=V(9681);(0,c.registerVersion)("firebase","9.14.0","app")},127:(on,pt,V)=>{"use strict";V.d(pt,{Z:()=>c.Z});var c=V(3942);c.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(on,pt,V)=>{"use strict";V.r(pt);var c=V(5861),X=V(3942),W=V(2090),Oe=V(9681),Ae=V(1877),Se=V(655),me=V(4859);const ot=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},It=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new Ae.Yd("@firebase/auth");function q(D,...g){fe.logLevel<=Ae.in.ERROR&&fe.error(`Auth (${Oe.SDK_VERSION}): ${D}`,...g)}function ut(D,...g){throw ze(D,...g)}function st(D,...g){return ze(D,...g)}function it(D,g,v){const A=Object.assign(Object.assign({},It()),{[g]:v});return new W.LL("auth","Firebase",A).create(g,{appName:D.name})}function He(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&ut(D,"argument-error"),it(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(D,...g){if("string"!=typeof D){const v=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=D.name),D._errorFactory.create(v,...A)}return ke.create(D,...g)}function re(D,g,...v){if(!D)throw ze(g,...v)}function Ze(D){const g="INTERNAL ASSERTION FAILED: "+D;throw q(g),new Error(g)}function ce(D,g){D||Ze(g)}const ge=new Map;function ve(D){ce(D instanceof Function,"Expected a class definition");let g=ge.get(D);return g?(ce(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,ge.set(D,g),g)}function Ie(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function et(){return"http:"===Ve()||"https:"===Ve()}function Ve(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ue{constructor(g,v){this.shortDelay=g,this.longDelay=v,ce(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function We(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(et()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ne(D,g){ce(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class tt{static initialize(g,v,A){this.fetchImpl=g,v&&(this.headersImpl=v),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new Ue(3e4,6e4);function Ut(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function zt(D,g,v,A){return wn.apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*(D,g,v,A,Z={}){return er(D,Z,(0,c.Z)(function*(){let de={},ct={};A&&("GET"===g?ct=A:de={body:JSON.stringify(A)});const Vt=(0,W.xO)(Object.assign({key:D.config.apiKey},ct)).slice(1),yn=yield D._getAdditionalHeaders();return yn["Content-Type"]="application/json",D.languageCode&&(yn["X-Firebase-Locale"]=D.languageCode),tt.fetch()(hn(D,D.config.apiHost,v,Vt),Object.assign({method:g,headers:yn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function er(D,g,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(D,g,v){D._canInitEmulator=!1;const A=Object.assign(Object.assign({},_t),g);try{const Z=new cr(D),de=yield Promise.race([v(),Z.promise]);Z.clearNetworkTimeout();const ct=yield de.json();if("needConfirmation"in ct)throw Mr(D,"account-exists-with-different-credential",ct);if(de.ok&&!("errorMessage"in ct))return ct;{const Vt=de.ok?ct.errorMessage:ct.error.message,[yn,Yn]=Vt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===yn)throw Mr(D,"credential-already-in-use",ct);if("EMAIL_EXISTS"===yn)throw Mr(D,"email-already-in-use",ct);if("USER_DISABLED"===yn)throw Mr(D,"user-disabled",ct);const Xn=A[yn]||yn.toLowerCase().replace(/[_\s]+/g,"-");if(Yn)throw it(D,Xn,Yn);ut(D,Xn)}}catch(Z){if(Z instanceof W.ZR)throw Z;ut(D,"network-request-failed")}})).apply(this,arguments)}function qn(D,g,v,A){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,c.Z)(function*(D,g,v,A,Z={}){const de=yield zt(D,g,v,A,Z);return"mfaPendingCredential"in de&&ut(D,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function hn(D,g,v,A){const Z=`${g}${v}?${A}`;return D.config.emulator?Ne(D.config,Z):`${D.config.apiScheme}://${Z}`}class cr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,A)=>{this.timer=setTimeout(()=>A(st(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mr(D,g,v){const A={appName:D.name};v.email&&(A.email=v.email),v.phoneNumber&&(A.phoneNumber=v.phoneNumber);const Z=st(D,g,A);return Z.customData._tokenResponse=v,Z}function jn(){return(jn=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Wt(D,g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ii(D,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Vr(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function xn(){return(xn=(0,c.Z)(function*(D,g=!1){const v=(0,W.m9)(D),A=yield v.getIdToken(g),Z=Bn(A);re(Z&&Z.exp&&Z.auth_time&&Z.iat,v.auth,"internal-error");const de="object"==typeof Z.firebase?Z.firebase:void 0,ct=null==de?void 0:de.sign_in_provider;return{claims:Z,token:A,authTime:Vr(Sn(Z.auth_time)),issuedAtTime:Vr(Sn(Z.iat)),expirationTime:Vr(Sn(Z.exp)),signInProvider:ct||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function Sn(D){return 1e3*Number(D)}function Bn(D){var g;const[v,A,Z]=D.split(".");if(void 0===v||void 0===A||void 0===Z)return q("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,W.tV)(A);return de?JSON.parse(de):(q("Failed to decode base64 JWT payload"),null)}catch(de){return q("Caught error parsing JWT payload as JSON",null===(g=de)||void 0===g?void 0:g.toString()),null}}function _r(D,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,c.Z)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(A){throw A instanceof W.ZR&&Gr(A)&&D.auth.currentUser===D&&(yield D.auth.signOut()),A}})).apply(this,arguments)}function Gr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class fi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const Z=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield v.iteration()}),A)}iteration(){var g=this;return(0,c.Z)(function*(){var v;try{yield g.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===(null===(v=A)||void 0===v?void 0:v.code)&&g.schedule(!0))}g.schedule()})()}}class ki{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wr(D){return bi.apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(D){var g;const v=D.auth,A=yield D.getIdToken(),Z=yield _r(D,ii(v,{idToken:A}));re(null==Z?void 0:Z.users.length,v,"internal-error");const de=Z.users[0];D._notifyReloadListener(de);const ct=null!==(g=de.providerUserInfo)&&void 0!==g&&g.length?nn(de.providerUserInfo):[],Vt=Ar(D.providerData,ct),Xn=!!D.isAnonymous&&!(D.email&&de.passwordHash||null!=Vt&&Vt.length),gr={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Vt,metadata:new ki(de.createdAt,de.lastLoginAt),isAnonymous:Xn};Object.assign(D,gr)})).apply(this,arguments)}function Wn(){return(Wn=(0,c.Z)(function*(D){const g=(0,W.m9)(D);yield wr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Ar(D,g){return[...D.filter(A=>!g.some(Z=>Z.providerId===A.providerId)),...g]}function nn(D){return D.map(g=>{var{providerId:v}=g,A=(0,Se._T)(g,["providerId"]);return{providerId:v,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function vn(){return(vn=(0,c.Z)(function*(D,g){const v=yield er(D,{},(0,c.Z)(function*(){const A=(0,W.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:Z,apiKey:de}=D.config,ct=hn(D,Z,"/v1/token",`key=${de}`),Vt=yield D._getAdditionalHeaders();return Vt["Content-Type"]="application/x-www-form-urlencoded",tt.fetch()(ct,{method:"POST",headers:Vt,body:A})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class Hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(typeof g.idToken<"u","internal-error"),re(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function yi(D){const g=Bn(D);return re(g,"internal-error"),re(typeof g.exp<"u","internal-error"),re(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var A=this;return(0,c.Z)(function*(){return re(!A.accessToken||A.refreshToken,g,"user-token-expired"),v||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var A=this;return(0,c.Z)(function*(){const{accessToken:Z,refreshToken:de,expiresIn:ct}=yield function jt(D,g){return vn.apply(this,arguments)}(g,v);A.updateTokensAndExpiration(Z,de,Number(ct))})()}updateTokensAndExpiration(g,v,A){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,v){const{refreshToken:A,accessToken:Z,expirationTime:de}=v,ct=new Hn;return A&&(re("string"==typeof A,"internal-error",{appName:g}),ct.refreshToken=A),Z&&(re("string"==typeof Z,"internal-error",{appName:g}),ct.accessToken=Z),de&&(re("number"==typeof de,"internal-error",{appName:g}),ct.expirationTime=de),ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Hn,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function Nn(D,g){re("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class Vn{constructor(g){var{uid:v,auth:A,stsTokenManager:Z}=g,de=(0,Se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=A,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new ki(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,c.Z)(function*(){const A=yield _r(v,v.stsTokenManager.getToken(v.auth,g));return re(A,v.auth,"internal-error"),v.accessToken!==A&&(v.accessToken=A,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),A})()}getIdTokenResult(g){return function Dr(D){return xn.apply(this,arguments)}(this,g)}reload(){return function dr(D){return Wn.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Vn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var A=this;return(0,c.Z)(function*(){let Z=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),Z=!0),v&&(yield wr(A)),yield A.auth._persistUserIfCurrent(A),Z&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,c.Z)(function*(){const v=yield g.getIdToken();return yield _r(g,function Ln(D,g){return jn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var A,Z,de,ct,Vt,yn,Yn,Xn;const gr=null!==(A=v.displayName)&&void 0!==A?A:void 0,to=null!==(Z=v.email)&&void 0!==Z?Z:void 0,no=null!==(de=v.phoneNumber)&&void 0!==de?de:void 0,ac=null!==(ct=v.photoURL)&&void 0!==ct?ct:void 0,Uc=null!==(Vt=v.tenantId)&&void 0!==Vt?Vt:void 0,jc=null!==(yn=v._redirectEventId)&&void 0!==yn?yn:void 0,bl=null!==(Yn=v.createdAt)&&void 0!==Yn?Yn:void 0,lc=null!==(Xn=v.lastLoginAt)&&void 0!==Xn?Xn:void 0,{uid:Cd,emailVerified:Dd,isAnonymous:hf,providerData:ff,stsTokenManager:op}=v;re(Cd&&op,g,"internal-error");const fg=Hn.fromJSON(this.name,op);re("string"==typeof Cd,g,"internal-error"),Nn(gr,g.name),Nn(to,g.name),re("boolean"==typeof Dd,g,"internal-error"),re("boolean"==typeof hf,g,"internal-error"),Nn(no,g.name),Nn(ac,g.name),Nn(Uc,g.name),Nn(jc,g.name),Nn(bl,g.name),Nn(lc,g.name);const uc=new Vn({uid:Cd,auth:g,email:to,emailVerified:Dd,displayName:gr,isAnonymous:hf,photoURL:ac,phoneNumber:no,tenantId:Uc,stsTokenManager:fg,createdAt:bl,lastLoginAt:lc});return ff&&Array.isArray(ff)&&(uc.providerData=ff.map(pf=>Object.assign({},pf))),jc&&(uc._redirectEventId=jc),uc}static _fromIdTokenResponse(g,v,A=!1){return(0,c.Z)(function*(){const Z=new Hn;Z.updateFromServerResponse(v);const de=new Vn({uid:v.localId,auth:g,stsTokenManager:Z,isAnonymous:A});return yield wr(de),de})()}}const Fe=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(v,A){var Z=this;return(0,c.Z)(function*(){Z.storage[v]=A})()}_get(v){var A=this;return(0,c.Z)(function*(){const Z=A.storage[v];return void 0===Z?null:Z})()}_remove(v){var A=this;return(0,c.Z)(function*(){delete A.storage[v]})()}_addListener(v,A){}_removeListener(v,A){}}return D.type="NONE",D})();function Qe(D,g,v){return`firebase:${D}:${g}:${v}`}class Ct{constructor(g,v,A){this.persistence=g,this.auth=v,this.userKey=A;const{config:Z,name:de}=this.auth;this.fullUserKey=Qe(this.userKey,Z.apiKey,de),this.fullPersistenceKey=Qe("persistence",Z.apiKey,de),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?Vn._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,c.Z)(function*(){if(v.persistence===g)return;const A=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,A?v.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,A="authUser"){return(0,c.Z)(function*(){if(!v.length)return new Ct(ve(Fe),g,A);const Z=(yield Promise.all(v.map(function(){var Yn=(0,c.Z)(function*(Xn){if(yield Xn._isAvailable())return Xn});return function(Xn){return Yn.apply(this,arguments)}}()))).filter(Yn=>Yn);let de=Z[0]||ve(Fe);const ct=Qe(A,g.config.apiKey,g.name);let Vt=null;for(const Yn of v)try{const Xn=yield Yn._get(ct);if(Xn){const gr=Vn._fromJSON(g,Xn);Yn!==de&&(Vt=gr),de=Yn;break}}catch(Xn){}const yn=Z.filter(Yn=>Yn._shouldAllowMigration);return de._shouldAllowMigration&&yn.length?(de=yn[0],Vt&&(yield de._set(ct,Vt.toJSON())),yield Promise.all(v.map(function(){var Yn=(0,c.Z)(function*(Xn){if(Xn!==de)try{yield Xn._remove(ct)}catch(gr){}});return function(Xn){return Yn.apply(this,arguments)}}())),new Ct(de,g,A)):new Ct(de,g,A)})()}}function Et(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(zr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(An(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(yt(g))return"Blackberry";if(je(g))return"Webos";if(Jn(g))return"Safari";if((g.includes("chrome/")||rr(g))&&!g.includes("edge/"))return"Chrome";if(bn(g))return"Android";{const A=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function An(D=(0,W.z$)()){return/firefox\//i.test(D)}function Jn(D=(0,W.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function rr(D=(0,W.z$)()){return/crios\//i.test(D)}function zr(D=(0,W.z$)()){return/iemobile/i.test(D)}function bn(D=(0,W.z$)()){return/android/i.test(D)}function yt(D=(0,W.z$)()){return/blackberry/i.test(D)}function je(D=(0,W.z$)()){return/webos/i.test(D)}function Re(D=(0,W.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function nr(D=(0,W.z$)()){return Re(D)||bn(D)||je(D)||yt(D)||/windows phone/i.test(D)||zr(D)}function ei(D,g=[]){let v;switch(D){case"Browser":v=Et((0,W.z$)());break;case"Worker":v=`${Et((0,W.z$)())}-${D}`;break;default:v=D}const A=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${Oe.SDK_VERSION}/${A}`}class pi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const A=de=>new Promise((ct,Vt)=>{try{ct(g(de))}catch(yn){Vt(yn)}});A.onAbort=v,this.queue.push(A);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,c.Z)(function*(){var A;if(v.auth.currentUser===g)return;const Z=[];try{for(const de of v.queue)yield de(g),de.onAbort&&Z.push(de.onAbort)}catch(de){Z.reverse();for(const ct of Z)try{ct()}catch(Vt){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(A=de)||void 0===A?void 0:A.message})}})()}}class Ci{constructor(g,v,A){this.app=g,this.heartbeatServiceProvider=v,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ni(this),this.idTokenSubscription=new Ni(this),this.beforeStateQueue=new pi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(g,v){var A=this;return v&&(this._popupRedirectResolver=ve(v)),this._initializationPromise=this.queue((0,c.Z)(function*(){var Z,de;if(!A._deleted&&(A.persistenceManager=yield Ct.create(A,g),!A._deleted)){if(null!==(Z=A._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(ct){}yield A.initializeCurrentUser(v),A.lastNotifiedUid=(null===(de=A.currentUser)||void 0===de?void 0:de.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,c.Z)(function*(){var A;const Z=yield v.assertedPersistence.getCurrentUser();let de=Z,ct=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Vt=null===(A=v.redirectUser)||void 0===A?void 0:A._redirectEventId,yn=null==de?void 0:de._redirectEventId,Yn=yield v.tryRedirectSignIn(g);(!Vt||Vt===yn)&&(null==Yn?void 0:Yn.user)&&(de=Yn.user,ct=!0)}if(!de)return v.directlySetCurrentUser(null);if(!de._redirectEventId){if(ct)try{yield v.beforeStateQueue.runMiddleware(de)}catch(Vt){de=Z,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Vt))}return de?v.reloadAndSetCurrentUserOrClear(de):v.directlySetCurrentUser(null)}return re(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===de._redirectEventId?v.directlySetCurrentUser(de):v.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(g){var v=this;return(0,c.Z)(function*(){let A=null;try{A=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch(Z){yield v._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,c.Z)(function*(){var A;try{yield wr(g)}catch(Z){if("auth/network-request-failed"!==(null===(A=Z)||void 0===A?void 0:A.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function $e(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,c.Z)(function*(){const A=g?(0,W.m9)(g):null;return A&&re(A.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(A&&A._clone(v))})()}_updateCurrentUser(g,v=!1){var A=this;return(0,c.Z)(function*(){if(!A._deleted)return g&&re(A.tenantId===g.tenantId,A,"tenant-id-mismatch"),v||(yield A.beforeStateQueue.runMiddleware(g)),A.queue((0,c.Z)(function*(){yield A.directlySetCurrentUser(g),A.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,c.Z)(function*(){yield v.assertedPersistence.setPersistence(ve(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new W.LL("auth","Firebase",g())}onAuthStateChanged(g,v,A){return this.registerStateListener(this.authStateSubscription,g,v,A)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,A){return this.registerStateListener(this.idTokenSubscription,g,v,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var A=this;return(0,c.Z)(function*(){const Z=yield A.getOrInitRedirectPersistenceManager(v);return null===g?Z.removeCurrentUser():Z.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,c.Z)(function*(){if(!v.redirectPersistenceManager){const A=g&&ve(g)||v._popupRedirectResolver;re(A,v,"argument-error"),v.redirectPersistenceManager=yield Ct.create(v,[ve(A._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,c.Z)(function*(){var A,Z;return v._isInitialized&&(yield v.queue((0,c.Z)(function*(){}))),(null===(A=v._currentUser)||void 0===A?void 0:A._redirectEventId)===g?v._currentUser:(null===(Z=v.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,c.Z)(function*(){if(g===v.currentUser)return v.queue((0,c.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,A,Z){if(this._deleted)return()=>{};const de="function"==typeof v?v:v.next.bind(v),ct=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ct,this,"internal-error"),ct.then(()=>de(this.currentUser)),"function"==typeof v?g.addObserver(v,A,Z):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,c.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var v;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const Z=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return Z&&(A["X-Firebase-Client"]=Z),A})()}}function Pr(D){return(0,W.m9)(D)}class Ni{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,W.ne)(v=>this.observer=v)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gi(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function ir(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class Wr{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return Ze("not implemented")}_getIdTokenResponse(g){return Ze("not implemented")}_linkToIdToken(g,v){return Ze("not implemented")}_getReauthenticationResolver(g){return Ze("not implemented")}}function Lr(D,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:resetPassword",Ut(D,g))})).apply(this,arguments)}function Ai(D,g){return cn.apply(this,arguments)}function cn(){return(cn=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Gn(D,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:update",Ut(D,g))})).apply(this,arguments)}function Di(){return(Di=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithPassword",Ut(D,g))})).apply(this,arguments)}function Xr(D,g){return ae.apply(this,arguments)}function ae(){return(ae=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:sendOobCode",Ut(D,g))})).apply(this,arguments)}function ye(D,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(D,g){return Xr(D,g)})).apply(this,arguments)}function ht(D,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,c.Z)(function*(D,g){return Xr(D,g)})).apply(this,arguments)}function _e(D,g){return rt.apply(this,arguments)}function rt(){return(rt=(0,c.Z)(function*(D,g){return Xr(D,g)})).apply(this,arguments)}function ft(D,g){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,c.Z)(function*(D,g){return Xr(D,g)})).apply(this,arguments)}function rn(){return(rn=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithEmailLink",Ut(D,g))})).apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithEmailLink",Ut(D,g))})).apply(this,arguments)}class Nr extends Wr{constructor(g,v,A,Z=null){super("password",A),this._email=g,this._password=v,this._tenantId=Z}static _fromEmailAndPassword(g,v){return new Nr(g,v,"password")}static _fromEmailAndCode(g,v,A=null){return new Nr(g,v,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return function xi(D,g){return Di.apply(this,arguments)}(g,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Pt(D,g){return rn.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:ut(g,"internal-error")}})()}_linkToIdToken(g,v){var A=this;return(0,c.Z)(function*(){switch(A.signInMethod){case"password":return Ai(g,{idToken:v,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Mn(D,g){return Rn.apply(this,arguments)}(g,{idToken:v,email:A._email,oobCode:A._password});default:ut(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function mr(D,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithIdp",Ut(D,g))})).apply(this,arguments)}class wt extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new wt(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):ut("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:Z}=v,de=(0,Se._T)(v,["providerId","signInMethod"]);if(!A||!Z)return null;const ct=new wt(A,Z);return ct.idToken=de.idToken||void 0,ct.accessToken=de.accessToken||void 0,ct.secret=de.secret,ct.nonce=de.nonce,ct.pendingToken=de.pendingToken||null,ct}_getIdTokenResponse(g){return mr(g,this.buildRequest())}_linkToIdToken(g,v){const A=this.buildRequest();return A.idToken=v,mr(g,A)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,mr(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,W.xO)(v)}return g}}function Gt(D,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:sendVerificationCode",Ut(D,g))})).apply(this,arguments)}function or(){return(or=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,g))})).apply(this,arguments)}function ar(){return(ar=(0,c.Z)(function*(D,g){const v=yield qn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,g));if(v.temporaryProof)throw Mr(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Es={USER_NOT_FOUND:"user-not-found"};function Zi(){return(Zi=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithPhoneNumber",Ut(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Es)})).apply(this,arguments)}class ls extends Wr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new ls({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new ls({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function _n(D,g){return or.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function li(D,g){return ar.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function _i(D,g){return Zi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:A,verificationCode:Z}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:A,code:Z}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:A,phoneNumber:Z,temporaryProof:de}=g;return A||v||Z||de?new ls({verificationId:v,verificationCode:A,phoneNumber:Z,temporaryProof:de}):null}}class Wi{constructor(g){var v,A,Z,de,ct,Vt;const yn=(0,W.zd)((0,W.pd)(g)),Yn=null!==(v=yn.apiKey)&&void 0!==v?v:null,Xn=null!==(A=yn.oobCode)&&void 0!==A?A:null,gr=function Mi(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=yn.mode)&&void 0!==Z?Z:null);re(Yn&&Xn&&gr,"argument-error"),this.apiKey=Yn,this.operation=gr,this.code=Xn,this.continueUrl=null!==(de=yn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(ct=yn.languageCode)&&void 0!==ct?ct:null,this.tenantId=null!==(Vt=yn.tenantId)&&void 0!==Vt?Vt:null}static parseLink(g){const v=function Qi(D){const g=(0,W.zd)((0,W.pd)(D)).link,v=g?(0,W.zd)((0,W.pd)(g)).deep_link_id:null,A=(0,W.zd)((0,W.pd)(D)).deep_link_id;return(A?(0,W.zd)((0,W.pd)(A)).link:null)||A||v||g||D}(g);try{return new Wi(v)}catch(A){return null}}}let Vo=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,A){return Nr._fromEmailAndPassword(v,A)}static credentialWithLink(v,A){const Z=Wi.parseLink(A);return re(Z,"argument-error"),Nr._fromEmailAndCode(v,Z.code,Z.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Xi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Os extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ls extends Os{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return re("providerId"in v&&"signInMethod"in v,"argument-error"),wt._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),wt._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ls.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ls.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A,oauthTokenSecret:Z,pendingToken:de,nonce:ct,providerId:Vt}=g;if(!A&&!Z&&!v&&!de||!Vt)return null;try{return new Ls(Vt)._credential({idToken:v,accessToken:A,nonce:ct,pendingToken:de})}catch(yn){return null}}}let so=(()=>{class D extends Os{constructor(){super("facebook.com")}static credential(v){return wt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(A){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Uo=(()=>{class D extends Os{constructor(){super("google.com"),this.addScope("profile")}static credential(v,A){return wt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:A})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:A,oauthAccessToken:Z}=v;if(!A&&!Z)return null;try{return D.credential(A,Z)}catch(de){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),us=(()=>{class D extends Os{constructor(){super("github.com")}static credential(v){return wt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch(A){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Gs extends Wr{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return mr(g,this.buildRequest())}_linkToIdToken(g,v){const A=this.buildRequest();return A.idToken=v,mr(g,A)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,mr(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:Z,pendingToken:de}=v;return A&&Z&&de&&A===Z?new Gs(A,de):null}static _create(g,v){return new Gs(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class As extends Xi{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return As.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return As.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Gs.fromJSON(g);return re(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:A}=g;if(!v||!A)return null;try{return Gs._create(A,v)}catch(Z){return null}}}let ws=(()=>{class D extends Os{constructor(){super("twitter.com")}static credential(v,A){return wt._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:A})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:A,oauthTokenSecret:Z}=v;if(!A||!Z)return null;try{return D.credential(A,Z)}catch(de){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function ia(D,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signUp",Ut(D,g))})).apply(this,arguments)}class Vi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,A,Z=!1){return(0,c.Z)(function*(){const de=yield Vn._fromIdTokenResponse(g,A,Z),ct=Ws(A);return new Vi({user:de,providerId:ct,_tokenResponse:A,operationType:v})})()}static _forOperation(g,v,A){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const Z=Ws(A);return new Vi({user:g,providerId:Z,_tokenResponse:A,operationType:v})})()}}function Ws(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function xo(){return(xo=(0,c.Z)(function*(D){var g;const v=Pr(D);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new Vi({user:v.currentUser,providerId:null,operationType:"signIn"});const A=yield ia(v,{returnSecureToken:!0}),Z=yield Vi._fromIdTokenResponse(v,"signIn",A,!0);return yield v._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class oo extends W.ZR{constructor(g,v,A,Z){var de;super(v.code,v.message),this.operationType=A,this.user=Z,Object.setPrototypeOf(this,oo.prototype),this.customData={appName:g.name,tenantId:null!==(de=g.tenantId)&&void 0!==de?de:void 0,_serverResponse:v.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,v,A,Z){return new oo(g,v,A,Z)}}function Ti(D,g,v,A){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?oo._fromErrorAndOperation(D,de,g,A):de})}function ds(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function Ji(){return(Ji=(0,c.Z)(function*(D,g){const v=(0,W.m9)(D);yield cs(!0,v,g);const{providerUserInfo:A}=yield Wt(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),Z=ds(A||[]);return v.providerData=v.providerData.filter(de=>Z.has(de.providerId)),Z.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function jo(D,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,c.Z)(function*(D,g,v=!1){const A=yield _r(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return Vi._forOperation(D,"link",A)})).apply(this,arguments)}function cs(D,g,v){return sa.apply(this,arguments)}function sa(){return(sa=(0,c.Z)(function*(D,g,v){yield wr(g);const Z=!1===D?"provider-already-linked":"no-such-provider";re(ds(g.providerData).has(v)===D,g.auth,Z)})).apply(this,arguments)}function Za(D,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,c.Z)(function*(D,g,v=!1){var A;const{auth:Z}=D,de="reauthenticate";try{const ct=yield _r(D,Ti(Z,de,g,D),v);re(ct.idToken,Z,"internal-error");const Vt=Bn(ct.idToken);re(Vt,Z,"internal-error");const{sub:yn}=Vt;return re(D.uid===yn,Z,"user-mismatch"),Vi._forOperation(D,de,ct)}catch(ct){throw"auth/user-not-found"===(null===(A=ct)||void 0===A?void 0:A.code)&&ut(Z,"user-mismatch"),ct}})).apply(this,arguments)}function po(D,g){return go.apply(this,arguments)}function go(){return(go=(0,c.Z)(function*(D,g,v=!1){const A="signIn",Z=yield Ti(D,A,g),de=yield Vi._fromIdTokenResponse(D,A,Z);return v||(yield D._updateCurrentUser(de.user)),de})).apply(this,arguments)}function si(D,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,c.Z)(function*(D,g){return po(Pr(D),g)})).apply(this,arguments)}function Ki(D,g){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(D,g){const v=(0,W.m9)(D);return yield cs(!1,v,g.providerId),jo(v,g)})).apply(this,arguments)}function Mo(D,g){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(D,g){return Za((0,W.m9)(D),g)})).apply(this,arguments)}function Ea(D,g){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(D,g){return qn(D,"POST","/v1/accounts:signInWithCustomToken",Ut(D,g))})).apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(D,g){const v=Pr(D),A=yield Ea(v,{token:g,returnSecureToken:!0}),Z=yield Vi._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Po{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?ao._fromServerResponse(g,v):ut(g,"internal-error")}}class ao extends Po{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new ao(v)}}function ts(D,g,v){var A;re((null===(A=v.url)||void 0===A?void 0:A.length)>0,D,"invalid-continue-uri"),re(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(re(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(re(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function z(){return(z=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D),Z={requestType:"PASSWORD_RESET",email:g};v&&ts(A,Z,v),yield ht(A,Z)})).apply(this,arguments)}function U(){return(U=(0,c.Z)(function*(D,g,v){yield Lr((0,W.m9)(D),{oobCode:g,newPassword:v})})).apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(D,g){yield Gn((0,W.m9)(D),{oobCode:g})})).apply(this,arguments)}function fn(D,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(D,g){const v=(0,W.m9)(D),A=yield Lr(v,{oobCode:g}),Z=A.requestType;switch(re(Z,v,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(A.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(A.mfaInfo,v,"internal-error");default:re(A.email,v,"internal-error")}let de=null;return A.mfaInfo&&(de=Po._fromServerResponse(Pr(v),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:de},operation:Z}})).apply(this,arguments)}function Yr(){return(Yr=(0,c.Z)(function*(D,g){const{data:v}=yield fn((0,W.m9)(D),g);return v.email})).apply(this,arguments)}function ti(){return(ti=(0,c.Z)(function*(D,g,v){const A=Pr(D),Z=yield ia(A,{returnSecureToken:!0,email:g,password:v}),de=yield Vi._fromIdTokenResponse(A,"signIn",Z);return yield A._updateCurrentUser(de.user),de})).apply(this,arguments)}function k(){return(k=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D),Z={requestType:"EMAIL_SIGNIN",email:g};re(v.handleCodeInApp,A,"argument-error"),v&&ts(A,Z,v),yield _e(A,Z)})).apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D),Z=Vo.credentialWithLink(g,v||Ie());return re(Z._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),si(A,Z)})).apply(this,arguments)}function Pi(D,g){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:createAuthUri",Ut(D,g))})).apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(D,g){const A={identifier:g,continueUri:et()?Ie():"http://localhost"},{signinMethods:Z}=yield Pi((0,W.m9)(D),A);return Z||[]})).apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(D,g){const v=(0,W.m9)(D),Z={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&ts(v.auth,Z,g);const{email:de}=yield ye(v.auth,Z);de!==D.email&&(yield D.reload())})).apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&ts(A.auth,de,v);const{email:ct}=yield ft(A.auth,de);ct!==D.email&&(yield D.reload())})).apply(this,arguments)}function qs(D,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,c.Z)(function*(D,g){return zt(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const A=(0,W.m9)(D),de={idToken:yield A.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},ct=yield _r(A,qs(A.auth,de));A.displayName=ct.displayName||null,A.photoURL=ct.photoUrl||null;const Vt=A.providerData.find(({providerId:yn})=>"password"===yn);Vt&&(Vt.displayName=A.displayName,Vt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(ct)})).apply(this,arguments)}function Zs(D,g,v){return bs.apply(this,arguments)}function bs(){return(bs=(0,c.Z)(function*(D,g,v){const{auth:A}=D,de={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(de.email=g),v&&(de.password=v);const ct=yield _r(D,Ai(A,de));yield D._updateTokensIfNecessary(ct,!0)})).apply(this,arguments)}class Qs{constructor(g,v,A={}){this.isNewUser=g,this.providerId=v,this.profile=A}}class lo extends Qs{constructor(g,v,A,Z){super(g,v,A),this.username=Z}}class Xs extends Qs{constructor(g,v){super(g,"facebook.com",v)}}class Xa extends lo{constructor(g,v){super(g,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class ns extends Qs{constructor(g,v){super(g,"google.com",v)}}class Wo extends lo{constructor(g,v,A){super(g,"twitter.com",v,A)}}function ba(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function zo(D){var g,v;if(!D)return null;const{providerId:A}=D,Z=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},de=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!A&&(null==D?void 0:D.idToken)){const ct=null===(v=null===(g=Bn(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(ct)return new Qs(de,"anonymous"!==ct&&"custom"!==ct?ct:null)}if(!A)return null;switch(A){case"facebook.com":return new Xs(de,Z);case"github.com":return new Xa(de,Z);case"google.com":return new ns(de,Z);case"twitter.com":return new Wo(de,Z,D.screenName||null);case"custom":case"anonymous":return new Qs(de,null);default:return new Qs(de,A,Z)}}(v)}class _o{constructor(g,v,A){this.type=g,this.credential=v,this.auth=A}static _fromIdtoken(g,v){return new _o("enroll",g,v)}static _fromMfaPendingCredential(g){return new _o("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,A;if(null!=g&&g.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return _o._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(A=g.multiFactorSession)&&void 0!==A&&A.idToken)return _o._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Oa{constructor(g,v,A){this.session=g,this.hints=v,this.signInResolver=A}static _fromError(g,v){const A=Pr(g),Z=v.customData._serverResponse,de=(Z.mfaInfo||[]).map(Vt=>Po._fromServerResponse(A,Vt));re(Z.mfaPendingCredential,A,"internal-error");const ct=_o._fromMfaPendingCredential(Z.mfaPendingCredential);return new Oa(ct,de,function(){var Vt=(0,c.Z)(function*(yn){const Yn=yield yn._process(A,ct);delete Z.mfaInfo,delete Z.mfaPendingCredential;const Xn=Object.assign(Object.assign({},Z),{idToken:Yn.idToken,refreshToken:Yn.refreshToken});switch(v.operationType){case"signIn":const gr=yield Vi._fromIdTokenResponse(A,v.operationType,Xn);return yield A._updateCurrentUser(gr.user),gr;case"reauthenticate":return re(v.user,A,"internal-error"),Vi._forOperation(v.user,v.operationType,Xn);default:ut(A,"internal-error")}});return function(yn){return Vt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,c.Z)(function*(){return v.signInResolver(g)})()}}function O(D,g){return zt(D,"POST","/v2/accounts/mfaEnrollment:start",Ut(D,g))}class se{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(A=>Po._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new se(g)}getSession(){var g=this;return(0,c.Z)(function*(){return _o._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var A=this;return(0,c.Z)(function*(){const Z=g,de=yield A.getSession(),ct=yield _r(A.user,Z._process(A.user.auth,de,v));return yield A.user._updateTokensIfNecessary(ct),A.user.reload()})()}unenroll(g){var v=this;return(0,c.Z)(function*(){var A;const Z="string"==typeof g?g:g.uid,de=yield v.user.getIdToken(),ct=yield _r(v.user,function F(D,g){return zt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(D,g))}(v.user.auth,{idToken:de,mfaEnrollmentId:Z}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Vt})=>Vt!==Z),yield v.user._updateTokensIfNecessary(ct);try{yield v.user.reload()}catch(Vt){if("auth/user-token-expired"!==(null===(A=Vt)||void 0===A?void 0:A.code))throw Vt}})()}}const Me=new WeakMap,Ht="__sak";class On{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Ht,"1"),this.storage.removeItem(Ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ni=(()=>{class D extends On{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,A)=>this.onStorageEvent(v,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qr(){const D=(0,W.z$)();return Jn(D)||Re(D)}()&&function Fr(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=nr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const A of Object.keys(this.listeners)){const Z=this.storage.getItem(A),de=this.localCache[A];Z!==de&&v(A,de,Z)}}onStorageEvent(v,A=!1){if(!v.key)return void this.forAllChangedKeys((Vt,yn,Yn)=>{this.notifyListeners(Vt,Yn)});const Z=v.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Vt=this.storage.getItem(Z);if(v.newValue!==Vt)null!==v.newValue?this.storage.setItem(Z,v.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===v.newValue&&!A)return}const de=()=>{const Vt=this.storage.getItem(Z);!A&&this.localCache[Z]===Vt||this.notifyListeners(Z,Vt)},ct=this.storage.getItem(Z);!function Cn(){return(0,W.w1)()&&10===document.documentMode}()||ct===v.newValue||v.newValue===v.oldValue?de():setTimeout(de,10)}notifyListeners(v,A){this.localCache[v]=A;const Z=this.listeners[v];if(Z)for(const de of Array.from(Z))de(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,A,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:A,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(A)}_removeListener(v,A){this.listeners[v]&&(this.listeners[v].delete(A),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,A){var Z=()=>super._set,de=this;return(0,c.Z)(function*(){yield Z().call(de,v,A),de.localCache[v]=JSON.stringify(A)})()}_get(v){var A=()=>super._get,Z=this;return(0,c.Z)(function*(){const de=yield A().call(Z,v);return Z.localCache[v]=JSON.stringify(de),de})()}_remove(v){var A=()=>super._remove,Z=this;return(0,c.Z)(function*(){yield A().call(Z,v),delete Z.localCache[v]})()}}return D.type="LOCAL",D})(),Ii=(()=>{class D extends On{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,A){}_removeListener(v,A){}}return D.type="SESSION",D})();let mi=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const A=this.receivers.find(de=>de.isListeningto(v));if(A)return A;const Z=new D(v);return this.receivers.push(Z),Z}isListeningto(v){return this.eventTarget===v}handleEvent(v){var A=this;return(0,c.Z)(function*(){const Z=v,{eventId:de,eventType:ct,data:Vt}=Z.data,yn=A.handlersMap[ct];if(null==yn||!yn.size)return;Z.ports[0].postMessage({status:"ack",eventId:de,eventType:ct});const Yn=Array.from(yn).map(function(){var gr=(0,c.Z)(function*(to){return to(Z.origin,Vt)});return function(to){return gr.apply(this,arguments)}}()),Xn=yield function Xt(D){return Promise.all(D.map(function(){var g=(0,c.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(A){return{fulfilled:!1,reason:A}}});return function(v){return g.apply(this,arguments)}}()))}(Yn);Z.ports[0].postMessage({status:"done",eventId:de,eventType:ct,response:Xn})})()}_subscribe(v,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(A)}_unsubscribe(v,A){this.handlersMap[v]&&A&&this.handlersMap[v].delete(A),(!A||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function Fi(D="",g=10){let v="";for(let A=0;A<g;A++)v+=Math.floor(10*Math.random());return D+v}class hs{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,A=50){var Z=this;return(0,c.Z)(function*(){const de=typeof MessageChannel<"u"?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let ct,Vt;return new Promise((yn,Yn)=>{const Xn=Fi("",20);de.port1.start();const gr=setTimeout(()=>{Yn(new Error("unsupported_event"))},A);Vt={messageChannel:de,onMessage(to){const no=to;if(no.data.eventId===Xn)switch(no.data.status){case"ack":clearTimeout(gr),ct=setTimeout(()=>{Yn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ct),yn(no.data.response);break;default:clearTimeout(gr),clearTimeout(ct),Yn(new Error("invalid_response"))}}},Z.handlers.add(Vt),de.port1.addEventListener("message",Vt.onMessage),Z.target.postMessage({eventType:g,eventId:Xn,data:v},[de.port2])}).finally(()=>{Vt&&Z.removeMessageHandler(Vt)})})()}}function pn(){return window}function Fo(){return typeof pn().WorkerGlobalScope<"u"&&"function"==typeof pn().importScripts}function Lt(){return(Lt=(0,c.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const gl="firebaseLocalStorageDb",la="firebaseLocalStorage",bu="fbase_key";class Eo{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Ko(D,g){return D.transaction([la],g?"readwrite":"readonly").objectStore(la)}function Ja(){const D=indexedDB.open(gl,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const A=D.result;try{A.createObjectStore(la,{keyPath:bu})}catch(Z){v(Z)}}),D.addEventListener("success",(0,c.Z)(function*(){const A=D.result;A.objectStoreNames.contains(la)?g(A):(A.close(),yield function ka(){const D=indexedDB.deleteDatabase(gl);return new Eo(D).toPromise()}(),g(yield Ja()))}))})}function eu(D,g,v){return Na.apply(this,arguments)}function Na(){return(Na=(0,c.Z)(function*(D,g,v){const A=Ko(D,!0).put({[bu]:g,value:v});return new Eo(A).toPromise()})).apply(this,arguments)}function fr(){return(fr=(0,c.Z)(function*(D,g){const v=Ko(D,!1).get(g),A=yield new Eo(v).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function ll(D,g){const v=Ko(D,!0).delete(g);return new Eo(v).toPromise()}const Ms=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,c.Z)(function*(){return v.db||(v.db=yield Ja()),v.db})()}_withRetries(v){var A=this;return(0,c.Z)(function*(){let Z=0;for(;;)try{const de=yield A._openDb();return yield v(de)}catch(de){if(Z++>3)throw de;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,c.Z)(function*(){return Fo()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,c.Z)(function*(){v.receiver=mi._getInstance(function xs(){return Fo()?self:null}()),v.receiver._subscribe("keyChanged",function(){var A=(0,c.Z)(function*(Z,de){return{keyProcessed:(yield v._poll()).includes(de.key)}});return function(Z,de){return A.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var A=(0,c.Z)(function*(Z,de){return["keyChanged"]});return function(Z,de){return A.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,c.Z)(function*(){var A,Z;if(v.activeServiceWorker=yield function En(){return Lt.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new hs(v.activeServiceWorker);const de=yield v.sender._send("ping",{},800);!de||(null===(A=de[0])||void 0===A?void 0:A.fulfilled)&&(null===(Z=de[0])||void 0===Z?void 0:Z.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var A=this;return(0,c.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Jt(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:v},A.serviceWorkerReceiverAvailable?800:50)}catch(Z){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Ja();return yield eu(v,Ht,"1"),yield ll(v,Ht),!0}catch(v){}return!1})()}_withPendingWrite(v){var A=this;return(0,c.Z)(function*(){A.pendingWrites++;try{yield v()}finally{A.pendingWrites--}})()}_set(v,A){var Z=this;return(0,c.Z)(function*(){return Z._withPendingWrite((0,c.Z)(function*(){return yield Z._withRetries(de=>eu(de,v,A)),Z.localCache[v]=A,Z.notifyServiceWorker(v)}))})()}_get(v){var A=this;return(0,c.Z)(function*(){const Z=yield A._withRetries(de=>function ml(D,g){return fr.apply(this,arguments)}(de,v));return A.localCache[v]=Z,Z})()}_remove(v){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(Z=>ll(Z,v)),delete A.localCache[v],A.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,c.Z)(function*(){const A=yield v._withRetries(ct=>{const Vt=Ko(ct,!1).getAll();return new Eo(Vt).toPromise()});if(!A)return[];if(0!==v.pendingWrites)return[];const Z=[],de=new Set;for(const{fbase_key:ct,value:Vt}of A)de.add(ct),JSON.stringify(v.localCache[ct])!==JSON.stringify(Vt)&&(v.notifyListeners(ct,Vt),Z.push(ct));for(const ct of Object.keys(v.localCache))v.localCache[ct]&&!de.has(ct)&&(v.notifyListeners(ct,null),Z.push(ct));return Z})()}notifyListeners(v,A){this.localCache[v]=A;const Z=this.listeners[v];if(Z)for(const de of Array.from(Z))de(A)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(A)}_removeListener(v,A){this.listeners[v]&&(this.listeners[v].delete(A),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function Jr(D,g){return zt(D,"POST","/v2/accounts/mfaSignIn:start",Ut(D,g))}function gn(){return(gn=(0,c.Z)(function*(D){return(yield zt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ca(D){return new Promise((g,v)=>{const A=document.createElement("script");A.setAttribute("src",D),A.onload=g,A.onerror=Z=>{const de=st("internal-error");de.customData=Z,v(de)},A.type="text/javascript",A.charset="UTF-8",function Fa(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(A)})}function Da(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Io=1e12;class La{constructor(g){this.auth=g,this.counter=Io,this._widgets=new Map}render(g,v){const A=this.counter;return this._widgets.set(A,new Du(g,this.auth.name,v||{})),this.counter++,A}reset(g){var v;const A=g||Io;null===(v=this._widgets.get(A))||void 0===v||v.delete(),this._widgets.delete(A)}getResponse(g){var v;return(null===(v=this._widgets.get(g||Io))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,c.Z)(function*(){var A;return null===(A=v._widgets.get(g||Io))||void 0===A||A.execute(),""})()}}class Du{constructor(g,v,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof g?document.getElementById(g):g;re(Z,"argument-error",{appName:v}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ta(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<D;A++)g.push(v.charAt(Math.floor(Math.random()*v.length)));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fs=Da("rcb"),Ba=new Ue(3e4,6e4);class ul{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=pn().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return re(function qo(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),g,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(pn().grecaptcha):new Promise((A,Z)=>{const de=pn().setTimeout(()=>{Z(st(g,"network-request-failed"))},Ba.get());pn()[fs]=()=>{pn().clearTimeout(de),delete pn()[fs];const Vt=pn().grecaptcha;if(!Vt)return void Z(st(g,"internal-error"));const yn=Vt.render;Vt.render=(Yn,Xn)=>{const gr=yn(Yn,Xn);return this.counter++,gr},this.hostLanguage=v,A(Vt)},Ca(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:fs,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(de),Z(st(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=pn().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mc{load(g){return(0,c.Z)(function*(){return new La(g)})()}clearedOneInstance(){}}const kt="recaptcha",el={theme:"light",type:"image"};class Zo{constructor(g,v=Object.assign({},el),A){this.parameters=v,this.type=kt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pr(A),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof g?document.getElementById(g):g;re(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mc:new ul,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(v)||new Promise(de=>{const ct=Vt=>{!Vt||(g.tokenChangeListeners.delete(ct),de(Vt))};g.tokenChangeListeners.add(ct),g.isInvisible&&A.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(A=>A(v)),"function"==typeof g)g(v);else if("string"==typeof g){const A=pn()[g];"function"==typeof A&&A(v)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const A=document.createElement("div");v.appendChild(A),v=A}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){re(et()&&!Fo(),g.auth,"internal-error"),yield function tu(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function wi(D){return gn.apply(this,arguments)}(g.auth);re(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Va{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=ls._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Sa(){return(Sa=(0,c.Z)(function*(D,g,v){const A=Pr(D),Z=yield Tu(A,g,(0,W.m9)(v));return new Va(Z,de=>si(A,de))})).apply(this,arguments)}function yl(){return(yl=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D);yield cs(!1,A,"phone");const Z=yield Tu(A.auth,g,(0,W.m9)(v));return new Va(Z,de=>Ki(A,de))})).apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D),Z=yield Tu(A.auth,g,(0,W.m9)(v));return new Va(Z,de=>Mo(A,de))})).apply(this,arguments)}function Tu(D,g,v){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,c.Z)(function*(D,g,v){var A;const Z=yield v.verify();try{let de;if(re("string"==typeof Z,D,"argument-error"),re(v.type===kt,D,"argument-error"),de="string"==typeof g?{phoneNumber:g}:g,"session"in de){const ct=de.session;if("phoneNumber"in de)return re("enroll"===ct.type,D,"internal-error"),(yield O(D,{idToken:ct.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{re("signin"===ct.type,D,"internal-error");const Vt=(null===(A=de.multiFactorHint)||void 0===A?void 0:A.uid)||de.multiFactorUid;return re(Vt,D,"missing-multi-factor-info"),(yield Jr(D,{mfaPendingCredential:ct.credential,mfaEnrollmentId:Vt,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ct}=yield Gt(D,{phoneNumber:de.phoneNumber,recaptchaToken:Z});return ct}}finally{v._reset()}})).apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(D,g){yield jo((0,W.m9)(D),g)})).apply(this,arguments)}let vl=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Pr(v)}verifyPhoneNumber(v,A){return Tu(this.auth,v,(0,W.m9)(A))}static credential(v,A){return ls._fromVerification(v,A)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:A,temporaryProof:Z}=v;return A&&Z?ls._fromTokenResponse(A,Z):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Oi(D,g){return g?ve(g):(re(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class ci extends Wr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return mr(g,this._buildIdpRequest())}_linkToIdToken(g,v){return mr(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return mr(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function br(D){return po(D.auth,new ci(D),D.bypassAuthState)}function Kn(D){const{auth:g,user:v}=D;return re(v,g,"internal-error"),Za(v,new ci(D),D.bypassAuthState)}function Aa(D){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,c.Z)(function*(D){const{auth:g,user:v}=D;return re(v,g,"internal-error"),jo(v,new ci(D),D.bypassAuthState)})).apply(this,arguments)}class Vs{constructor(g,v,A,Z,de=!1){this.auth=g,this.resolver=A,this.user=Z,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,c.Z)(function*(A,Z){g.pendingPromise={resolve:A,reject:Z};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(de){g.reject(de)}});return function(A,Z){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,c.Z)(function*(){const{urlResponse:A,sessionId:Z,postBody:de,tenantId:ct,error:Vt,type:yn}=g;if(Vt)return void v.reject(Vt);const Yn={auth:v.auth,requestUri:A,sessionId:Z,tenantId:ct||void 0,postBody:de||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(yn)(Yn))}catch(Xn){v.reject(Xn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return br;case"linkViaPopup":case"linkViaRedirect":return Aa;case"reauthViaPopup":case"reauthViaRedirect":return Kn;default:ut(this.auth,"internal-error")}}resolve(g){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rc=new Ue(2e3,1e4);function S(){return(S=(0,c.Z)(function*(D,g,v){const A=Pr(D);He(D,g,Xi);const Z=Oi(A,v);return new ue(A,"signInViaPopup",g,Z).executeNotNull()})).apply(this,arguments)}function M(){return(M=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D);He(A.auth,g,Xi);const Z=Oi(A.auth,v);return new ue(A.auth,"reauthViaPopup",g,Z,A).executeNotNull()})).apply(this,arguments)}function ne(){return(ne=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D);He(A.auth,g,Xi);const Z=Oi(A.auth,v);return new ue(A.auth,"linkViaPopup",g,Z,A).executeNotNull()})).apply(this,arguments)}let ue=(()=>{class D extends Vs{constructor(v,A,Z,de,ct){super(v,A,de,ct),this.provider=Z,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,c.Z)(function*(){const A=yield v.execute();return re(A,v.auth,"internal-error"),A})()}onExecution(){var v=this;return(0,c.Z)(function*(){ce(1===v.filter.length,"Popup operations only handle one event");const A=Fi();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],A),v.authWindow.associatedEvent=A,v.resolver._originValidation(v.auth).catch(Z=>{v.reject(Z)}),v.resolver._isIframeWebStorageSupported(v.auth,Z=>{Z||v.reject(st(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var A,Z;this.pollId=null!==(Z=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Rc.get())};v()}}return D.currentPopupAction=null,D})();const Ot=new Map;class an extends Vs{constructor(g,v,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,c.Z)(function*(){let A=Ot.get(v.auth._key());if(!A){try{const de=(yield function Tn(D,g){return kn.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;A=()=>Promise.resolve(de)}catch(Z){A=()=>Promise.reject(Z)}Ot.set(v.auth._key(),A)}return v.bypassAuthState||Ot.set(v.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,A=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(A,g);if("unknown"!==g.type){if(g.eventId){const Z=yield A.auth._redirectUserForId(g.eventId);if(Z)return A.user=Z,v().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function kn(){return(kn=(0,c.Z)(function*(D,g){const v=Js(g),A=oi(D);if(!(yield A._isAvailable()))return!1;const Z="true"===(yield A._get(v));return yield A._remove(v),Z})).apply(this,arguments)}function Qr(D,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(D,g){return oi(D)._set(Js(g),"true")})).apply(this,arguments)}function Rs(D,g){Ot.set(D._key(),g)}function oi(D){return ve(D._redirectPersistence)}function Js(D){return Qe("pendingRedirect",D.config.apiKey,D.name)}function $(){return($=(0,c.Z)(function*(D,g,v){const A=Pr(D);He(D,g,Xi);const Z=Oi(A,v);return yield Qr(Z,A),Z._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D);He(A.auth,g,Xi);const Z=Oi(A.auth,v);yield Qr(Z,A.auth);const de=yield vr(A);return Z._openRedirect(A.auth,g,"reauthViaRedirect",de)})).apply(this,arguments)}function qt(){return(qt=(0,c.Z)(function*(D,g,v){const A=(0,W.m9)(D);He(A.auth,g,Xi);const Z=Oi(A.auth,v);yield cs(!1,A,g.providerId),yield Qr(Z,A.auth);const de=yield vr(A);return Z._openRedirect(A.auth,g,"linkViaRedirect",de)})).apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(D,g){return yield Pr(D)._initializationPromise,Sr(D,g,!1)})).apply(this,arguments)}function Sr(D,g){return lr.apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(D,g,v=!1){const A=Pr(D),Z=Oi(A,g),ct=yield new an(A,Z,v).execute();return ct&&!v&&(delete ct.user._redirectEventId,yield A._persistUserIfCurrent(ct.user),yield A._setRedirectUser(null,g)),ct})).apply(this,arguments)}function vr(D){return ss.apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*(D){const g=Fi(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class Ds{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(v=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Oc(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return di(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var A;if(g.error&&!di(g)){const Z=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";v.onError(st(this.auth,Z))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const A=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xa(g))}saveEventToCache(g){this.cachedEventUids.add(xa(g)),this.lastProcessedEventTime=Date.now()}}function xa(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function di({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function tl(D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,c.Z)(function*(D,g={}){return zt(D,"GET","/v1/projects",g)})).apply(this,arguments)}const ca=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jo=/^https?/;function kc(){return(kc=(0,c.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield tl(D);for(const v of g)try{if(Yi(v))return}catch(A){}ut(D,"unauthorized-domain")})).apply(this,arguments)}function Yi(D){const g=Ie(),{protocol:v,hostname:A}=new URL(g);if(D.startsWith("chrome-extension://")){const ct=new URL(D);return""===ct.hostname&&""===A?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&ct.hostname===A}if(!Jo.test(v))return!1;if(ca.test(D))return A===D;const Z=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(A)}const tf=new Ue(3e4,6e4);function Lo(){const D=pn().___jsl;if(null!=D&&D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let qu=null;function Zu(D){return qu=qu||function fd(D){return new Promise((g,v)=>{var A,Z,de;function ct(){Lo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Lo(),v(st(D,"network-request-failed"))},timeout:tf.get()})}if(null!==(Z=null===(A=pn().gapi)||void 0===A?void 0:A.iframes)&&void 0!==Z&&Z.Iframe)g(gapi.iframes.getContext());else{if(null===(de=pn().gapi)||void 0===de||!de.load){const Vt=Da("iframefcb");return pn()[Vt]=()=>{gapi.load?ct():v(st(D,"network-request-failed"))},Ca(`https://apis.google.com/js/api.js?onload=${Vt}`).catch(yn=>v(yn))}ct()}}).catch(g=>{throw qu=null,g})}(D),qu}const Ua=new Ue(5e3,15e3),nf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rl(D){const g=D.config;re(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?Ne(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,A={apiKey:g.apiKey,appName:D.name,v:Oe.SDK_VERSION},Z=pd.get(D.config.apiHost);Z&&(A.eid=Z);const de=D._getFrameworks();return de.length&&(A.fw=de.join(",")),`${v}?${(0,W.xO)(A).slice(1)}`}function Nc(){return Nc=(0,c.Z)(function*(D){const g=yield Zu(D),v=pn().gapi;return re(v,D,"internal-error"),g.open({where:document.body,url:Rl(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nf,dontclear:!0},A=>new Promise(function(){var Z=(0,c.Z)(function*(de,ct){yield A.restyle({setHideOnLeave:!1});const Vt=st(D,"network-request-failed"),yn=pn().setTimeout(()=>{ct(Vt)},Ua.get());function Yn(){pn().clearTimeout(yn),de(A)}A.ping(Yn).then(Yn,()=>{ct(Vt)})});return function(de,ct){return Z.apply(this,arguments)}}()))}),Nc.apply(this,arguments)}const rf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Fs(D,g,v,A,Z,de){re(D.config.authDomain,D,"auth-domain-config-required"),re(D.config.apiKey,D,"invalid-api-key");const ct={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:A,v:Oe.SDK_VERSION,eventId:Z};if(g instanceof Xi){g.setDefaultLanguage(D.languageCode),ct.providerId=g.providerId||"",(0,W.xb)(g.getCustomParameters())||(ct.customParameters=JSON.stringify(g.getCustomParameters()));for(const[yn,Yn]of Object.entries(de||{}))ct[yn]=Yn}if(g instanceof Os){const yn=g.getScopes().filter(Yn=>""!==Yn);yn.length>0&&(ct.scopes=yn.join(","))}D.tenantId&&(ct.tid=D.tenantId);const Vt=ct;for(const yn of Object.keys(Vt))void 0===Vt[yn]&&delete Vt[yn];return`${function Ol({config:D}){return D.emulator?Ne(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,W.xO)(Vt).slice(1)}`}const Ha="webStorageSupport",Au=class sh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ii,this._completeRedirectFn=Sr,this._overrideRedirectResult=Rs}_openPopup(g,v,A,Z){var de=this;return(0,c.Z)(function*(){var ct;ce(null===(ct=de.eventManagers[g._key()])||void 0===ct?void 0:ct.manager,"_initialize() not called before _openPopup()");const Vt=Fs(g,v,A,Ie(),Z);return function sf(D,g,v,A=500,Z=600){const de=Math.max((window.screen.availHeight-Z)/2,0).toString(),ct=Math.max((window.screen.availWidth-A)/2,0).toString();let Vt="";const yn=Object.assign(Object.assign({},rf),{width:A.toString(),height:Z.toString(),top:de,left:ct}),Yn=(0,W.z$)().toLowerCase();v&&(Vt=rr(Yn)?"_blank":v),An(Yn)&&(g=g||"http://localhost",yn.scrollbars="yes");const Xn=Object.entries(yn).reduce((to,[no,ac])=>`${to}${no}=${ac},`,"");if(function Mt(D=(0,W.z$)()){var g;return Re(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Yn)&&"_self"!==Vt)return function rh(D,g){const v=document.createElement("a");v.href=D,v.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(A)}(g||"",Vt),new nh(null);const gr=window.open(g||"",Vt,Xn);re(gr,D,"popup-blocked");try{gr.focus()}catch(to){}return new nh(gr)}(g,Vt,Fi())})()}_openRedirect(g,v,A,Z){var de=this;return(0,c.Z)(function*(){return yield de._originValidation(g),function sr(D){pn().location.href=D}(Fs(g,v,A,Ie(),Z)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:Z,promise:de}=this.eventManagers[v];return Z?Promise.resolve(Z):(ce(de,"If manager is not set, promise should be"),de)}const A=this.initAndGetManager(g);return this.eventManagers[v]={promise:A},A.catch(()=>{delete this.eventManagers[v]}),A}initAndGetManager(g){var v=this;return(0,c.Z)(function*(){const A=yield function os(D){return Nc.apply(this,arguments)}(g),Z=new Ds(g);return A.register("authEvent",de=>(re(null==de?void 0:de.authEvent,g,"invalid-auth-event"),{status:Z.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:Z},v.iframes[g._key()]=A,Z})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Ha,{type:Ha},Z=>{var de;const ct=null===(de=null==Z?void 0:Z[0])||void 0===de?void 0:de[Ha];void 0!==ct&&v(!!ct),ut(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Su(D){return kc.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return nr()||Jn()||Re()}};class nu{constructor(g){this.factorId=g}_process(g,v,A){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,A);case"signin":return this._finalizeSignIn(g,v.credential);default:return Ze("unexpected MultiFactorSessionType")}}}class Ga extends nu{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ga(g)}_finalizeEnroll(g,v,A){return function Q(D,g){return zt(D,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(D,g))}(g,{idToken:v,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Cs(D,g){return zt(D,"POST","/v2/accounts/mfaSignIn:finalize",Ut(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fc=(()=>{class D{constructor(){}static assertion(v){return Ga._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var af="@firebase/auth",oh="0.20.11";class ah{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,c.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(A=>{var Z;g((null===(Z=A)||void 0===Z?void 0:Z.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);!v||(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ps(){return window}function da(){return(da=(0,c.Z)(function*(D,g,v){var A;const{BuildInfo:Z}=ps();ce(g.sessionId,"AuthEvent did not contain a session ID");const de=yield yd(g.sessionId),ct={};return Re()?ct.ibi=Z.packageName:bn()?ct.apn=Z.packageName:ut(D,"operation-not-supported-in-this-environment"),Z.displayName&&(ct.appDisplayName=Z.displayName),ct.sessionId=de,Fs(D,v,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,ct)})).apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(D){const{BuildInfo:g}=ps(),v={};Re()?v.iosBundleId=g.packageName:bn()?v.androidPackageName=g.packageName:ut(D,"operation-not-supported-in-this-environment"),yield tl(D,v)})).apply(this,arguments)}function md(){return(md=(0,c.Z)(function*(D,g,v){const{cordova:A}=ps();let Z=()=>{};try{yield new Promise((de,ct)=>{let Vt=null;function yn(){var gr;de();const to=null===(gr=A.plugins.browsertab)||void 0===gr?void 0:gr.close;"function"==typeof to&&to(),"function"==typeof(null==v?void 0:v.close)&&v.close()}function Yn(){Vt||(Vt=window.setTimeout(()=>{ct(st(D,"redirect-cancelled-by-user"))},2e3))}function Xn(){"visible"===(null==document?void 0:document.visibilityState)&&Yn()}g.addPassiveListener(yn),document.addEventListener("resume",Yn,!1),bn()&&document.addEventListener("visibilitychange",Xn,!1),Z=()=>{g.removePassiveListener(yn),document.removeEventListener("resume",Yn,!1),document.removeEventListener("visibilitychange",Xn,!1),Vt&&window.clearTimeout(Vt)}})}finally{Z()}})).apply(this,arguments)}function yd(D){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,c.Z)(function*(D){const g=za(D),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(Z=>Z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function za(D){if(ce(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),v=new Uint8Array(g);for(let A=0;A<D.length;A++)v[A]=D.charCodeAt(A);return v}(0,W.Pz)("authIdTokenMaxAge"),function gd(D){(0,Oe._registerComponent)(new me.wA("auth",(g,{options:v})=>{const A=g.getProvider("app").getImmediate(),Z=g.getProvider("heartbeat"),{apiKey:de,authDomain:ct}=A.options;return((Vt,yn)=>{re(de&&!de.includes(":"),"invalid-api-key",{appName:Vt.name}),re(!(null!=ct&&ct.includes(":")),"argument-error",{appName:Vt.name});const Yn={apiKey:de,authDomain:ct,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ei(D)},Xn=new Ci(Vt,yn,Yn);return function Pe(D,g){const v=(null==g?void 0:g.persistence)||[],A=(Array.isArray(v)?v:[v]).map(ve);null!=g&&g.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Xn,v),Xn})(A,Z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,A)=>{g.getProvider("auth-internal").initialize()})),(0,Oe._registerComponent)(new me.wA("auth-internal",g=>{const v=Pr(g.getProvider("auth").getImmediate());return new ah(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Oe.registerVersion)(af,oh,function ec(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,Oe.registerVersion)(af,oh,"esm2017")}("Browser");class Ou extends Ds{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Wa(D){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,c.Z)(function*(D){const g=yield iu()._get(su(D));return g&&(yield iu()._remove(su(D))),g})).apply(this,arguments)}function Nl(){const D=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<20;v++){const A=Math.floor(Math.random()*g.length);D.push(g.charAt(A))}return D.join("")}function iu(){return ve(ni)}function su(D){return Qe("authEvent",D.config.apiKey,D.name)}function ms(D){if(null==D||!D.includes("?"))return{};const[g,...v]=D.split("?");return(0,W.zd)(v.join("?"))}const ou=class Lc{constructor(){this._redirectPersistence=Ii,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sr,this._overrideRedirectResult=Rs}_initialize(g){var v=this;return(0,c.Z)(function*(){const A=g._key();let Z=v.eventManagers.get(A);return Z||(Z=new Ou(g),v.eventManagers.set(A,Z),v.attachCallbackListeners(g,Z)),Z})()}_openPopup(g){ut(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,A,Z){var de=this;return(0,c.Z)(function*(){!function gs(D){var g,v,A,Z,de,ct,Vt,yn,Yn,Xn;const gr=ps();re("function"==typeof(null===(g=null==gr?void 0:gr.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(v=null==gr?void 0:gr.BuildInfo)||void 0===v?void 0:v.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(de=null===(Z=null===(A=null==gr?void 0:gr.cordova)||void 0===A?void 0:A.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===de?void 0:de.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(yn=null===(Vt=null===(ct=null==gr?void 0:gr.cordova)||void 0===ct?void 0:ct.plugins)||void 0===Vt?void 0:Vt.browsertab)||void 0===yn?void 0:yn.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Xn=null===(Yn=null==gr?void 0:gr.cordova)||void 0===Yn?void 0:Yn.InAppBrowser)||void 0===Xn?void 0:Xn.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const ct=yield de._initialize(g);yield ct.initialized(),ct.resetRedirect(),function is(){Ot.clear()}(),yield de._originValidation(g);const Vt=function uh(D,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:Nl(),postBody:null,tenantId:D.tenantId,error:st(D,"no-auth-event")}}(g,A,Z);yield function ku(D,g){return iu()._set(su(D),g)}(g,Vt);const yn=yield function tc(D,g,v){return da.apply(this,arguments)}(g,Vt,v),Yn=yield function nc(D){const{cordova:g}=ps();return new Promise(v=>{g.plugins.browsertab.isAvailable(A=>{let Z=null;A?g.plugins.browsertab.openUrl(D):Z=g.InAppBrowser.open(D,function Dt(D=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),v(Z)})})}(yn);return function lf(D,g,v){return md.apply(this,arguments)}(g,ct,Yn)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function uo(D){return _l.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:A,handleOpenURL:Z,BuildInfo:de}=ps(),ct=setTimeout((0,c.Z)(function*(){yield Wa(g),v.onEvent(Ma())}),500),Vt=function(){var Xn=(0,c.Z)(function*(gr){clearTimeout(ct);const to=yield Wa(g);let no=null;to&&(null==gr?void 0:gr.url)&&(no=function ru(D,g){var v,A;const Z=function ch(D){const g=ms(D),v=g.link?decodeURIComponent(g.link):void 0,A=ms(v).link,Z=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ms(Z).link||Z||A||v||D}(g);if(Z.includes("/__/auth/callback")){const de=ms(Z),ct=de.firebaseError?function Nu(D){try{return JSON.parse(D)}catch(g){return null}}(decodeURIComponent(de.firebaseError)):null,Vt=null===(A=null===(v=null==ct?void 0:ct.code)||void 0===v?void 0:v.split("auth/"))||void 0===A?void 0:A[1],yn=Vt?st(Vt):null;return yn?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:yn,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:Z,postBody:null}}return null}(to,gr.url)),v.onEvent(no||Ma())});return function(to){return Xn.apply(this,arguments)}}();typeof A<"u"&&"function"==typeof A.subscribe&&A.subscribe(null,Vt);const yn=Z,Yn=`${de.packageName.toLowerCase()}://`;ps().handleOpenURL=function(){var Xn=(0,c.Z)(function*(gr){if(gr.toLowerCase().startsWith(Yn)&&Vt({url:gr}),"function"==typeof yn)try{yn(gr)}catch(to){console.error(to)}});return function(gr){return Xn.apply(this,arguments)}}()}};function Ma(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:st("no-auth-event")}}function ta(){var D;return(null===(D=null==self?void 0:self.location)||void 0===D?void 0:D.protocol)||null}function Bc(D=(0,W.z$)()){return!("file:"!==ta()&&"ionic:"!==ta()&&"capacitor:"!==ta()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function El(){try{const D=self.localStorage,g=Fi();if(D)return D.setItem(g,"1"),D.removeItem(g),!function jr(D=(0,W.z$)()){return function dh(){return(0,W.w1)()&&11===(null==document?void 0:document.documentMode)}()||function lu(D=(0,W.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,W.hl)()}catch(D){return Il()&&(0,W.hl)()}return!1}function Il(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nl(){return(function Ra(){return"http:"===ta()||"https:"===ta()}()||(0,W.ru)()||Bc())&&!function rc(){return(0,W.b$)()||(0,W.UG)()}()&&El()&&!Il()}function Fu(){return Bc()&&typeof document<"u"}function $c(){return($c=(0,c.Z)(function*(){return!!Fu()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}const ha={LOCAL:"local",NONE:"none",SESSION:"session"},ic=re,hh="persistence";function sc(D){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,c.Z)(function*(D){yield D._initializationPromise;const g=Lu(),v=Qe(hh,D.config.apiKey,D.name);g&&g.setItem(v,D._getPersistence())})).apply(this,arguments)}function Lu(){var D;try{return(null===(D=function cu(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch(g){return null}}const ph=re;class wl{constructor(){this.browserResolver=ve(Au),this.cordovaResolver=ve(ou),this.underlyingResolver=null,this._redirectPersistence=Ii,this._completeRedirectFn=Sr,this._overrideRedirectResult=Rs}_initialize(g){var v=this;return(0,c.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,A,Z){var de=this;return(0,c.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(g,v,A,Z)})()}_openRedirect(g,v,A,Z){var de=this;return(0,c.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(g,v,A,Z)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Fu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ph(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const v=yield function uu(){return $c.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function eo(D){return D.unwrap()}function Vc(D){return fa(D)}function fa(D){const{_tokenResponse:g}=D instanceof W.ZR?D.customData:D;if(!g)return null;if(!(D instanceof W.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return vl.credentialFromResult(D);const v=g.providerId;if(!v||"password"===v)return null;let A;switch(v){case"google.com":A=Uo;break;case"facebook.com":A=so;break;case"github.com":A=us;break;case"twitter.com":A=ws;break;default:const{oauthIdToken:Z,oauthAccessToken:de,oauthTokenSecret:ct,pendingToken:Vt,nonce:yn}=g;return de||ct||Z||Vt?Vt?v.startsWith("saml.")?Gs._create(v,Vt):wt._fromParams({providerId:v,signInMethod:v,pendingToken:Vt,idToken:Z,accessToken:de}):new Ls(v).credential({idToken:Z,accessToken:de,rawNonce:yn}):null}return D instanceof W.ZR?A.credentialFromError(D):A.credentialFromResult(D)}function co(D,g){return g.catch(v=>{throw v instanceof W.ZR&&function Fl(D,g){var v,A;const Z=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===(null===(A=g)||void 0===A?void 0:A.code))g.resolver=new Id(D,function Ui(D,g){var v;const A=(0,W.m9)(D),Z=g;return re(g.customData.operationType,A,"argument-error"),re(null===(v=Z.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,A,"argument-error"),Oa._fromError(A,Z)}(D,g));else if(Z){const de=fa(g),ct=g;de&&(ct.credential=de,ct.tenantId=Z.tenantId||void 0,ct.email=Z.email||void 0,ct.phoneNumber=Z.phoneNumber||void 0)}}(D,v),v}).then(v=>{const Z=v.user;return{operationType:v.operationType,credential:Vc(v),additionalUserInfo:ba(v),user:rl.getOrCreate(Z)}})}function Ll(D,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,c.Z)(function*(D,g){const v=yield g;return{verificationId:v.verificationId,confirm:A=>co(D,v.confirm(A))}})).apply(this,arguments)}class Id{constructor(g,v){this.resolver=v,this.auth=function oc(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return co(eo(this.auth),this.resolver.resolveSignIn(g))}}class rl{constructor(g){this._delegate=g,this.multiFactor=function Ft(D){const g=(0,W.m9)(D);return Me.has(g)||Me.set(g,se._fromUser(g)),Me.get(g)}(g)}static getOrCreate(g){return rl.USER_MAP.has(g)||rl.USER_MAP.set(g,new rl(g)),rl.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,c.Z)(function*(){return co(v.auth,Ki(v._delegate,g))})()}linkWithPhoneNumber(g,v){var A=this;return(0,c.Z)(function*(){return Ll(A.auth,function bo(D,g,v){return yl.apply(this,arguments)}(A._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,c.Z)(function*(){return co(v.auth,function j(D,g,v){return ne.apply(this,arguments)}(v._delegate,g,wl))})()}linkWithRedirect(g){var v=this;return(0,c.Z)(function*(){return yield sc(Pr(v.auth)),function mt(D,g,v){return function Nt(D,g,v){return qt.apply(this,arguments)}(D,g,v)}(v._delegate,g,wl)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,c.Z)(function*(){return co(v.auth,Mo(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return Ll(this.auth,function Ml(D,g,v){return Qo.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return co(this.auth,function I(D,g,v){return M.apply(this,arguments)}(this._delegate,g,wl))}reauthenticateWithRedirect(g){var v=this;return(0,c.Z)(function*(){return yield sc(Pr(v.auth)),function G(D,g,v){return function te(D,g,v){return Be.apply(this,arguments)}(D,g,v)}(v._delegate,g,wl)})()}sendEmailVerification(g){return function mo(D,g){return ui.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,c.Z)(function*(){return yield function Bs(D,g){return Ji.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function Oo(D,g){return Zs((0,W.m9)(D),g,null)}(this._delegate,g)}updatePassword(g){return function wa(D,g){return Zs((0,W.m9)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Li(D,g){return ua.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Pa(D,g){return Ia.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function Go(D,g,v){return $s.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rl.USER_MAP=new WeakMap;const Bu=re;let uf=(()=>{class D{constructor(v,A){if(this.app=v,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Z}=v.options;Bu(Z,"invalid-api-key",{appName:v.name}),Bu(Z,"invalid-api-key",{appName:v.name});const de=typeof window<"u"?wl:void 0;this._delegate=A.initialize({options:{persistence:$u(Z,v.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap(ot),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,A){!function vi(D,g,v){const A=Pr(D);re(A._canInitEmulator,A,"emulator-config-failed"),re(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const Z=!(null==v||!v.disableWarnings),de=gi(g),{host:ct,port:Vt}=function _s(D){const g=gi(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const A=v[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(A);if(Z){const de=Z[1];return{host:de,port:ir(A.substr(de.length+1))}}{const[de,ct]=A.split(":");return{host:de,port:ir(ct)}}}(g);A.config.emulator={url:`${de}//${ct}${null===Vt?"":`:${Vt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:ct,port:Vt,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function Or(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,v,A)}applyActionCode(v){return function pe(D,g){return Tt.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return fn(this._delegate,v)}confirmPasswordReset(v,A){return function w(D,g,v){return U.apply(this,arguments)}(this._delegate,v,A)}createUserWithEmailAndPassword(v,A){var Z=this;return(0,c.Z)(function*(){return co(Z._delegate,function ln(D,g,v){return ti.apply(this,arguments)}(Z._delegate,v,A))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function Tr(D,g){return Ys.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function oe(D,g){const v=Wi.parseLink(g);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}(0,v)}getRedirectResult(){var v=this;return(0,c.Z)(function*(){Bu(nl(),v._delegate,"operation-not-supported-in-this-environment");const A=yield function In(D,g){return zn.apply(this,arguments)}(v._delegate,wl);return A?co(v._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function au(D,g){Pr(D)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,A,Z){const{next:de,error:ct,complete:Vt}=cf(v,A,Z);return this._delegate.onAuthStateChanged(de,ct,Vt)}onIdTokenChanged(v,A,Z){const{next:de,error:ct,complete:Vt}=cf(v,A,Z);return this._delegate.onIdTokenChanged(de,ct,Vt)}sendSignInLinkToEmail(v,A){return function B(D,g,v){return k.apply(this,arguments)}(this._delegate,v,A)}sendPasswordResetEmail(v,A){return function C(D,g,v){return z.apply(this,arguments)}(this._delegate,v,A||void 0)}setPersistence(v){var A=this;return(0,c.Z)(function*(){let Z;switch(function sp(D,g){ic(Object.values(ha).includes(g),D,"invalid-persistence-type"),(0,W.b$)()?ic(g!==ha.SESSION,D,"unsupported-persistence-type"):(0,W.UG)()?ic(g===ha.NONE,D,"unsupported-persistence-type"):Il()?ic(g===ha.NONE||g===ha.LOCAL&&(0,W.hl)(),D,"unsupported-persistence-type"):ic(g===ha.NONE||El(),D,"unsupported-persistence-type")}(A._delegate,v),v){case ha.SESSION:Z=Ii;break;case ha.LOCAL:Z=(yield ve(Ms)._isAvailable())?Ms:ni;break;case ha.NONE:Z=Fe;break;default:return ut("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(Z)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return co(this._delegate,function Ao(D){return xo.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return co(this._delegate,si(this._delegate,v))}signInWithCustomToken(v){return co(this._delegate,function Ri(D,g){return Ho.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,A){return co(this._delegate,function H(D,g,v){return si((0,W.m9)(D),Vo.credential(g,v))}(this._delegate,v,A))}signInWithEmailLink(v,A){return co(this._delegate,function bt(D,g,v){return mn.apply(this,arguments)}(this._delegate,v,A))}signInWithPhoneNumber(v,A){return Ll(this._delegate,function wo(D,g,v){return Sa.apply(this,arguments)}(this._delegate,v,A))}signInWithPopup(v){var A=this;return(0,c.Z)(function*(){return Bu(nl(),A._delegate,"operation-not-supported-in-this-environment"),co(A._delegate,function T(D,g,v){return S.apply(this,arguments)}(A._delegate,v,wl))})()}signInWithRedirect(v){var A=this;return(0,c.Z)(function*(){return Bu(nl(),A._delegate,"operation-not-supported-in-this-environment"),yield sc(A._delegate),function Us(D,g,v){return function Pc(D,g,v){return $.apply(this,arguments)}(D,g,v)}(A._delegate,v,wl)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function yr(D,g){return Yr.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=ha,D})();function cf(D,g,v){let A=D;"function"!=typeof D&&({next:A,error:g,complete:v}=D);const Z=A;return{next:ct=>Z(ct&&rl.getOrCreate(ct)),error:g,complete:v}}function $u(D,g){const v=function fh(D,g){const v=Lu();if(!v)return[];const A=Qe(hh,D,g);switch(v.getItem(A)){case ha.NONE:return[Fe];case ha.LOCAL:return[Ms,Ii];case ha.SESSION:return[Ii];default:return[]}}(D,g);if(typeof self<"u"&&!v.includes(Ms)&&v.push(Ms),typeof window<"u")for(const A of[ni,Ii])v.includes(A)||v.push(A);return v.includes(Fe)||v.push(Fe),v}class du{constructor(){this.providerId="phone",this._delegate=new vl(eo(X.Z.auth()))}static credential(g,v){return vl.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}du.PHONE_SIGN_IN_METHOD=vl.PHONE_SIGN_IN_METHOD,du.PROVIDER_ID=vl.PROVIDER_ID;const wd=re;class bd{constructor(g,v,A=X.Z.app()){var Z;wd(null===(Z=A.options)||void 0===Z?void 0:Z.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Zo(g,v,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function df(D){D.INTERNAL.registerComponent(new me.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new uf(v,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vo,FacebookAuthProvider:so,GithubAuthProvider:us,GoogleAuthProvider:Uo,OAuthProvider:Ls,SAMLAuthProvider:As,PhoneAuthProvider:du,PhoneMultiFactorGenerator:Fc,RecaptchaVerifier:bd,TwitterAuthProvider:ws,Auth:uf,AuthCredential:Wr,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},1135:(on,pt,V)=>{"use strict";V.d(pt,{X:()=>X});var c=V(7579);class X extends c.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const Ae=super._subscribe(Oe);return!Ae.closed&&Oe.next(this._value),Ae}getValue(){const{hasError:Oe,thrownError:Ae,_value:Se}=this;if(Oe)throw Ae;return this._throwIfClosed(),Se}next(Oe){super.next(this._value=Oe)}}},9751:(on,pt,V)=>{"use strict";V.d(pt,{y:()=>Le});var c=V(930),X=V(727),W=V(8822),Oe=V(9635),Ae=V(2416),Se=V(576),me=V(2806);let Le=(()=>{class be{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ot=new be;return ot.source=this,ot.operator=Ge,ot}subscribe(Ge,ot,It){const ke=function we(be){return be&&be instanceof c.Lv||function Ce(be){return be&&(0,Se.m)(be.next)&&(0,Se.m)(be.error)&&(0,Se.m)(be.complete)}(be)&&(0,X.Nn)(be)}(Ge)?Ge:new c.Hp(Ge,ot,It);return(0,me.x)(()=>{const{operator:De,source:fe}=this;ke.add(De?De.call(ke,fe):fe?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ot){Ge.error(ot)}}forEach(Ge,ot){return new(ot=Ke(ot))((It,ke)=>{const De=new c.Hp({next:fe=>{try{Ge(fe)}catch(q){ke(q),De.unsubscribe()}},error:ke,complete:It});this.subscribe(De)})}_subscribe(Ge){var ot;return null===(ot=this.source)||void 0===ot?void 0:ot.subscribe(Ge)}[W.L](){return this}pipe(...Ge){return(0,Oe.U)(Ge)(this)}toPromise(Ge){return new(Ge=Ke(Ge))((ot,It)=>{let ke;this.subscribe(De=>ke=De,De=>It(De),()=>ot(ke))})}}return be.create=qe=>new be(qe),be})();function Ke(be){var qe;return null!==(qe=null!=be?be:Ae.v.Promise)&&void 0!==qe?qe:Promise}},7579:(on,pt,V)=>{"use strict";V.d(pt,{x:()=>me});var c=V(9751),X=V(727);const Oe=(0,V(3888).d)(Ke=>function(){Ke(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=V(8737),Se=V(2806);let me=(()=>{class Ke extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const be=new Le(this,this);return be.operator=we,be}_throwIfClosed(){if(this.closed)throw new Oe}next(we){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const be of this.currentObservers)be.next(we)}})}error(we){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:be}=this;for(;be.length;)be.shift().error(we)}})}complete(){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:be,isStopped:qe,observers:Ge}=this;return be||qe?X.Lc:(this.currentObservers=null,Ge.push(we),new X.w0(()=>{this.currentObservers=null,(0,Ae.P)(Ge,we)}))}_checkFinalizedStatuses(we){const{hasError:be,thrownError:qe,isStopped:Ge}=this;be?we.error(qe):Ge&&we.complete()}asObservable(){const we=new c.y;return we.source=this,we}}return Ke.create=(Ce,we)=>new Le(Ce,we),Ke})();class Le extends me{constructor(Ce,we){super(),this.destination=Ce,this.source=we}next(Ce){var we,be;null===(be=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===be||be.call(we,Ce)}error(Ce){var we,be;null===(be=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===be||be.call(we,Ce)}complete(){var Ce,we;null===(we=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.complete)||void 0===we||we.call(Ce)}_subscribe(Ce){var we,be;return null!==(be=null===(we=this.source)||void 0===we?void 0:we.subscribe(Ce))&&void 0!==be?be:X.Lc}}},930:(on,pt,V)=>{"use strict";V.d(pt,{Hp:()=>It,Lv:()=>be});var c=V(576),X=V(727),W=V(2416),Oe=V(7849),Ae=V(5032);const Se=Ke("C",void 0,void 0);function Ke(ut,st,it){return{kind:ut,value:st,error:it}}var Ce=V(3410),we=V(2806);class be extends X.w0{constructor(st){super(),this.isStopped=!1,st?(this.destination=st,(0,X.Nn)(st)&&st.add(this)):this.destination=q}static create(st,it,He){return new It(st,it,He)}next(st){this.isStopped?fe(function Le(ut){return Ke("N",ut,void 0)}(st),this):this._next(st)}error(st){this.isStopped?fe(function me(ut){return Ke("E",void 0,ut)}(st),this):(this.isStopped=!0,this._error(st))}complete(){this.isStopped?fe(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(st){this.destination.next(st)}_error(st){try{this.destination.error(st)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Ge(ut,st){return qe.call(ut,st)}class ot{constructor(st){this.partialObserver=st}next(st){const{partialObserver:it}=this;if(it.next)try{it.next(st)}catch(He){ke(He)}}error(st){const{partialObserver:it}=this;if(it.error)try{it.error(st)}catch(He){ke(He)}else ke(st)}complete(){const{partialObserver:st}=this;if(st.complete)try{st.complete()}catch(it){ke(it)}}}class It extends be{constructor(st,it,He){let ze;if(super(),(0,c.m)(st)||!st)ze={next:null!=st?st:void 0,error:null!=it?it:void 0,complete:null!=He?He:void 0};else{let re;this&&W.v.useDeprecatedNextContext?(re=Object.create(st),re.unsubscribe=()=>this.unsubscribe(),ze={next:st.next&&Ge(st.next,re),error:st.error&&Ge(st.error,re),complete:st.complete&&Ge(st.complete,re)}):ze=st}this.destination=new ot(ze)}}function ke(ut){W.v.useDeprecatedSynchronousErrorHandling?(0,we.O)(ut):(0,Oe.h)(ut)}function fe(ut,st){const{onStoppedNotification:it}=W.v;it&&Ce.z.setTimeout(()=>it(ut,st))}const q={closed:!0,next:Ae.Z,error:function De(ut){throw ut},complete:Ae.Z}},727:(on,pt,V)=>{"use strict";V.d(pt,{Lc:()=>Se,w0:()=>Ae,Nn:()=>me});var c=V(576);const W=(0,V(3888).d)(Ke=>function(we){Ke(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((be,qe)=>`${qe+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var Oe=V(8737);class Ae{constructor(Ce){this.initialTeardown=Ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ce;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const Ge of we)Ge.remove(this);else we.remove(this);const{initialTeardown:be}=this;if((0,c.m)(be))try{be()}catch(Ge){Ce=Ge instanceof W?Ge.errors:[Ge]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Ge of qe)try{Le(Ge)}catch(ot){Ce=null!=Ce?Ce:[],ot instanceof W?Ce=[...Ce,...ot.errors]:Ce.push(ot)}}if(Ce)throw new W(Ce)}}add(Ce){var we;if(Ce&&Ce!==this)if(this.closed)Le(Ce);else{if(Ce instanceof Ae){if(Ce.closed||Ce._hasParent(this))return;Ce._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(Ce)}}_hasParent(Ce){const{_parentage:we}=this;return we===Ce||Array.isArray(we)&&we.includes(Ce)}_addParent(Ce){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(Ce),we):we?[we,Ce]:Ce}_removeParent(Ce){const{_parentage:we}=this;we===Ce?this._parentage=null:Array.isArray(we)&&(0,Oe.P)(we,Ce)}remove(Ce){const{_finalizers:we}=this;we&&(0,Oe.P)(we,Ce),Ce instanceof Ae&&Ce._removeParent(this)}}Ae.EMPTY=(()=>{const Ke=new Ae;return Ke.closed=!0,Ke})();const Se=Ae.EMPTY;function me(Ke){return Ke instanceof Ae||Ke&&"closed"in Ke&&(0,c.m)(Ke.remove)&&(0,c.m)(Ke.add)&&(0,c.m)(Ke.unsubscribe)}function Le(Ke){(0,c.m)(Ke)?Ke():Ke.unsubscribe()}},2416:(on,pt,V)=>{"use strict";V.d(pt,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(on,pt,V)=>{"use strict";V.d(pt,{z:()=>Ae});var c=V(8189),W=V(7669),Oe=V(8996);function Ae(...Se){return function X(){return(0,c.J)(1)}()((0,Oe.D)(Se,(0,W.yG)(Se)))}},515:(on,pt,V)=>{"use strict";V.d(pt,{E:()=>X});const X=new(V(9751).y)(Ae=>Ae.complete())},8996:(on,pt,V)=>{"use strict";V.d(pt,{D:()=>st});var c=V(8421),X=V(5363),W=V(9468),Se=V(9751),Le=V(2202),Ke=V(576),Ce=V(9672);function be(it,He){if(!it)throw new Error("Iterable cannot be null");return new Se.y(ze=>{(0,Ce.f)(ze,He,()=>{const re=it[Symbol.asyncIterator]();(0,Ce.f)(ze,He,()=>{re.next().then(Ze=>{Ze.done?ze.complete():ze.next(Ze.value)})},0,!0)})})}var qe=V(3670),Ge=V(8239),ot=V(1144),It=V(6495),ke=V(2206),De=V(4532),fe=V(3260);function st(it,He){return He?function ut(it,He){if(null!=it){if((0,qe.c)(it))return function Oe(it,He){return(0,c.Xf)(it).pipe((0,W.R)(He),(0,X.Q)(He))}(it,He);if((0,ot.z)(it))return function me(it,He){return new Se.y(ze=>{let re=0;return He.schedule(function(){re===it.length?ze.complete():(ze.next(it[re++]),ze.closed||this.schedule())})})}(it,He);if((0,Ge.t)(it))return function Ae(it,He){return(0,c.Xf)(it).pipe((0,W.R)(He),(0,X.Q)(He))}(it,He);if((0,ke.D)(it))return be(it,He);if((0,It.T)(it))return function we(it,He){return new Se.y(ze=>{let re;return(0,Ce.f)(ze,He,()=>{re=it[Le.h](),(0,Ce.f)(ze,He,()=>{let Ze,ce;try{({value:Ze,done:ce}=re.next())}catch(ge){return void ze.error(ge)}ce?ze.complete():ze.next(Ze)},0,!0)}),()=>(0,Ke.m)(null==re?void 0:re.return)&&re.return()})}(it,He);if((0,fe.L)(it))return function q(it,He){return be((0,fe.Q)(it),He)}(it,He)}throw(0,De.z)(it)}(it,He):(0,c.Xf)(it)}},4968:(on,pt,V)=>{"use strict";V.d(pt,{R:()=>Ce});var c=V(8421),X=V(9751),W=V(5577),Oe=V(1144),Ae=V(576),Se=V(3268);const me=["addListener","removeListener"],Le=["addEventListener","removeEventListener"],Ke=["on","off"];function Ce(ot,It,ke,De){if((0,Ae.m)(ke)&&(De=ke,ke=void 0),De)return Ce(ot,It,ke).pipe((0,Se.Z)(De));const[fe,q]=function Ge(ot){return(0,Ae.m)(ot.addEventListener)&&(0,Ae.m)(ot.removeEventListener)}(ot)?Le.map(ut=>st=>ot[ut](It,st,ke)):function be(ot){return(0,Ae.m)(ot.addListener)&&(0,Ae.m)(ot.removeListener)}(ot)?me.map(we(ot,It)):function qe(ot){return(0,Ae.m)(ot.on)&&(0,Ae.m)(ot.off)}(ot)?Ke.map(we(ot,It)):[];if(!fe&&(0,Oe.z)(ot))return(0,W.z)(ut=>Ce(ut,It,ke))((0,c.Xf)(ot));if(!fe)throw new TypeError("Invalid event target");return new X.y(ut=>{const st=(...it)=>ut.next(1<it.length?it:it[0]);return fe(st),()=>q(st)})}function we(ot,It){return ke=>De=>ot[ke](It,De)}},8421:(on,pt,V)=>{"use strict";V.d(pt,{Xf:()=>qe});var c=V(655),X=V(1144),W=V(8239),Oe=V(9751),Ae=V(3670),Se=V(2206),me=V(4532),Le=V(6495),Ke=V(3260),Ce=V(576),we=V(7849),be=V(8822);function qe(ut){if(ut instanceof Oe.y)return ut;if(null!=ut){if((0,Ae.c)(ut))return function Ge(ut){return new Oe.y(st=>{const it=ut[be.L]();if((0,Ce.m)(it.subscribe))return it.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ut);if((0,X.z)(ut))return function ot(ut){return new Oe.y(st=>{for(let it=0;it<ut.length&&!st.closed;it++)st.next(ut[it]);st.complete()})}(ut);if((0,W.t)(ut))return function It(ut){return new Oe.y(st=>{ut.then(it=>{st.closed||(st.next(it),st.complete())},it=>st.error(it)).then(null,we.h)})}(ut);if((0,Se.D)(ut))return De(ut);if((0,Le.T)(ut))return function ke(ut){return new Oe.y(st=>{for(const it of ut)if(st.next(it),st.closed)return;st.complete()})}(ut);if((0,Ke.L)(ut))return function fe(ut){return De((0,Ke.Q)(ut))}(ut)}throw(0,me.z)(ut)}function De(ut){return new Oe.y(st=>{(function q(ut,st){var it,He,ze,re;return(0,c.mG)(this,void 0,void 0,function*(){try{for(it=(0,c.KL)(ut);!(He=yield it.next()).done;)if(st.next(He.value),st.closed)return}catch(Ze){ze={error:Ze}}finally{try{He&&!He.done&&(re=it.return)&&(yield re.call(it))}finally{if(ze)throw ze.error}}st.complete()})})(ut,st).catch(it=>st.error(it))})}},6451:(on,pt,V)=>{"use strict";V.d(pt,{T:()=>Se});var c=V(8189),X=V(8421),W=V(515),Oe=V(7669),Ae=V(8996);function Se(...me){const Le=(0,Oe.yG)(me),Ke=(0,Oe._6)(me,1/0),Ce=me;return Ce.length?1===Ce.length?(0,X.Xf)(Ce[0]):(0,c.J)(Ke)((0,Ae.D)(Ce,Le)):W.E}},9646:(on,pt,V)=>{"use strict";V.d(pt,{of:()=>W});var c=V(7669),X=V(8996);function W(...Oe){const Ae=(0,c.yG)(Oe);return(0,X.D)(Oe,Ae)}},5403:(on,pt,V)=>{"use strict";V.d(pt,{x:()=>X});var c=V(930);function X(Oe,Ae,Se,me,Le){return new W(Oe,Ae,Se,me,Le)}class W extends c.Lv{constructor(Ae,Se,me,Le,Ke,Ce){super(Ae),this.onFinalize=Ke,this.shouldUnsubscribe=Ce,this._next=Se?function(we){try{Se(we)}catch(be){Ae.error(be)}}:super._next,this._error=Le?function(we){try{Le(we)}catch(be){Ae.error(be)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(we){Ae.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}},6590:(on,pt,V)=>{"use strict";V.d(pt,{d:()=>W});var c=V(4482),X=V(5403);function W(Oe){return(0,c.e)((Ae,Se)=>{let me=!1;Ae.subscribe((0,X.x)(Se,Le=>{me=!0,Se.next(Le)},()=>{me||Se.next(Oe),Se.complete()}))})}},1884:(on,pt,V)=>{"use strict";V.d(pt,{x:()=>Oe});var c=V(4671),X=V(4482),W=V(5403);function Oe(Se,me=c.y){return Se=null!=Se?Se:Ae,(0,X.e)((Le,Ke)=>{let Ce,we=!0;Le.subscribe((0,W.x)(Ke,be=>{const qe=me(be);(we||!Se(Ce,qe))&&(we=!1,Ce=qe,Ke.next(be))}))})}function Ae(Se,me){return Se===me}},9300:(on,pt,V)=>{"use strict";V.d(pt,{h:()=>W});var c=V(4482),X=V(5403);function W(Oe,Ae){return(0,c.e)((Se,me)=>{let Le=0;Se.subscribe((0,X.x)(me,Ke=>Oe.call(Ae,Ke,Le++)&&me.next(Ke)))})}},590:(on,pt,V)=>{"use strict";V.d(pt,{P:()=>me});var c=V(6805),X=V(9300),W=V(5698),Oe=V(6590),Ae=V(8068),Se=V(4671);function me(Le,Ke){const Ce=arguments.length>=2;return we=>we.pipe(Le?(0,X.h)((be,qe)=>Le(be,qe,we)):Se.y,(0,W.q)(1),Ce?(0,Oe.d)(Ke):(0,Ae.T)(()=>new c.K))}},4004:(on,pt,V)=>{"use strict";V.d(pt,{U:()=>W});var c=V(4482),X=V(5403);function W(Oe,Ae){return(0,c.e)((Se,me)=>{let Le=0;Se.subscribe((0,X.x)(me,Ke=>{me.next(Oe.call(Ae,Ke,Le++))}))})}},8189:(on,pt,V)=>{"use strict";V.d(pt,{J:()=>W});var c=V(5577),X=V(4671);function W(Oe=1/0){return(0,c.z)(X.y,Oe)}},5577:(on,pt,V)=>{"use strict";V.d(pt,{z:()=>Le});var c=V(4004),X=V(8421),W=V(4482),Oe=V(9672),Ae=V(5403),me=V(576);function Le(Ke,Ce,we=1/0){return(0,me.m)(Ce)?Le((be,qe)=>(0,c.U)((Ge,ot)=>Ce(be,Ge,qe,ot))((0,X.Xf)(Ke(be,qe))),we):("number"==typeof Ce&&(we=Ce),(0,W.e)((be,qe)=>function Se(Ke,Ce,we,be,qe,Ge,ot,It){const ke=[];let De=0,fe=0,q=!1;const ut=()=>{q&&!ke.length&&!De&&Ce.complete()},st=He=>De<be?it(He):ke.push(He),it=He=>{Ge&&Ce.next(He),De++;let ze=!1;(0,X.Xf)(we(He,fe++)).subscribe((0,Ae.x)(Ce,re=>{null==qe||qe(re),Ge?st(re):Ce.next(re)},()=>{ze=!0},void 0,()=>{if(ze)try{for(De--;ke.length&&De<be;){const re=ke.shift();ot?(0,Oe.f)(Ce,ot,()=>it(re)):it(re)}ut()}catch(re){Ce.error(re)}}))};return Ke.subscribe((0,Ae.x)(Ce,st,()=>{q=!0,ut()})),()=>{null==It||It()}}(be,qe,Ke,we)))}},5363:(on,pt,V)=>{"use strict";V.d(pt,{Q:()=>Oe});var c=V(9672),X=V(4482),W=V(5403);function Oe(Ae,Se=0){return(0,X.e)((me,Le)=>{me.subscribe((0,W.x)(Le,Ke=>(0,c.f)(Le,Ae,()=>Le.next(Ke),Se),()=>(0,c.f)(Le,Ae,()=>Le.complete(),Se),Ke=>(0,c.f)(Le,Ae,()=>Le.error(Ke),Se)))})}},5026:(on,pt,V)=>{"use strict";V.d(pt,{R:()=>Oe});var c=V(4482),X=V(5403);function W(Ae,Se,me,Le,Ke){return(Ce,we)=>{let be=me,qe=Se,Ge=0;Ce.subscribe((0,X.x)(we,ot=>{const It=Ge++;qe=be?Ae(qe,ot,It):(be=!0,ot),Le&&we.next(qe)},Ke&&(()=>{be&&we.next(qe),we.complete()})))}}function Oe(Ae,Se){return(0,c.e)(W(Ae,Se,arguments.length>=2,!0))}},3099:(on,pt,V)=>{"use strict";V.d(pt,{B:()=>Ae});var c=V(8421),X=V(7579),W=V(930),Oe=V(4482);function Ae(me={}){const{connector:Le=(()=>new X.x),resetOnError:Ke=!0,resetOnComplete:Ce=!0,resetOnRefCountZero:we=!0}=me;return be=>{let qe,Ge,ot,It=0,ke=!1,De=!1;const fe=()=>{null==Ge||Ge.unsubscribe(),Ge=void 0},q=()=>{fe(),qe=ot=void 0,ke=De=!1},ut=()=>{const st=qe;q(),null==st||st.unsubscribe()};return(0,Oe.e)((st,it)=>{It++,!De&&!ke&&fe();const He=ot=null!=ot?ot:Le();it.add(()=>{It--,0===It&&!De&&!ke&&(Ge=Se(ut,we))}),He.subscribe(it),!qe&&It>0&&(qe=new W.Hp({next:ze=>He.next(ze),error:ze=>{De=!0,fe(),Ge=Se(q,Ke,ze),He.error(ze)},complete:()=>{ke=!0,fe(),Ge=Se(q,Ce),He.complete()}}),(0,c.Xf)(st).subscribe(qe))})(be)}}function Se(me,Le,...Ke){if(!0===Le)return void me();if(!1===Le)return;const Ce=new W.Hp({next:()=>{Ce.unsubscribe(),me()}});return Le(...Ke).subscribe(Ce)}},8675:(on,pt,V)=>{"use strict";V.d(pt,{O:()=>Oe});var c=V(7272),X=V(7669),W=V(4482);function Oe(...Ae){const Se=(0,X.yG)(Ae);return(0,W.e)((me,Le)=>{(Se?(0,c.z)(Ae,me,Se):(0,c.z)(Ae,me)).subscribe(Le)})}},9468:(on,pt,V)=>{"use strict";V.d(pt,{R:()=>X});var c=V(4482);function X(W,Oe=0){return(0,c.e)((Ae,Se)=>{Se.add(W.schedule(()=>Ae.subscribe(Se),Oe))})}},3900:(on,pt,V)=>{"use strict";V.d(pt,{w:()=>Oe});var c=V(8421),X=V(4482),W=V(5403);function Oe(Ae,Se){return(0,X.e)((me,Le)=>{let Ke=null,Ce=0,we=!1;const be=()=>we&&!Ke&&Le.complete();me.subscribe((0,W.x)(Le,qe=>{null==Ke||Ke.unsubscribe();let Ge=0;const ot=Ce++;(0,c.Xf)(Ae(qe,ot)).subscribe(Ke=(0,W.x)(Le,It=>Le.next(Se?Se(qe,It,ot,Ge++):It),()=>{Ke=null,be()}))},()=>{we=!0,be()}))})}},5698:(on,pt,V)=>{"use strict";V.d(pt,{q:()=>Oe});var c=V(515),X=V(4482),W=V(5403);function Oe(Ae){return Ae<=0?()=>c.E:(0,X.e)((Se,me)=>{let Le=0;Se.subscribe((0,W.x)(me,Ke=>{++Le<=Ae&&(me.next(Ke),Ae<=Le&&me.complete())}))})}},8505:(on,pt,V)=>{"use strict";V.d(pt,{b:()=>Ae});var c=V(576),X=V(4482),W=V(5403),Oe=V(4671);function Ae(Se,me,Le){const Ke=(0,c.m)(Se)||me||Le?{next:Se,error:me,complete:Le}:Se;return Ke?(0,X.e)((Ce,we)=>{var be;null===(be=Ke.subscribe)||void 0===be||be.call(Ke);let qe=!0;Ce.subscribe((0,W.x)(we,Ge=>{var ot;null===(ot=Ke.next)||void 0===ot||ot.call(Ke,Ge),we.next(Ge)},()=>{var Ge;qe=!1,null===(Ge=Ke.complete)||void 0===Ge||Ge.call(Ke),we.complete()},Ge=>{var ot;qe=!1,null===(ot=Ke.error)||void 0===ot||ot.call(Ke,Ge),we.error(Ge)},()=>{var Ge,ot;qe&&(null===(Ge=Ke.unsubscribe)||void 0===Ge||Ge.call(Ke)),null===(ot=Ke.finalize)||void 0===ot||ot.call(Ke)}))}):Oe.y}},8068:(on,pt,V)=>{"use strict";V.d(pt,{T:()=>Oe});var c=V(6805),X=V(4482),W=V(5403);function Oe(Se=Ae){return(0,X.e)((me,Le)=>{let Ke=!1;me.subscribe((0,W.x)(Le,Ce=>{Ke=!0,Le.next(Ce)},()=>Ke?Le.complete():Le.error(Se())))})}function Ae(){return new c.K}},4408:(on,pt,V)=>{"use strict";V.d(pt,{o:()=>Ae});var c=V(727);class X extends c.w0{constructor(me,Le){super()}schedule(me,Le=0){return this}}const W={setInterval(Se,me,...Le){const{delegate:Ke}=W;return null!=Ke&&Ke.setInterval?Ke.setInterval(Se,me,...Le):setInterval(Se,me,...Le)},clearInterval(Se){const{delegate:me}=W;return((null==me?void 0:me.clearInterval)||clearInterval)(Se)},delegate:void 0};var Oe=V(8737);class Ae extends X{constructor(me,Le){super(me,Le),this.scheduler=me,this.work=Le,this.pending=!1}schedule(me,Le=0){var Ke;if(this.closed)return this;this.state=me;const Ce=this.id,we=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(we,Ce,Le)),this.pending=!0,this.delay=Le,this.id=null!==(Ke=this.id)&&void 0!==Ke?Ke:this.requestAsyncId(we,this.id,Le),this}requestAsyncId(me,Le,Ke=0){return W.setInterval(me.flush.bind(me,this),Ke)}recycleAsyncId(me,Le,Ke=0){if(null!=Ke&&this.delay===Ke&&!1===this.pending)return Le;null!=Le&&W.clearInterval(Le)}execute(me,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ke=this._execute(me,Le);if(Ke)return Ke;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Le){let Ce,Ke=!1;try{this.work(me)}catch(we){Ke=!0,Ce=we||new Error("Scheduled action threw falsy error")}if(Ke)return this.unsubscribe(),Ce}unsubscribe(){if(!this.closed){const{id:me,scheduler:Le}=this,{actions:Ke}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Oe.P)(Ke,this),null!=me&&(this.id=this.recycleAsyncId(Le,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(on,pt,V)=>{"use strict";V.d(pt,{v:()=>W});var c=V(6063);class X{constructor(Ae,Se=X.now){this.schedulerActionCtor=Ae,this.now=Se}schedule(Ae,Se=0,me){return new this.schedulerActionCtor(this,Ae).schedule(me,Se)}}X.now=c.l.now;class W extends X{constructor(Ae,Se=X.now){super(Ae,Se),this.actions=[],this._active=!1}flush(Ae){const{actions:Se}=this;if(this._active)return void Se.push(Ae);let me;this._active=!0;do{if(me=Ae.execute(Ae.state,Ae.delay))break}while(Ae=Se.shift());if(this._active=!1,me){for(;Ae=Se.shift();)Ae.unsubscribe();throw me}}}},4986:(on,pt,V)=>{"use strict";V.d(pt,{z:()=>W});var c=V(4408);const W=new(V(7565).v)(c.o)},6063:(on,pt,V)=>{"use strict";V.d(pt,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(on,pt,V)=>{"use strict";V.d(pt,{z:()=>c});const c={setTimeout(X,W,...Oe){const{delegate:Ae}=c;return null!=Ae&&Ae.setTimeout?Ae.setTimeout(X,W,...Oe):setTimeout(X,W,...Oe)},clearTimeout(X){const{delegate:W}=c;return((null==W?void 0:W.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(on,pt,V)=>{"use strict";V.d(pt,{h:()=>X});const X=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(on,pt,V)=>{"use strict";V.d(pt,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(on,pt,V)=>{"use strict";V.d(pt,{K:()=>X});const X=(0,V(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(on,pt,V)=>{"use strict";V.d(pt,{_6:()=>Se,jO:()=>Oe,yG:()=>Ae});var c=V(576);function W(me){return me[me.length-1]}function Oe(me){return(0,c.m)(W(me))?me.pop():void 0}function Ae(me){return function X(me){return me&&(0,c.m)(me.schedule)}(W(me))?me.pop():void 0}function Se(me,Le){return"number"==typeof W(me)?me.pop():Le}},4742:(on,pt,V)=>{"use strict";V.d(pt,{D:()=>Ae});const{isArray:c}=Array,{getPrototypeOf:X,prototype:W,keys:Oe}=Object;function Ae(me){if(1===me.length){const Le=me[0];if(c(Le))return{args:Le,keys:null};if(function Se(me){return me&&"object"==typeof me&&X(me)===W}(Le)){const Ke=Oe(Le);return{args:Ke.map(Ce=>Le[Ce]),keys:Ke}}}return{args:me,keys:null}}},8737:(on,pt,V)=>{"use strict";function c(X,W){if(X){const Oe=X.indexOf(W);0<=Oe&&X.splice(Oe,1)}}V.d(pt,{P:()=>c})},3888:(on,pt,V)=>{"use strict";function c(X){const Oe=X(Ae=>{Error.call(Ae),Ae.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}V.d(pt,{d:()=>c})},1810:(on,pt,V)=>{"use strict";function c(X,W){return X.reduce((Oe,Ae,Se)=>(Oe[Ae]=W[Se],Oe),{})}V.d(pt,{n:()=>c})},2806:(on,pt,V)=>{"use strict";V.d(pt,{O:()=>Oe,x:()=>W});var c=V(2416);let X=null;function W(Ae){if(c.v.useDeprecatedSynchronousErrorHandling){const Se=!X;if(Se&&(X={errorThrown:!1,error:null}),Ae(),Se){const{errorThrown:me,error:Le}=X;if(X=null,me)throw Le}}else Ae()}function Oe(Ae){c.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=Ae)}},9672:(on,pt,V)=>{"use strict";function c(X,W,Oe,Ae=0,Se=!1){const me=W.schedule(function(){Oe(),Se?X.add(this.schedule(null,Ae)):this.unsubscribe()},Ae);if(X.add(me),!Se)return me}V.d(pt,{f:()=>c})},4671:(on,pt,V)=>{"use strict";function c(X){return X}V.d(pt,{y:()=>c})},1144:(on,pt,V)=>{"use strict";V.d(pt,{z:()=>c});const c=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(on,pt,V)=>{"use strict";V.d(pt,{D:()=>X});var c=V(576);function X(W){return Symbol.asyncIterator&&(0,c.m)(null==W?void 0:W[Symbol.asyncIterator])}},576:(on,pt,V)=>{"use strict";function c(X){return"function"==typeof X}V.d(pt,{m:()=>c})},3670:(on,pt,V)=>{"use strict";V.d(pt,{c:()=>W});var c=V(8822),X=V(576);function W(Oe){return(0,X.m)(Oe[c.L])}},6495:(on,pt,V)=>{"use strict";V.d(pt,{T:()=>W});var c=V(2202),X=V(576);function W(Oe){return(0,X.m)(null==Oe?void 0:Oe[c.h])}},8239:(on,pt,V)=>{"use strict";V.d(pt,{t:()=>X});var c=V(576);function X(W){return(0,c.m)(null==W?void 0:W.then)}},3260:(on,pt,V)=>{"use strict";V.d(pt,{L:()=>Oe,Q:()=>W});var c=V(655),X=V(576);function W(Ae){return(0,c.FC)(this,arguments,function*(){const me=Ae.getReader();try{for(;;){const{value:Le,done:Ke}=yield(0,c.qq)(me.read());if(Ke)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(Le)}}finally{me.releaseLock()}})}function Oe(Ae){return(0,X.m)(null==Ae?void 0:Ae.getReader)}},4482:(on,pt,V)=>{"use strict";V.d(pt,{A:()=>X,e:()=>W});var c=V(576);function X(Oe){return(0,c.m)(null==Oe?void 0:Oe.lift)}function W(Oe){return Ae=>{if(X(Ae))return Ae.lift(function(Se){try{return Oe(Se,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(on,pt,V)=>{"use strict";V.d(pt,{Z:()=>Oe});var c=V(4004);const{isArray:X}=Array;function Oe(Ae){return(0,c.U)(Se=>function W(Ae,Se){return X(Se)?Ae(...Se):Ae(Se)}(Ae,Se))}},5032:(on,pt,V)=>{"use strict";function c(){}V.d(pt,{Z:()=>c})},9635:(on,pt,V)=>{"use strict";V.d(pt,{U:()=>W,z:()=>X});var c=V(4671);function X(...Oe){return W(Oe)}function W(Oe){return 0===Oe.length?c.y:1===Oe.length?Oe[0]:function(Se){return Oe.reduce((me,Le)=>Le(me),Se)}}},7849:(on,pt,V)=>{"use strict";V.d(pt,{h:()=>W});var c=V(2416),X=V(3410);function W(Oe){X.z.setTimeout(()=>{const{onUnhandledError:Ae}=c.v;if(!Ae)throw Oe;Ae(Oe)})}},4532:(on,pt,V)=>{"use strict";function c(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(pt,{z:()=>c})},863:(on,pt,V)=>{var c={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,1435,9230],"./ion-datetime_3.entry.js":[4959,1435,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function X(W){if(!V.o(c,W))return Promise.resolve().then(()=>{var Se=new Error("Cannot find module '"+W+"'");throw Se.code="MODULE_NOT_FOUND",Se});var Oe=c[W],Ae=Oe[0];return Promise.all(Oe.slice(1).map(V.e)).then(()=>V(Ae))}X.keys=()=>Object.keys(c),X.id=863,on.exports=X},655:(on,pt,V)=>{"use strict";V.d(pt,{FC:()=>De,KL:()=>q,ZT:()=>X,_T:()=>Oe,gn:()=>Ae,mG:()=>Le,qq:()=>ke});var c=function(ce,ge){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ie){ve.__proto__=ie}||function(ve,ie){for(var Pe in ie)Object.prototype.hasOwnProperty.call(ie,Pe)&&(ve[Pe]=ie[Pe])})(ce,ge)};function X(ce,ge){if("function"!=typeof ge&&null!==ge)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ve(){this.constructor=ce}c(ce,ge),ce.prototype=null===ge?Object.create(ge):(ve.prototype=ge.prototype,new ve)}function Oe(ce,ge){var ve={};for(var ie in ce)Object.prototype.hasOwnProperty.call(ce,ie)&&ge.indexOf(ie)<0&&(ve[ie]=ce[ie]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ie=Object.getOwnPropertySymbols(ce);Pe<ie.length;Pe++)ge.indexOf(ie[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ce,ie[Pe])&&(ve[ie[Pe]]=ce[ie[Pe]])}return ve}function Ae(ce,ge,ve,ie){var et,Pe=arguments.length,Ie=Pe<3?ge:null===ie?ie=Object.getOwnPropertyDescriptor(ge,ve):ie;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ie=Reflect.decorate(ce,ge,ve,ie);else for(var Ve=ce.length-1;Ve>=0;Ve--)(et=ce[Ve])&&(Ie=(Pe<3?et(Ie):Pe>3?et(ge,ve,Ie):et(ge,ve))||Ie);return Pe>3&&Ie&&Object.defineProperty(ge,ve,Ie),Ie}function Le(ce,ge,ve,ie){return new(ve||(ve=Promise))(function(Ie,et){function Ve(Ue){try{$e(ie.next(Ue))}catch(Ne){et(Ne)}}function We(Ue){try{$e(ie.throw(Ue))}catch(Ne){et(Ne)}}function $e(Ue){Ue.done?Ie(Ue.value):function Pe(Ie){return Ie instanceof ve?Ie:new ve(function(et){et(Ie)})}(Ue.value).then(Ve,We)}$e((ie=ie.apply(ce,ge||[])).next())})}function ke(ce){return this instanceof ke?(this.v=ce,this):new ke(ce)}function De(ce,ge,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ie=ve.apply(ce,ge||[]),Ie=[];return Pe={},et("next"),et("throw"),et("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function et(tt){ie[tt]&&(Pe[tt]=function(_t){return new Promise(function(Kt,Ut){Ie.push([tt,_t,Kt,Ut])>1||Ve(tt,_t)})})}function Ve(tt,_t){try{!function We(tt){tt.value instanceof ke?Promise.resolve(tt.value.v).then($e,Ue):Ne(Ie[0][2],tt)}(ie[tt](_t))}catch(Kt){Ne(Ie[0][3],Kt)}}function $e(tt){Ve("next",tt)}function Ue(tt){Ve("throw",tt)}function Ne(tt,_t){tt(_t),Ie.shift(),Ie.length&&Ve(Ie[0][0],Ie[0][1])}}function q(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,ge=ce[Symbol.asyncIterator];return ge?ge.call(ce):(ce=function be(ce){var ge="function"==typeof Symbol&&Symbol.iterator,ve=ge&&ce[ge],ie=0;if(ve)return ve.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&ie>=ce.length&&(ce=void 0),{value:ce&&ce[ie++],done:!ce}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),ve={},ie("next"),ie("throw"),ie("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function ie(Ie){ve[Ie]=ce[Ie]&&function(et){return new Promise(function(Ve,We){!function Pe(Ie,et,Ve,We){Promise.resolve(We).then(function($e){Ie({value:$e,done:Ve})},et)}(Ve,We,(et=ce[Ie](et)).done,et.value)})}}}},6895:(on,pt,V)=>{"use strict";V.d(pt,{Do:()=>q,EM:()=>ds,HT:()=>Ae,JF:()=>cs,K0:()=>me,Mx:()=>ai,O5:()=>ye,PM:()=>Ao,S$:()=>ke,V_:()=>Ce,Ye:()=>ut,b0:()=>fe,bD:()=>ws,ez:()=>As,q:()=>W,sg:()=>Di,tP:()=>Rn,w_:()=>Se});var c=V(4650);let X=null;function W(){return X}function Ae(O){X||(X=O)}class Se{}const me=new c.OlP("DocumentToken");let Le=(()=>{class O{historyGo(F){throw new Error("Not implemented")}}return O.\u0275fac=function(F){return new(F||O)},O.\u0275prov=c.Yz7({token:O,factory:function(){return function Ke(){return(0,c.LFG)(we)}()},providedIn:"platform"}),O})();const Ce=new c.OlP("Location Initialized");let we=(()=>{class O extends Le{constructor(F){super(),this._doc=F,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(F){const se=W().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",F,!1),()=>se.removeEventListener("popstate",F)}onHashChange(F){const se=W().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",F,!1),()=>se.removeEventListener("hashchange",F)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(F){this.location.pathname=F}pushState(F,se,Me){be()?this._history.pushState(F,se,Me):this.location.hash=Me}replaceState(F,se,Me){be()?this._history.replaceState(F,se,Me):this.location.hash=Me}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return O.\u0275fac=function(F){return new(F||O)(c.LFG(me))},O.\u0275prov=c.Yz7({token:O,factory:function(){return function qe(){return new we((0,c.LFG)(me))}()},providedIn:"platform"}),O})();function be(){return!!window.history.pushState}function Ge(O,Q){if(0==O.length)return Q;if(0==Q.length)return O;let F=0;return O.endsWith("/")&&F++,Q.startsWith("/")&&F++,2==F?O+Q.substring(1):1==F?O+Q:O+"/"+Q}function ot(O){const Q=O.match(/#|\?|$/),F=Q&&Q.index||O.length;return O.slice(0,F-("/"===O[F-1]?1:0))+O.slice(F)}function It(O){return O&&"?"!==O[0]?"?"+O:O}let ke=(()=>{class O{historyGo(F){throw new Error("Not implemented")}}return O.\u0275fac=function(F){return new(F||O)},O.\u0275prov=c.Yz7({token:O,factory:function(){return(0,c.f3M)(fe)},providedIn:"root"}),O})();const De=new c.OlP("appBaseHref");let fe=(()=>{class O extends ke{constructor(F,se){var Me,Ft,Ht;super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=null!==(Me=null!==(Ft=null!=se?se:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Ft?Ft:null===(Ht=(0,c.f3M)(me).location)||void 0===Ht?void 0:Ht.origin)&&void 0!==Me?Me:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return Ge(this._baseHref,F)}path(F=!1){const se=this._platformLocation.pathname+It(this._platformLocation.search),Me=this._platformLocation.hash;return Me&&F?`${se}${Me}`:se}pushState(F,se,Me,Ft){const Ht=this.prepareExternalUrl(Me+It(Ft));this._platformLocation.pushState(F,se,Ht)}replaceState(F,se,Me,Ft){const Ht=this.prepareExternalUrl(Me+It(Ft));this._platformLocation.replaceState(F,se,Ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){var se,Me;null===(se=(Me=this._platformLocation).historyGo)||void 0===se||se.call(Me,F)}}return O.\u0275fac=function(F){return new(F||O)(c.LFG(Le),c.LFG(De,8))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),q=(()=>{class O extends ke{constructor(F,se){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(F){const se=Ge(this._baseHref,F);return se.length>0?"#"+se:se}pushState(F,se,Me,Ft){let Ht=this.prepareExternalUrl(Me+It(Ft));0==Ht.length&&(Ht=this._platformLocation.pathname),this._platformLocation.pushState(F,se,Ht)}replaceState(F,se,Me,Ft){let Ht=this.prepareExternalUrl(Me+It(Ft));0==Ht.length&&(Ht=this._platformLocation.pathname),this._platformLocation.replaceState(F,se,Ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){var se,Me;null===(se=(Me=this._platformLocation).historyGo)||void 0===se||se.call(Me,F)}}return O.\u0275fac=function(F){return new(F||O)(c.LFG(Le),c.LFG(De,8))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac}),O})(),ut=(()=>{class O{constructor(F){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const se=this._locationStrategy.getBaseHref();this._baseHref=ot(He(se)),this._locationStrategy.onPopState(Me=>{this._subject.emit({url:this.path(!0),pop:!0,state:Me.state,type:Me.type})})}ngOnDestroy(){var F;null===(F=this._urlChangeSubscription)||void 0===F||F.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,se=""){return this.path()==this.normalize(F+It(se))}normalize(F){return O.stripTrailingSlash(function it(O,Q){return O&&Q.startsWith(O)?Q.substring(O.length):Q}(this._baseHref,He(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,se="",Me=null){this._locationStrategy.pushState(Me,"",F,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+It(se)),Me)}replaceState(F,se="",Me=null){this._locationStrategy.replaceState(Me,"",F,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+It(se)),Me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){var se,Me;null===(se=(Me=this._locationStrategy).historyGo)||void 0===se||se.call(Me,F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{const se=this._urlChangeListeners.indexOf(F);var Me;this._urlChangeListeners.splice(se,1),0===this._urlChangeListeners.length&&(null===(Me=this._urlChangeSubscription)||void 0===Me||Me.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",se){this._urlChangeListeners.forEach(Me=>Me(F,se))}subscribe(F,se,Me){return this._subject.subscribe({next:F,error:se,complete:Me})}}return O.normalizeQueryParams=It,O.joinWithSlash=Ge,O.stripTrailingSlash=ot,O.\u0275fac=function(F){return new(F||O)(c.LFG(ke))},O.\u0275prov=c.Yz7({token:O,factory:function(){return function st(){return new ut((0,c.LFG)(ke))}()},providedIn:"root"}),O})();function He(O){return O.replace(/\/index.html$/,"")}function ai(O,Q){Q=encodeURIComponent(Q);for(const F of O.split(";")){const se=F.indexOf("="),[Me,Ft]=-1==se?[F,""]:[F.slice(0,se),F.slice(se+1)];if(Me.trim()===Q)return decodeURIComponent(Ft)}return null}class xi{constructor(Q,F,se,Me){this.$implicit=Q,this.ngForOf=F,this.index=se,this.count=Me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class O{constructor(F,se,Me){this._viewContainer=F,this._template=se,this._differs=Me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const se=this._viewContainer;F.forEachOperation((Me,Ft,Ht)=>{if(null==Me.previousIndex)se.createEmbeddedView(this._template,new xi(Me.item,this._ngForOf,-1,-1),null===Ht?void 0:Ht);else if(null==Ht)se.remove(null===Ft?void 0:Ft);else if(null!==Ft){const On=se.get(Ft);se.move(On,Ht),Xr(On,Me)}});for(let Me=0,Ft=se.length;Me<Ft;Me++){const On=se.get(Me).context;On.index=Me,On.count=Ft,On.ngForOf=this._ngForOf}F.forEachIdentityChange(Me=>{Xr(se.get(Me.currentIndex),Me)})}static ngTemplateContextGuard(F,se){return!0}}return O.\u0275fac=function(F){return new(F||O)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},O.\u0275dir=c.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),O})();function Xr(O,Q){O.context.$implicit=Q.item}let ye=(()=>{class O{constructor(F,se){this._viewContainer=F,this._context=new lt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){ht("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){ht("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,se){return!0}}return O.\u0275fac=function(F){return new(F||O)(c.Y36(c.s_b),c.Y36(c.Rgc))},O.\u0275dir=c.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),O})();class lt{constructor(){this.$implicit=null,this.ngIf=null}}function ht(O,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,c.AaK)(Q)}'.`)}let Rn=(()=>{class O{constructor(F){this._viewContainerRef=F,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(F){if(F.ngTemplateOutlet||F.ngTemplateOutletInjector){const se=this._viewContainerRef;if(this._viewRef&&se.remove(se.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Me,ngTemplateOutletContext:Ft,ngTemplateOutletInjector:Ht}=this;this._viewRef=se.createEmbeddedView(Me,Ft,Ht?{injector:Ht}:void 0)}else this._viewRef=null}else this._viewRef&&F.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return O.\u0275fac=function(F){return new(F||O)(c.Y36(c.s_b))},O.\u0275dir=c.lG2({type:O,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),O})(),As=(()=>{class O{}return O.\u0275fac=function(F){return new(F||O)},O.\u0275mod=c.oAB({type:O}),O.\u0275inj=c.cJS({}),O})();const ws="browser";function Ao(O){return"server"===O}let ds=(()=>{class O{}return O.\u0275prov=(0,c.Yz7)({token:O,providedIn:"root",factory:()=>new Bs((0,c.LFG)(me),window)}),O})();class Bs{constructor(Q,F){this.document=Q,this.window=F,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const F=function jo(O,Q){const F=O.getElementById(Q)||O.getElementsByName(Q)[0];if(F)return F;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const se=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let Me=se.currentNode;for(;Me;){const Ft=Me.shadowRoot;if(Ft){const Ht=Ft.getElementById(Q)||Ft.querySelector(`[name="${Q}"]`);if(Ht)return Ht}Me=se.nextNode()}}return null}(this.document,Q);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=Q)}}scrollToElement(Q){const F=Q.getBoundingClientRect(),se=F.left+this.window.pageXOffset,Me=F.top+this.window.pageYOffset,Ft=this.offset();this.window.scrollTo(se-Ft[0],Me-Ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function Ji(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class cs{}},4650:(on,pt,V)=>{"use strict";V.d(pt,{$8M:()=>Va,$Z:()=>Rg,AFp:()=>SE,ALo:()=>Y0,AaK:()=>Le,CHM:()=>Ys,CRH:()=>iE,CZH:()=>Pv,CqO:()=>tv,D6c:()=>jb,DdM:()=>j0,EJc:()=>rb,EpF:()=>Zm,F$t:()=>sv,F4k:()=>cd,FYo:()=>_f,FiY:()=>lr,G48:()=>Cb,Gf:()=>nE,GfV:()=>Do,GkF:()=>Zf,Gpc:()=>we,Hsn:()=>ey,JOm:()=>Ga,KtG:()=>mo,LFG:()=>nn,Lbi:()=>eb,Lck:()=>YI,MMx:()=>D_,NdJ:()=>Qm,OlP:()=>Li,Oqu:()=>Jf,P3R:()=>vg,PXZ:()=>vb,Q6J:()=>tm,QGY:()=>Yh,QP$:()=>Lr,Qsj:()=>mm,R0b:()=>Ac,RDi:()=>Z,Rgc:()=>Ay,SBq:()=>na,Sil:()=>sb,Suo:()=>rE,TTD:()=>fo,TgZ:()=>nm,X6Q:()=>bb,XFs:()=>Qt,Xpm:()=>Fr,Xts:()=>dp,Y36:()=>Ic,YKP:()=>O0,YNc:()=>Km,Yjl:()=>_s,Yz7:()=>Ut,Z0I:()=>tr,ZZ4:()=>Z_,_Bn:()=>P0,_UZ:()=>qf,_Vd:()=>Od,_c5:()=>Vb,_uU:()=>uy,aQg:()=>Q_,c2e:()=>tb,cJS:()=>wn,cg1:()=>i,dDg:()=>pb,dqk:()=>xn,eFA:()=>VE,ekj:()=>fv,eoX:()=>LE,f3M:()=>vn,g9A:()=>xE,h0i:()=>lm,hGG:()=>Ub,hij:()=>om,iGM:()=>tE,ifc:()=>rr,ip1:()=>TE,jDz:()=>N0,kL8:()=>t,kYT:()=>Ni,lG2:()=>gi,lqb:()=>Dl,lri:()=>NE,n5z:()=>kt,oAB:()=>Pr,oxw:()=>Jm,q4F:()=>kd,qLn:()=>yc,qOj:()=>Vm,qZA:()=>Wh,rWj:()=>FE,sBO:()=>Db,sIi:()=>tg,s_b:()=>xv,soG:()=>Ov,tb:()=>ME,tp0:()=>ss,uIk:()=>Eu,vHH:()=>ke,vpe:()=>eh,wAp:()=>m,xi3:()=>q0,xp6:()=>$o,z2F:()=>kv,zSh:()=>_h,zs3:()=>Wl});var c=V(7579),X=V(727),W=V(9751),Oe=V(6451),Ae=V(3099);function Se(n){for(let r in n)if(n[r]===Se)return r;throw Error("Could not find renamed property on target object.")}function me(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ke(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Ce=Se({__forward_ref__:Se});function we(n){return n.__forward_ref__=we,n.toString=function(){return Le(this())},n}function be(n){return qe(n)?n():n}function qe(n){return"function"==typeof n&&n.hasOwnProperty(Ce)&&n.__forward_ref__===we}function Ge(n){return n&&!!n.\u0275providers}const It="https://g.co/ng/security#xss";class ke extends Error{constructor(r,s){super(function De(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function fe(n){return"string"==typeof n?n:null==n?"":String(n)}function He(n,r){throw new ke(-201,!1)}function Ue(n,r){null==n&&function Ne(n,r,s,d){throw new Error(`ASSERTION ERROR: ${n}`+(null==d?"":` [Expected=> ${s} ${d} ${r} <=Actual]`))}(r,n,null,"!=")}function Ut(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function er(n){return qn(n,Mr)||qn(n,jn)}function tr(n){return null!==er(n)}function qn(n,r){return n.hasOwnProperty(r)?n[r]:null}function cr(n){return n&&(n.hasOwnProperty(Ln)||n.hasOwnProperty(Wt))?n[Ln]:null}const Mr=Se({\u0275prov:Se}),Ln=Se({\u0275inj:Se}),jn=Se({ngInjectableDef:Se}),Wt=Se({ngInjectorDef:Se});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let ii;function Vr(n){const r=ii;return ii=n,r}function Kr(n,r,s){const d=er(n);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:s&Qt.Optional?null:void 0!==r?r:void He(Le(n))}const xn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_r={},Er="__NG_DI_FLAG__",Gr="ngTempTokenPath",ki=/\n/gm,bi="__source";let dr;function Wn(n){const r=dr;return dr=n,r}function Ar(n,r=Qt.Default){if(void 0===dr)throw new ke(-203,!1);return null===dr?Kr(n,void 0,r):dr.get(n,r&Qt.Optional?null:void 0,r)}function nn(n,r=Qt.Default){return(function Rr(){return ii}()||Ar)(be(n),r)}function vn(n,r=Qt.Default){return nn(n,Hn(r))}function Hn(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Nn(n){const r=[];for(let s=0;s<n.length;s++){const d=be(n[s]);if(Array.isArray(d)){if(0===d.length)throw new ke(900,!1);let f,y=Qt.Default;for(let b=0;b<d.length;b++){const R=d[b],N=Ye(R);"number"==typeof N?-1===N?f=R.token:y|=N:f=R}r.push(nn(f,y))}else r.push(nn(d))}return r}function Vn(n,r){return n[Er]=r,n.prototype[Er]=r,n}function Ye(n){return n[Er]}function Ct(n){return{toString:n}.toString()}var Et=(()=>((Et=Et||{})[Et.OnPush=0]="OnPush",Et[Et.Default=1]="Default",Et))(),rr=(()=>{return(n=rr||(rr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",rr;var n})();const zr={},bn=[],yt=Se({\u0275cmp:Se}),je=Se({\u0275dir:Se}),Re=Se({\u0275pipe:Se}),Dt=Se({\u0275mod:Se}),Mt=Se({\u0275fac:Se}),Cn=Se({__NG_ELEMENT_ID__:Se});let nr=0;function Fr(n){return Ct(()=>{const s=!0===n.standalone,d={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Et.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||bn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||rr.Emulated,id:"c"+nr++,styles:n.styles||bn,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},y=n.dependencies,b=n.features;return f.inputs=vi(n.inputs,d),f.outputs=vi(n.outputs),b&&b.forEach(R=>R(f)),f.directiveDefs=y?()=>("function"==typeof y?y():y).map(pi).filter(Ci):null,f.pipeDefs=y?()=>("function"==typeof y?y():y).map(Wr).filter(Ci):null,f})}function pi(n){return ir(n)||Or(n)}function Ci(n){return null!==n}function Pr(n){return Ct(()=>({type:n.type,bootstrap:n.bootstrap||bn,declarations:n.declarations||bn,imports:n.imports||bn,exports:n.exports||bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ni(n,r){return Ct(()=>{const s=ai(n,!0);s.declarations=r.declarations||bn,s.imports=r.imports||bn,s.exports=r.exports||bn})}function vi(n,r){if(null==n)return zr;const s={};for(const d in n)if(n.hasOwnProperty(d)){let f=n[d],y=f;Array.isArray(f)&&(y=f[1],f=f[0]),s[f]=d,r&&(r[f]=y)}return s}const gi=Fr;function _s(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ir(n){return n[yt]||null}function Or(n){return n[je]||null}function Wr(n){return n[Re]||null}function Lr(n){const r=ir(n)||Or(n)||Wr(n);return null!==r&&r.standalone}function ai(n,r){const s=n[Dt]||null;if(!s&&!0===r)throw new Error(`Type ${Le(n)} does not have '\u0275mod' property.`);return s}function _i(n){return Array.isArray(n)&&"object"==typeof n[1]}function Zi(n){return Array.isArray(n)&&!0===n[1]}function ls(n){return 0!=(4&n.flags)}function Mi(n){return n.componentOffset>-1}function Qi(n){return 1==(1&n.flags)}function Wi(n){return null!==n.template}function ra(n){return 0!=(256&n[2])}function Ji(n,r){return n.hasOwnProperty(Mt)?n[Mt]:null}class jo{constructor(r,s,d){this.previousValue=r,this.currentValue=s,this.firstChange=d}isFirstChange(){return this.firstChange}}function fo(){return cs}function cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Za),sa}function sa(){const n=po(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===zr)n.previous=r;else for(let d in r)s[d]=r[d];n.current=null,this.ngOnChanges(r)}}function Za(n,r,s,d){const f=this.declaredInputs[s],y=po(n)||function go(n,r){return n[Qa]=r}(n,{previous:zr,current:null}),b=y.current||(y.current={}),R=y.previous,N=R[f];b[f]=new jo(N&&N.currentValue,r,R===zr),n[d]=r}fo.ngInherit=!0;const Qa="__ngSimpleChanges__";function po(n){return n[Qa]||null}function Ri(n){for(;Array.isArray(n);)n=n[0];return n}function ao(n,r){return Ri(r[n])}function ts(n,r){return Ri(r[n.index])}function z(n,r){return n.data[r]}function U(n,r){const s=r[n];return _i(s)?s:s[0]}function Tt(n){return 64==(64&n[2])}function Dn(n,r){return null==r?null:n[r]}function yr(n){n[18]=0}function Yr(n,r){n[5]+=r;let s=n,d=n[3];for(;null!==d&&(1===r&&1===s[5]||-1===r&&0===s[5]);)d[5]+=r,s=d,d=d[3]}const ln={lFrame:ks(null),bindingsEnabled:!0};function bt(){return ln.bindingsEnabled}function Yt(){return ln.lFrame.lView}function Tr(){return ln.lFrame.tView}function Ys(n){return ln.lFrame.contextLView=n,n[8]}function mo(n){return ln.lFrame.contextLView=null,n}function ui(){let n=Go();for(;null!==n&&64===n.type;)n=n.parent;return n}function Go(){return ln.lFrame.currentTNode}function qs(n,r){const s=ln.lFrame;s.currentTNode=n,s.isParent=r}function oa(){return ln.lFrame.isParent}function Pa(){ln.lFrame.isParent=!1}function bs(){const n=ln.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function lo(){return ln.lFrame.bindingIndex++}function Wo(n,r){const s=ln.lFrame;s.bindingIndex=s.bindingRootIndex=n,yo(r)}function yo(n){ln.lFrame.currentDirectiveIndex=n}function ko(){return ln.lFrame.currentQueryIndex}function al(n){ln.lFrame.currentQueryIndex=n}function xc(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function vo(n,r,s){if(s&Qt.SkipSelf){let f=r,y=n;for(;!(f=f.parent,null!==f||s&Qt.Host||(f=xc(y),null===f||(y=y[15],10&f.type))););if(null===f)return!1;r=f,n=y}const d=ln.lFrame=aa();return d.currentTNode=r,d.lView=n,!0}function No(n){const r=aa(),s=n[1];ln.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function aa(){const n=ln.lFrame,r=null===n?null:n.child;return null===r?ks(n):r}function ks(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function _o(){const n=ln.lFrame;return ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Oa=_o;function Ui(){const n=_o();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function F(){return ln.lFrame.selectedIndex}function se(n){ln.lFrame.selectedIndex=n}function Me(){const n=ln.lFrame;return z(n.tView,n.selectedIndex)}function Zn(n,r){for(let s=r.directiveStart,d=r.directiveEnd;s<d;s++){const y=n.data[s].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:R,ngAfterViewInit:N,ngAfterViewChecked:Y,ngOnDestroy:le}=y;b&&(n.contentHooks||(n.contentHooks=[])).push(-s,b),R&&((n.contentHooks||(n.contentHooks=[])).push(s,R),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,R)),N&&(n.viewHooks||(n.viewHooks=[])).push(-s,N),Y&&((n.viewHooks||(n.viewHooks=[])).push(s,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Y)),null!=le&&(n.destroyHooks||(n.destroyHooks=[])).push(s,le)}}function ni(n,r,s){Xt(n,r,3,s)}function Ei(n,r,s,d){(3&n[2])===s&&Xt(n,r,s,d)}function Ii(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Xt(n,r,s,d){const y=null!=d?d:-1,b=r.length-1;let R=0;for(let N=void 0!==d?65535&n[18]:0;N<b;N++)if("number"==typeof r[N+1]){if(R=r[N],null!=d&&R>=d)break}else r[N]<0&&(n[18]+=65536),(R<y||-1==y)&&(mi(n,s,r,N),n[18]=(4294901760&n[18])+N+2),N++}function mi(n,r,s,d){const f=s[d]<0,y=s[d+1],R=n[f?-s[d]:s[d]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(R)}finally{}}}else try{y.call(R)}finally{}}class hs{constructor(r,s,d){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=d}}function wu(n,r,s){let d=0;for(;d<s.length;){const f=s[d];if("number"==typeof f){if(0!==f)break;d++;const y=s[d++],b=s[d++],R=s[d++];n.setAttribute(r,b,R,y)}else{const y=f,b=s[++d];bu(y)?n.setProperty(r,y,b):n.setAttribute(r,y,b),d++}}return d}function la(n){return 3===n||4===n||6===n}function bu(n){return 64===n.charCodeAt(0)}function Eo(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let d=0;d<r.length;d++){const f=r[d];"number"==typeof f?s=f:0===s||Ko(n,s,f,null,-1===s||2===s?r[++d]:null)}}return n}function Ko(n,r,s,d,f){let y=0,b=n.length;if(-1===r)b=-1;else for(;y<n.length;){const R=n[y++];if("number"==typeof R){if(R===r){b=-1;break}if(R>r){b=y-1;break}}}for(;y<n.length;){const R=n[y];if("number"==typeof R)break;if(R===s){if(null===d)return void(null!==f&&(n[y+1]=f));if(d===n[y+1])return void(n[y+2]=f)}y++,null!==d&&y++,null!==f&&y++}-1!==b&&(n.splice(b,0,r),y=b+1),n.splice(y++,0,s),null!==d&&n.splice(y++,0,d),null!==f&&n.splice(y++,0,f)}function ka(n){return-1!==n}function Ja(n){return 32767&n}function Na(n,r){let s=function eu(n){return n>>16}(n),d=r;for(;s>0;)d=d[15],s--;return d}let ml=!0;function fr(n){const r=ml;return ml=n,r}let pr=0;const Ms={};function Cs(n,r){const s=gn(n,r);if(-1!==s)return s;const d=r[1];d.firstCreatePass&&(n.injectorIndex=r.length,wi(d.data,n),wi(r,null),wi(d.blueprint,null));const f=Fa(n,r),y=n.injectorIndex;if(ka(f)){const b=Ja(f),R=Na(f,r),N=R[1].data;for(let Y=0;Y<8;Y++)r[y+Y]=R[b+Y]|N[b+Y]}return r[y+8]=f,y}function wi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function gn(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Fa(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,d=null,f=r;for(;null!==f;){if(d=tu(f),null===d)return-1;if(s++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|s<<16}return-1}function Ca(n,r,s){!function Jr(n,r,s){let d;"string"==typeof s?d=s.charCodeAt(0)||0:s.hasOwnProperty(Cn)&&(d=s[Cn]),null==d&&(d=s[Cn]=pr++);const f=255&d;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function Cu(n,r,s){if(s&Qt.Optional||void 0!==n)return n;He()}function Yo(n,r,s,d){if(s&Qt.Optional&&void 0===d&&(d=null),0==(s&(Qt.Self|Qt.Host))){const f=n[9],y=Vr(void 0);try{return f?f.get(r,d,s&Qt.Optional):Kr(r,d,s&Qt.Optional)}finally{Vr(y)}}return Cu(d,0,s)}function Io(n,r,s,d=Qt.Default,f){if(null!==n){if(1024&r[2]){const b=function Zo(n,r,s,d,f){let y=n,b=r;for(;null!==y&&null!==b&&1024&b[2]&&!(256&b[2]);){const R=La(y,b,s,d|Qt.Self,Ms);if(R!==Ms)return R;let N=y.parent;if(!N){const Y=b[21];if(Y){const le=Y.get(s,Ms,d);if(le!==Ms)return le}N=tu(b),b=b[15]}y=N}return f}(n,r,s,d,Ms);if(b!==Ms)return b}const y=La(n,r,s,d,Ms);if(y!==Ms)return y}return Yo(r,s,d,f)}function La(n,r,s,d,f){const y=function Ba(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Cn)?n[Cn]:void 0;return"number"==typeof r?r>=0?255&r:Mc:r}(s);if("function"==typeof y){if(!vo(r,n,d))return d&Qt.Host?Cu(f,0,d):Yo(r,s,d,f);try{const b=y(d);if(null!=b||d&Qt.Optional)return b;He()}finally{Oa()}}else if("number"==typeof y){let b=null,R=gn(n,r),N=-1,Y=d&Qt.Host?r[16][6]:null;for((-1===R||d&Qt.SkipSelf)&&(N=-1===R?Fa(n,r):r[R+8],-1!==N&&ul(d,!1)?(b=r[1],R=Ja(N),r=Na(N,r)):R=-1);-1!==R;){const le=r[1];if($a(y,R,le.data)){const xe=Du(R,r,s,b,d,Y);if(xe!==Ms)return xe}N=r[R+8],-1!==N&&ul(d,r[1].data[R+8]===Y)&&$a(y,R,r)?(b=le,R=Ja(N),r=Na(N,r)):R=-1}}return f}function Du(n,r,s,d,f,y){const b=r[1],R=b.data[n+8],le=Ta(R,b,s,null==d?Mi(R)&&ml:d!=b&&0!=(3&R.type),f&Qt.Host&&y===R);return null!==le?fs(r,b,le,R):Ms}function Ta(n,r,s,d,f){const y=n.providerIndexes,b=r.data,R=1048575&y,N=n.directiveStart,le=y>>20,dt=f?R+le:n.directiveEnd;for(let xt=d?R:R+le;xt<dt;xt++){const Zt=b[xt];if(xt<N&&s===Zt||xt>=N&&Zt.type===s)return xt}if(f){const xt=b[N];if(xt&&Wi(xt)&&xt.type===s)return N}return null}function fs(n,r,s,d){let f=n[s];const y=r.data;if(function pn(n){return n instanceof hs}(f)){const b=f;b.resolving&&function ut(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function q(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():fe(n)}(y[s]));const R=fr(b.canSeeViewProviders);b.resolving=!0;const N=b.injectImpl?Vr(b.injectImpl):null;vo(n,d,Qt.Default);try{f=n[s]=b.factory(void 0,y,n,d),r.firstCreatePass&&s>=d.directiveStart&&function hr(n,r,s){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:y}=r.type.prototype;if(d){const b=cs(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,b),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,b)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),y&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y))}(s,y[s],r)}finally{null!==N&&Vr(N),fr(R),b.resolving=!1,Oa()}}return f}function $a(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function ul(n,r){return!(n&Qt.Self||n&Qt.Host&&r)}class qo{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,d){return Io(this._tNode,this._lView,r,Hn(d),s)}}function Mc(){return new qo(ui(),Yt())}function kt(n){return Ct(()=>{const r=n.prototype.constructor,s=r[Mt]||el(r),d=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==d;){const y=f[Mt]||el(f);if(y&&y!==s)return y;f=Object.getPrototypeOf(f)}return y=>new y})}function el(n){return qe(n)?()=>{const r=el(be(n));return r&&r()}:Ji(n)}function tu(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Va(n){return function Da(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const d=s.length;let f=0;for(;f<d;){const y=s[f];if(la(y))break;if(0===y)f+=2;else if("number"==typeof y)for(f++;f<d&&"string"==typeof s[f];)f++;else{if(y===r)return s[f+1];f+=2}}}return null}(ui(),n)}const Sa="__parameters__";function Qo(n,r,s){return Ct(()=>{const d=function Ml(n){return function(...s){if(n){const d=n(...s);for(const f in d)this[f]=d[f]}}}(r);function f(...y){if(this instanceof f)return d.apply(this,y),this;const b=new f(...y);return R.annotation=b,R;function R(N,Y,le){const xe=N.hasOwnProperty(Sa)?N[Sa]:Object.defineProperty(N,Sa,{value:[]})[Sa];for(;xe.length<=le;)xe.push(null);return(xe[le]=xe[le]||[]).push(b),N}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Li{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ut({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ne(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let d=n[s];Array.isArray(d)?(r===n&&(r=n.slice(0,s)),ne(d,r)):r!==n&&r.push(d)}return r}function ue(n,r){n.forEach(s=>Array.isArray(s)?ue(s,r):r(s))}function nt(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ot(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function an(n,r){const s=[];for(let d=0;d<n;d++)s.push(r);return s}function oi(n,r,s){let d=Us(n,r);return d>=0?n[1|d]=s:(d=~d,function Qr(n,r,s,d){let f=n.length;if(f==r)n.push(s,d);else if(1===f)n.push(d,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=d}}(n,d,r,s)),d}function Js(n,r){const s=Us(n,r);if(s>=0)return n[1|s]}function Us(n,r){return function $(n,r,s){let d=0,f=n.length>>s;for(;f!==d;){const y=d+(f-d>>1),b=n[y<<s];if(r===b)return y<<s;b>r?f=y:d=y+1}return~(f<<s)}(n,r,1)}const lr=Vn(Qo("Optional"),8),ss=Vn(Qo("SkipSelf"),4);var Ga=(()=>((Ga=Ga||{})[Ga.Important=1]="Important",Ga[Ga.DashCase=2]="DashCase",Ga))();const ec=new Map;let gd=0;const da="__ngContext__";function uo(n,r){_i(r)?(n[da]=r[20],function ip(n){ec.set(n[20],n)}(r)):n[da]=r}function Wa(n,r){return undefined(n,r)}function iu(n){const r=n[3];return Zi(r)?r[3]:r}function ch(n){return hi(n[13])}function ms(n){return hi(n[4])}function hi(n){for(;null!==n&&!Zi(n);)n=n[4];return n}function ou(n,r,s,d,f){if(null!=d){let y,b=!1;Zi(d)?y=d:_i(d)&&(b=!0,d=d[0]);const R=Ri(d);0===n&&null!==s?null==f?ha(r,s,R):cu(r,s,R,f||null,!0):1===n&&null!==s?cu(r,s,R,f||null,!0):2===n?function co(n,r,s){const d=sc(n,r);d&&function hh(n,r,s,d){n.removeChild(r,s,d)}(n,d,r,s)}(r,R,b):3===n&&r.destroyNode(R),null!=y&&function Bu(n,r,s,d,f){const y=s[7];y!==Ri(s)&&ou(r,n,d,y,f);for(let R=10;R<s.length;R++){const N=s[R];cl(N[1],N,n,r,d,y)}}(r,n,y,s,f)}}function _d(n,r,s){return n.createElement(r,s)}function lu(n,r){const s=n[9],d=s.indexOf(r),f=r[3];512&r[2]&&(r[2]&=-513,Yr(f,-1)),s.splice(d,1)}function jr(n,r){if(n.length<=10)return;const s=10+r,d=n[s];if(d){const f=d[17];null!==f&&f!==n&&lu(f,d),r>0&&(n[s-1][4]=d[4]);const y=Ot(n,10+r);!function Hi(n,r){cl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(d[1],d);const b=y[19];null!==b&&b.detachView(y[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function El(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&cl(n,r,s,3,null,null),function Bc(n){let r=n[13];if(!r)return Il(n[1],n);for(;r;){let s=null;if(_i(r))s=r[13];else{const d=r[10];d&&(s=d)}if(!s){for(;r&&!r[4]&&r!==n;)_i(r)&&Il(r[1],r),r=r[3];null===r&&(r=n),_i(r)&&Il(r[1],r),s=r&&r[4]}r=s}}(r)}}function Il(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Fu(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let d=0;d<s.length;d+=2){const f=r[s[d]];if(!(f instanceof hs)){const y=s[d+1];if(Array.isArray(y))for(let b=0;b<y.length;b+=2){const R=f[y[b]],N=y[b+1];try{N.call(R)}finally{}}else try{y.call(f)}finally{}}}}(n,r),function nl(n,r){const s=n.cleanup,d=r[7];let f=-1;if(null!==s)for(let y=0;y<s.length-1;y+=2)if("string"==typeof s[y]){const b=s[y+3];b>=0?d[f=b]():d[f=-b].unsubscribe(),y+=2}else{const b=d[f=s[y+1]];s[y].call(b)}if(null!==d){for(let y=f+1;y<d.length;y++)(0,d[y])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Zi(r[3])){s!==r[3]&&lu(s,r);const d=r[19];null!==d&&d.detachView(n)}!function Mu(n){ec.delete(n[20])}(r)}}function uu(n,r,s){return function $c(n,r,s){let d=r;for(;null!==d&&40&d.type;)d=(r=d).parent;if(null===d)return s[0];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:y}=n.data[d.directiveStart+f];if(y===rr.None||y===rr.Emulated)return null}return ts(d,s)}}(n,r.parent,s)}function cu(n,r,s,d,f){n.insertBefore(r,s,d,f)}function ha(n,r,s){n.appendChild(r,s)}function ic(n,r,s,d,f){null!==d?cu(n,r,s,d,f):ha(n,r,s)}function sc(n,r){return n.parentNode(r)}function fh(n,r,s){return ph(n,r,s)}let A,ct,ph=function Lu(n,r,s){return 40&n.type?ts(n,s):null};function oc(n,r,s,d){const f=uu(n,d,r),y=r[11],R=fh(d.parent||r[6],d,r);if(null!=f)if(Array.isArray(s))for(let N=0;N<s.length;N++)ic(y,f,s[N],R,!1);else ic(y,f,s,R,!1)}function Vc(n,r){if(null!==r){const s=r.type;if(3&s)return ts(r,n);if(4&s)return fa(-1,n[r.index]);if(8&s){const d=r.child;if(null!==d)return Vc(n,d);{const f=n[r.index];return Zi(f)?fa(-1,f):Ri(f)}}if(32&s)return Wa(r,n)()||Ri(n[r.index]);{const d=Fl(n,r);return null!==d?Array.isArray(d)?d[0]:Vc(iu(n[16]),d):Vc(n,r.next)}}return null}function Fl(n,r){return null!==r?n[16][6].projection[r.projection]:null}function fa(n,r){const s=10+n+1;if(s<r.length){const d=r[s],f=d[1].firstChild;if(null!==f)return Vc(d,f)}return r[7]}function Ll(n,r,s,d,f,y,b){for(;null!=s;){const R=d[s.index],N=s.type;if(b&&0===r&&(R&&uo(Ri(R),d),s.flags|=2),32!=(32&s.flags))if(8&N)Ll(n,r,s.child,d,f,y,!1),ou(r,n,f,R,y);else if(32&N){const Y=Wa(s,d);let le;for(;le=Y();)ou(r,n,f,le,y);ou(r,n,f,R,y)}else 16&N?rl(n,r,d,s,f,y):ou(r,n,f,R,y);s=b?s.projectionNext:s.next}}function cl(n,r,s,d,f,y){Ll(s,d,n.firstChild,r,f,y,!1)}function rl(n,r,s,d,f,y){const b=s[16],N=b[6].projection[d.projection];if(Array.isArray(N))for(let Y=0;Y<N.length;Y++)ou(r,n,f,N[Y],y);else Ll(n,r,N,b[3],f,y,!0)}function $u(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function du(n,r,s){const{mergedAttrs:d,classes:f,styles:y}=s;null!==d&&wu(n,r,d),null!==f&&$u(n,r,f),null!==y&&function cf(n,r,s){n.setAttribute(r,"style",s)}(n,r,y)}function Z(n){A=n}function Xn(n){var r;return(null===(r=function Vt(){if(void 0===ct&&(ct=null,xn.trustedTypes))try{ct=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return ct}())||void 0===r?void 0:r.createScriptURL(n))||n}class gr{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${It})`}}function bl(n){return n instanceof gr?n.changingThisBreaksApplicationSecurity:n}function lc(n,r){const s=function Cd(n){return n instanceof gr&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${It})`)}return s===r}const pg=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ys=(()=>((ys=ys||{})[ys.NONE=0]="NONE",ys[ys.HTML=1]="HTML",ys[ys.STYLE=2]="STYLE",ys[ys.SCRIPT=3]="SCRIPT",ys[ys.URL=4]="URL",ys[ys.RESOURCE_URL=5]="RESOURCE_URL",ys))();function cp(n){const r=yh();return r?r.sanitize(ys.URL,n)||"":lc(n,"URL")?bl(n):function hu(n){return(n=String(n)).match(pg)?n:"unsafe:"+n}(fe(n))}function Yc(n){const r=yh();if(r)return Xn(r.sanitize(ys.RESOURCE_URL,n)||"");if(lc(n,"ResourceURL"))return Xn(bl(n));throw new ke(904,!1)}function vg(n,r,s){return function ju(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?Yc:cp}(r,s)(n)}function yh(){const n=Yt();return n&&n[12]}const dp=new Li("ENVIRONMENT_INITIALIZER"),cc=new Li("INJECTOR",-1),mu=new Li("INJECTOR_DEF_TYPES");class dc{get(r,s=_r){if(s===_r){const d=new Error(`NullInjectorError: No provider for ${Le(r)}!`);throw d.name="NullInjectorError",d}return s}}function pm(...n){return{\u0275providers:Eg(0,n),\u0275fromNgModule:!0}}function Eg(n,...r){const s=[],d=new Set;let f;return ue(r,y=>{const b=y;hc(b,s,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&vh(f,s),s}function vh(n,r){for(let s=0;s<n.length;s++){const{providers:f}=n[s];Md(f,y=>{r.push(y)})}}function hc(n,r,s,d){if(!(n=be(n)))return!1;let f=null,y=cr(n);const b=!y&&ir(n);if(y||b){if(b&&!b.standalone)return!1;f=n}else{const N=n.ngModule;if(y=cr(N),!y)return!1;f=N}const R=d.has(f);if(b){if(R)return!1;if(d.add(f),b.dependencies){const N="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const Y of N)hc(Y,r,s,d)}}else{if(!y)return!1;{if(null!=y.imports&&!R){let Y;d.add(f);try{ue(y.imports,le=>{hc(le,r,s,d)&&(Y||(Y=[]),Y.push(le))})}finally{}void 0!==Y&&vh(Y,r)}if(!R){const Y=Ji(f)||(()=>new f);r.push({provide:f,useFactory:Y,deps:bn},{provide:mu,useValue:f,multi:!0},{provide:dp,useValue:()=>nn(f),multi:!0})}const N=y.providers;null==N||R||Md(N,le=>{r.push(le)})}}return f!==n&&void 0!==n.providers}function Md(n,r){for(let s of n)Ge(s)&&(s=s.\u0275providers),Array.isArray(s)?Md(s,r):r(s)}const fc=Se({provide:String,useValue:Se});function Cl(n){return null!==n&&"object"==typeof n&&fc in n}function gc(n){return"function"==typeof n}const _h=new Li("Set Injector scope."),Zc={},mc={};let Rd;function $l(){return void 0===Rd&&(Rd=new dc),Rd}class Dl{}class hp extends Dl{constructor(r,s,d,f){super(),this.parent=s,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vf(r,b=>this.processProvider(b)),this.records.set(cc,ma(void 0,this)),f.has("environment")&&this.records.set(Dl,ma(void 0,this));const y=this.records.get(_h);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(mu.multi,bn,Qt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Wn(this),d=Vr(void 0);try{return r()}finally{Wn(s),Vr(d)}}get(r,s=_r,d=Qt.Default){this.assertNotDestroyed(),d=Hn(d);const f=Wn(this),y=Vr(void 0);try{if(!(d&Qt.SkipSelf)){let R=this.records.get(r);if(void 0===R){const N=function gm(n){return"function"==typeof n||"object"==typeof n&&n instanceof Li}(r)&&er(r);R=N&&this.injectableDefInScope(N)?ma(Vl(r),Zc):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(d&Qt.Self?$l():this.parent).get(r,s=d&Qt.Optional&&s===_r?null:s)}catch(b){if("NullInjectorError"===b.name){if((b[Gr]=b[Gr]||[]).unshift(Le(r)),f)throw b;return function Fe(n,r,s,d){const f=n[Gr];throw r[bi]&&f.unshift(r[bi]),n.message=function Qe(n,r,s,d=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=Le(r);if(Array.isArray(r))f=r.map(Le).join(" -> ");else if("object"==typeof r){let y=[];for(let b in r)if(r.hasOwnProperty(b)){let R=r[b];y.push(b+":"+("string"==typeof R?JSON.stringify(R):Le(R)))}f=`{${y.join(", ")}}`}return`${s}${d?"("+d+")":""}[${f}]: ${n.replace(ki,"\n  ")}`}("\n"+n.message,f,s,d),n.ngTokenPath=f,n[Gr]=null,n}(b,r,"R3InjectorError",this.source)}throw b}finally{Vr(y),Wn(f)}}resolveInjectorInitializers(){const r=Wn(this),s=Vr(void 0);try{const d=this.get(dp.multi,bn,Qt.Self);for(const f of d)f()}finally{Wn(r),Vr(s)}}toString(){const r=[],s=this.records;for(const d of s.keys())r.push(Le(d));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(r){let s=gc(r=be(r))?r:be(r&&r.provide);const d=function Qc(n){return Cl(n)?ma(void 0,n.useValue):ma(fp(n),Zc)}(r);if(gc(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=ma(void 0,Zc,!0),f.factory=()=>Nn(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,d)}hydrate(r,s){return s.value===Zc&&(s.value=mc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Eh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=be(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Vl(n){const r=er(n),s=null!==r?r.factory:Ji(n);if(null!==s)return s;if(n instanceof Li)throw new ke(204,!1);if(n instanceof Function)return function yf(n){const r=n.length;if(r>0)throw an(r,"?"),new ke(204,!1);const s=function Pn(n){const r=n&&(n[Mr]||n[jn]);if(r){const s=function hn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ke(204,!1)}function fp(n,r,s){let d;if(gc(n)){const f=be(n);return Ji(f)||Vl(f)}if(Cl(n))d=()=>be(n.useValue);else if(function mf(n){return!(!n||!n.useFactory)}(n))d=()=>n.useFactory(...Nn(n.deps||[]));else if(function pc(n){return!(!n||!n.useExisting)}(n))d=()=>nn(be(n.useExisting));else{const f=be(n&&(n.useClass||n.provide));if(!function Ul(n){return!!n.deps}(n))return Ji(f)||Vl(f);d=()=>new f(...Nn(n.deps))}return d}function ma(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function vf(n,r){for(const s of n)Array.isArray(s)?vf(s,r):s&&Ge(s)?vf(s.\u0275providers,r):r(s)}class pp{}class Hu{}class bg{resolveComponentFactory(r){throw function Pd(n){const r=Error(`No component factory found for ${Le(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Od=(()=>{class n{}return n.NULL=new bg,n})();function yu(){return jl(ui(),Yt())}function jl(n,r){return new na(ts(n,r))}let na=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=yu,n})();function gp(n){return n instanceof na?n.nativeElement:n}class _f{}let mm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ym(){const n=Yt(),s=U(ui().index,n);return(_i(s)?s:n)[11]}(),n})(),mp=(()=>{class n{}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:()=>null}),n})();class Do{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const kd=new Do("15.0.1"),Ef={};function Nd(n){return n.ngOriginalError}class yc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Nd(r);for(;s&&Nd(s);)s=Nd(s);return s||null}}function Hl(n){return n instanceof Function?n():n}function Ih(n,r,s){let d=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const y=r.length;if(f+y===d||n.charCodeAt(f+y)<=32)return f}s=f+1}}const Ip="ng-template";function Bd(n,r,s){let d=0;for(;d<n.length;){let f=n[d++];if(s&&"class"===f){if(f=n[d],-1!==Ih(f.toLowerCase(),r,0))return!0}else if(1===f){for(;d<n.length&&"string"==typeof(f=n[d++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Xc(n){return 4===n.type&&n.value!==Ip}function Jc(n,r,s){return r===(4!==n.type||s?n.value:Ip)}function Df(n,r,s){let d=4;const f=n.attrs||[],y=function Em(n){for(let r=0;r<n.length;r++)if(la(n[r]))return r;return n.length}(f);let b=!1;for(let R=0;R<r.length;R++){const N=r[R];if("number"!=typeof N){if(!b)if(4&d){if(d=2|1&d,""!==N&&!Jc(n,N,s)||""===N&&1===r.length){if(Ka(d))return!1;b=!0}}else{const Y=8&d?N:r[++R];if(8&d&&null!==n.attrs){if(!Bd(n.attrs,Y,s)){if(Ka(d))return!1;b=!0}continue}const xe=wh(8&d?"class":N,f,Xc(n),s);if(-1===xe){if(Ka(d))return!1;b=!0;continue}if(""!==Y){let dt;dt=xe>y?"":f[xe+1].toLowerCase();const xt=8&d?dt:null;if(xt&&-1!==Ih(xt,Y,0)||2&d&&Y!==dt){if(Ka(d))return!1;b=!0}}}}else{if(!b&&!Ka(d)&&!Ka(N))return!1;if(b&&Ka(N))continue;b=!1,d=N|1&d}}return Ka(d)||b}function Ka(n){return 0==(1&n)}function wh(n,r,s,d){if(null===r)return-1;let f=0;if(d||!s){let y=!1;for(;f<r.length;){const b=r[f];if(b===n)return f;if(3===b||6===b)y=!0;else{if(1===b||2===b){let R=r[++f];for(;"string"==typeof R;)R=r[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=y?1:2}return-1}return function wp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const d=n[s];if("number"==typeof d)return-1;if(d===r)return s;s++}return-1}(r,n)}function bh(n,r,s=!1){for(let d=0;d<r.length;d++)if(Df(n,r[d],s))return!0;return!1}function bp(n,r){e:for(let s=0;s<r.length;s++){const d=r[s];if(n.length===d.length){for(let f=0;f<n.length;f++)if(n[f]!==d[f])continue e;return!0}}return!1}function Sf(n,r){return n?":not("+r.trim()+")":r}function Cp(n){let r=n[0],s=1,d=2,f="",y=!1;for(;s<n.length;){let b=n[s];if("string"==typeof b)if(2&d){const R=n[++s];f+="["+b+(R.length>0?'="'+R+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!Ka(b)&&(r+=Sf(y,f),f=""),d=b,y=y||!Ka(d);s++}return""!==f&&(r+=Sf(y,f)),r}const Br={};function $o(n){_c(Tr(),Yt(),F()+n,!1)}function _c(n,r,s,d){if(!d)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&ni(r,y,s)}else{const y=n.preOrderHooks;null!==y&&Ei(r,y,0,s)}se(s)}function Tp(n,r=null,s=null,d){const f=td(n,r,s,d);return f.resolveInjectorInitializers(),f}function td(n,r=null,s=null,d,f=new Set){const y=[s||bn,pm(n)];return d=d||("object"==typeof n?void 0:Le(n)),new hp(y,r||$l(),d||null,f)}let Wl=(()=>{class n{static create(s,d){if(Array.isArray(s))return Tp({name:""},d,s,"");{var f;const y=null!==(f=s.name)&&void 0!==f?f:"";return Tp({name:y},s.parent,s.providers,y)}}}return n.THROW_IF_NOT_FOUND=_r,n.NULL=new dc,n.\u0275prov=Ut({token:n,providedIn:"any",factory:()=>nn(cc)}),n.__NG_ELEMENT_ID__=-1,n})();function Ic(n,r=Qt.Default){const s=Yt();return null===s?nn(n,r):Io(ui(),s,be(n),r)}function Rg(){throw new Error("invalid")}function Mh(n,r){return n<<17|r<<2}function ro(n){return n>>17&32767}function Ff(n){return 2|n}function Kl(n){return(131068&n)>>2}function Lf(n,r){return-131069&n|r<<2}function Np(n){return 1|n}function Vg(n,r){const s=n.contentQueries;if(null!==s)for(let d=0;d<s.length;d+=2){const f=s[d],y=s[d+1];if(-1!==y){const b=n.data[y];al(f),b.contentQueries(2,r[y],y)}}}function id(n,r,s,d,f,y,b,R,N,Y,le){const xe=r.blueprint.slice();return xe[0]=f,xe[2]=76|d,(null!==le||n&&1024&n[2])&&(xe[2]|=1024),yr(xe),xe[3]=xe[15]=n,xe[8]=s,xe[10]=b||n&&n[10],xe[11]=R||n&&n[11],xe[12]=N||n&&n[12]||null,xe[9]=Y||n&&n[9]||null,xe[6]=y,xe[20]=function lh(){return gd++}(),xe[21]=le,xe[16]=2==r.type?n[16]:xe,xe}function sd(n,r,s,d,f){let y=n.data[r];if(null===y)y=function Fh(n,r,s,d,f){const y=Go(),b=oa(),N=n.data[r]=function Yp(n,r,s,d,f,y){return{type:s,index:d,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?y:y&&y.parent,s,r,d,f);return null===n.firstChild&&(n.firstChild=N),null!==y&&(b?null==y.child&&null!==N.parent&&(y.child=N):null===y.next&&(y.next=N)),N}(n,r,s,d,f),function Xa(){return ln.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=s,y.value=d,y.attrs=f;const b=function $s(){const n=ln.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===b?-1:b.injectorIndex}return qs(y,!0),y}function Lh(n,r,s,d){if(0===s)return-1;const f=r.length;for(let y=0;y<s;y++)r.push(d),n.blueprint.push(d),n.data.push(null);return f}function Bh(n,r,s){No(r);try{const d=n.viewQuery;null!==d&&Kg(1,d,s);const f=n.template;null!==f&&Uf(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Vg(n,r),n.staticViewQueries&&Kg(2,n.viewQuery,s);const y=n.components;null!==y&&function Ug(n,r){for(let s=0;s<r.length;s++)So(n,r[s])}(r,y)}catch(d){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),d}finally{r[2]&=-5,Ui()}}function od(n,r,s,d){const f=r[2];if(128!=(128&f)){No(r);try{yr(r),function Qs(n){return ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Uf(n,r,s,2,d);const b=3==(3&f);if(b){const Y=n.preOrderCheckHooks;null!==Y&&ni(r,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&Ei(r,Y,0,null),Ii(r,0)}if(function Ir(n){for(let r=ch(n);null!==r;r=ms(r)){if(!r[2])continue;const s=r[9];for(let d=0;d<s.length;d++){const f=s[d],y=f[3];0==(512&f[2])&&Yr(y,1),f[2]|=512}}}(r),function ri(n){for(let r=ch(n);null!==r;r=ms(r))for(let s=10;s<r.length;s++){const d=r[s],f=d[1];Tt(d)&&od(f,d,f.template,d[8])}}(r),null!==n.contentQueries&&Vg(n,r),b){const Y=n.contentCheckHooks;null!==Y&&ni(r,Y)}else{const Y=n.contentHooks;null!==Y&&Ei(r,Y,1),Ii(r,1)}!function zp(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let d=0;d<s.length;d++){const f=s[d];if(f<0)se(~f);else{const y=f,b=s[++d],R=s[++d];Wo(b,y),R(2,r[y])}}}finally{se(-1)}}(n,r);const R=n.components;null!==R&&function Wp(n,r){for(let s=0;s<r.length;s++)To(n,r[s])}(r,R);const N=n.viewQuery;if(null!==N&&Kg(2,N,d),b){const Y=n.viewCheckHooks;null!==Y&&ni(r,Y)}else{const Y=n.viewHooks;null!==Y&&Ei(r,Y,2),Ii(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Yr(r[3],-1))}finally{Ui()}}}function Uf(n,r,s,d,f){const y=F(),b=2&d;try{se(-1),b&&r.length>22&&_c(n,r,22,!1),s(d,f)}finally{se(y)}}function Cc(n,r,s){if(ls(r)){const f=r.directiveEnd;for(let y=r.directiveStart;y<f;y++){const b=n.data[y];b.contentQueries&&b.contentQueries(1,s[y],y)}}}function $h(n,r,s){!bt()||(function u(n,r,s,d){const f=s.directiveStart,y=s.directiveEnd;n.firstCreatePass||Cs(s,r),uo(d,r);const b=s.initialInputs;for(let R=f;R<y;R++){const N=n.data[R],Y=Wi(N);Y&&Te(r,s,N);const le=fs(r,n,R,s);uo(le,r),null!==b&&$t(0,R-f,le,N,0,b),Y&&(U(s.index,r)[8]=le)}}(n,r,s,ts(s,r)),64==(64&s.flags)&&a(n,r,s))}function Vh(n,r,s=ts){const d=r.localNames;if(null!==d){let f=r.index+1;for(let y=0;y<d.length;y+=2){const b=d[y+1],R=-1===b?s(r,n):n[b];n[f++]=R}}}function jg(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Uh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Uh(n,r,s,d,f,y,b,R,N,Y){const le=22+d,xe=le+f,dt=function Wu(n,r){const s=[];for(let d=0;d<r;d++)s.push(d<n?null:Br);return s}(le,xe),xt="function"==typeof Y?Y():Y;return dt[1]={type:n,blueprint:dt,template:s,queries:null,viewQuery:R,declTNode:r,data:dt.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:N,consts:xt,incompleteFirstPass:!1}}function Hg(n,r,s,d){const f=Jp(r);null===s?f.push(d):(f.push(s),n.firstCreatePass&&xm(n).push(d,f.length-1))}function qp(n,r,s,d){for(let f in n)if(n.hasOwnProperty(f)){s=null===s?{}:s;const y=n[f];null===d?Gg(s,r,f,y):d.hasOwnProperty(f)&&Gg(s,r,d[f],y)}return s}function Gg(n,r,s,d){n.hasOwnProperty(s)?n[s].push(r,d):n[s]=[r,d]}function zg(n,r){const s=U(r,n);16&s[2]||(s[2]|=32)}function Wd(n,r,s,d){let f=!1;if(bt()){const y=null===d?null:{"":-1},b=function p(n,r){const s=n.directiveRegistry;let d=null,f=null;if(s)for(let b=0;b<s.length;b++){const R=s[b];if(bh(r,R.selectors,!1))if(d||(d=[]),Wi(R))if(null!==R.findHostDirectiveDefs){const N=[];f=f||new Map,R.findHostDirectiveDefs(R,N,f),d.unshift(...N,R),_(n,r,N.length)}else d.unshift(R),_(n,r,0);else{var y;f=f||new Map,null===(y=R.findHostDirectiveDefs)||void 0===y||y.call(R,R,d,f),d.push(R)}}return null===d?null:[d,f]}(n,s);let R,N;null===b?R=N=null:[R,N]=b,null!==R&&(f=!0,jf(n,r,s,R,y,N)),y&&function x(n,r,s){if(r){const d=n.localNames=[];for(let f=0;f<r.length;f+=2){const y=s[r[f+1]];if(null==y)throw new ke(-301,!1);d.push(r[f],y)}}}(s,d,y)}return s.mergedAttrs=Eo(s.mergedAttrs,s.attrs),f}function jf(n,r,s,d,f,y){for(let Y=0;Y<d.length;Y++)Ca(Cs(s,r),n,d[Y].type);!function ee(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,d.length);for(let Y=0;Y<d.length;Y++){const le=d[Y];le.providersResolver&&le.providersResolver(le)}let b=!1,R=!1,N=Lh(n,r,d.length,null);for(let Y=0;Y<d.length;Y++){const le=d[Y];s.mergedAttrs=Eo(s.mergedAttrs,le.hostAttrs),he(n,s,r,N,le),L(N,le,f),null!==le.contentQueries&&(s.flags|=4),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(s.flags|=64);const xe=le.type.prototype;!b&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),b=!0),!R&&(xe.ngOnChanges||xe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),R=!0),N++}!function Zp(n,r,s){const f=r.directiveEnd,y=n.data,b=r.attrs,R=[];let N=null,Y=null;for(let le=r.directiveStart;le<f;le++){const xe=y[le],dt=s?s.get(xe):null,Zt=dt?dt.outputs:null;N=qp(xe.inputs,le,N,dt?dt.inputs:null),Y=qp(xe.outputs,le,Y,Zt);const dn=null===N||null===b||Xc(r)?null:un(N,le,b);R.push(dn)}null!==N&&(N.hasOwnProperty("class")&&(r.flags|=8),N.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=R,r.inputs=N,r.outputs=Y}(n,s,y)}function a(n,r,s){const d=s.directiveStart,f=s.directiveEnd,y=s.index,b=function ba(){return ln.lFrame.currentDirectiveIndex}();try{se(y);for(let R=d;R<f;R++){const N=n.data[R],Y=r[R];yo(R),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&l(N,Y)}}finally{se(-1),yo(b)}}function l(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function _(n,r,s){r.componentOffset=s,(n.components||(n.components=[])).push(r.index)}function L(n,r,s){if(s){if(r.exportAs)for(let d=0;d<r.exportAs.length;d++)s[r.exportAs[d]]=n;Wi(r)&&(s[""]=n)}}function he(n,r,s,d,f){n.data[d]=f;const y=f.factory||(f.factory=Ji(f.type)),b=new hs(y,Wi(f),Ic);n.blueprint[d]=b,s[d]=b,function Xp(n,r,s,d,f){const y=f.hostBindings;if(y){let b=n.hostBindingOpCodes;null===b&&(b=n.hostBindingOpCodes=[]);const R=~r.index;(function Wg(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(b)!=R&&b.push(R),b.push(s,d,y)}}(n,r,d,Lh(n,s,f.hostVars,Br),f)}function Te(n,r,s){const d=ts(r,n),f=jg(s),y=n[10],b=_u(n,id(n,f,null,s.onPush?32:16,d,r,y,y.createRenderer(d,s),null,null,null));n[r.index]=b}function vt(n,r,s,d,f,y){const b=ts(n,r);!function At(n,r,s,d,f,y,b){if(null==y)n.removeAttribute(r,f,s);else{const R=null==b?fe(y):b(y,d||"",f);n.setAttribute(r,f,R,s)}}(r[11],b,y,n.value,s,d,f)}function $t(n,r,s,d,f,y){const b=y[r];if(null!==b){const R=d.setInput;for(let N=0;N<b.length;){const Y=b[N++],le=b[N++],xe=b[N++];null!==R?d.setInput(s,xe,Y,le):s[le]=xe}}}function un(n,r,s){let d=null,f=0;for(;f<s.length;){const y=s[f];if(0!==y)if(5!==y){if("number"==typeof y)break;if(n.hasOwnProperty(y)){null===d&&(d=[]);const b=n[y];for(let R=0;R<b.length;R+=2)if(b[R]===r){d.push(y,b[R+1],s[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function $r(n,r,s,d){return new Array(n,!0,!1,r,null,0,d,s,null,null)}function To(n,r){const s=U(r,n);if(Tt(s)){const d=s[1];48&s[2]?od(d,s,d.template,s[8]):s[5]>0&&Ts(s)}}function Ts(n){for(let d=ch(n);null!==d;d=ms(d))for(let f=10;f<d.length;f++){const y=d[f];if(Tt(y))if(512&y[2]){const b=y[1];od(b,y,b.template,y[8])}else y[5]>0&&Ts(y)}const s=n[1].components;if(null!==s)for(let d=0;d<s.length;d++){const f=U(s[d],n);Tt(f)&&f[5]>0&&Ts(f)}}function So(n,r){const s=U(r,n),d=s[1];(function vu(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(d,s),Bh(d,s,s[8])}function _u(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function as(n){for(;n;){n[2]|=32;const r=iu(n);if(ra(n)&&!r)return n;n=r}return null}function js(n,r,s,d=!0){const f=r[10];f.begin&&f.begin();try{od(n,r,n.template,s)}catch(b){throw d&&Mm(r,b),b}finally{f.end&&f.end()}}function Kg(n,r,s){al(0),r(n,s)}function Jp(n){return n[7]||(n[7]=[])}function xm(n){return n.cleanup||(n.cleanup=[])}function Mm(n,r){const s=n[9],d=s?s.get(yc,null):null;d&&d.handleError(r)}function Hf(n,r,s,d,f){for(let y=0;y<s.length;){const b=s[y++],R=s[y++],N=r[b],Y=n.data[b];null!==Y.setInput?Y.setInput(N,f,d,R):N[R]=f}}function Rm(n,r,s){let d=s?n.styles:null,f=s?n.classes:null,y=0;if(null!==r)for(let b=0;b<r.length;b++){const R=r[b];"number"==typeof R?y=R:1==y?f=Ke(f,R):2==y&&(d=Ke(d,R+": "+r[++b]+";"))}s?n.styles=d:n.stylesWithoutHost=d,s?n.classes=f:n.classesWithoutHost=f}function qg(n,r,s,d,f=!1){for(;null!==s;){const y=r[s.index];if(null!==y&&d.push(Ri(y)),Zi(y))for(let R=10;R<y.length;R++){const N=y[R],Y=N[1].firstChild;null!==Y&&qg(N[1],N,Y,d)}const b=s.type;if(8&b)qg(n,r,s.child,d);else if(32&b){const R=Wa(s,r);let N;for(;N=R();)d.push(N)}else if(16&b){const R=Fl(r,s);if(Array.isArray(R))d.push(...R);else{const N=iu(r[16]);qg(N[1],N,R,d,!0)}}s=f?s.projectionNext:s.next}return d}class eg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return qg(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Zi(r)){const s=r[8],d=s?s.indexOf(this):-1;d>-1&&(jr(r,d),Ot(s,d))}this._attachedToViewContainer=!1}El(this._lView[1],this._lView)}onDestroy(r){Hg(this._lView[1],this._lView,null,r)}markForCheck(){as(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){js(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ra(n,r){cl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=r}}class $v extends eg{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;js(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class Pm extends Od{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=ir(r);return new Gf(s,this.ngModule)}}function Vy(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Om{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,d){d=Hn(d);const f=this.injector.get(r,Ef,d);return f!==Ef||s===Ef?f:this.parentInjector.get(r,s,d)}}class Gf extends Hu{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Dp(n){return n.map(Cp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Vy(this.componentDef.inputs)}get outputs(){return Vy(this.componentDef.outputs)}create(r,s,d,f){var y;let b=(f=f||this.ngModule)instanceof Dl?f:null===(y=f)||void 0===y?void 0:y.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const R=b?new Om(r,b):r,N=R.get(_f,null);if(null===N)throw new ke(407,!1);const Y=R.get(mp,null),le=N.createRenderer(null,this.componentDef),xe=this.componentDef.selectors[0][0]||"div",dt=d?function Kp(n,r,s){return n.selectRootElement(r,s===rr.ShadowDom)}(le,d,this.componentDef.encapsulation):_d(le,xe,function Uy(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(xe)),xt=this.componentDef.onPush?288:272,Zt=Uh(0,null,null,1,0,null,null,null,null,null),dn=id(null,Zt,null,xt,null,null,N,le,Y,R,null);let Un,ur;No(dn);try{const Cr=this.componentDef;let sn,Hr=null;Cr.findHostDirectiveDefs?(sn=[],Hr=new Map,Cr.findHostDirectiveDefs(Cr,sn,Hr),sn.push(Cr)):sn=[Cr];const vs=function Lm(n,r){const s=n[1];return n[22]=r,sd(s,22,2,"#host",null)}(dn,dt),Hs=function Hy(n,r,s,d,f,y,b,R){const N=f[1];!function Zg(n,r,s,d){for(const f of n)r.mergedAttrs=Eo(r.mergedAttrs,f.hostAttrs);null!==r.mergedAttrs&&(Rm(r,r.mergedAttrs,!0),null!==s&&du(d,s,r))}(d,n,r,b);const Y=y.createRenderer(r,s),le=id(f,jg(s),null,s.onPush?32:16,f[n.index],n,y,Y,R||null,null,null);return N.firstCreatePass&&_(N,n,d.length-1),_u(f,le),f[n.index]=le}(vs,dt,Cr,sn,dn,N,le);ur=z(Zt,22),dt&&function $m(n,r,s,d){if(d)wu(n,s,["ng-version",kd.full]);else{const{attrs:f,classes:y}=function Ch(n){const r=[],s=[];let d=1,f=2;for(;d<n.length;){let y=n[d];if("string"==typeof y)2===f?""!==y&&r.push(y,n[++d]):8===f&&s.push(y);else{if(!Ka(f))break;f=y}d++}return{attrs:r,classes:s}}(r.selectors[0]);f&&wu(n,s,f),y&&y.length>0&&$u(n,s,y.join(" "))}}(le,Cr,dt,d),void 0!==s&&function Gy(n,r,s){const d=n.projection=[];for(let f=0;f<r.length;f++){const y=s[f];d.push(null!=y?Array.from(y):null)}}(ur,this.ngContentSelectors,s),Un=function Bm(n,r,s,d,f,y){const b=ui(),R=f[1],N=ts(b,f);jf(R,f,b,s,null,d);for(let le=0;le<s.length;le++)uo(fs(f,R,b.directiveStart+le,b),f);a(R,f,b),N&&uo(N,f);const Y=fs(f,R,b.directiveStart+b.componentOffset,b);if(n[8]=f[8]=Y,null!==y)for(const le of y)le(Y,r);return Cc(R,b,n),Y}(Hs,Cr,sn,Hr,dn,[zf]),Bh(Zt,dn,null)}finally{Ui()}return new Nm(this.componentType,Un,jl(ur,dn),dn,ur)}}class Nm extends pp{constructor(r,s,d,f,y){super(),this.location=d,this._rootLView=f,this._tNode=y,this.instance=s,this.hostView=this.changeDetectorRef=new $v(f),this.componentType=r}setInput(r,s){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[r])){const y=this._rootLView;Hf(y[1],y,f,r,s),zg(y,this._tNode.index)}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function zf(){const n=ui();Zn(Yt()[1],n)}function Vm(n){let r=function Qg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const d=[n];for(;r;){let f;if(Wi(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ke(903,!1);f=r.\u0275dir}if(f){if(s){d.push(f);const b=n;b.inputs=Um(n.inputs),b.declaredInputs=Um(n.declaredInputs),b.outputs=Um(n.outputs);const R=f.hostBindings;R&&Wy(n,R);const N=f.viewQuery,Y=f.contentQueries;if(N&&zy(n,N),Y&&Uv(n,Y),me(n.inputs,f.inputs),me(n.declaredInputs,f.declaredInputs),me(n.outputs,f.outputs),Wi(f)&&f.data.animation){const le=n.data;le.animation=(le.animation||[]).concat(f.data.animation)}}const y=f.features;if(y)for(let b=0;b<y.length;b++){const R=y[b];R&&R.ngInherit&&R(n),R===Vm&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Vv(n){let r=0,s=null;for(let d=n.length-1;d>=0;d--){const f=n[d];f.hostVars=r+=f.hostVars,f.hostAttrs=Eo(f.hostAttrs,s=Eo(s,f.hostAttrs))}}(d)}function Um(n){return n===zr?{}:n===bn?[]:n}function zy(n,r){const s=n.viewQuery;n.viewQuery=s?(d,f)=>{r(d,f),s(d,f)}:r}function Uv(n,r){const s=n.contentQueries;n.contentQueries=s?(d,f,y)=>{r(d,f,y),s(d,f,y)}:r}function Wy(n,r){const s=n.hostBindings;n.hostBindings=s?(d,f)=>{r(d,f),s(d,f)}:r}let jm=null;function Ps(){if(!jm){const n=xn.Symbol;if(n&&n.iterator)jm=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const d=r[s];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(jm=d)}}}return jm}function tg(n){return!!Hm(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ps()in n)}function Hm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Dc(n,r,s){return n[r]=s}function fl(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Eu(n,r,s,d){const f=Yt();return fl(f,lo(),r)&&(Tr(),vt(Me(),f,n,r,s,d)),Eu}function Km(n,r,s,d,f,y,b,R){const N=Yt(),Y=Tr(),le=n+22,xe=Y.firstCreatePass?function Wm(n,r,s,d,f,y,b,R,N){const Y=r.consts,le=sd(r,n,4,b||null,Dn(Y,R));Wd(r,s,le,Dn(Y,N)),Zn(r,le);const xe=le.tViews=Uh(2,le,d,f,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,le),xe.queries=r.queries.embeddedTView(le)),le}(le,Y,N,r,s,d,f,y,b):Y.data[le];qs(xe,!1);const dt=N[11].createComment("");oc(Y,N,dt,xe),uo(dt,N),_u(N,N[le]=$r(dt,N,dt,xe)),Qi(xe)&&$h(Y,N,xe),null!=b&&Vh(N,xe,R)}function tm(n,r,s){const d=Yt();return fl(d,lo(),r)&&function Ya(n,r,s,d,f,y,b,R){const N=ts(r,s);let le,Y=r.inputs;!R&&null!=Y&&(le=Y[d])?(Hf(n,s,le,d,f),Mi(r)&&zg(s,r.index)):3&r.type&&(d=function Am(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(d),f=null!=b?b(f,r.value||"",d):f,y.setProperty(N,d,f))}(Tr(),Me(),d,n,r,d[11],s,!1),tm}function sg(n,r,s,d,f){const b=f?"class":"style";Hf(n,s,r.inputs[b],b,d)}function nm(n,r,s,d){const f=Yt(),y=Tr(),b=22+n,R=f[11],N=f[b]=_d(R,r,function kr(){return ln.lFrame.currentNamespace}()),Y=y.firstCreatePass?function Ym(n,r,s,d,f,y,b){const R=r.consts,Y=sd(r,n,2,f,Dn(R,y));return Wd(r,s,Y,Dn(R,b)),null!==Y.attrs&&Rm(Y,Y.attrs,!1),null!==Y.mergedAttrs&&Rm(Y,Y.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Y),Y}(b,y,f,0,r,s,d):y.data[b];return qs(Y,!0),du(R,N,Y),32!=(32&Y.flags)&&oc(y,f,N,Y),0===function B(){return ln.lFrame.elementDepthCount}()&&uo(N,f),function k(){ln.lFrame.elementDepthCount++}(),Qi(Y)&&($h(y,f,Y),Cc(y,Y,f)),null!==d&&Vh(f,Y),nm}function Wh(){let n=ui();oa()?Pa():(n=n.parent,qs(n,!1));const r=n;!function oe(){ln.lFrame.elementDepthCount--}();const s=Tr();return s.firstCreatePass&&(Zn(s,n),ls(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Lt(n){return 0!=(8&n.flags)}(r)&&sg(s,r,Yt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Jt(n){return 0!=(16&n.flags)}(r)&&sg(s,r,Yt(),r.stylesWithoutHost,!1),Wh}function qf(n,r,s,d){return nm(n,r,s,d),Wh(),qf}function Kh(n,r,s){const d=Yt(),f=Tr(),y=n+22,b=f.firstCreatePass?function ev(n,r,s,d,f){const y=r.consts,b=Dn(y,d),R=sd(r,n,8,"ng-container",b);return null!==b&&Rm(R,b,!0),Wd(r,s,R,Dn(y,f)),null!==r.queries&&r.queries.elementStart(r,R),R}(y,f,d,r,s):f.data[y];qs(b,!0);const R=d[y]=d[11].createComment("");return oc(f,d,R,b),uo(R,d),Qi(b)&&($h(f,d,b),Cc(f,b,d)),null!=s&&Vh(d,b),Kh}function qm(){let n=ui();const r=Tr();return oa()?Pa():(n=n.parent,qs(n,!1)),r.firstCreatePass&&(Zn(r,n),ls(n)&&r.queries.elementEnd(n)),qm}function Zf(n,r,s){return Kh(n,r,s),qm(),Zf}function Zm(){return Yt()}function Yh(n){return!!n&&"function"==typeof n.then}function cd(n){return!!n&&"function"==typeof n.subscribe}const tv=cd;function Qm(n,r,s,d){const f=Yt(),y=Tr(),b=ui();return function Xm(n,r,s,d,f,y,b){const R=Qi(d),Y=n.firstCreatePass&&xm(n),le=r[8],xe=Jp(r);let dt=!0;if(3&d.type||b){const dn=ts(d,r),Un=b?b(dn):dn,ur=xe.length,Cr=b?Hr=>b(Ri(Hr[d.index])):d.index;let sn=null;if(!b&&R&&(sn=function Qv(n,r,s,d){const f=n.cleanup;if(null!=f)for(let y=0;y<f.length-1;y+=2){const b=f[y];if(b===s&&f[y+1]===d){const R=r[7],N=f[y+2];return R.length>N?R[N]:null}"string"==typeof b&&(y+=2)}return null}(n,r,f,d.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=y,sn.__ngLastListenerFn__=y,dt=!1;else{y=iv(d,r,le,y,!1);const Hr=s.listen(Un,f,y);xe.push(y,Hr),Y&&Y.push(f,Cr,ur,ur+1)}}else y=iv(d,r,le,y,!1);const xt=d.outputs;let Zt;if(dt&&null!==xt&&(Zt=xt[f])){const dn=Zt.length;if(dn)for(let Un=0;Un<dn;Un+=2){const vs=r[Zt[Un]][Zt[Un+1]].subscribe(y),Hs=xe.length;xe.push(y,vs),Y&&Y.push(f,d.index,Hs,-(Hs+1))}}}(y,f,f[11],b,n,r,d),Qm}function rv(n,r,s,d){try{return!1!==s(d)}catch(f){return Mm(n,f),!1}}function iv(n,r,s,d,f){return function y(b){if(b===Function)return d;as(n.componentOffset>-1?U(n.index,r):r);let N=rv(r,0,d,b),Y=y.__ngNextListenerFn__;for(;Y;)N=rv(r,0,Y,b)&&N,Y=Y.__ngNextListenerFn__;return f&&!1===N&&(b.preventDefault(),b.returnValue=!1),N}}function Jm(n=1){return function O(n){return(ln.lFrame.contextLView=function Q(n,r){for(;n>0;)r=r[15],n--;return r}(n,ln.lFrame.contextLView))[8]}(n)}function Xv(n,r){let s=null;const d=function Tf(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const y=r[f];if("*"!==y){if(null===d?bh(n,y,!0):bp(d,y))return f}else s=f}return s}function sv(n){const r=Yt()[16][6];if(!r.projection){const d=r.projection=an(n?n.length:1,null),f=d.slice();let y=r.child;for(;null!==y;){const b=n?Xv(y,n):0;null!==b&&(f[b]?f[b].projectionNext=y:d[b]=y,f[b]=y),y=y.next}}}function ey(n,r=0,s){const d=Yt(),f=Tr(),y=sd(f,22+n,16,null,s||null);null===y.projection&&(y.projection=r),Pa(),32!=(32&y.flags)&&function Id(n,r,s){rl(r[11],0,r,s,uu(n,s,r),fh(s.parent||r[6],s,r))}(f,d,y)}function lv(n,r,s,d,f){const y=n[s+1],b=null===r;let R=d?ro(y):Kl(y),N=!1;for(;0!==R&&(!1===N||b);){const le=n[R+1];uv(n[R],r)&&(N=!0,n[R+1]=d?Np(le):Ff(le)),R=d?ro(le):Kl(le)}N&&(n[s+1]=d?Ff(y):Np(y))}function uv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Us(n,r)>=0}function fv(n,r){return function Ku(n,r,s,d){const f=Yt(),y=Tr(),b=function Xs(n){const r=ln.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);y.firstUpdatePass&&function mv(n,r,s,d){const f=n.data;if(null===f[s+1]){const y=f[F()],b=function gv(n,r){return r>=n.expandoStartIndex}(n,s);(function vv(n,r){return 0!=(n.flags&(r?8:16))})(y,d)&&null===r&&!b&&(r=!1),r=function o_(n,r,s,d){const f=function rs(n){const r=ln.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=d?r.residualClasses:r.residualStyles;if(null===f)0===(d?r.classBindings:r.styleBindings)&&(s=lg(s=im(null,n,r,s,d),r.attrs,d),y=null);else{const b=r.directiveStylingLast;if(-1===b||n[b]!==f)if(s=im(f,n,r,s,d),null===y){let N=function a_(n,r,s){const d=s?r.classBindings:r.styleBindings;if(0!==Kl(d))return n[ro(d)]}(n,r,d);void 0!==N&&Array.isArray(N)&&(N=im(null,n,r,N[1],d),N=lg(N,r.attrs,d),function u0(n,r,s,d){n[ro(s?r.classBindings:r.styleBindings)]=d}(n,r,d,N))}else y=function c0(n,r,s){let d;const f=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<f;y++)d=lg(d,n[y].hostAttrs,s);return lg(d,r.attrs,s)}(n,r,d)}return void 0!==y&&(d?r.residualClasses=y:r.residualStyles=y),s}(f,y,r,d),function ag(n,r,s,d,f,y){let b=y?r.classBindings:r.styleBindings,R=ro(b),N=Kl(b);n[d]=s;let le,Y=!1;if(Array.isArray(s)){const xe=s;le=xe[1],(null===le||Us(xe,le)>0)&&(Y=!0)}else le=s;if(f)if(0!==N){const dt=ro(n[R+1]);n[d+1]=Mh(dt,R),0!==dt&&(n[dt+1]=Lf(n[dt+1],d)),n[R+1]=function Rh(n,r){return 131071&n|r<<17}(n[R+1],d)}else n[d+1]=Mh(R,0),0!==R&&(n[R+1]=Lf(n[R+1],d)),R=d;else n[d+1]=Mh(N,0),0===R?R=d:n[N+1]=Lf(n[N+1],d),N=d;Y&&(n[d+1]=Ff(n[d+1])),lv(n,le,d,!0),lv(n,le,d,!1),function Zd(n,r,s,d,f){const y=f?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&Us(y,r)>=0&&(s[d+1]=Np(s[d+1]))}(r,le,n,d,y),b=Mh(R,N),y?r.classBindings=b:r.styleBindings=b}(f,y,r,s,b,d)}}(y,n,b,d),r!==Br&&fl(f,b,r)&&function ly(n,r,s,d,f,y,b,R){if(!(3&r.type))return;const N=n.data,Y=N[R+1];Xf(function Bf(n){return 1==(1&n)}(Y)?Qf(N,r,s,f,Kl(Y),b):void 0)||(Xf(y)||function Og(n){return 2==(2&n)}(Y)&&(y=Qf(N,null,s,f,R,b)),function uf(n,r,s,d,f){if(r)f?n.addClass(s,d):n.removeClass(s,d);else{let y=-1===d.indexOf("-")?void 0:Ga.DashCase;null==f?n.removeStyle(s,d,y):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),y|=Ga.Important),n.setStyle(s,d,f,y))}}(d,b,ao(F(),s),f,y))}(y,y.data[F()],f,f[11],n,f[b+1]=function u_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Le(bl(n)))),n}(r,s),d,b)}(n,r,null,!0),fv}function im(n,r,s,d,f){let y=null;const b=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<b&&(y=r[R],d=lg(d,y.hostAttrs,f),y!==n);)R++;return null!==n&&(s.directiveStylingLast=R),d}function lg(n,r,s){const d=s?1:2;let f=-1;if(null!==r)for(let y=0;y<r.length;y++){const b=r[y];"number"==typeof b?f=b:f===d&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),oi(n,b,!!s||r[++y]))}return void 0===n?null:n}function Qf(n,r,s,d,f,y){const b=null===r;let R;for(;f>0;){const N=n[f],Y=Array.isArray(N),le=Y?N[1]:N,xe=null===le;let dt=s[f+1];dt===Br&&(dt=xe?bn:void 0);let xt=xe?Js(dt,d):le===d?dt:void 0;if(Y&&!Xf(xt)&&(xt=Js(N,d)),Xf(xt)&&(R=xt,b))return R;const Zt=n[f+1];f=b?ro(Zt):Kl(Zt)}if(null!==r){let N=y?r.residualClasses:r.residualStyles;null!=N&&(R=Js(N,d))}return R}function Xf(n){return void 0!==n}function uy(n,r=""){const s=Yt(),d=Tr(),f=n+22,y=d.firstCreatePass?sd(d,f,1,r,null):d.data[f],b=s[f]=function Ma(n,r){return n.createText(r)}(s[11],r);oc(d,s,b,y),qs(y,!1)}function Jf(n){return om("",n,""),Jf}function om(n,r,s){const d=Yt(),f=function rg(n,r,s,d){return fl(n,lo(),s)?r+fe(s)+d:Br}(d,n,r,s);return f!==Br&&function ad(n,r,s){const d=ao(r,n);!function au(n,r,s){n.setValue(r,s)}(n[11],d,s)}(d,F(),f),om}const Jh=void 0;var Dv=["en",[["a","p"],["AM","PM"],Jh],[["AM","PM"],Jh,Jh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jh,"{1} 'at' {0}",Jh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function y_(n){const s=Math.floor(Math.abs(n)),d=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===d?1:5}];let np={};function i(n){const r=function E(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=o(r);if(s)return s;const d=r.split("-")[0];if(s=o(d),s)return s;if("en"===d)return Dv;throw new ke(701,!1)}function t(n){return i(n)[m.PluralCase]}function o(n){return n in np||(np[n]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[n]),np[n]}var m=(()=>((m=m||{})[m.LocaleId=0]="LocaleId",m[m.DayPeriodsFormat=1]="DayPeriodsFormat",m[m.DayPeriodsStandalone=2]="DayPeriodsStandalone",m[m.DaysFormat=3]="DaysFormat",m[m.DaysStandalone=4]="DaysStandalone",m[m.MonthsFormat=5]="MonthsFormat",m[m.MonthsStandalone=6]="MonthsStandalone",m[m.Eras=7]="Eras",m[m.FirstDayOfWeek=8]="FirstDayOfWeek",m[m.WeekendRange=9]="WeekendRange",m[m.DateFormat=10]="DateFormat",m[m.TimeFormat=11]="TimeFormat",m[m.DateTimeFormat=12]="DateTimeFormat",m[m.NumberSymbols=13]="NumberSymbols",m[m.NumberFormats=14]="NumberFormats",m[m.CurrencyCode=15]="CurrencyCode",m[m.CurrencySymbol=16]="CurrencySymbol",m[m.CurrencyName=17]="CurrencyName",m[m.Currencies=18]="Currencies",m[m.Directionality=19]="Directionality",m[m.PluralCase=20]="PluralCase",m[m.ExtraData=21]="ExtraData",m))();const J="en-US";let $n=J;function E_(n,r,s,d,f){if(n=be(n),Array.isArray(n))for(let y=0;y<n.length;y++)E_(n[y],r,s,d,f);else{const y=Tr(),b=Yt();let R=gc(n)?n:be(n.provide),N=fp(n);const Y=ui(),le=1048575&Y.providerIndexes,xe=Y.directiveStart,dt=Y.providerIndexes>>20;if(gc(n)||!n.multi){const xt=new hs(N,f,Ic),Zt=w_(R,r,f?le:le+dt,xe);-1===Zt?(Ca(Cs(Y,b),y,R),I_(y,n,r.length),r.push(R),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(xt),b.push(xt)):(s[Zt]=xt,b[Zt]=xt)}else{const xt=w_(R,r,le+dt,xe),Zt=w_(R,r,le,le+dt),dn=xt>=0&&s[xt],Un=Zt>=0&&s[Zt];if(f&&!Un||!f&&!dn){Ca(Cs(Y,b),y,R);const ur=function KI(n,r,s,d,f){const y=new hs(n,s,Ic);return y.multi=[],y.index=r,y.componentProviders=0,R0(y,f,d&&!s),y}(f?WI:zI,s.length,f,d,N);!f&&Un&&(s[Zt].providerFactory=ur),I_(y,n,r.length,0),r.push(R),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(ur),b.push(ur)}else I_(y,n,xt>-1?xt:Zt,R0(s[f?Zt:xt],N,!f&&d));!f&&d&&Un&&s[Zt].componentProviders++}}}function I_(n,r,s,d){const f=gc(r),y=function ga(n){return!!n.useClass}(r);if(f||y){const N=(y?be(r.useClass):r).prototype.ngOnDestroy;if(N){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const le=Y.indexOf(s);-1===le?Y.push(s,[d,N]):Y[le+1].push(d,N)}else Y.push(s,N)}}}function R0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function w_(n,r,s,d){for(let f=s;f<d;f++)if(r[f]===n)return f;return-1}function zI(n,r,s,d){return b_(this.multi,[])}function WI(n,r,s,d){const f=this.multi;let y;if(this.providerFactory){const b=this.providerFactory.componentProviders,R=fs(s,s[1],this.providerFactory.index,d);y=R.slice(0,b),b_(f,y);for(let N=b;N<R.length;N++)y.push(R[N])}else y=[],b_(f,y);return y}function b_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function P0(n,r=[]){return s=>{s.providersResolver=(d,f)=>function GI(n,r,s){const d=Tr();if(d.firstCreatePass){const f=Wi(n);E_(s,d.data,d.blueprint,f,!0),E_(r,d.data,d.blueprint,f,!1)}}(d,f?f(n):n,r)}}class lm{}class O0{}function YI(n,r){return new k0(n,null!=r?r:null)}class k0 extends lm{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pm(this);const d=ai(r);this._bootstrapComponents=Hl(d.bootstrap),this._r3Injector=td(r,s,[{provide:lm,useValue:this},{provide:Od,useValue:this.componentFactoryResolver}],Le(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class C_ extends O0{constructor(r){super(),this.moduleType=r}create(r){return new k0(this.moduleType,r)}}class qI extends lm{constructor(r,s,d){super(),this.componentFactoryResolver=new Pm(this),this.instance=null;const f=new hp([...r,{provide:lm,useValue:this},{provide:Od,useValue:this.componentFactoryResolver}],s||$l(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function D_(n,r,s=null){return new qI(n,r,s).injector}let ZI=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const d=Eg(0,s.type),f=d.length>0?D_([d],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ut({token:n,providedIn:"environment",factory:()=>new n(nn(Dl))}),n})();function N0(n){n.getStandaloneInjector=r=>r.get(ZI).getOrCreateStandaloneInjector(n)}function j0(n,r,s){const d=bs()+n,f=Yt();return f[d]===Br?Dc(f,d,s?r.call(s):r()):function ng(n,r){return n[r]}(f,d)}function G0(n,r,s,d,f,y,b){const R=r+s;return function jh(n,r,s,d){const f=fl(n,r,s);return fl(n,r+1,d)||f}(n,R,f,y)?Dc(n,R+2,b?d.call(b,f,y):d(f,y)):function Ty(n,r){const s=n[r];return s===Br?void 0:s}(n,R+2)}function Y0(n,r){const s=Tr();let d;const f=n+22;s.firstCreatePass?(d=function pw(n,r){if(r)for(let s=r.length-1;s>=0;s--){const d=r[s];if(n===d.name)return d}}(r,s.pipeRegistry),s.data[f]=d,d.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(f,d.onDestroy)):d=s.data[f];const y=d.factory||(d.factory=Ji(d.type)),b=Vr(Ic);try{const R=fr(!1),N=y();return fr(R),function zh(n,r,s,d){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=d}(s,Yt(),f,N),N}finally{Vr(b)}}function q0(n,r,s,d){const f=n+22,y=Yt(),b=function w(n,r){return n[r]}(y,f);return function Sy(n,r){return n[1].data[r].pure}(y,f)?G0(y,bs(),r,b.transform,s,d,b):b.transform(s,d)}function S_(n){return r=>{setTimeout(n,void 0,r)}}const eh=class _w extends c.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,d){let f=r,y=s||(()=>null),b=d;if(r&&"object"==typeof r){var R,N,Y;const xe=r;f=null===(R=xe.next)||void 0===R?void 0:R.bind(xe),y=null===(N=xe.error)||void 0===N?void 0:N.bind(xe),b=null===(Y=xe.complete)||void 0===Y?void 0:Y.bind(xe)}this.__isAsync&&(y=S_(y),f&&(f=S_(f)),b&&(b=S_(b)));const le=super.subscribe({next:f,error:y,complete:b});return r instanceof X.w0&&r.add(le),le}};function Ew(){return this._results[Ps()]()}class A_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ps(),d=A_.prototype;d[s]||(d[s]=Ew)}get changes(){return this._changes||(this._changes=new eh)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const d=this;d.dirty=!1;const f=ne(r);(this._changesDetected=!function j(n,r,s){if(n.length!==r.length)return!1;for(let d=0;d<n.length;d++){let f=n[d],y=r[d];if(s&&(f=s(f),y=s(y)),y!==f)return!1}return!0}(d._results,f,s))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ay=(()=>{class n{}return n.__NG_ELEMENT_ID__=bw,n})();const Iw=Ay,ww=class extends Iw{constructor(r,s,d){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=d}createEmbeddedView(r,s){const d=this._declarationTContainer.tViews,f=id(this._declarationLView,d,r,16,null,d.declTNode,null,null,null,null,s||null);f[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(f[19]=b.createEmbeddedView(d)),Bh(d,f,r),new eg(f)}};function bw(){return Av(ui(),Yt())}function Av(n,r){return 4&n.type?new ww(r,n,jl(n,r)):null}let xv=(()=>{class n{}return n.__NG_ELEMENT_ID__=Cw,n})();function Cw(){return X0(ui(),Yt())}const Dw=xv,Z0=class extends Dw{constructor(r,s,d){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=d}get element(){return jl(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const r=Fa(this._hostTNode,this._hostLView);if(ka(r)){const s=Na(r,this._hostLView),d=Ja(r);return new qo(s[1].data[d+8],s)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Q0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,d){let f,y;"number"==typeof d?f=d:null!=d&&(f=d.index,y=d.injector);const b=r.createEmbeddedView(s||{},y);return this.insert(b,f),b}createComponent(r,s,d,f,y){const b=r&&!function I(n){return"function"==typeof n}(r);let R;if(b)R=s;else{const xe=s||{};R=xe.index,d=xe.injector,f=xe.projectableNodes,y=xe.environmentInjector||xe.ngModuleRef}const N=b?r:new Gf(ir(r)),Y=d||this.parentInjector;if(!y&&null==N.ngModule){const dt=(b?Y:this.parentInjector).get(Dl,null);dt&&(y=dt)}const le=N.create(Y,f,void 0,y);return this.insert(le.hostView,R),le}insert(r,s){const d=r._lView,f=d[1];if(function fn(n){return Zi(n[3])}(d)){const le=this.indexOf(r);if(-1!==le)this.detach(le);else{const xe=d[3],dt=new Z0(xe,xe[6],xe[3]);dt.detach(dt.indexOf(r))}}const y=this._adjustIndex(s),b=this._lContainer;!function rc(n,r,s,d){const f=10+d,y=s.length;d>0&&(s[f-1][4]=r),d<y-10?(r[4]=s[f],nt(s,10+d,r)):(s.push(r),r[4]=null),r[3]=s;const b=r[17];null!==b&&s!==b&&function dh(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(b,r);const R=r[19];null!==R&&R.insertView(n),r[2]|=64}(f,d,b,y);const R=fa(y,b),N=d[11],Y=sc(N,b[7]);return null!==Y&&function ta(n,r,s,d,f,y){d[0]=f,d[6]=r,cl(n,d,s,1,f,y)}(f,b[6],N,d,Y,R),r.attachToViewContainerRef(),nt(x_(b),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Q0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),d=jr(this._lContainer,s);d&&(Ot(x_(this._lContainer),s),El(d[1],d))}detach(r){const s=this._adjustIndex(r,-1),d=jr(this._lContainer,s);return d&&null!=Ot(x_(this._lContainer),s)?new eg(d):null}_adjustIndex(r,s=0){return r??this.length+s}};function Q0(n){return n[8]}function x_(n){return n[8]||(n[8]=[])}function X0(n,r){let s;const d=r[n.index];if(Zi(d))s=d;else{let f;if(8&n.type)f=Ri(d);else{const y=r[11];f=y.createComment("");const b=ts(n,r);cu(y,sc(y,b),f,function Ed(n,r){return n.nextSibling(r)}(y,b),!1)}r[n.index]=s=$r(d,r,f,n),_u(r,s)}return new Z0(s,n,r)}class M_{constructor(r){this.queryList=r,this.matches=null}clone(){return new M_(this.queryList)}setDirty(){this.queryList.setDirty()}}class R_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const d=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let y=0;y<d;y++){const b=s.getByIndex(y);f.push(this.queries[b.indexInDeclarationView].clone())}return new R_(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==aE(r,s).matches&&this.queries[s].setDirty()}}class J0{constructor(r,s,d=null){this.predicate=r,this.flags=s,this.read=d}}class P_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let d=0;d<this.length;d++){const f=null!==s?s.length:0,y=this.getByIndex(d).embeddedTView(r,f);y&&(y.indexInDeclarationView=d,null!==s?s.push(y):s=[y])}return null!==s?new P_(s):null}template(r,s){for(let d=0;d<this.queries.length;d++)this.queries[d].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class O_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new O_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let d=r.parent;for(;null!==d&&8&d.type&&d.index!==s;)d=d.parent;return s===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const y=d[f];this.matchTNodeWithReadOption(r,s,Aw(s,y)),this.matchTNodeWithReadOption(r,s,Ta(s,r,y,!1,!1))}else d===Ay?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ta(s,r,d,!1,!1))}matchTNodeWithReadOption(r,s,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===na||f===xv||f===Ay&&4&s.type)this.addMatch(s.index,-2);else{const y=Ta(s,r,f,!1,!1);null!==y&&this.addMatch(s.index,y)}else this.addMatch(s.index,d)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Aw(n,r){const s=n.localNames;if(null!==s)for(let d=0;d<s.length;d+=2)if(s[d]===r)return s[d+1];return null}function Mw(n,r,s,d){return-1===s?function xw(n,r){return 11&n.type?jl(n,r):4&n.type?Av(n,r):null}(r,n):-2===s?function Rw(n,r,s){return s===na?jl(r,n):s===Ay?Av(r,n):s===xv?X0(r,n):void 0}(n,r,d):fs(n,n[1],s,r)}function eE(n,r,s,d){const f=r[19].queries[d];if(null===f.matches){const y=n.data,b=s.matches,R=[];for(let N=0;N<b.length;N+=2){const Y=b[N];R.push(Y<0?null:Mw(r,y[Y],b[N+1],s.metadata.read))}f.matches=R}return f.matches}function k_(n,r,s,d){const f=n.queries.getByIndex(s),y=f.matches;if(null!==y){const b=eE(n,r,f,s);for(let R=0;R<y.length;R+=2){const N=y[R];if(N>0)d.push(b[R/2]);else{const Y=y[R+1],le=r[-N];for(let xe=10;xe<le.length;xe++){const dt=le[xe];dt[17]===dt[3]&&k_(dt[1],dt,Y,d)}if(null!==le[9]){const xe=le[9];for(let dt=0;dt<xe.length;dt++){const xt=xe[dt];k_(xt[1],xt,Y,d)}}}}}return d}function tE(n){const r=Yt(),s=Tr(),d=ko();al(d+1);const f=aE(s,d);if(n.dirty&&function pe(n){return 4==(4&n[2])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const y=f.crossesNgTemplate?k_(s,r,d,[]):eE(s,r,f,d);n.reset(y,gp),n.notifyOnChanges()}return!0}return!1}function nE(n,r,s){const d=Tr();d.firstCreatePass&&(oE(d,new J0(n,r,s),-1),2==(2&r)&&(d.staticViewQueries=!0)),sE(d,Yt(),r)}function rE(n,r,s,d){const f=Tr();if(f.firstCreatePass){const y=ui();oE(f,new J0(r,s,d),y.index),function Ow(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}sE(f,Yt(),s)}function iE(){return function Pw(n,r){return n[19].queries[r].queryList}(Yt(),ko())}function sE(n,r,s){const d=new A_(4==(4&s));Hg(n,r,d,d.destroy),null===r[19]&&(r[19]=new R_),r[19].queries.push(new M_(d))}function oE(n,r,s){null===n.queries&&(n.queries=new P_),n.queries.track(new O_(r,s))}function aE(n,r){return n.queries.getByIndex(r)}function Rv(...n){}const TE=new Li("Application Initializer");let Pv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Rv,this.reject=Rv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const y=this.appInits[f]();if(Yh(y))s.push(y);else if(tv(y)){const b=new Promise((R,N)=>{y.subscribe({complete:R,error:N})});s.push(b)}}Promise.all(s).then(()=>{d()}).catch(f=>{this.reject(f)}),0===s.length&&d(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(nn(TE,8))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SE=new Li("AppId",{providedIn:"root",factory:function AE(){return`${$_()}${$_()}${$_()}`}});function $_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xE=new Li("Platform Initializer"),eb=new Li("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ME=new Li("appBootstrapListener");let tb=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ov=new Li("LocaleId",{providedIn:"root",factory:()=>vn(Ov,Qt.Optional|Qt.SkipSelf)||function nb(){return typeof $localize<"u"&&$localize.locale||J}()}),rb=new Li("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ib{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let sb=(()=>{class n{compileModuleSync(s){return new C_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const d=this.compileModuleSync(s),y=Hl(ai(s).declarations).reduce((b,R)=>{const N=ir(R);return N&&b.push(new Gf(N)),b},[]);return new ib(d,y)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lb=(()=>Promise.resolve(0))();function V_(n){typeof Zone>"u"?lb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Ac{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eh(!1),this.onMicrotaskEmpty=new eh(!1),this.onStable=new eh(!1),this.onError=new eh(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&s,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ub(){let n=xn.requestAnimationFrame,r=xn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function hb(n){const r=()=>{!function db(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j_(n),n.isCheckStableRunning=!0,U_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,d,f,y,b,R)=>{try{return OE(n),s.invokeTask(f,y,b,R)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),kE(n)}},onInvoke:(s,d,f,y,b,R,N)=>{try{return OE(n),s.invoke(f,y,b,R,N)}finally{n.shouldCoalesceRunChangeDetection&&r(),kE(n)}},onHasTask:(s,d,f,y)=>{s.hasTask(f,y),d===f&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,j_(n),U_(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(s,d,f,y)=>(s.handleError(f,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ac.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(Ac.isInAngularZone())throw new ke(909,!1)}run(r,s,d){return this._inner.run(r,s,d)}runTask(r,s,d,f){const y=this._inner,b=y.scheduleEventTask("NgZoneEvent: "+f,r,cb,Rv,Rv);try{return y.runTask(b,s,d)}finally{y.cancelTask(b)}}runGuarded(r,s,d){return this._inner.runGuarded(r,s,d)}runOutsideAngular(r){return this._outer.run(r)}}const cb={};function U_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function OE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kE(n){n._nesting--,U_(n)}class fb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eh,this.onMicrotaskEmpty=new eh,this.onStable=new eh,this.onError=new eh}run(r,s,d){return r.apply(s,d)}runGuarded(r,s,d){return r.apply(s,d)}runOutsideAngular(r){return r()}runTask(r,s,d,f){return r.apply(s,d)}}const NE=new Li(""),FE=new Li("");let H_,pb=(()=>{class n{constructor(s,d,f){this._ngZone=s,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,H_||(function gb(n){H_=n}(f),f.addToWindow(d)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ac.assertNotInAngularZone(),V_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())V_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(s)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,d,f){let y=-1;d&&d>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==y),s(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:s,timeoutId:y,updateCb:f})}whenStable(s,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,d,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(nn(Ac),nn(LE),nn(FE))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac}),n})(),LE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,d){this._applications.set(s,d)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,d=!0){var f,y;return null!==(f=null===(y=H_)||void 0===y?void 0:y.findTestabilityInTree(this,s,d))&&void 0!==f?f:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),rp=null;const BE=new Li("AllowMultipleToken"),G_=new Li("PlatformDestroyListeners");class vb{constructor(r,s){this.name=r,this.token=s}}function VE(n,r,s=[]){const d=`Platform: ${r}`,f=new Li(d);return(y=[])=>{let b=z_();if(!b||b.injector.get(BE,!1)){const R=[...s,...y,{provide:f,useValue:!0}];n?n(R):function _b(n){if(rp&&!rp.get(BE,!1))throw new ke(400,!1);rp=n;const r=n.get(jE);(function $E(n){const r=n.get(xE,null);r&&r.forEach(s=>s())})(n)}(function UE(n=[],r){return Wl.create({name:r,providers:[{provide:_h,useValue:"platform"},{provide:G_,useValue:new Set([()=>rp=null])},...n]})}(R,d))}return function Ib(n){const r=z_();if(!r)throw new ke(401,!1);return r}()}}function z_(){var n,r;return null!==(n=null===(r=rp)||void 0===r?void 0:r.get(jE))&&void 0!==n?n:null}let jE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,d){const f=function GE(n,r){let s;return s="noop"===n?new fb:("zone.js"===n?void 0:n)||new Ac(r),s}(null==d?void 0:d.ngZone,function HE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(d)),y=[{provide:Ac,useValue:f}];return f.run(()=>{const b=Wl.create({providers:y,parent:this.injector,name:s.moduleType.name}),R=s.create(b),N=R.injector.get(yc,null);if(!N)throw new ke(402,!1);return f.runOutsideAngular(()=>{const Y=f.onError.subscribe({next:le=>{N.handleError(le)}});R.onDestroy(()=>{Nv(this._modules,R),Y.unsubscribe()})}),function zE(n,r,s){try{const d=s();return Yh(d)?d.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):d}catch(d){throw r.runOutsideAngular(()=>n.handleError(d)),d}}(N,f,()=>{const Y=R.injector.get(Pv);return Y.runInitializers(),Y.donePromise.then(()=>(function Qn(n){Ue(n,"Expected localeId to be defined"),"string"==typeof n&&($n=n.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Ov,J)||J),this._moduleDoBootstrap(R),R))})})}bootstrapModule(s,d=[]){const f=WE({},d);return function mb(n,r,s){const d=new C_(s);return Promise.resolve(d)}(0,0,s).then(y=>this.bootstrapModuleFactory(y,f))}_moduleDoBootstrap(s){const d=s.injector.get(kv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new ke(403,!1);s.instance.ngDoBootstrap(d)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const s=this._injector.get(G_,null);s&&(s.forEach(d=>d()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(nn(Wl))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function WE(n,r){return Array.isArray(r)?r.reduce(WE,n):{...n,...r}}let kv=(()=>{class n{constructor(s,d,f){this._zone=s,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new W.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),b=new W.y(R=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Ac.assertNotInAngularZone(),V_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{Ac.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{N.unsubscribe(),Y.unsubscribe()}});this.isStable=(0,Oe.T)(y,b.pipe((0,Ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,d){const f=s instanceof Hu;if(!this._injector.get(Pv).done)throw!f&&Lr(s),new ke(405,false);let b;b=f?s:this._injector.get(Od).resolveComponentFactory(s),this.componentTypes.push(b.componentType);const R=function yb(n){return n.isBoundToModule}(b)?void 0:this._injector.get(lm),Y=b.create(Wl.NULL,[],d||b.selector,R),le=Y.location.nativeElement,xe=Y.injector.get(NE,null);return null==xe||xe.registerApplication(le),Y.onDestroy(()=>{this.detachView(Y.hostView),Nv(this.components,Y),null==xe||xe.unregisterApplication(le)}),this._loadComponent(Y),Y}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const d=s;this._views.push(d),d.attachToAppRef(this)}detachView(s){const d=s;Nv(this._views,d),d.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(ME,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Nv(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(nn(Ac),nn(Dl),nn(yc))},n.\u0275prov=Ut({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function bb(){return!1}function Cb(){}let Db=(()=>{class n{}return n.__NG_ELEMENT_ID__=Tb,n})();function Tb(n){return function Sb(n,r,s){if(Mi(n)&&!s){const d=U(n.index,r);return new eg(d,d)}return 47&n.type?new eg(r[16],r):null}(ui(),Yt(),16==(16&n))}class QE{constructor(){}supports(r){return tg(r)}create(r){return new Ob(r)}}const Pb=(n,r)=>r;class Ob{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Pb}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,d=this._removalsHead,f=0,y=null;for(;s||d;){const b=!d||s&&s.currentIndex<JE(d,f,y)?s:d,R=JE(b,f,y),N=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(s=s._next,null==b.previousIndex)f++;else{y||(y=[]);const Y=R-f,le=N-f;if(Y!=le){for(let dt=0;dt<Y;dt++){const xt=dt<y.length?y[dt]:y[dt]=0,Zt=xt+dt;le<=Zt&&Zt<Y&&(y[dt]=xt+1)}y[b.previousIndex]=le-Y}}R!==N&&r(b,R,N)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!tg(r))throw new ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,y,b,s=this._itHead,d=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)y=r[R],b=this._trackByFn(R,y),null!==s&&Object.is(s.trackById,b)?(d&&(s=this._verifyReinsertion(s,y,b,R)),Object.is(s.item,y)||this._addIdentityChange(s,y)):(s=this._mismatch(s,y,b,R),d=!0),s=s._next}else f=0,function Yy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ps()]();let d;for(;!(d=s.next()).done;)r(d.value)}}(r,R=>{b=this._trackByFn(f,R),null!==s&&Object.is(s.trackById,b)?(d&&(s=this._verifyReinsertion(s,R,b,f)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,b,f),d=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,d,f){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,y,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,y,f)):r=this._addAfter(new kb(s,d),y,f),r}_verifyReinsertion(r,s,d,f){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==y?r=this._reinsertAfter(y,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,y=r._nextRemoved;return null===f?this._removalsHead=y:f._nextRemoved=y,null===y?this._removalsTail=f:y._prevRemoved=f,this._insertAfter(r,s,d),this._addToMoves(r,d),r}_moveAfter(r,s,d){return this._unlink(r),this._insertAfter(r,s,d),this._addToMoves(r,d),r}_addAfter(r,s,d){return this._insertAfter(r,s,d),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,d){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new XE),this._linkedRecords.put(r),r.currentIndex=d,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,d=r._next;return null===s?this._itHead=d:s._next=d,null===d?this._itTail=s:d._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class kb{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nb{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===s||s<=d.currentIndex)&&Object.is(d.trackById,r))return d;return null}remove(r){const s=r._prevDup,d=r._nextDup;return null===s?this._head=d:s._nextDup=d,null===d?this._tail=s:d._prevDup=s,null===this._head}}class XE{constructor(){this.map=new Map}put(r){const s=r.trackById;let d=this.map.get(s);d||(d=new Nb,this.map.set(s,d)),d.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JE(n,r,s){const d=n.previousIndex;if(null===d)return d;let f=0;return s&&d<s.length&&(f=s[d]),d+r+f}class eI{constructor(){}supports(r){return r instanceof Map||Hm(r)}create(){return new Fb}}class Fb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Hm(r)))throw new ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(d,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,d),this._appendAfter=s,s=s._next;else{const y=this._getOrCreateRecordForKey(f,d);s=this._insertBeforeOrAppend(s,y)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let d=s;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const d=r._prev;return s._next=r,s._prev=d,r._prev=s,d&&(d._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const y=f._prev,b=f._next;return y&&(y._next=b),b&&(b._prev=y),f._next=null,f._prev=null,f}const d=new Lb(r);return this._records.set(r,d),d.currentValue=s,this._addToAdditions(d),d}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(d=>s(r[d],d))}}class Lb{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tI(){return new Z_([new QE])}let Z_=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(null!=d){const f=d.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||tI()),deps:[[n,new ss,new lr]]}}find(s){const d=this.factories.find(f=>f.supports(s));if(null!=d)return d;throw new ke(901,!1)}}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:tI}),n})();function nI(){return new Q_([new eI])}let Q_=(()=>{class n{constructor(s){this.factories=s}static create(s,d){if(d){const f=d.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:d=>n.create(s,d||nI()),deps:[[n,new ss,new lr]]}}find(s){const d=this.factories.find(f=>f.supports(s));if(d)return d;throw new ke(901,!1)}}return n.\u0275prov=Ut({token:n,providedIn:"root",factory:nI}),n})();const Vb=VE(null,"core",[]);let Ub=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(nn(kv))},n.\u0275mod=Pr({type:n}),n.\u0275inj=wn({}),n})();function jb(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(on,pt,V)=>{"use strict";V.d(pt,{qu:()=>yr,u:()=>ws,sg:()=>so,u5:()=>w,JU:()=>ot,a5:()=>ii,JJ:()=>Dr,JL:()=>xn,On:()=>or,UX:()=>U,Q7:()=>Ks,_Y:()=>li});var c=V(4650),X=V(6895),W=V(8996),Oe=V(9751),Ae=V(4742),Se=V(8421),me=V(7669),Le=V(5403),Ke=V(3268),Ce=V(1810),be=V(4004);let qe=(()=>{class H{constructor(k,oe){this._renderer=k,this._elementRef=oe,this.onChange=bt=>{},this.onTouched=()=>{}}setProperty(k,oe){this._renderer.setProperty(this._elementRef.nativeElement,k,oe)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(c.Qsj),c.Y36(c.SBq))},H.\u0275dir=c.lG2({type:H}),H})(),Ge=(()=>{class H extends qe{}return H.\u0275fac=function(){let B;return function(oe){return(B||(B=c.n5z(H)))(oe||H)}}(),H.\u0275dir=c.lG2({type:H,features:[c.qOj]}),H})();const ot=new c.OlP("NgValueAccessor"),De={provide:ot,useExisting:(0,c.Gpc)(()=>ut),multi:!0},q=new c.OlP("CompositionEventMode");let ut=(()=>{class H extends qe{constructor(k,oe,bt){super(k,oe),this._compositionMode=bt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fe(){const H=(0,X.q)()?(0,X.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(k){this.setProperty("value",k??"")}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(q,8))},H.\u0275dir=c.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,oe){1&k&&c.NdJ("input",function(mn){return oe._handleInput(mn.target.value)})("blur",function(){return oe.onTouched()})("compositionstart",function(){return oe._compositionStart()})("compositionend",function(mn){return oe._compositionEnd(mn.target.value)})},features:[c._Bn([De]),c.qOj]}),H})();const ze=new c.OlP("NgValidators"),re=new c.OlP("NgAsyncValidators");function ie(H){return function it(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}(H.value)?{required:!0}:null}function $e(H){return null}function Ue(H){return null!=H}function Ne(H){return(0,c.QGY)(H)?(0,W.D)(H):H}function tt(H){let B={};return H.forEach(k=>{B=null!=k?{...B,...k}:B}),0===Object.keys(B).length?null:B}function _t(H,B){return B.map(k=>k(H))}function Ut(H){return H.map(B=>function Kt(H){return!H.validate}(B)?B:k=>B.validate(k))}function wn(H){return null!=H?function zt(H){if(!H)return null;const B=H.filter(Ue);return 0==B.length?null:function(k){return tt(_t(k,B))}}(Ut(H)):null}function tr(H){return null!=H?function er(H){if(!H)return null;const B=H.filter(Ue);return 0==B.length?null:function(k){return function we(...H){const B=(0,me.jO)(H),{args:k,keys:oe}=(0,Ae.D)(H),bt=new Oe.y(mn=>{const{length:Pi}=k;if(!Pi)return void mn.complete();const Yt=new Array(Pi);let Tr=Pi,Ys=Pi;for(let mo=0;mo<Pi;mo++){let ui=!1;(0,Se.Xf)(k[mo]).subscribe((0,Le.x)(mn,Go=>{ui||(ui=!0,Ys--),Yt[mo]=Go},()=>Tr--,void 0,()=>{(!Tr||!ui)&&(Ys||mn.next(oe?(0,Ce.n)(oe,Yt):Yt),mn.complete())}))}});return B?bt.pipe((0,Ke.Z)(B)):bt}(_t(k,B).map(Ne)).pipe((0,be.U)(tt))}}(Ut(H)):null}function qn(H,B){return null===H?[B]:Array.isArray(H)?[...H,B]:[H,B]}function Pn(H){return H._rawValidators}function hn(H){return H._rawAsyncValidators}function cr(H){return H?Array.isArray(H)?H:[H]:[]}function Mr(H,B){return Array.isArray(H)?H.includes(B):H===B}function Ln(H,B){const k=cr(B);return cr(H).forEach(bt=>{Mr(k,bt)||k.push(bt)}),k}function jn(H,B){return cr(B).filter(k=>!Mr(H,k))}class Wt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=wn(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=tr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,k){return!!this.control&&this.control.hasError(B,k)}getError(B,k){return this.control?this.control.getError(B,k):null}}class Qt extends Wt{get formDirective(){return null}get path(){return null}}class ii extends Wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rr{constructor(B){this._cd=B}get isTouched(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.touched)}get isUntouched(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.untouched)}get isPristine(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.pristine)}get isDirty(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.dirty)}get isValid(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.valid)}get isInvalid(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.invalid)}get isPending(){var B,k;return!(null===(B=this._cd)||void 0===B||null===(k=B.control)||void 0===k||!k.pending)}get isSubmitted(){var B;return!(null===(B=this._cd)||void 0===B||!B.submitted)}}let Dr=(()=>{class H extends Rr{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(ii,2))},H.\u0275dir=c.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,oe){2&k&&c.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)},features:[c.qOj]}),H})(),xn=(()=>{class H extends Rr{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(Qt,10))},H.\u0275dir=c.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,oe){2&k&&c.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)("ng-submitted",oe.isSubmitted)},features:[c.qOj]}),H})();const Vn="VALID",Ye="INVALID",Fe="PENDING",Qe="DISABLED";function Ct(H){return(rr(H)?H.validators:H)||null}function An(H,B){return(rr(B)?B.asyncValidators:H)||null}function rr(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function zr(H,B,k){const oe=H.controls;if(!(B?Object.keys(oe):oe).length)throw new c.vHH(1e3,"");if(!oe[k])throw new c.vHH(1001,"")}function bn(H,B,k){H._forEachChild((oe,bt)=>{if(void 0===k[bt])throw new c.vHH(1002,"")})}class yt{constructor(B,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(B),this._assignAsyncValidators(k)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Vn}get invalid(){return this.status===Ye}get pending(){return this.status==Fe}get disabled(){return this.status===Qe}get enabled(){return this.status!==Qe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._assignValidators(B)}setAsyncValidators(B){this._assignAsyncValidators(B)}addValidators(B){this.setValidators(Ln(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(Ln(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(jn(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(jn(B,this._rawAsyncValidators))}hasValidator(B){return Mr(this._rawValidators,B)}hasAsyncValidator(B){return Mr(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=Fe,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const k=this._parentMarkedDirty(B.onlySelf);this.status=Qe,this.errors=null,this._forEachChild(oe=>{oe.disable({...B,onlySelf:!0})}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...B,skipPristineCheck:k}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(B={}){const k=this._parentMarkedDirty(B.onlySelf);this.status=Vn,this._forEachChild(oe=>{oe.enable({...B,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors({...B,skipPristineCheck:k}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}getRawValue(){return this.value}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vn||this.status===Fe)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qe:Vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=Fe,this._hasOwnPendingAsyncValidator=!0;const k=Ne(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,k={}){this.errors=B,this._updateControlsErrors(!1!==k.emitEvent)}get(B){let k=B;return null==k||(Array.isArray(k)||(k=k.split(".")),0===k.length)?null:k.reduce((oe,bt)=>oe&&oe._find(bt),this)}getError(B,k){const oe=k?this.get(k):this;return oe&&oe.errors?oe.errors[B]:null}hasError(B,k){return!!this.getError(B,k)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Qe:this.errors?Ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fe)?Fe:this._anyControlsHaveStatus(Ye)?Ye:Vn}_anyControlsHaveStatus(B){return this._anyControls(k=>k.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){rr(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(B){return null}_assignValidators(B){this._rawValidators=Array.isArray(B)?B.slice():B,this._composedValidatorFn=function Et(H){return Array.isArray(H)?wn(H):H||null}(this._rawValidators)}_assignAsyncValidators(B){this._rawAsyncValidators=Array.isArray(B)?B.slice():B,this._composedAsyncValidatorFn=function Jn(H){return Array.isArray(H)?tr(H):H||null}(this._rawAsyncValidators)}}class je extends yt{constructor(B,k,oe){super(Ct(k),An(oe,k)),this.controls=B,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,k){return this.controls[B]?this.controls[B]:(this.controls[B]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(B,k,oe={}){this.registerControl(B,k),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(B,k={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(B,k,oe={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],k&&this.registerControl(B,k),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,k={}){bn(this,0,B),Object.keys(B).forEach(oe=>{zr(this,!0,oe),this.controls[oe].setValue(B[oe],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(B,k={}){null!=B&&(Object.keys(B).forEach(oe=>{const bt=this.controls[oe];bt&&bt.patchValue(B[oe],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(B={},k={}){this._forEachChild((oe,bt)=>{oe.reset(B[bt],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(B,k,oe)=>(B[oe]=k.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(k,oe)=>!!oe._syncPendingControls()||k);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(k=>{const oe=this.controls[k];oe&&B(oe,k)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const[k,oe]of Object.entries(this.controls))if(this.contains(k)&&B(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(k,oe,bt)=>((oe.enabled||this.disabled)&&(k[bt]=oe.value),k))}_reduceChildren(B,k){let oe=B;return this._forEachChild((bt,mn)=>{oe=k(oe,bt,mn)}),oe}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(B){return this.controls.hasOwnProperty(B)?this.controls[B]:null}}class Mt extends je{}const nr=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Fr}),Fr="always";function ei(H,B){return[...B.path,H]}function pi(H,B,k=Fr){var oe,bt;vi(H,B),B.valueAccessor.writeValue(H.value),(H.disabled||"always"===k)&&(null===(oe=(bt=B.valueAccessor).setDisabledState)||void 0===oe||oe.call(bt,H.disabled)),function _s(H,B){B.valueAccessor.registerOnChange(k=>{H._pendingValue=k,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&Or(H,B)})}(H,B),function Wr(H,B){const k=(oe,bt)=>{B.valueAccessor.writeValue(oe),bt&&B.viewToModelUpdate(oe)};H.registerOnChange(k),B._registerOnDestroy(()=>{H._unregisterOnChange(k)})}(H,B),function ir(H,B){B.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&Or(H,B),"submit"!==H.updateOn&&H.markAsTouched()})}(H,B),function Ni(H,B){if(B.valueAccessor.setDisabledState){const k=oe=>{B.valueAccessor.setDisabledState(oe)};H.registerOnDisabledChange(k),B._registerOnDestroy(()=>{H._unregisterOnDisabledChange(k)})}}(H,B)}function Ci(H,B,k=!0){const oe=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(oe),B.valueAccessor.registerOnTouched(oe)),gi(H,B),H&&(B._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Pr(H,B){H.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(B)})}function vi(H,B){const k=Pn(H);null!==B.validator?H.setValidators(qn(k,B.validator)):"function"==typeof k&&H.setValidators([k]);const oe=hn(H);null!==B.asyncValidator?H.setAsyncValidators(qn(oe,B.asyncValidator)):"function"==typeof oe&&H.setAsyncValidators([oe]);const bt=()=>H.updateValueAndValidity();Pr(B._rawValidators,bt),Pr(B._rawAsyncValidators,bt)}function gi(H,B){let k=!1;if(null!==H){if(null!==B.validator){const bt=Pn(H);if(Array.isArray(bt)&&bt.length>0){const mn=bt.filter(Pi=>Pi!==B.validator);mn.length!==bt.length&&(k=!0,H.setValidators(mn))}}if(null!==B.asyncValidator){const bt=hn(H);if(Array.isArray(bt)&&bt.length>0){const mn=bt.filter(Pi=>Pi!==B.asyncValidator);mn.length!==bt.length&&(k=!0,H.setAsyncValidators(mn))}}}const oe=()=>{};return Pr(B._rawValidators,oe),Pr(B._rawAsyncValidators,oe),k}function Or(H,B){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Di(H,B){if(!H.hasOwnProperty("model"))return!1;const k=H.model;return!!k.isFirstChange()||!Object.is(B,k.currentValue)}function ye(H,B){if(!B)return null;let k,oe,bt;return Array.isArray(B),B.forEach(mn=>{mn.constructor===ut?k=mn:function Xr(H){return Object.getPrototypeOf(H.constructor)===Ge}(mn)?oe=mn:bt=mn}),bt||oe||k||null}function ft(H,B){const k=H.indexOf(B);k>-1&&H.splice(k,1)}function Rt(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}const Pt=class extends yt{constructor(B=null,k,oe){super(Ct(k),An(oe,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rr(k)&&(k.nonNullable||k.initialValueIsDefault)&&(this.defaultValue=Rt(B)?B.value:B)}setValue(B,k={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(B,k={}){this.setValue(B,k)}reset(B=this.defaultValue,k={}){this._applyFormState(B),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){ft(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){ft(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){Rt(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}},tn={provide:ii,useExisting:(0,c.Gpc)(()=>or)},_n=(()=>Promise.resolve())();let or=(()=>{class H extends ii{constructor(k,oe,bt,mn,Pi,Yt){super(),this._changeDetectorRef=Pi,this.callSetDisabledState=Yt,this.control=new Pt,this._registered=!1,this.update=new c.vpe,this._parent=k,this._setValidators(oe),this._setAsyncValidators(bt),this.valueAccessor=ye(0,mn)}ngOnChanges(k){if(this._checkForErrors(),!this._registered||"name"in k){if(this._registered&&(this._checkName(),this.formDirective)){const oe=k.name.previousValue;this.formDirective.removeControl({name:oe,path:this._getPath(oe)})}this._setUpControl()}"isDisabled"in k&&this._updateDisabled(k),Di(k,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(k){_n.then(()=>{var oe;this.control.setValue(k,{emitViewToModelChange:!1}),null===(oe=this._changeDetectorRef)||void 0===oe||oe.markForCheck()})}_updateDisabled(k){const oe=k.isDisabled.currentValue,bt=0!==oe&&(0,c.D6c)(oe);_n.then(()=>{var mn;bt&&!this.control.disabled?this.control.disable():!bt&&this.control.disabled&&this.control.enable(),null===(mn=this._changeDetectorRef)||void 0===mn||mn.markForCheck()})}_getPath(k){return this._parent?ei(k,this._parent):[k]}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(Qt,9),c.Y36(ze,10),c.Y36(re,10),c.Y36(ot,10),c.Y36(c.sBO,8),c.Y36(nr,8))},H.\u0275dir=c.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([tn]),c.qOj,c.TTD]}),H})(),li=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275dir=c.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),ls=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=c.oAB({type:H}),H.\u0275inj=c.cJS({}),H})();const Vo=new c.OlP("NgModelWithFormControlWarning"),Ls={provide:Qt,useExisting:(0,c.Gpc)(()=>so)};let so=(()=>{class H extends Qt{constructor(k,oe,bt){super(),this.callSetDisabledState=bt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(k),this._setAsyncValidators(oe)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gi(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const oe=this.form.get(k.path);return pi(oe,k,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),oe}getControl(k){return this.form.get(k.path)}removeControl(k){Ci(k.control||null,k,!1),function lt(H,B){const k=H.indexOf(B);k>-1&&H.splice(k,1)}(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,oe){this.form.get(k.path).setValue(oe)}onSubmit(k){var oe;return this.submitted=!0,function ae(H,B){H._syncPendingControls(),B.forEach(k=>{const oe=k.control;"submit"===oe.updateOn&&oe._pendingChange&&(k.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),"dialog"===(null==k||null===(oe=k.target)||void 0===oe?void 0:oe.method)}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const oe=k.control,bt=this.form.get(k.path);oe!==bt&&(Ci(oe||null,k),(H=>H instanceof Pt)(bt)&&(pi(bt,k,this.callSetDisabledState),k.control=bt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const oe=this.form.get(k.path);(function Lr(H,B){vi(H,B)})(oe,k),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const oe=this.form.get(k.path);oe&&function ai(H,B){return gi(H,B)}(oe,k)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vi(this.form,this),this._oldForm&&gi(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(k){return new(k||H)(c.Y36(ze,10),c.Y36(re,10),c.Y36(nr,8))},H.\u0275dir=c.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(k,oe){1&k&&c.NdJ("submit",function(mn){return oe.onSubmit(mn)})("reset",function(){return oe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Ls]),c.qOj,c.TTD]}),H})();const As={provide:ii,useExisting:(0,c.Gpc)(()=>ws)};let ws=(()=>{class H extends ii{constructor(k,oe,bt,mn,Pi){super(),this._ngModelWarningConfig=Pi,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(oe),this._setAsyncValidators(bt),this.valueAccessor=ye(0,mn)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),Di(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return ei(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return H._ngModelWarningSentOnce=!1,H.\u0275fac=function(k){return new(k||H)(c.Y36(Qt,13),c.Y36(ze,10),c.Y36(re,10),c.Y36(ot,10),c.Y36(Vo,8))},H.\u0275dir=c.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([As]),c.qOj,c.TTD]}),H})(),cs=(()=>{class H{constructor(){this._validator=$e}ngOnChanges(k){if(this.inputName in k){const oe=this.normalizeInput(k[this.inputName].currentValue);this._enabled=this.enabled(oe),this._validator=this._enabled?this.createValidator(oe):$e,this._onChange&&this._onChange()}}validate(k){return this._validator(k)}registerOnValidatorChange(k){this._onChange=k}enabled(k){return null!=k}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275dir=c.lG2({type:H,features:[c.TTD]}),H})();const go={provide:ze,useExisting:(0,c.Gpc)(()=>Ks),multi:!0};let Ks=(()=>{class H extends cs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=k=>ie}enabled(k){return k}}return H.\u0275fac=function(){let B;return function(oe){return(B||(B=c.n5z(H)))(oe||H)}}(),H.\u0275dir=c.lG2({type:H,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(k,oe){2&k&&c.uIk("required",oe._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([go]),c.qOj]}),H})(),z=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=c.oAB({type:H}),H.\u0275inj=c.cJS({imports:[ls]}),H})(),w=(()=>{class H{static withConfig(k){var oe;return{ngModule:H,providers:[{provide:nr,useValue:null!==(oe=k.callSetDisabledState)&&void 0!==oe?oe:Fr}]}}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=c.oAB({type:H}),H.\u0275inj=c.cJS({imports:[z]}),H})(),U=(()=>{class H{static withConfig(k){var oe,bt;return{ngModule:H,providers:[{provide:Vo,useValue:null!==(oe=k.warnOnNgModelWithFormControl)&&void 0!==oe?oe:"always"},{provide:nr,useValue:null!==(bt=k.callSetDisabledState)&&void 0!==bt?bt:Fr}]}}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=c.oAB({type:H}),H.\u0275inj=c.cJS({imports:[z]}),H})();class pe extends yt{constructor(B,k,oe){super(Ct(k),An(oe,k)),this.controls=B,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[this._adjustIndex(B)]}push(B,k={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(B,k,oe={}){this.controls.splice(B,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(B,k={}){let oe=this._adjustIndex(B);oe<0&&(oe=0),this.controls[oe]&&this.controls[oe]._registerOnCollectionChange(()=>{}),this.controls.splice(oe,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(B,k,oe={}){let bt=this._adjustIndex(B);bt<0&&(bt=0),this.controls[bt]&&this.controls[bt]._registerOnCollectionChange(()=>{}),this.controls.splice(bt,1),k&&(this.controls.splice(bt,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,k={}){bn(this,0,B),B.forEach((oe,bt)=>{zr(this,!1,bt),this.at(bt).setValue(oe,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(B,k={}){null!=B&&(B.forEach((oe,bt)=>{this.at(bt)&&this.at(bt).patchValue(oe,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(B=[],k={}){this._forEachChild((oe,bt)=>{oe.reset(B[bt],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(B=>B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_adjustIndex(B){return B<0?B+this.length:B}_syncPendingControls(){let B=this.controls.reduce((k,oe)=>!!oe._syncPendingControls()||k,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((k,oe)=>{B(k,oe)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(k=>k.enabled&&B(k))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}_find(B){var k;return null!==(k=this.at(B))&&void 0!==k?k:null}}function Dn(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let yr=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const k=new H;return k.useNonNullable=!0,k}group(k,oe=null){const bt=this._reduceControls(k);let mn={};return Dn(oe)?mn=oe:null!==oe&&(mn.validators=oe.validator,mn.asyncValidators=oe.asyncValidator),new je(bt,mn)}record(k,oe=null){const bt=this._reduceControls(k);return new Mt(bt,oe)}control(k,oe,bt){let mn={};return this.useNonNullable?(Dn(oe)?mn=oe:(mn.validators=oe,mn.asyncValidators=bt),new Pt(k,{...mn,nonNullable:!0})):new Pt(k,oe,bt)}array(k,oe,bt){const mn=k.map(Pi=>this._createControl(Pi));return new pe(mn,oe,bt)}_reduceControls(k){const oe={};return Object.keys(k).forEach(bt=>{oe[bt]=this._createControl(k[bt])}),oe}_createControl(k){return k instanceof Pt||k instanceof yt?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275prov=c.Yz7({token:H,factory:H.\u0275fac,providedIn:U}),H})()},1481:(on,pt,V)=>{"use strict";V.d(pt,{Dx:()=>Dr,b2:()=>Qt,q6:()=>Mr});var c=V(6895),X=V(4650);class W extends c.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Oe extends W{static makeCurrent(){(0,c.HT)(new Oe)}onAndCancel(je,Re,Dt){return je.addEventListener(Re,Dt,!1),()=>{je.removeEventListener(Re,Dt,!1)}}dispatchEvent(je,Re){je.dispatchEvent(Re)}remove(je){je.parentNode&&je.parentNode.removeChild(je)}createElement(je,Re){return(Re=Re||this.getDefaultDocument()).createElement(je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(je){return je.nodeType===Node.ELEMENT_NODE}isShadowRoot(je){return je instanceof DocumentFragment}getGlobalEventTarget(je,Re){return"window"===Re?window:"document"===Re?je:"body"===Re?je.body:null}getBaseHref(je){const Re=function Se(){return Ae=Ae||document.querySelector("base"),Ae?Ae.getAttribute("href"):null}();return null==Re?null:function Le(yt){me=me||document.createElement("a"),me.setAttribute("href",yt);const je=me.pathname;return"/"===je.charAt(0)?je:`/${je}`}(Re)}resetBaseElement(){Ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(je){return(0,c.Mx)(document.cookie,je)}}let me,Ae=null;const Ke=new X.OlP("TRANSITION_ID"),we=[{provide:X.ip1,useFactory:function Ce(yt,je,Re){return()=>{Re.get(X.CZH).donePromise.then(()=>{const Dt=(0,c.q)(),Mt=je.querySelectorAll(`style[ng-transition="${yt}"]`);for(let Cn=0;Cn<Mt.length;Cn++)Dt.remove(Mt[Cn])})}},deps:[Ke,c.K0,X.zs3],multi:!0}];let qe=(()=>{class yt{build(){return new XMLHttpRequest}}return yt.\u0275fac=function(Re){return new(Re||yt)},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const Ge=new X.OlP("EventManagerPlugins");let ot=(()=>{class yt{constructor(Re,Dt){this._zone=Dt,this._eventNameToPlugin=new Map,Re.forEach(Mt=>Mt.manager=this),this._plugins=Re.slice().reverse()}addEventListener(Re,Dt,Mt){return this._findPluginFor(Dt).addEventListener(Re,Dt,Mt)}addGlobalEventListener(Re,Dt,Mt){return this._findPluginFor(Dt).addGlobalEventListener(Re,Dt,Mt)}getZone(){return this._zone}_findPluginFor(Re){const Dt=this._eventNameToPlugin.get(Re);if(Dt)return Dt;const Mt=this._plugins;for(let Cn=0;Cn<Mt.length;Cn++){const nr=Mt[Cn];if(nr.supports(Re))return this._eventNameToPlugin.set(Re,nr),nr}throw new Error(`No event manager plugin found for event ${Re}`)}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(Ge),X.LFG(X.R0b))},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();class It{constructor(je){this._doc=je}addGlobalEventListener(je,Re,Dt){const Mt=(0,c.q)().getGlobalEventTarget(this._doc,je);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${Re}`);return this.addEventListener(Mt,Re,Dt)}}let ke=(()=>{class yt{constructor(){this._stylesSet=new Set}addStyles(Re){const Dt=new Set;Re.forEach(Mt=>{this._stylesSet.has(Mt)||(this._stylesSet.add(Mt),Dt.add(Mt))}),this.onStylesAdded(Dt)}onStylesAdded(Re){}getAllStyles(){return Array.from(this._stylesSet)}}return yt.\u0275fac=function(Re){return new(Re||yt)},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})(),De=(()=>{class yt extends ke{constructor(Re){super(),this._doc=Re,this._hostNodes=new Map,this._hostNodes.set(Re.head,[])}_addStylesToHost(Re,Dt,Mt){Re.forEach(Cn=>{const nr=this._doc.createElement("style");nr.textContent=Cn,Mt.push(Dt.appendChild(nr))})}addHost(Re){const Dt=[];this._addStylesToHost(this._stylesSet,Re,Dt),this._hostNodes.set(Re,Dt)}removeHost(Re){const Dt=this._hostNodes.get(Re);Dt&&Dt.forEach(fe),this._hostNodes.delete(Re)}onStylesAdded(Re){this._hostNodes.forEach((Dt,Mt)=>{this._addStylesToHost(Re,Mt,Dt)})}ngOnDestroy(){this._hostNodes.forEach(Re=>Re.forEach(fe))}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(c.K0))},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();function fe(yt){(0,c.q)().remove(yt)}const q={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ut=/%COMP%/g;function ce(yt,je,Re){for(let Dt=0;Dt<je.length;Dt++){let Mt=je[Dt];Array.isArray(Mt)?ce(yt,Mt,Re):(Mt=Mt.replace(ut,yt),Re.push(Mt))}return Re}function ge(yt){return je=>{if("__ngUnwrap__"===je)return yt;!1===yt(je)&&(je.preventDefault(),je.returnValue=!1)}}let ie=(()=>{class yt{constructor(Re,Dt,Mt){this.eventManager=Re,this.sharedStylesHost=Dt,this.appId=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new Pe(Re)}createRenderer(Re,Dt){if(!Re||!Dt)return this.defaultRenderer;switch(Dt.encapsulation){case X.ifc.Emulated:{let Mt=this.rendererByCompId.get(Dt.id);return Mt||(Mt=new We(this.eventManager,this.sharedStylesHost,Dt,this.appId),this.rendererByCompId.set(Dt.id,Mt)),Mt.applyToHost(Re),Mt}case 1:case X.ifc.ShadowDom:return new $e(this.eventManager,this.sharedStylesHost,Re,Dt);default:if(!this.rendererByCompId.has(Dt.id)){const Mt=ce(Dt.id,Dt.styles,[]);this.sharedStylesHost.addStyles(Mt),this.rendererByCompId.set(Dt.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(ot),X.LFG(De),X.LFG(X.AFp))},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();class Pe{constructor(je){this.eventManager=je,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(je,Re){return Re?document.createElementNS(q[Re]||Re,je):document.createElement(je)}createComment(je){return document.createComment(je)}createText(je){return document.createTextNode(je)}appendChild(je,Re){(Ve(je)?je.content:je).appendChild(Re)}insertBefore(je,Re,Dt){je&&(Ve(je)?je.content:je).insertBefore(Re,Dt)}removeChild(je,Re){je&&je.removeChild(Re)}selectRootElement(je,Re){let Dt="string"==typeof je?document.querySelector(je):je;if(!Dt)throw new Error(`The selector "${je}" did not match any elements`);return Re||(Dt.textContent=""),Dt}parentNode(je){return je.parentNode}nextSibling(je){return je.nextSibling}setAttribute(je,Re,Dt,Mt){if(Mt){Re=Mt+":"+Re;const Cn=q[Mt];Cn?je.setAttributeNS(Cn,Re,Dt):je.setAttribute(Re,Dt)}else je.setAttribute(Re,Dt)}removeAttribute(je,Re,Dt){if(Dt){const Mt=q[Dt];Mt?je.removeAttributeNS(Mt,Re):je.removeAttribute(`${Dt}:${Re}`)}else je.removeAttribute(Re)}addClass(je,Re){je.classList.add(Re)}removeClass(je,Re){je.classList.remove(Re)}setStyle(je,Re,Dt,Mt){Mt&(X.JOm.DashCase|X.JOm.Important)?je.style.setProperty(Re,Dt,Mt&X.JOm.Important?"important":""):je.style[Re]=Dt}removeStyle(je,Re,Dt){Dt&X.JOm.DashCase?je.style.removeProperty(Re):je.style[Re]=""}setProperty(je,Re,Dt){je[Re]=Dt}setValue(je,Re){je.nodeValue=Re}listen(je,Re,Dt){return"string"==typeof je?this.eventManager.addGlobalEventListener(je,Re,ge(Dt)):this.eventManager.addEventListener(je,Re,ge(Dt))}}function Ve(yt){return"TEMPLATE"===yt.tagName&&void 0!==yt.content}class We extends Pe{constructor(je,Re,Dt,Mt){super(je),this.component=Dt;const Cn=ce(Mt+"-"+Dt.id,Dt.styles,[]);Re.addStyles(Cn),this.contentAttr=function re(yt){return"_ngcontent-%COMP%".replace(ut,yt)}(Mt+"-"+Dt.id),this.hostAttr=function Ze(yt){return"_nghost-%COMP%".replace(ut,yt)}(Mt+"-"+Dt.id)}applyToHost(je){super.setAttribute(je,this.hostAttr,"")}createElement(je,Re){const Dt=super.createElement(je,Re);return super.setAttribute(Dt,this.contentAttr,""),Dt}}class $e extends Pe{constructor(je,Re,Dt,Mt){super(je),this.sharedStylesHost=Re,this.hostEl=Dt,this.shadowRoot=Dt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Cn=ce(Mt.id,Mt.styles,[]);for(let nr=0;nr<Cn.length;nr++){const Fr=document.createElement("style");Fr.textContent=Cn[nr],this.shadowRoot.appendChild(Fr)}}nodeOrShadowRoot(je){return je===this.hostEl?this.shadowRoot:je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(je,Re){return super.appendChild(this.nodeOrShadowRoot(je),Re)}insertBefore(je,Re,Dt){return super.insertBefore(this.nodeOrShadowRoot(je),Re,Dt)}removeChild(je,Re){return super.removeChild(this.nodeOrShadowRoot(je),Re)}parentNode(je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(je)))}}let Ue=(()=>{class yt extends It{constructor(Re){super(Re)}supports(Re){return!0}addEventListener(Re,Dt,Mt){return Re.addEventListener(Dt,Mt,!1),()=>this.removeEventListener(Re,Dt,Mt)}removeEventListener(Re,Dt,Mt){return Re.removeEventListener(Dt,Mt)}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(c.K0))},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const Ne=["alt","control","meta","shift"],tt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_t={alt:yt=>yt.altKey,control:yt=>yt.ctrlKey,meta:yt=>yt.metaKey,shift:yt=>yt.shiftKey};let Kt=(()=>{class yt extends It{constructor(Re){super(Re)}supports(Re){return null!=yt.parseEventName(Re)}addEventListener(Re,Dt,Mt){const Cn=yt.parseEventName(Dt),nr=yt.eventCallback(Cn.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,c.q)().onAndCancel(Re,Cn.domEventName,nr))}static parseEventName(Re){const Dt=Re.toLowerCase().split("."),Mt=Dt.shift();if(0===Dt.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const Cn=yt._normalizeKey(Dt.pop());let nr="",Fr=Dt.indexOf("code");if(Fr>-1&&(Dt.splice(Fr,1),nr="code."),Ne.forEach(pi=>{const Ci=Dt.indexOf(pi);Ci>-1&&(Dt.splice(Ci,1),nr+=pi+".")}),nr+=Cn,0!=Dt.length||0===Cn.length)return null;const ei={};return ei.domEventName=Mt,ei.fullKey=nr,ei}static matchEventFullKeyCode(Re,Dt){let Mt=tt[Re.key]||Re.key,Cn="";return Dt.indexOf("code.")>-1&&(Mt=Re.code,Cn="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Ne.forEach(nr=>{nr!==Mt&&(0,_t[nr])(Re)&&(Cn+=nr+".")}),Cn+=Mt,Cn===Dt)}static eventCallback(Re,Dt,Mt){return Cn=>{yt.matchEventFullKeyCode(Cn,Re)&&Mt.runGuarded(()=>Dt(Cn))}}static _normalizeKey(Re){return"esc"===Re?"escape":Re}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(c.K0))},yt.\u0275prov=X.Yz7({token:yt,factory:yt.\u0275fac}),yt})();const Mr=(0,X.eFA)(X._c5,"browser",[{provide:X.Lbi,useValue:c.bD},{provide:X.g9A,useValue:function qn(){Oe.makeCurrent()},multi:!0},{provide:c.K0,useFactory:function hn(){return(0,X.RDi)(document),document},deps:[]}]),Ln=new X.OlP(""),jn=[{provide:X.rWj,useClass:class be{addToWindow(je){X.dqk.getAngularTestability=(Dt,Mt=!0)=>{const Cn=je.findTestabilityInTree(Dt,Mt);if(null==Cn)throw new Error("Could not find testability for element.");return Cn},X.dqk.getAllAngularTestabilities=()=>je.getAllTestabilities(),X.dqk.getAllAngularRootElements=()=>je.getAllRootElements(),X.dqk.frameworkStabilizers||(X.dqk.frameworkStabilizers=[]),X.dqk.frameworkStabilizers.push(Dt=>{const Mt=X.dqk.getAllAngularTestabilities();let Cn=Mt.length,nr=!1;const Fr=function(ei){nr=nr||ei,Cn--,0==Cn&&Dt(nr)};Mt.forEach(function(ei){ei.whenStable(Fr)})})}findTestabilityInTree(je,Re,Dt){if(null==Re)return null;const Mt=je.getTestability(Re);return null!=Mt?Mt:Dt?(0,c.q)().isShadowRoot(Re)?this.findTestabilityInTree(je,Re.host,!0):this.findTestabilityInTree(je,Re.parentElement,!0):null}},deps:[]},{provide:X.lri,useClass:X.dDg,deps:[X.R0b,X.eoX,X.rWj]},{provide:X.dDg,useClass:X.dDg,deps:[X.R0b,X.eoX,X.rWj]}],Wt=[{provide:X.zSh,useValue:"root"},{provide:X.qLn,useFactory:function Pn(){return new X.qLn},deps:[]},{provide:Ge,useClass:Ue,multi:!0,deps:[c.K0,X.R0b,X.Lbi]},{provide:Ge,useClass:Kt,multi:!0,deps:[c.K0]},{provide:ie,useClass:ie,deps:[ot,De,X.AFp]},{provide:X.FYo,useExisting:ie},{provide:ke,useExisting:De},{provide:De,useClass:De,deps:[c.K0]},{provide:ot,useClass:ot,deps:[Ge,X.R0b]},{provide:c.JF,useClass:qe,deps:[]},[]];let Qt=(()=>{class yt{constructor(Re){}static withServerTransition(Re){return{ngModule:yt,providers:[{provide:X.AFp,useValue:Re.appId},{provide:Ke,useExisting:X.AFp},we]}}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(Ln,12))},yt.\u0275mod=X.oAB({type:yt}),yt.\u0275inj=X.cJS({providers:[...Wt,...jn],imports:[c.ez,X.hGG]}),yt})(),Dr=(()=>{class yt{constructor(Re){this._doc=Re}getTitle(){return this._doc.title}setTitle(Re){this._doc.title=Re||""}}return yt.\u0275fac=function(Re){return new(Re||yt)(X.LFG(c.K0))},yt.\u0275prov=X.Yz7({token:yt,factory:function(Re){let Dt=null;return Dt=Re?new Re:function Kr(){return new Dr((0,X.LFG)(c.K0))}(),Dt},providedIn:"root"}),yt})();typeof window<"u"&&window},2435:(on,pt,V)=>{"use strict";V.d(pt,{gz:()=>Xi,y6:()=>ds,OD:()=>Rt,eC:()=>hn,wm:()=>Cu,wN:()=>Jt,F0:()=>Cs,rH:()=>gn,Bz:()=>vl,Hx:()=>Hn});var c=V(4650),X=V(8996),W=V(9646),Oe=V(1135),Ae=V(6805),Se=V(9751),me=V(4742),Le=V(4671),Ke=V(3268),Ce=V(7669),we=V(1810),be=V(5403),qe=V(9672);function Ge(...T){const S=(0,Ce.yG)(T),I=(0,Ce.jO)(T),{args:M,keys:j}=(0,me.D)(T);if(0===M.length)return(0,X.D)([],S);const ne=new Se.y(function ot(T,S,I=Le.y){return M=>{It(S,()=>{const{length:j}=T,ne=new Array(j);let ue=j,nt=j;for(let Ot=0;Ot<j;Ot++)It(S,()=>{const an=(0,X.D)(T[Ot],S);let Tn=!1;an.subscribe((0,be.x)(M,kn=>{ne[Ot]=kn,Tn||(Tn=!0,nt--),nt||M.next(I(ne.slice()))},()=>{--ue||M.complete()}))},M)},M)}}(M,S,j?ue=>(0,we.n)(j,ue):Le.y));return I?ne.pipe((0,Ke.Z)(I)):ne}function It(T,S,I){T?(0,qe.f)(I,T,S):S()}var ke=V(7272),De=V(8421);function fe(T){return new Se.y(S=>{(0,De.Xf)(T()).subscribe(S)})}var q=V(9635),ut=V(576);function st(T,S){const I=(0,ut.m)(T)?T:()=>T,M=j=>j.error(I());return new Se.y(S?j=>S.schedule(M,0,j):M)}var it=V(515),He=V(727),ze=V(4482);function re(){return(0,ze.e)((T,S)=>{let I=null;T._refCount++;const M=(0,be.x)(S,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(I=null);const j=T._connection,ne=I;I=null,j&&(!ne||j===ne)&&j.unsubscribe(),S.unsubscribe()});T.subscribe(M),M.closed||(I=T.connect())})}class Ze extends Se.y{constructor(S,I){super(),this.source=S,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,ze.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,null==S||S.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new He.w0;const I=this.getSubject();S.add(this.source.subscribe((0,be.x)(I,void 0,()=>{this._teardown(),I.complete()},M=>{this._teardown(),I.error(M)},()=>this._teardown()))),S.closed&&(this._connection=null,S=He.w0.EMPTY)}return S}refCount(){return re()(this)}}var ce=V(7579),ge=V(6895),ve=V(4004),ie=V(3900),Pe=V(5698),Ie=V(8675),et=V(9300),Ve=V(5577),We=V(590);function $e(T,S){return(0,ut.m)(S)?(0,Ve.z)(T,S,1):(0,Ve.z)(T,1)}var Ue=V(8505);function Ne(T){return(0,ze.e)((S,I)=>{let ne,M=null,j=!1;M=S.subscribe((0,be.x)(I,void 0,void 0,ue=>{ne=(0,De.Xf)(T(ue,Ne(T)(S))),M?(M.unsubscribe(),M=null,ne.subscribe(I)):j=!0})),j&&(M.unsubscribe(),M=null,ne.subscribe(I))})}var tt=V(5026);function _t(T){return T<=0?()=>it.E:(0,ze.e)((S,I)=>{let M=[];S.subscribe((0,be.x)(I,j=>{M.push(j),T<M.length&&M.shift()},()=>{for(const j of M)I.next(j);I.complete()},void 0,()=>{M=null}))})}var Kt=V(8068),Ut=V(6590);function zt(T,S){const I=arguments.length>=2;return M=>M.pipe(T?(0,et.h)((j,ne)=>T(j,ne,M)):Le.y,_t(1),I?(0,Ut.d)(S):(0,Kt.T)(()=>new Ae.K))}function tr(T){return(0,ze.e)((S,I)=>{try{S.subscribe(I)}finally{I.add(T)}})}var qn=V(8189),Pn=V(1481);const hn="primary",cr=Symbol("RouteTitle");class Mr{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I[0]:I}return null}getAll(S){if(this.has(S)){const I=this.params[S];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Ln(T){return new Mr(T)}function jn(T,S,I){const M=I.path.split("/");if(M.length>T.length||"full"===I.pathMatch&&(S.hasChildren()||M.length<T.length))return null;const j={};for(let ne=0;ne<M.length;ne++){const ue=M[ne],nt=T[ne];if(ue.startsWith(":"))j[ue.substring(1)]=nt;else if(ue!==nt.path)return null}return{consumed:T.slice(0,M.length),posParams:j}}function Qt(T,S){const I=T?Object.keys(T):void 0,M=S?Object.keys(S):void 0;if(!I||!M||I.length!=M.length)return!1;let j;for(let ne=0;ne<I.length;ne++)if(j=I[ne],!ii(T[j],S[j]))return!1;return!0}function ii(T,S){if(Array.isArray(T)&&Array.isArray(S)){if(T.length!==S.length)return!1;const I=[...T].sort(),M=[...S].sort();return I.every((j,ne)=>M[ne]===j)}return T===S}function Rr(T){return Array.prototype.concat.apply([],T)}function Vr(T){return T.length>0?T[T.length-1]:null}function Dr(T,S){for(const I in T)T.hasOwnProperty(I)&&S(T[I],I)}function xn(T){return(0,c.CqO)(T)?T:(0,c.QGY)(T)?(0,X.D)(Promise.resolve(T)):(0,W.of)(T)}const Sn=!1,Bn={exact:function Gr(T,S,I){if(!jt(T.segments,S.segments)||!bi(T.segments,S.segments,I)||T.numberOfChildren!==S.numberOfChildren)return!1;for(const M in S.children)if(!T.children[M]||!Gr(T.children[M],S.children[M],I))return!1;return!0},subset:ki},yi={exact:function Er(T,S){return Qt(T,S)},subset:function fi(T,S){return Object.keys(S).length<=Object.keys(T).length&&Object.keys(S).every(I=>ii(T[I],S[I]))},ignored:()=>!0};function _r(T,S,I){return Bn[I.paths](T.root,S.root,I.matrixParams)&&yi[I.queryParams](T.queryParams,S.queryParams)&&!("exact"===I.fragment&&T.fragment!==S.fragment)}function ki(T,S,I){return wr(T,S,S.segments,I)}function wr(T,S,I,M){if(T.segments.length>I.length){const j=T.segments.slice(0,I.length);return!(!jt(j,I)||S.hasChildren()||!bi(j,I,M))}if(T.segments.length===I.length){if(!jt(T.segments,I)||!bi(T.segments,I,M))return!1;for(const j in S.children)if(!T.children[j]||!ki(T.children[j],S.children[j],M))return!1;return!0}{const j=I.slice(0,T.segments.length),ne=I.slice(T.segments.length);return!!(jt(T.segments,j)&&bi(T.segments,j,M)&&T.children[hn])&&wr(T.children[hn],S,ne,M)}}function bi(T,S,I){return S.every((M,j)=>yi[I](T[j].parameters,M.parameters))}class dr{constructor(S=new Wn([],{}),I={},M=null){this.root=S,this.queryParams=I,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ln(this.queryParams)),this._queryParamMap}toString(){return Vn.serialize(this)}}class Wn{constructor(S,I){this.segments=S,this.children=I,this.parent=null,Dr(I,(M,j)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ye(this)}}class Ar{constructor(S,I){this.path=S,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Ln(this.parameters)),this._parameterMap}toString(){return zr(this)}}function jt(T,S){return T.length===S.length&&T.every((I,M)=>I.path===S[M].path)}let Hn=(()=>{class T{}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:function(){return new Nn},providedIn:"root"}),T})();class Nn{parse(S){const I=new Fr(S);return new dr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(S){const I=`/${Fe(S.root,!0)}`,M=function yt(T){const S=Object.keys(T).map(I=>{const M=T[I];return Array.isArray(M)?M.map(j=>`${Ct(I)}=${Ct(j)}`).join("&"):`${Ct(I)}=${Ct(M)}`}).filter(I=>!!I);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${I}${M}${"string"==typeof S.fragment?`#${function Et(T){return encodeURI(T)}(S.fragment)}`:""}`}}const Vn=new Nn;function Ye(T){return T.segments.map(S=>zr(S)).join("/")}function Fe(T,S){if(!T.hasChildren())return Ye(T);if(S){const I=T.children[hn]?Fe(T.children[hn],!1):"",M=[];return Dr(T.children,(j,ne)=>{ne!==hn&&M.push(`${ne}:${Fe(j,!1)}`)}),M.length>0?`${I}(${M.join("//")})`:I}{const I=function vn(T,S){let I=[];return Dr(T.children,(M,j)=>{j===hn&&(I=I.concat(S(M,j)))}),Dr(T.children,(M,j)=>{j!==hn&&(I=I.concat(S(M,j)))}),I}(T,(M,j)=>j===hn?[Fe(T.children[hn],!1)]:[`${j}:${Fe(M,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[hn]?`${Ye(T)}/${I[0]}`:`${Ye(T)}/(${I.join("//")})`}}function Qe(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ct(T){return Qe(T).replace(/%3B/gi,";")}function An(T){return Qe(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jn(T){return decodeURIComponent(T)}function rr(T){return Jn(T.replace(/\+/g,"%20"))}function zr(T){return`${An(T.path)}${function bn(T){return Object.keys(T).map(S=>`;${An(S)}=${An(T[S])}`).join("")}(T.parameters)}`}const je=/^[^\/()?;=#]+/;function Re(T){const S=T.match(je);return S?S[0]:""}const Dt=/^[^=?&#]+/,Cn=/^[^&#]+/;class Fr{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(S.length>0||Object.keys(I).length>0)&&(M[hn]=new Wn(S,I)),M}parseSegment(){const S=Re(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new c.vHH(4009,Sn);return this.capture(S),new Ar(Jn(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const I=Re(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const j=Re(this.remaining);j&&(M=j,this.capture(M))}S[Jn(I)]=Jn(M)}parseQueryParam(S){const I=function Mt(T){const S=T.match(Dt);return S?S[0]:""}(this.remaining);if(!I)return;this.capture(I);let M="";if(this.consumeOptional("=")){const ue=function nr(T){const S=T.match(Cn);return S?S[0]:""}(this.remaining);ue&&(M=ue,this.capture(M))}const j=rr(I),ne=rr(M);if(S.hasOwnProperty(j)){let ue=S[j];Array.isArray(ue)||(ue=[ue],S[j]=ue),ue.push(ne)}else S[j]=ne}parseParens(S){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Re(this.remaining),j=this.remaining[M.length];if("/"!==j&&")"!==j&&";"!==j)throw new c.vHH(4010,Sn);let ne;M.indexOf(":")>-1?(ne=M.slice(0,M.indexOf(":")),this.capture(ne),this.capture(":")):S&&(ne=hn);const ue=this.parseChildren();I[ne]=1===Object.keys(ue).length?ue[hn]:new Wn([],ue),this.consumeOptional("//")}return I}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new c.vHH(4011,Sn)}}function ei(T){return T.segments.length>0?new Wn([],{[hn]:T}):T}function pi(T){const S={};for(const M of Object.keys(T.children)){const ne=pi(T.children[M]);(ne.segments.length>0||ne.hasChildren())&&(S[M]=ne)}return function Ci(T){if(1===T.numberOfChildren&&T.children[hn]){const S=T.children[hn];return new Wn(T.segments.concat(S.segments),S.children)}return T}(new Wn(T.segments,S))}function Pr(T){return T instanceof dr}function ir(T,S,I,M,j){var ne;if(0===I.length)return Lr(S.root,S.root,S.root,M,j);const ue=function cn(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Ai(!0,0,T);let S=0,I=!1;const M=T.reduce((j,ne,ue)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const nt={};return Dr(ne.outlets,(Ot,an)=>{nt[an]="string"==typeof Ot?Ot.split("/"):Ot}),[...j,{outlets:nt}]}if(ne.segmentPath)return[...j,ne.segmentPath]}return"string"!=typeof ne?[...j,ne]:0===ue?(ne.split("/").forEach((nt,Ot)=>{0==Ot&&"."===nt||(0==Ot&&""===nt?I=!0:".."===nt?S++:""!=nt&&j.push(nt))}),j):[...j,ne]},[]);return new Ai(I,S,M)}(I);return ue.toRoot()?Lr(S.root,S.root,new Wn([],{}),M,j):function nt(an){var Tn;const kn=function xi(T,S,I,M){if(T.isAbsolute)return new Gn(S.root,!0,0);if(-1===M)return new Gn(I,I===S.root,0);return function Di(T,S,I){let M=T,j=S,ne=I;for(;ne>j;){if(ne-=j,M=M.parent,!M)throw new c.vHH(4005,!1);j=M.segments.length}return new Gn(M,!1,j-ne)}(I,M+(Or(T.commands[0])?0:1),T.numberOfDoubleDots)}(ue,S,null===(Tn=T.snapshot)||void 0===Tn?void 0:Tn._urlSegment,an),Qr=kn.processChildren?ye(kn.segmentGroup,kn.index,ue.commands):ae(kn.segmentGroup,kn.index,ue.commands);return Lr(S.root,kn.segmentGroup,Qr,M,j)}(null===(ne=T.snapshot)||void 0===ne?void 0:ne._lastPathIndex)}function Or(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Wr(T){return"object"==typeof T&&null!=T&&T.outlets}function Lr(T,S,I,M,j){let ue,ne={};M&&Dr(M,(Ot,an)=>{ne[an]=Array.isArray(Ot)?Ot.map(Tn=>`${Tn}`):`${Ot}`}),ue=T===S?I:ai(T,S,I);const nt=ei(pi(ue));return new dr(nt,ne,j)}function ai(T,S,I){const M={};return Dr(T.children,(j,ne)=>{M[ne]=j===S?I:ai(j,S,I)}),new Wn(T.segments,M)}class Ai{constructor(S,I,M){if(this.isAbsolute=S,this.numberOfDoubleDots=I,this.commands=M,S&&M.length>0&&Or(M[0]))throw new c.vHH(4003,!1);const j=M.find(Wr);if(j&&j!==Vr(M))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gn{constructor(S,I,M){this.segmentGroup=S,this.processChildren=I,this.index=M}}function ae(T,S,I){if(T||(T=new Wn([],{})),0===T.segments.length&&T.hasChildren())return ye(T,S,I);const M=function lt(T,S,I){let M=0,j=S;const ne={match:!1,pathIndex:0,commandIndex:0};for(;j<T.segments.length;){if(M>=I.length)return ne;const ue=T.segments[j],nt=I[M];if(Wr(nt))break;const Ot=`${nt}`,an=M<I.length-1?I[M+1]:null;if(j>0&&void 0===Ot)break;if(Ot&&an&&"object"==typeof an&&void 0===an.outlets){if(!rt(Ot,an,ue))return ne;M+=2}else{if(!rt(Ot,{},ue))return ne;M++}j++}return{match:!0,pathIndex:j,commandIndex:M}}(T,S,I),j=I.slice(M.commandIndex);if(M.match&&M.pathIndex<T.segments.length){const ne=new Wn(T.segments.slice(0,M.pathIndex),{});return ne.children[hn]=new Wn(T.segments.slice(M.pathIndex),T.children),ye(ne,0,j)}return M.match&&0===j.length?new Wn(T.segments,{}):M.match&&!T.hasChildren()?ht(T,S,I):M.match?ye(T,0,j):ht(T,S,I)}function ye(T,S,I){if(0===I.length)return new Wn(T.segments,{});{const M=function Xr(T){return Wr(T[0])?T[0].outlets:{[hn]:T}}(I),j={};return Dr(M,(ne,ue)=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(j[ue]=ae(T.children[ue],S,ne))}),Dr(T.children,(ne,ue)=>{void 0===M[ue]&&(j[ue]=ne)}),new Wn(T.segments,j)}}function ht(T,S,I){const M=T.segments.slice(0,S);let j=0;for(;j<I.length;){const ne=I[j];if(Wr(ne)){const Ot=gt(ne.outlets);return new Wn(M,Ot)}if(0===j&&Or(I[0])){M.push(new Ar(T.segments[S].path,_e(I[0]))),j++;continue}const ue=Wr(ne)?ne.outlets[hn]:`${ne}`,nt=j<I.length-1?I[j+1]:null;ue&&nt&&Or(nt)?(M.push(new Ar(ue,_e(nt))),j+=2):(M.push(new Ar(ue,{})),j++)}return new Wn(M,{})}function gt(T){const S={};return Dr(T,(I,M)=>{"string"==typeof I&&(I=[I]),null!==I&&(S[M]=ht(new Wn([],{}),0,I))}),S}function _e(T){const S={};return Dr(T,(I,M)=>S[M]=`${I}`),S}function rt(T,S,I){return T==I.path&&Qt(S,I.parameters)}class ft{constructor(S,I){this.id=S,this.url=I}}class Rt extends ft{constructor(S,I,M="imperative",j=null){super(S,I),this.type=0,this.navigationTrigger=M,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pt extends ft{constructor(S,I,M){super(S,I),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rn extends ft{constructor(S,I,M,j){super(S,I),this.reason=M,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mn extends ft{constructor(S,I,M,j){super(S,I),this.error=M,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rn extends ft{constructor(S,I,M,j){super(S,I),this.urlAfterRedirects=M,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends ft{constructor(S,I,M,j){super(S,I),this.urlAfterRedirects=M,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mr extends ft{constructor(S,I,M,j,ne){super(S,I),this.urlAfterRedirects=M,this.state=j,this.shouldActivate=ne,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Je extends ft{constructor(S,I,M,j){super(S,I),this.urlAfterRedirects=M,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class at extends ft{constructor(S,I,M,j){super(S,I),this.urlAfterRedirects=M,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wt{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gt{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tn{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _n{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class or{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class li{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ar{constructor(S,I,M){this.routerEvent=S,this.position=I,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _i{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const I=this.pathFromRoot(S);return I.length>1?I[I.length-2]:null}children(S){const I=Zi(S,this._root);return I?I.children.map(M=>M.value):[]}firstChild(S){const I=Zi(S,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(S){const I=ls(S,this._root);return I.length<2?[]:I[I.length-2].children.map(j=>j.value).filter(j=>j!==S)}pathFromRoot(S){return ls(S,this._root).map(I=>I.value)}}function Zi(T,S){if(T===S.value)return S;for(const I of S.children){const M=Zi(T,I);if(M)return M}return null}function ls(T,S){if(T===S.value)return[S];for(const I of S.children){const M=ls(T,I);if(M.length)return M.unshift(S),M}return[]}class Mi{constructor(S,I){this.value=S,this.children=I}toString(){return`TreeNode(${this.value})`}}function Qi(T){const S={};return T&&T.children.forEach(I=>S[I.value.outlet]=I),S}class Wi extends _i{constructor(S,I){super(S),this.snapshot=I,us(this,S)}toString(){return this.snapshot.toString()}}function ra(T,S){const I=function Vo(T,S){const ue=new so([],{},{},"",{},hn,S,null,T.root,-1,{});return new Uo("",new Mi(ue,[]))}(T,S),M=new Oe.X([new Ar("",{})]),j=new Oe.X({}),ne=new Oe.X({}),ue=new Oe.X({}),nt=new Oe.X(""),Ot=new Xi(M,j,ue,nt,ne,hn,S,I.root);return Ot.snapshot=I.root,new Wi(new Mi(Ot,[]),I)}class Xi{constructor(S,I,M,j,ne,ue,nt,Ot){var an,Tn;this.url=S,this.params=I,this.queryParams=M,this.fragment=j,this.data=ne,this.outlet=ue,this.component=nt,this.title=null!==(an=null===(Tn=this.data)||void 0===Tn?void 0:Tn.pipe((0,ve.U)(kn=>kn[cr])))&&void 0!==an?an:(0,W.of)(void 0),this._futureSnapshot=Ot}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ve.U)(S=>Ln(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ve.U)(S=>Ln(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Os(T,S="emptyOnly"){const I=T.pathFromRoot;let M=0;if("always"!==S)for(M=I.length-1;M>=1;){const j=I[M],ne=I[M-1];if(j.routeConfig&&""===j.routeConfig.path)M--;else{if(ne.component)break;M--}}return function Ls(T){return T.reduce((S,I)=>{var M;return{params:{...S.params,...I.params},data:{...S.data,...I.data},resolve:{...I.data,...S.resolve,...null===(M=I.routeConfig)||void 0===M?void 0:M.data,...I._resolvedData}}},{params:{},data:{},resolve:{}})}(I.slice(M))}class so{constructor(S,I,M,j,ne,ue,nt,Ot,an,Tn,kn){this.url=S,this.params=I,this.queryParams=M,this.fragment=j,this.data=ne,this.outlet=ue,this.component=nt,this.routeConfig=Ot,this._urlSegment=an,this._lastPathIndex=Tn,this._resolve=kn}get title(){var S;return null===(S=this.data)||void 0===S?void 0:S[cr]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ln(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ln(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Uo extends _i{constructor(S,I){super(I),this.url=S,us(this,I)}toString(){return Is(this._root)}}function us(T,S){S.value._routerState=T,S.children.forEach(I=>us(T,I))}function Is(T){const S=T.children.length>0?` { ${T.children.map(Is).join(", ")} } `:"";return`${T.value}${S}`}function Gs(T){if(T.snapshot){const S=T.snapshot,I=T._futureSnapshot;T.snapshot=I,Qt(S.queryParams,I.queryParams)||T.queryParams.next(I.queryParams),S.fragment!==I.fragment&&T.fragment.next(I.fragment),Qt(S.params,I.params)||T.params.next(I.params),function Wt(T,S){if(T.length!==S.length)return!1;for(let I=0;I<T.length;++I)if(!Qt(T[I],S[I]))return!1;return!0}(S.url,I.url)||T.url.next(I.url),Qt(S.data,I.data)||T.data.next(I.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function zs(T,S){const I=Qt(T.params,S.params)&&function nn(T,S){return jt(T,S)&&T.every((I,M)=>Qt(I.parameters,S[M].parameters))}(T.url,S.url);return I&&!(!T.parent!=!S.parent)&&(!T.parent||zs(T.parent,S.parent))}function ws(T,S,I){if(I&&T.shouldReuseRoute(S.value,I.value.snapshot)){const M=I.value;M._futureSnapshot=S.value;const j=function ia(T,S,I){return S.children.map(M=>{for(const j of I.children)if(T.shouldReuseRoute(M.value,j.value.snapshot))return ws(T,M,j);return ws(T,M)})}(T,S,I);return new Mi(M,j)}{if(T.shouldAttach(S.value)){const ne=T.retrieve(S.value);if(null!==ne){const ue=ne.route;return ue.value._futureSnapshot=S.value,ue.children=S.children.map(nt=>ws(T,nt)),ue}}const M=function qa(T){return new Xi(new Oe.X(T.url),new Oe.X(T.params),new Oe.X(T.queryParams),new Oe.X(T.fragment),new Oe.X(T.data),T.outlet,T.component,T)}(S.value),j=S.children.map(ne=>ws(T,ne));return new Mi(M,j)}}const Vi="ngNavigationCancelingError";function Ws(T,S){const{redirectTo:I,navigationBehaviorOptions:M}=Pr(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,j=Ao(!1,0,S);return j.url=I,j.navigationBehaviorOptions=M,j}function Ao(T,S,I){const M=new Error("NavigationCancelingError: "+(T||""));return M[Vi]=!0,M.cancellationCode=S,I&&(M.url=I),M}function xo(T){return oo(T)&&Pr(T.url)}function oo(T){return T&&T[Vi]}class Ti{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ds,this.attachRef=null}}let ds=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(I,M){const j=this.getOrCreateContext(I);j.outlet=M,this.contexts.set(I,j)}onChildOutletDestroyed(I){const M=this.getContext(I);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let M=this.getContext(I);return M||(M=new Ti,this.contexts.set(I,M)),M}getContext(I){return this.contexts.get(I)||null}}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Bs=!1;let Ji=(()=>{class T{constructor(){this.activated=null,this._activatedRoute=null,this.name=hn,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(ds),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(I){if(I.name){const{firstChange:M,previousValue:j}=I.name;if(M)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(I){var M;return(null===(M=this.parentContexts.getContext(I))||void 0===M?void 0:M.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);null!=I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,Bs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,Bs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,Bs);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,M){this.activated=I,this._activatedRoute=M,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,M){if(this.isActivated)throw new c.vHH(4013,Bs);this._activatedRoute=I;const j=this.location,ue=I.snapshot.component,nt=this.parentContexts.getOrCreateContext(this.name).children,Ot=new jo(I,nt,j.injector);if(M&&function fo(T){return!!T.resolveComponentFactory}(M)){const an=M.resolveComponentFactory(ue);this.activated=j.createComponent(an,j.length,Ot)}else this.activated=j.createComponent(ue,{index:j.length,injector:Ot,environmentInjector:null!=M?M:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(I){return new(I||T)},T.\u0275dir=c.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),T})();class jo{constructor(S,I,M){this.route=S,this.childContexts=I,this.parent=M}get(S,I){return S===Xi?this.route:S===ds?this.childContexts:this.parent.get(S,I)}}let cs=(()=>{class T{}return T.\u0275fac=function(I){return new(I||T)},T.\u0275cmp=c.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(I,M){1&I&&c._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),T})();function sa(T,S){var I;return T.providers&&!T._injector&&(T._injector=(0,c.MMx)(T.providers,S,`Route: ${T.path}`)),null!==(I=T._injector)&&void 0!==I?I:S}function Mo(T){const S=T.children&&T.children.map(Mo),I=S?{...T,children:S}:{...T};return!I.component&&!I.loadComponent&&(S||I.loadChildren)&&I.outlet&&I.outlet!==hn&&(I.component=cs),I}function es(T){return T.outlet||hn}function Ea(T,S){const I=T.filter(M=>es(M)===S);return I.push(...T.filter(M=>es(M)!==S)),I}function Ro(T){var S;if(!T)return null;if(null!==(S=T.routeConfig)&&void 0!==S&&S._injector)return T.routeConfig._injector;for(let I=T.parent;I;I=I.parent){const M=I.routeConfig;if(null!=M&&M._loadedInjector)return M._loadedInjector;if(null!=M&&M._injector)return M._injector}return null}class Ho{constructor(S,I,M,j){this.routeReuseStrategy=S,this.futureState=I,this.currState=M,this.forwardEvent=j}activate(S){const I=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,M,S),Gs(this.futureState.root),this.activateChildRoutes(I,M,S)}deactivateChildRoutes(S,I,M){const j=Qi(I);S.children.forEach(ne=>{const ue=ne.value.outlet;this.deactivateRoutes(ne,j[ue],M),delete j[ue]}),Dr(j,(ne,ue)=>{this.deactivateRouteAndItsChildren(ne,M)})}deactivateRoutes(S,I,M){const j=S.value,ne=I?I.value:null;if(j===ne)if(j.component){const ue=M.getContext(j.outlet);ue&&this.deactivateChildRoutes(S,I,ue.children)}else this.deactivateChildRoutes(S,I,M);else ne&&this.deactivateRouteAndItsChildren(I,M)}deactivateRouteAndItsChildren(S,I){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,I):this.deactivateRouteAndOutlet(S,I)}detachAndStoreRouteSubtree(S,I){const M=I.getContext(S.value.outlet),j=M&&S.value.component?M.children:I,ne=Qi(S);for(const ue of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[ue],j);if(M&&M.outlet){const ue=M.outlet.detach(),nt=M.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ue,route:S,contexts:nt})}}deactivateRouteAndOutlet(S,I){const M=I.getContext(S.value.outlet),j=M&&S.value.component?M.children:I,ne=Qi(S);for(const ue of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[ue],j);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(S,I,M){const j=Qi(I);S.children.forEach(ne=>{this.activateRoutes(ne,j[ne.value.outlet],M),this.forwardEvent(new li(ne.value.snapshot))}),S.children.length&&this.forwardEvent(new _n(S.value.snapshot))}activateRoutes(S,I,M){const j=S.value,ne=I?I.value:null;if(Gs(j),j===ne)if(j.component){const nt=M.getOrCreateContext(j.outlet);this.activateChildRoutes(S,I,nt.children)}else this.activateChildRoutes(S,I,M);else if(j.component){const nt=M.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const Ot=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),nt.children.onOutletReAttached(Ot.contexts),nt.attachRef=Ot.componentRef,nt.route=Ot.route.value,nt.outlet&&nt.outlet.attach(Ot.componentRef,Ot.route.value),Gs(Ot.route.value),this.activateChildRoutes(S,null,nt.children)}else{var ue;const Ot=Ro(j.snapshot),an=null!==(ue=null==Ot?void 0:Ot.get(c._Vd))&&void 0!==ue?ue:null;nt.attachRef=null,nt.route=j,nt.resolver=an,nt.injector=Ot,nt.outlet&&nt.outlet.activateWith(j,nt.injector),this.activateChildRoutes(S,null,nt.children)}}else this.activateChildRoutes(S,null,M)}}class Po{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class ao{constructor(S,I){this.component=S,this.route=I}}function ts(T,S,I){const M=T._root;return w(M,S?S._root:null,I,[M.value])}function z(T,S){const I=Symbol(),M=S.get(T,I);return M===I?"function"!=typeof T||(0,c.Z0I)(T)?S.get(T):T:M}function w(T,S,I,M,j={canDeactivateChecks:[],canActivateChecks:[]}){const ne=Qi(S);return T.children.forEach(ue=>{(function U(T,S,I,M,j={canDeactivateChecks:[],canActivateChecks:[]}){const ne=T.value,ue=S?S.value:null,nt=I?I.getContext(T.value.outlet):null;if(ue&&ne.routeConfig===ue.routeConfig){const Ot=function pe(T,S,I){if("function"==typeof I)return I(T,S);switch(I){case"pathParamsChange":return!jt(T.url,S.url);case"pathParamsOrQueryParamsChange":return!jt(T.url,S.url)||!Qt(T.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zs(T,S)||!Qt(T.queryParams,S.queryParams);default:return!zs(T,S)}}(ue,ne,ne.routeConfig.runGuardsAndResolvers);Ot?j.canActivateChecks.push(new Po(M)):(ne.data=ue.data,ne._resolvedData=ue._resolvedData),w(T,S,ne.component?nt?nt.children:null:I,M,j),Ot&&nt&&nt.outlet&&nt.outlet.isActivated&&j.canDeactivateChecks.push(new ao(nt.outlet.component,ue))}else ue&&Tt(S,nt,j),j.canActivateChecks.push(new Po(M)),w(T,null,ne.component?nt?nt.children:null:I,M,j)})(ue,ne[ue.value.outlet],I,M.concat([ue.value]),j),delete ne[ue.value.outlet]}),Dr(ne,(ue,nt)=>Tt(ue,I.getContext(nt),j)),j}function Tt(T,S,I){const M=Qi(T),j=T.value;Dr(M,(ne,ue)=>{Tt(ne,j.component?S?S.children.getContext(ue):null:S,I)}),I.canDeactivateChecks.push(new ao(j.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,j))}function fn(T){return"function"==typeof T}function oe(T){return T instanceof Ae.K||"EmptyError"===(null==T?void 0:T.name)}const bt=Symbol("INITIAL_VALUE");function mn(){return(0,ie.w)(T=>Ge(T.map(S=>S.pipe((0,Pe.q)(1),(0,Ie.O)(bt)))).pipe((0,ve.U)(S=>{for(const I of S)if(!0!==I){if(I===bt)return bt;if(!1===I||I instanceof dr)return I}return!0}),(0,et.h)(S=>S!==bt),(0,Pe.q)(1)))}function oa(T){return(0,q.z)((0,Ue.b)(S=>{if(Pr(S))throw Ws(0,S)}),(0,ve.U)(S=>!0===S))}const Ia={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oo(T,S,I,M,j){const ne=wa(T,S,I);return ne.matched?function Pa(T,S,I,M){const j=S.canMatch;if(!j||0===j.length)return(0,W.of)(!0);const ne=j.map(ue=>{const nt=z(ue,T);return xn(function H(T){return T&&fn(T.canMatch)}(nt)?nt.canMatch(S,I):T.runInContext(()=>nt(S,I)))});return(0,W.of)(ne).pipe(mn(),oa())}(M=sa(S,M),S,I).pipe((0,ve.U)(ue=>!0===ue?ne:{...Ia})):(0,W.of)(ne)}function wa(T,S,I){var M;if(""===S.path)return"full"===S.pathMatch&&(T.hasChildren()||I.length>0)?{...Ia}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const ne=(S.matcher||jn)(I,T,S);if(!ne)return{...Ia};const ue={};Dr(ne.posParams,(Ot,an)=>{ue[an]=Ot.path});const nt=ne.consumed.length>0?{...ue,...ne.consumed[ne.consumed.length-1].parameters}:ue;return{matched:!0,consumedSegments:ne.consumed,remainingSegments:I.slice(ne.consumed.length),parameters:nt,positionalParamSegments:null!==(M=ne.posParams)&&void 0!==M?M:{}}}function Zs(T,S,I,M){if(I.length>0&&function Qs(T,S,I){return I.some(M=>Xs(T,S,M)&&es(M)!==hn)}(T,I,M)){const ne=new Wn(S,function zo(T,S,I,M){const j={};j[hn]=M,M._sourceSegment=T,M._segmentIndexShift=S.length;for(const ne of I)if(""===ne.path&&es(ne)!==hn){const ue=new Wn([],{});ue._sourceSegment=T,ue._segmentIndexShift=S.length,j[es(ne)]=ue}return j}(T,S,M,new Wn(I,T.children)));return ne._sourceSegment=T,ne._segmentIndexShift=S.length,{segmentGroup:ne,slicedSegments:[]}}if(0===I.length&&function lo(T,S,I){return I.some(M=>Xs(T,S,M))}(T,I,M)){const ne=new Wn(T.segments,function bs(T,S,I,M,j){const ne={};for(const ue of M)if(Xs(T,I,ue)&&!j[es(ue)]){const nt=new Wn([],{});nt._sourceSegment=T,nt._segmentIndexShift=S.length,ne[es(ue)]=nt}return{...j,...ne}}(T,S,I,M,T.children));return ne._sourceSegment=T,ne._segmentIndexShift=S.length,{segmentGroup:ne,slicedSegments:I}}const j=new Wn(T.segments,T.children);return j._sourceSegment=T,j._segmentIndexShift=S.length,{segmentGroup:j,slicedSegments:I}}function Xs(T,S,I){return(!(T.hasChildren()||S.length>0)||"full"!==I.pathMatch)&&""===I.path}function Xa(T,S,I,M){return!!(es(T)===M||M!==hn&&Xs(S,I,T))&&("**"===T.path||wa(S,T,I).matched)}function ns(T,S,I){return 0===S.length&&!T.children[I]}const Wo=!1;class ba{constructor(S){this.segmentGroup=S||null}}class yo{constructor(S){this.urlTree=S}}function rs(T){return st(new ba(T))}function ko(T){return st(new yo(T))}class No{constructor(S,I,M,j,ne){this.injector=S,this.configLoader=I,this.urlSerializer=M,this.urlTree=j,this.config=ne,this.allowRedirects=!0}apply(){const S=Zs(this.urlTree.root,[],[],this.config).segmentGroup,I=new Wn(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,I,hn).pipe((0,ve.U)(ne=>this.createUrlTree(pi(ne),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ne(ne=>{if(ne instanceof yo)return this.allowRedirects=!1,this.match(ne.urlTree);throw ne instanceof ba?this.noMatchError(ne):ne}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,hn).pipe((0,ve.U)(j=>this.createUrlTree(pi(j),S.queryParams,S.fragment))).pipe(Ne(j=>{throw j instanceof ba?this.noMatchError(j):j}))}noMatchError(S){return new c.vHH(4002,Wo)}createUrlTree(S,I,M){const j=ei(S);return new dr(j,I,M)}expandSegmentGroup(S,I,M,j){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(S,I,M).pipe((0,ve.U)(ne=>new Wn([],ne))):this.expandSegment(S,M,I,M.segments,j,!0)}expandChildren(S,I,M){const j=[];for(const ne of Object.keys(M.children))"primary"===ne?j.unshift(ne):j.push(ne);return(0,X.D)(j).pipe($e(ne=>{const ue=M.children[ne],nt=Ea(I,ne);return this.expandSegmentGroup(S,nt,ue,ne).pipe((0,ve.U)(Ot=>({segment:Ot,outlet:ne})))}),(0,tt.R)((ne,ue)=>(ne[ue.outlet]=ue.segment,ne),{}),zt())}expandSegment(S,I,M,j,ne,ue){return(0,X.D)(M).pipe($e(nt=>this.expandSegmentAgainstRoute(S,I,M,nt,j,ne,ue).pipe(Ne(an=>{if(an instanceof ba)return(0,W.of)(null);throw an}))),(0,We.P)(nt=>!!nt),Ne((nt,Ot)=>{if(oe(nt))return ns(I,j,ne)?(0,W.of)(new Wn([],{})):rs(I);throw nt}))}expandSegmentAgainstRoute(S,I,M,j,ne,ue,nt){return Xa(j,I,ne,ue)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(S,I,j,ne,ue):nt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,I,M,j,ne,ue):rs(I):rs(I)}expandSegmentAgainstRouteUsingRedirect(S,I,M,j,ne,ue){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,M,j,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(S,I,M,j,ne,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,I,M,j){const ne=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?ko(ne):this.lineralizeSegments(M,ne).pipe((0,Ve.z)(ue=>{const nt=new Wn(ue,{});return this.expandSegment(S,nt,I,ue,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,I,M,j,ne,ue){const{matched:nt,consumedSegments:Ot,remainingSegments:an,positionalParamSegments:Tn}=wa(I,j,ne);if(!nt)return rs(I);const kn=this.applyRedirectCommands(Ot,j.redirectTo,Tn);return j.redirectTo.startsWith("/")?ko(kn):this.lineralizeSegments(j,kn).pipe((0,Ve.z)(Qr=>this.expandSegment(S,I,M,Qr.concat(an),ue,!1)))}matchSegmentAgainstRoute(S,I,M,j,ne){return"**"===M.path?(S=sa(M,S),M.loadChildren?(M._loadedRoutes?(0,W.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):this.configLoader.loadChildren(S,M)).pipe((0,ve.U)(nt=>(M._loadedRoutes=nt.routes,M._loadedInjector=nt.injector,new Wn(j,{})))):(0,W.of)(new Wn(j,{}))):Oo(I,M,j,S).pipe((0,ie.w)(({matched:ue,consumedSegments:nt,remainingSegments:Ot})=>{var an;return ue?(S=null!==(an=M._injector)&&void 0!==an?an:S,this.getChildConfig(S,M,j).pipe((0,Ve.z)(kn=>{var Qr;const Si=null!==(Qr=kn.injector)&&void 0!==Qr?Qr:S,is=kn.routes,{segmentGroup:Rs,slicedSegments:oi}=Zs(I,nt,Ot,is),Js=new Wn(Rs.segments,Rs.children);if(0===oi.length&&Js.hasChildren())return this.expandChildren(Si,is,Js).pipe((0,ve.U)(G=>new Wn(nt,G)));if(0===is.length&&0===oi.length)return(0,W.of)(new Wn(nt,{}));const Us=es(M)===ne;return this.expandSegment(Si,Js,is,oi,Us?hn:ne,!0).pipe((0,ve.U)($=>new Wn(nt.concat($.segments),$.children)))}))):rs(I)}))}getChildConfig(S,I,M){return I.children?(0,W.of)({routes:I.children,injector:S}):I.loadChildren?void 0!==I._loadedRoutes?(0,W.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function qs(T,S,I,M){const j=S.canLoad;if(void 0===j||0===j.length)return(0,W.of)(!0);const ne=j.map(ue=>{const nt=z(ue,T);return xn(function yr(T){return T&&fn(T.canLoad)}(nt)?nt.canLoad(S,I):T.runInContext(()=>nt(S,I)))});return(0,W.of)(ne).pipe(mn(),oa())}(S,I,M).pipe((0,Ve.z)(j=>j?this.configLoader.loadChildren(S,I).pipe((0,Ue.b)(ne=>{I._loadedRoutes=ne.routes,I._loadedInjector=ne.injector})):function xc(T){return st(Ao(Wo,3))}())):(0,W.of)({routes:[],injector:S})}lineralizeSegments(S,I){let M=[],j=I.root;for(;;){if(M=M.concat(j.segments),0===j.numberOfChildren)return(0,W.of)(M);if(j.numberOfChildren>1||!j.children[hn])return st(new c.vHH(4e3,Wo));j=j.children[hn]}}applyRedirectCommands(S,I,M){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),S,M)}applyRedirectCreateUrlTree(S,I,M,j){const ne=this.createSegmentGroup(S,I.root,M,j);return new dr(ne,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(S,I){const M={};return Dr(S,(j,ne)=>{if("string"==typeof j&&j.startsWith(":")){const nt=j.substring(1);M[ne]=I[nt]}else M[ne]=j}),M}createSegmentGroup(S,I,M,j){const ne=this.createSegments(S,I.segments,M,j);let ue={};return Dr(I.children,(nt,Ot)=>{ue[Ot]=this.createSegmentGroup(S,nt,M,j)}),new Wn(ne,ue)}createSegments(S,I,M,j){return I.map(ne=>ne.path.startsWith(":")?this.findPosParam(S,ne,j):this.findOrReturn(ne,M))}findPosParam(S,I,M){const j=M[I.path.substring(1)];if(!j)throw new c.vHH(4001,Wo);return j}findOrReturn(S,I){let M=0;for(const j of I){if(j.path===S.path)return I.splice(M),j;M++}return S}}class _o{}class O{constructor(S,I,M,j,ne,ue,nt){this.injector=S,this.rootComponentType=I,this.config=M,this.urlTree=j,this.url=ne,this.paramsInheritanceStrategy=ue,this.urlSerializer=nt}recognize(){const S=Zs(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,hn).pipe((0,ve.U)(I=>{if(null===I)return null;const M=new so([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Mi(M,I),ne=new Uo(this.url,j);return this.inheritParamsAndData(ne._root),ne}))}inheritParamsAndData(S){const I=S.value,M=Os(I,this.paramsInheritanceStrategy);I.params=Object.freeze(M.params),I.data=Object.freeze(M.data),S.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(S,I,M,j){return 0===M.segments.length&&M.hasChildren()?this.processChildren(S,I,M):this.processSegment(S,I,M,M.segments,j)}processChildren(S,I,M){return(0,X.D)(Object.keys(M.children)).pipe($e(j=>{const ne=M.children[j],ue=Ea(I,j);return this.processSegmentGroup(S,ue,ne,j)}),(0,tt.R)((j,ne)=>j&&ne?(j.push(...ne),j):null),function wn(T,S=!1){return(0,ze.e)((I,M)=>{let j=0;I.subscribe((0,be.x)(M,ne=>{const ue=T(ne,j++);(ue||S)&&M.next(ne),!ue&&M.complete()}))})}(j=>null!==j),(0,Ut.d)(null),zt(),(0,ve.U)(j=>{if(null===j)return null;const ne=Me(j);return function Q(T){T.sort((S,I)=>S.value.outlet===hn?-1:I.value.outlet===hn?1:S.value.outlet.localeCompare(I.value.outlet))}(ne),ne}))}processSegment(S,I,M,j,ne){return(0,X.D)(I).pipe($e(ue=>{var nt;return this.processSegmentAgainstRoute(null!==(nt=ue._injector)&&void 0!==nt?nt:S,ue,M,j,ne)}),(0,We.P)(ue=>!!ue),Ne(ue=>{if(oe(ue))return ns(M,j,ne)?(0,W.of)([]):(0,W.of)(null);throw ue}))}processSegmentAgainstRoute(S,I,M,j,ne){if(I.redirectTo||!Xa(I,M,j,ne))return(0,W.of)(null);let ue;if("**"===I.path){var nt,Ot;const an=j.length>0?Vr(j).parameters:{},Tn=On(M)+j.length,kn=new so(j,an,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kr(I),es(I),null!==(nt=null!==(Ot=I.component)&&void 0!==Ot?Ot:I._loadedComponent)&&void 0!==nt?nt:null,I,Ht(M),Tn,hr(I));ue=(0,W.of)({snapshot:kn,consumedSegments:[],remainingSegments:[]})}else ue=Oo(M,I,j,S).pipe((0,ve.U)(({matched:an,consumedSegments:Tn,remainingSegments:kn,parameters:Qr})=>{var Si,is;if(!an)return null;const Rs=On(M)+Tn.length;return{snapshot:new so(Tn,Qr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,kr(I),es(I),null!==(Si=null!==(is=I.component)&&void 0!==is?is:I._loadedComponent)&&void 0!==Si?Si:null,I,Ht(M),Rs,hr(I)),consumedSegments:Tn,remainingSegments:kn}}));return ue.pipe((0,ie.w)(an=>{var Tn,kn;if(null===an)return(0,W.of)(null);const{snapshot:Qr,consumedSegments:Si,remainingSegments:is}=an;S=null!==(Tn=I._injector)&&void 0!==Tn?Tn:S;const Rs=null!==(kn=I._loadedInjector)&&void 0!==kn?kn:S,oi=function F(T){return T.children?T.children:T.loadChildren?T._loadedRoutes:[]}(I),{segmentGroup:Js,slicedSegments:Us}=Zs(M,Si,is,oi.filter($=>void 0===$.redirectTo));if(0===Us.length&&Js.hasChildren())return this.processChildren(Rs,oi,Js).pipe((0,ve.U)($=>null===$?null:[new Mi(Qr,$)]));if(0===oi.length&&0===Us.length)return(0,W.of)([new Mi(Qr,[])]);const Pc=es(I)===ne;return this.processSegment(Rs,oi,Js,Us,Pc?hn:ne).pipe((0,ve.U)($=>null===$?null:[new Mi(Qr,$)]))}))}}function se(T){const S=T.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Me(T){const S=[],I=new Set;for(const M of T){if(!se(M)){S.push(M);continue}const j=S.find(ne=>M.value.routeConfig===ne.value.routeConfig);void 0!==j?(j.children.push(...M.children),I.add(j)):S.push(M)}for(const M of I){const j=Me(M.children);S.push(new Mi(M.value,j))}return S.filter(M=>!I.has(M))}function Ht(T){let S=T;for(;S._sourceSegment;)S=S._sourceSegment;return S}function On(T){var S;let I=T,M=null!==(S=I._segmentIndexShift)&&void 0!==S?S:0;for(;I._sourceSegment;){var j;I=I._sourceSegment,M+=null!==(j=I._segmentIndexShift)&&void 0!==j?j:0}return M-1}function kr(T){return T.data||{}}function hr(T){return T.resolve||{}}function Fi(T){return"string"==typeof T.title||null===T.title}function hs(T){return(0,ie.w)(S=>{const I=T(S);return I?(0,X.D)(I).pipe((0,ve.U)(()=>S)):(0,W.of)(S)})}class sr{constructor(S){this.router=S,this.currentNavigation=null}setupNavigations(S){const I=this.router.events;return S.pipe((0,et.h)(M=>0!==M.id),(0,ve.U)(M=>({...M,extractedUrl:this.router.urlHandlingStrategy.extract(M.rawUrl)})),(0,ie.w)(M=>{let j=!1,ne=!1;return(0,W.of)(M).pipe((0,Ue.b)(ue=>{this.currentNavigation={id:ue.id,initialUrl:ue.rawUrl,extractedUrl:ue.extractedUrl,trigger:ue.source,extras:ue.extras,previousNavigation:this.router.lastSuccessfulNavigation?{...this.router.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ie.w)(ue=>{const nt=this.router.browserUrlTree.toString(),Ot=!this.router.navigated||ue.extractedUrl.toString()!==nt||nt!==this.router.currentUrlTree.toString();if(("reload"===this.router.onSameUrlNavigation||Ot)&&this.router.urlHandlingStrategy.shouldProcessUrl(ue.rawUrl))return Fo(ue.source)&&(this.router.browserUrlTree=ue.extractedUrl),(0,W.of)(ue).pipe((0,ie.w)(Tn=>{const kn=this.router.transitions.getValue();return I.next(new Rt(Tn.id,this.router.serializeUrl(Tn.extractedUrl),Tn.source,Tn.restoredState)),kn!==this.router.transitions.getValue()?it.E:Promise.resolve(Tn)}),function aa(T,S,I,M){return(0,ie.w)(j=>function vo(T,S,I,M,j){return new No(T,S,I,M,j).apply()}(T,S,I,j.extractedUrl,M).pipe((0,ve.U)(ne=>({...j,urlAfterRedirects:ne}))))}(this.router.ngModule.injector,this.router.configLoader,this.router.urlSerializer,this.router.config),(0,Ue.b)(Tn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Tn.urlAfterRedirects},M.urlAfterRedirects=Tn.urlAfterRedirects}),function Zn(T,S,I,M,j){return(0,Ve.z)(ne=>function Ui(T,S,I,M,j,ne,ue="emptyOnly"){return new O(T,S,I,M,j,ue,ne).recognize().pipe((0,ie.w)(nt=>null===nt?function Oa(T){return new Se.y(S=>S.error(T))}(new _o):(0,W.of)(nt)))}(T,S,I,ne.urlAfterRedirects,M.serialize(ne.urlAfterRedirects),M,j).pipe((0,ve.U)(ue=>({...ne,targetSnapshot:ue}))))}(this.router.ngModule.injector,this.router.rootComponentType,this.router.config,this.router.urlSerializer,this.router.paramsInheritanceStrategy),(0,Ue.b)(Tn=>{if(M.targetSnapshot=Tn.targetSnapshot,"eager"===this.router.urlUpdateStrategy){if(!Tn.extras.skipLocationChange){const Qr=this.router.urlHandlingStrategy.merge(Tn.urlAfterRedirects,Tn.rawUrl);this.router.setBrowserUrl(Qr,Tn)}this.router.browserUrlTree=Tn.urlAfterRedirects}const kn=new Rn(Tn.id,this.router.serializeUrl(Tn.extractedUrl),this.router.serializeUrl(Tn.urlAfterRedirects),Tn.targetSnapshot);I.next(kn)}));if(Ot&&this.router.rawUrlTree&&this.router.urlHandlingStrategy.shouldProcessUrl(this.router.rawUrlTree)){const{id:kn,extractedUrl:Qr,source:Si,restoredState:is,extras:Rs}=ue,oi=new Rt(kn,this.router.serializeUrl(Qr),Si,is);I.next(oi);const Js=ra(Qr,this.router.rootComponentType).snapshot;return M={...ue,targetSnapshot:Js,urlAfterRedirects:Qr,extras:{...Rs,skipLocationChange:!1,replaceUrl:!1}},(0,W.of)(M)}return this.router.rawUrlTree=ue.rawUrl,ue.resolve(null),it.E}),(0,Ue.b)(ue=>{const nt=new Nr(ue.id,this.router.serializeUrl(ue.extractedUrl),this.router.serializeUrl(ue.urlAfterRedirects),ue.targetSnapshot);this.router.triggerEvent(nt)}),(0,ve.U)(ue=>M={...ue,guards:ts(ue.targetSnapshot,ue.currentSnapshot,this.router.rootContexts)}),function Pi(T,S){return(0,Ve.z)(I=>{const{targetSnapshot:M,currentSnapshot:j,guards:{canActivateChecks:ne,canDeactivateChecks:ue}}=I;return 0===ue.length&&0===ne.length?(0,W.of)({...I,guardsResult:!0}):function Yt(T,S,I,M){return(0,X.D)(T).pipe((0,Ve.z)(j=>function $s(T,S,I,M,j){const ne=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,W.of)(!0);const ue=ne.map(nt=>{var Ot;const an=null!==(Ot=Ro(S))&&void 0!==Ot?Ot:j,Tn=z(nt,an);return xn(function ti(T){return T&&fn(T.canDeactivate)}(Tn)?Tn.canDeactivate(T,S,I,M):an.runInContext(()=>Tn(T,S,I,M))).pipe((0,We.P)())});return(0,W.of)(ue).pipe(mn())}(j.component,j.route,I,S,M)),(0,We.P)(j=>!0!==j,!0))}(ue,M,j,T).pipe((0,Ve.z)(nt=>nt&&function Dn(T){return"boolean"==typeof T}(nt)?function Tr(T,S,I,M){return(0,X.D)(S).pipe($e(j=>(0,ke.z)(function mo(T,S){return null!==T&&S&&S(new tn(T)),(0,W.of)(!0)}(j.route.parent,M),function Ys(T,S){return null!==T&&S&&S(new or(T)),(0,W.of)(!0)}(j.route,M),function Go(T,S,I){const M=S[S.length-1],ne=S.slice(0,S.length-1).reverse().map(ue=>function C(T){const S=T.routeConfig?T.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:T,guards:S}:null}(ue)).filter(ue=>null!==ue).map(ue=>fe(()=>{const nt=ue.guards.map(Ot=>{var an;const Tn=null!==(an=Ro(ue.node))&&void 0!==an?an:I,kn=z(Ot,Tn);return xn(function ln(T){return T&&fn(T.canActivateChild)}(kn)?kn.canActivateChild(M,T):Tn.runInContext(()=>kn(M,T))).pipe((0,We.P)())});return(0,W.of)(nt).pipe(mn())}));return(0,W.of)(ne).pipe(mn())}(T,j.path,I),function ui(T,S,I){const M=S.routeConfig?S.routeConfig.canActivate:null;if(!M||0===M.length)return(0,W.of)(!0);const j=M.map(ne=>fe(()=>{var ue;const nt=null!==(ue=Ro(S))&&void 0!==ue?ue:I,Ot=z(ne,nt);return xn(function Yr(T){return T&&fn(T.canActivate)}(Ot)?Ot.canActivate(S,T):nt.runInContext(()=>Ot(S,T))).pipe((0,We.P)())}));return(0,W.of)(j).pipe(mn())}(T,j.route,I))),(0,We.P)(j=>!0!==j,!0))}(M,ne,T,S):(0,W.of)(nt)),(0,ve.U)(nt=>({...I,guardsResult:nt})))})}(this.router.ngModule.injector,ue=>this.router.triggerEvent(ue)),(0,Ue.b)(ue=>{if(M.guardsResult=ue.guardsResult,Pr(ue.guardsResult))throw Ws(0,ue.guardsResult);const nt=new mr(ue.id,this.router.serializeUrl(ue.extractedUrl),this.router.serializeUrl(ue.urlAfterRedirects),ue.targetSnapshot,!!ue.guardsResult);this.router.triggerEvent(nt)}),(0,et.h)(ue=>!!ue.guardsResult||(this.router.restoreHistory(ue),this.router.cancelNavigationTransition(ue,"",3),!1)),hs(ue=>{if(ue.guards.canActivateChecks.length)return(0,W.of)(ue).pipe((0,Ue.b)(nt=>{const Ot=new Je(nt.id,this.router.serializeUrl(nt.extractedUrl),this.router.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.router.triggerEvent(Ot)}),(0,ie.w)(nt=>{let Ot=!1;return(0,W.of)(nt).pipe(function ni(T,S){return(0,Ve.z)(I=>{const{targetSnapshot:M,guards:{canActivateChecks:j}}=I;if(!j.length)return(0,W.of)(I);let ne=0;return(0,X.D)(j).pipe($e(ue=>function Ei(T,S,I,M){const j=T.routeConfig,ne=T._resolve;return void 0!==(null==j?void 0:j.title)&&!Fi(j)&&(ne[cr]=j.title),function Ii(T,S,I,M){const j=function Xt(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===j.length)return(0,W.of)({});const ne={};return(0,X.D)(j).pipe((0,Ve.z)(ue=>function mi(T,S,I,M){var j;const ne=null!==(j=Ro(S))&&void 0!==j?j:M,ue=z(T,ne);return xn(ue.resolve?ue.resolve(S,I):ne.runInContext(()=>ue(S,I)))}(T[ue],S,I,M).pipe((0,We.P)(),(0,Ue.b)(nt=>{ne[ue]=nt}))),_t(1),function er(T){return(0,ve.U)(()=>T)}(ne),Ne(ue=>oe(ue)?it.E:st(ue)))}(ne,T,S,M).pipe((0,ve.U)(ue=>(T._resolvedData=ue,T.data=Os(T,I).resolve,j&&Fi(j)&&(T.data[cr]=j.title),null)))}(ue.route,M,T,S)),(0,Ue.b)(()=>ne++),_t(1),(0,Ve.z)(ue=>ne===j.length?(0,W.of)(I):it.E))})}(this.router.paramsInheritanceStrategy,this.router.ngModule.injector),(0,Ue.b)({next:()=>Ot=!0,complete:()=>{Ot||(this.router.restoreHistory(nt),this.router.cancelNavigationTransition(nt,"",2))}}))}),(0,Ue.b)(nt=>{const Ot=new at(nt.id,this.router.serializeUrl(nt.extractedUrl),this.router.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.router.triggerEvent(Ot)}))}),hs(ue=>{const nt=Ot=>{var an;const Tn=[];null!==(an=Ot.routeConfig)&&void 0!==an&&an.loadComponent&&!Ot.routeConfig._loadedComponent&&Tn.push(this.router.configLoader.loadComponent(Ot.routeConfig).pipe((0,Ue.b)(kn=>{Ot.component=kn}),(0,ve.U)(()=>{})));for(const kn of Ot.children)Tn.push(...nt(kn));return Tn};return Ge(nt(ue.targetSnapshot.root)).pipe((0,Ut.d)(),(0,Pe.q)(1))}),hs(()=>this.router.afterPreactivation()),(0,ve.U)(ue=>{const nt=function As(T,S,I){const M=ws(T,S._root,I?I._root:void 0);return new Wi(M,S)}(this.router.routeReuseStrategy,ue.targetSnapshot,ue.currentRouterState);return M={...ue,targetRouterState:nt}}),(0,Ue.b)(ue=>{this.router.currentUrlTree=ue.urlAfterRedirects,this.router.rawUrlTree=this.router.urlHandlingStrategy.merge(ue.urlAfterRedirects,ue.rawUrl),this.router.routerState=ue.targetRouterState,"deferred"===this.router.urlUpdateStrategy&&(ue.extras.skipLocationChange||this.router.setBrowserUrl(this.router.rawUrlTree,ue),this.router.browserUrlTree=ue.urlAfterRedirects)}),((T,S,I)=>(0,ve.U)(M=>(new Ho(S,M.targetRouterState,M.currentRouterState,I).activate(T),M)))(this.router.rootContexts,this.router.routeReuseStrategy,ue=>this.router.triggerEvent(ue)),(0,Ue.b)({next(){j=!0},complete(){j=!0}}),tr(()=>{var ue;j||ne||this.router.cancelNavigationTransition(M,"",1),(null===(ue=this.currentNavigation)||void 0===ue?void 0:ue.id)===M.id&&(this.currentNavigation=null)}),Ne(ue=>{if(ne=!0,oo(ue)){xo(ue)||(this.router.navigated=!0,this.router.restoreHistory(M,!0));const Ot=new rn(M.id,this.router.serializeUrl(M.extractedUrl),ue.message,ue.cancellationCode);if(I.next(Ot),xo(ue)){const an=this.router.urlHandlingStrategy.merge(ue.url,this.router.rawUrlTree),Tn={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===this.router.urlUpdateStrategy||Fo(M.source)};this.router.scheduleNavigation(an,"imperative",null,Tn,{resolve:M.resolve,reject:M.reject,promise:M.promise})}else M.resolve(!1)}else{var nt;this.router.restoreHistory(M,!0);const Ot=new Mn(M.id,this.router.serializeUrl(M.extractedUrl),ue,null!==(nt=M.targetSnapshot)&&void 0!==nt?nt:void 0);I.next(Ot);try{M.resolve(this.router.errorHandler(ue))}catch(an){M.reject(an)}}return it.E}))}))}}function Fo(T){return"imperative"!==T}let En=(()=>{class T{buildTitle(I){let M,j=I.root;for(;void 0!==j;){var ne;M=null!==(ne=this.getResolvedTitleForRoute(j))&&void 0!==ne?ne:M,j=j.children.find(ue=>ue.outlet===hn)}return M}getResolvedTitleForRoute(I){return I.data[cr]}}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:function(){return(0,c.f3M)(Lt)},providedIn:"root"}),T})(),Lt=(()=>{class T extends En{constructor(I){super(),this.title=I}updateTitle(I){const M=this.buildTitle(I);void 0!==M&&this.title.setTitle(M)}}return T.\u0275fac=function(I){return new(I||T)(c.LFG(Pn.Dx))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Jt=(()=>{class T{}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:function(){return(0,c.f3M)(gl)},providedIn:"root"}),T})();class xs{shouldDetach(S){return!1}store(S,I){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,I){return S.routeConfig===I.routeConfig}}let gl=(()=>{class T extends xs{}return T.\u0275fac=function(){let S;return function(M){return(S||(S=c.n5z(T)))(M||T)}}(),T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const la=new c.OlP("",{providedIn:"root",factory:()=>({})}),Ko=new c.OlP("ROUTES");let ka=(()=>{class T{constructor(I,M){this.injector=I,this.compiler=M,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,W.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const M=xn(I.loadComponent()).pipe((0,ve.U)(eu),(0,Ue.b)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ne}),tr(()=>{this.componentLoaders.delete(I)})),j=new Ze(M,()=>new ce.x).pipe(re());return this.componentLoaders.set(I,j),j}loadChildren(I,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,W.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const ne=this.loadModuleFactoryOrRoutes(M.loadChildren).pipe((0,ve.U)(nt=>{this.onLoadEndListener&&this.onLoadEndListener(M);let Ot,an,Tn=!1;Array.isArray(nt)?an=nt:(Ot=nt.create(I).injector,an=Rr(Ot.get(Ko,[],c.XFs.Self|c.XFs.Optional)));return{routes:an.map(Mo),injector:Ot}}),tr(()=>{this.childrenLoaders.delete(M)})),ue=new Ze(ne,()=>new ce.x).pipe(re());return this.childrenLoaders.set(M,ue),ue}loadModuleFactoryOrRoutes(I){return xn(I()).pipe((0,ve.U)(eu),(0,Ve.z)(j=>j instanceof c.YKP||Array.isArray(j)?(0,W.of)(j):(0,X.D)(this.compiler.compileModuleAsync(j))))}}return T.\u0275fac=function(I){return new(I||T)(c.LFG(c.zs3),c.LFG(c.Sil))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function eu(T){return function Ja(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let Na=(()=>{class T{}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:function(){return(0,c.f3M)(ml)},providedIn:"root"}),T})(),ml=(()=>{class T{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,M){return I}}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ll(T){throw T}function xl(T,S,I){return S.parse("/")}const ji={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Jr(){var T,S;const I=(0,c.f3M)(Hn),M=(0,c.f3M)(ds),j=(0,c.f3M)(ge.Ye),ne=(0,c.f3M)(c.zs3),ue=(0,c.f3M)(c.Sil),nt=null!==(T=(0,c.f3M)(Ko,{optional:!0}))&&void 0!==T?T:[],Ot=null!==(S=(0,c.f3M)(la,{optional:!0}))&&void 0!==S?S:{},an=new Cs(null,I,M,j,ne,ue,Rr(nt));return function Ms(T,S){T.errorHandler&&(S.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(S.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(S.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.urlUpdateStrategy&&(S.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(S.canceledNavigationResolution=T.canceledNavigationResolution)}(Ot,an),an}let Cs=(()=>{class T{constructor(I,M,j,ne,ue,nt,Ot){this.rootComponentType=I,this.urlSerializer=M,this.rootContexts=j,this.location=ne,this.config=Ot,this.lastSuccessfulNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ce.x,this.errorHandler=ll,this.malformedUriErrorHandler=xl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,W.of)(void 0),this.urlHandlingStrategy=(0,c.f3M)(Na),this.routeReuseStrategy=(0,c.f3M)(Jt),this.titleStrategy=(0,c.f3M)(En),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=new sr(this),this.configLoader=ue.get(ka),this.configLoader.onLoadEndListener=Qr=>this.triggerEvent(new Gt(Qr)),this.configLoader.onLoadStartListener=Qr=>this.triggerEvent(new wt(Qr)),this.ngModule=ue.get(c.h0i),this.console=ue.get(c.c2e);const kn=ue.get(c.R0b);this.isNgZoneEnabled=kn instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(Ot),this.currentUrlTree=new dr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ra(this.currentUrlTree,this.rootComponentType),this.transitions=new Oe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.navigationTransitions.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next({...this.transitions.value,...I})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const M="popstate"===I.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var j;const ne={replaceUrl:!0},ue=null!==(j=I.state)&&void 0!==j&&j.navigationId?I.state:null;if(I.state){const Ot={...I.state};delete Ot.navigationId,delete Ot.\u0275routerPageId,0!==Object.keys(Ot).length&&(ne.state=Ot)}const nt=this.parseUrl(I.url);this.scheduleNavigation(nt,M,ue,ne)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){this.config=I.map(Mo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,M={}){const{relativeTo:j,queryParams:ne,fragment:ue,queryParamsHandling:nt,preserveFragment:Ot}=M,an=j||this.routerState.root,Tn=Ot?this.currentUrlTree.fragment:ue;let kn=null;switch(nt){case"merge":kn={...this.currentUrlTree.queryParams,...ne};break;case"preserve":kn=this.currentUrlTree.queryParams;break;default:kn=ne||null}return null!==kn&&(kn=this.removeEmptyProps(kn)),ir(an,this.currentUrlTree,I,kn,null!=Tn?Tn:null)}navigateByUrl(I,M={skipLocationChange:!1}){const j=Pr(I)?I:this.parseUrl(I),ne=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(ne,"imperative",null,M)}navigate(I,M={skipLocationChange:!1}){return function wi(T){for(let S=0;S<T.length;S++){if(null==T[S])throw new c.vHH(4008,!1)}}(I),this.navigateByUrl(this.createUrlTree(I,M),M)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let M;try{M=this.urlSerializer.parse(I)}catch(j){M=this.malformedUriErrorHandler(j,this.urlSerializer,I)}return M}isActive(I,M){let j;if(j=!0===M?{...ji}:!1===M?{...pr}:M,Pr(I))return _r(this.currentUrlTree,I,j);const ne=this.parseUrl(I);return _r(this.currentUrlTree,ne,j)}removeEmptyProps(I){return Object.keys(I).reduce((M,j)=>{const ne=I[j];return null!=ne&&(M[j]=ne),M},{})}processNavigations(){this.navigations.subscribe(I=>{var M;this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Pt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.getCurrentNavigation(),null===(M=this.titleStrategy)||void 0===M||M.updateTitle(this.routerState.snapshot),I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,M,j,ne,ue){if(this.disposed)return Promise.resolve(!1);let nt,Ot,an;ue?(nt=ue.resolve,Ot=ue.reject,an=ue.promise):an=new Promise((is,Rs)=>{nt=is,Ot=Rs});const Tn=++this.navigationId;let kn;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(j=this.location.getState()),j&&j.\u0275routerPageId)kn=j.\u0275routerPageId;else if(ne.replaceUrl||ne.skipLocationChange){var Qr;kn=null!==(Qr=this.browserPageId)&&void 0!==Qr?Qr:0}else{var Si;kn=(null!==(Si=this.browserPageId)&&void 0!==Si?Si:0)+1}else kn=0;return this.setTransition({id:Tn,targetPageId:kn,source:M,restoredState:j,currentUrlTree:this.currentUrlTree,rawUrl:I,extras:ne,resolve:nt,reject:Ot,promise:an,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),an.catch(is=>Promise.reject(is))}setBrowserUrl(I,M){const j=this.urlSerializer.serialize(I),ne={...M.extras.state,...this.generateNgRouterState(M.id,M.targetPageId)};this.location.isCurrentPathEqualTo(j)||M.extras.replaceUrl?this.location.replaceState(j,"",ne):this.location.go(j,"",ne)}restoreHistory(I,M=!1){if("computed"===this.canceledNavigationResolution){var j,ne;const ue=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.getCurrentNavigation())||void 0===j?void 0:j.finalUrl)||0===ue?this.currentUrlTree===(null===(ne=this.getCurrentNavigation())||void 0===ne?void 0:ne.finalUrl)&&0===ue&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ue)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,M,j){const ne=new rn(I.id,this.serializeUrl(I.extractedUrl),M,j);this.triggerEvent(ne),I.resolve(!1)}generateNgRouterState(I,M){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:M}:{navigationId:I}}}return T.\u0275fac=function(I){c.$Z()},T.\u0275prov=c.Yz7({token:T,factory:function(){return Jr()},providedIn:"root"}),T})(),gn=(()=>{class T{constructor(I,M,j,ne,ue,nt){this.router=I,this.route=M,this.tabIndexAttribute=j,this.renderer=ne,this.el=ue,this.locationStrategy=nt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ce.x;const Ot=ue.nativeElement.tagName;this.isAnchorElement="A"===Ot||"AREA"===Ot,this.isAnchorElement?this.subscription=I.events.subscribe(an=>{an instanceof Pt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(I){this._preserveFragment=(0,c.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,c.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,c.D6c)(I)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,M,j,ne,ue){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||M||j||ne||ue||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var I;null===(I=this.subscription)||void 0===I||I.unsubscribe()}updateHref(){var I;this.href=null!==this.urlTree&&this.locationStrategy?null===(I=this.locationStrategy)||void 0===I?void 0:I.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const M=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",M)}applyAttributeValue(I,M){const j=this.renderer,ne=this.el.nativeElement;null!==M?j.setAttribute(ne,I,M):j.removeAttribute(ne,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return T.\u0275fac=function(I){return new(I||T)(c.Y36(Cs),c.Y36(Xi),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(ge.S$))},T.\u0275dir=c.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(I,M){1&I&&c.NdJ("click",function(ne){return M.onClick(ne.button,ne.ctrlKey,ne.shiftKey,ne.altKey,ne.metaKey)}),2&I&&c.uIk("target",M.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),T})();class Da{}let Cu=(()=>{class T{preload(I,M){return M().pipe(Ne(()=>(0,W.of)(null)))}}return T.\u0275fac=function(I){return new(I||T)},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),Io=(()=>{class T{constructor(I,M,j,ne,ue){this.router=I,this.injector=j,this.preloadingStrategy=ne,this.loader=ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,et.h)(I=>I instanceof Pt),$e(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,M){const j=[];for(const Ot of M){var ne,ue;Ot.providers&&!Ot._injector&&(Ot._injector=(0,c.MMx)(Ot.providers,I,`Route: ${Ot.path}`));const an=null!==(ne=Ot._injector)&&void 0!==ne?ne:I,Tn=null!==(ue=Ot._loadedInjector)&&void 0!==ue?ue:an;if(Ot.loadChildren&&!Ot._loadedRoutes&&void 0===Ot.canLoad||Ot.loadComponent&&!Ot._loadedComponent)j.push(this.preloadConfig(an,Ot));else if(Ot.children||Ot._loadedRoutes){var nt;j.push(this.processRoutes(Tn,null!==(nt=Ot.children)&&void 0!==nt?nt:Ot._loadedRoutes))}}return(0,X.D)(j).pipe((0,qn.J)())}preloadConfig(I,M){return this.preloadingStrategy.preload(M,()=>{let j;j=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(I,M):(0,W.of)(null);const ne=j.pipe((0,Ve.z)(ue=>{var nt;return null===ue?(0,W.of)(void 0):(M._loadedRoutes=ue.routes,M._loadedInjector=ue.injector,this.processRoutes(null!==(nt=ue.injector)&&void 0!==nt?nt:I,ue.routes))}));if(M.loadComponent&&!M._loadedComponent){const ue=this.loader.loadComponent(M);return(0,X.D)([ne,ue]).pipe((0,qn.J)())}return ne})}}return T.\u0275fac=function(I){return new(I||T)(c.LFG(Cs),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(Da),c.LFG(ka))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const La=new c.OlP("");let Du=(()=>{class T{constructor(I,M,j,ne={}){this.router=I,this.viewportScroller=M,this.zone=j,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Rt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Pt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof ar&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new ar(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(I){c.$Z()},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac}),T})();function $a(T,S){return{\u0275kind:T,\u0275providers:S}}function el(){const T=(0,c.f3M)(c.zs3);return S=>{var I,M;const j=T.get(c.z2F);if(S!==j.components[0])return;const ne=T.get(Cs),ue=T.get(Zo);1===T.get(tu)&&ne.initialNavigation(),null===(I=T.get(bo,null,c.XFs.Optional))||void 0===I||I.setUpPreloading(),null===(M=T.get(La,null,c.XFs.Optional))||void 0===M||M.init(),ne.resetRootComponentType(j.componentTypes[0]),ue.closed||(ue.next(),ue.unsubscribe())}}const Zo=new c.OlP("",{factory:()=>new ce.x}),tu=new c.OlP("",{providedIn:"root",factory:()=>1});const bo=new c.OlP("");function yl(T){return $a(0,[{provide:bo,useExisting:Io},{provide:Da,useExisting:T}])}const Ns=new c.OlP("ROUTER_FORROOT_GUARD"),Li=[ge.Ye,{provide:Hn,useClass:Nn},{provide:Cs,useFactory:Jr},ds,{provide:Xi,useFactory:function Ba(T){return T.routerState.root},deps:[Cs]},ka,[]];function ua(){return new c.PXZ("Router",Cs)}let vl=(()=>{class T{constructor(I){}static forRoot(I,M){return{ngModule:T,providers:[Li,[],{provide:Ko,multi:!0,useValue:I},{provide:Ns,useFactory:Kn,deps:[[Cs,new c.FiY,new c.tp0]]},{provide:la,useValue:M||{}},null!=M&&M.useHash?{provide:ge.S$,useClass:ge.Do}:{provide:ge.S$,useClass:ge.b0},{provide:La,useFactory:()=>{const T=(0,c.f3M)(Cs),S=(0,c.f3M)(ge.EM),I=(0,c.f3M)(c.R0b),M=(0,c.f3M)(la);return M.scrollOffset&&S.setOffset(M.scrollOffset),new Du(T,S,I,M)}},null!=M&&M.preloadingStrategy?yl(M.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:ua},null!=M&&M.initialNavigation?Aa(M):[],[{provide:Ur,useFactory:el},{provide:c.tb,multi:!0,useExisting:Ur}]]}}static forChild(I){return{ngModule:T,providers:[{provide:Ko,multi:!0,useValue:I}]}}}return T.\u0275fac=function(I){return new(I||T)(c.LFG(Ns,8))},T.\u0275mod=c.oAB({type:T}),T.\u0275inj=c.cJS({imports:[cs]}),T})();function Kn(T){return"guarded"}function Aa(T){return["disabled"===T.initialNavigation?$a(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const S=(0,c.f3M)(Cs);return()=>{S.setUpLocationChangeListener()}}},{provide:tu,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?$a(2,[{provide:tu,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:S=>{const I=S.get(ge.V_,Promise.resolve());return()=>I.then(()=>new Promise(j=>{const ne=S.get(Cs),ue=S.get(Zo);(function M(j){S.get(Cs).events.pipe((0,et.h)(ue=>ue instanceof Pt||ue instanceof rn||ue instanceof Mn),(0,ve.U)(ue=>ue instanceof Pt||ue instanceof rn&&(0===ue.code||1===ue.code)&&null),(0,et.h)(ue=>null!==ue),(0,Pe.q)(1)).subscribe(()=>{j()})})(()=>{j(!0)}),ne.afterPreactivation=()=>(j(!0),ue.closed?(0,W.of)(void 0):ue),ne.initialNavigation()}))}}]).\u0275providers:[]]}const Ur=new c.OlP("")},3942:(on,pt,V)=>{"use strict";V.d(pt,{Z:()=>ot});var c=V(2090),X=V(4859),W=V(9681),Oe=V(1877);class Ae{constructor(ke,De){this._delegate=ke,this.firebase=De,(0,W._addComponent)(ke,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(ke,De=W._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const q=this._delegate.container.getProvider(ke);return!q.isInitialized()&&"EXPLICIT"===(null===(fe=q.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&q.initialize(),q.getImmediate({identifier:De})}_removeServiceInstance(ke,De=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance(De)}_addComponent(ke){(0,W._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,W._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function Ke(){const It=function Le(It){const ke={},De={__esModule:!0,initializeApp:function ut(ze,re={}){const Ze=W.initializeApp(ze,re);if((0,c.r3)(ke,Ze.name))return ke[Ze.name];const ce=new It(Ze,De);return ke[Ze.name]=ce,ce},app:q,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function it(ze){const re=ze.name,Ze=re.replace("-compat","");if(W._registerComponent(ze)&&"PUBLIC"===ze.type){const ce=(ge=q())=>{if("function"!=typeof ge[Ze])throw me.create("invalid-app-argument",{appName:re});return ge[Ze]()};void 0!==ze.serviceProps&&(0,c.ZB)(ce,ze.serviceProps),De[Ze]=ce,It.prototype[Ze]=function(...ge){return this._getService.bind(this,re).apply(this,ze.multipleInstances?ge:[])}}return"PUBLIC"===ze.type?De[Ze]:null},removeApp:function fe(ze){delete ke[ze]},useAsService:function He(ze,re){return"serverAuth"===re?null:re},modularAPIs:W}};function q(ze){if(!(0,c.r3)(ke,ze=ze||W._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:ze});return ke[ze]}return De.default=De,Object.defineProperty(De,"apps",{get:function st(){return Object.keys(ke).map(ze=>ke[ze])}}),q.App=It,De}(Ae);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:Ke,extendNamespace:function ke(De){(0,c.ZB)(It,De)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),It}(),we=new Oe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=Ce;!function Ge(It){(0,W.registerVersion)("@firebase/app-compat","0.1.39",It)}()},9681:(on,pt,V)=>{"use strict";V.r(pt),V.d(pt,{FirebaseError:()=>Oe.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>We,_addComponent:()=>tt,_addOrOverwriteComponent:()=>_t,_apps:()=>Ue,_clearComponents:()=>wn,_components:()=>Ne,_getProvider:()=>Ut,_registerComponent:()=>Kt,_removeServiceInstance:()=>zt,deleteApp:()=>Ln,getApp:()=>cr,getApps:()=>Mr,initializeApp:()=>hn,onLog:()=>Qt,registerVersion:()=>Wt,setLogLevel:()=>ii});var c=V(5861),X=V(4859),W=V(1877),Oe=V(2090),Ae=V(8766);class Se{constructor(jt){this.container=jt}getPlatformInfoString(){return this.container.getProviders().map(vn=>{if(function me(nn){const jt=nn.getComponent();return"VERSION"===(null==jt?void 0:jt.type)}(vn)){const Hn=vn.getImmediate();return`${Hn.library}/${Hn.version}`}return null}).filter(vn=>vn).join(" ")}}const Le="@firebase/app",Ce=new W.Yd("@firebase/app"),We="[DEFAULT]",$e={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ue=new Map,Ne=new Map;function tt(nn,jt){try{nn.container.addComponent(jt)}catch(vn){Ce.debug(`Component ${jt.name} failed to register with FirebaseApp ${nn.name}`,vn)}}function _t(nn,jt){nn.container.addOrOverwriteComponent(jt)}function Kt(nn){const jt=nn.name;if(Ne.has(jt))return Ce.debug(`There were multiple attempts to register component ${jt}.`),!1;Ne.set(jt,nn);for(const vn of Ue.values())tt(vn,nn);return!0}function Ut(nn,jt){const vn=nn.container.getProvider("heartbeat").getImmediate({optional:!0});return vn&&vn.triggerHeartbeat(),nn.container.getProvider(jt)}function zt(nn,jt,vn=We){Ut(nn,jt).clearInstance(vn)}function wn(){Ne.clear()}const tr=new Oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qn{constructor(jt,vn,Hn){this._isDeleted=!1,this._options=Object.assign({},jt),this._config=Object.assign({},vn),this._name=vn.name,this._automaticDataCollectionEnabled=vn.automaticDataCollectionEnabled,this._container=Hn,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(jt){this.checkDestroyed(),this._automaticDataCollectionEnabled=jt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(jt){this._isDeleted=jt}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}const Pn="9.14.0";function hn(nn,jt={}){let vn=nn;"object"!=typeof jt&&(jt={name:jt});const Hn=Object.assign({name:We,automaticDataCollectionEnabled:!1},jt),Nn=Hn.name;if("string"!=typeof Nn||!Nn)throw tr.create("bad-app-name",{appName:String(Nn)});if(vn||(vn=(0,Oe.aH)()),!vn)throw tr.create("no-options");const Vn=Ue.get(Nn);if(Vn){if((0,Oe.vZ)(vn,Vn.options)&&(0,Oe.vZ)(Hn,Vn.config))return Vn;throw tr.create("duplicate-app",{appName:Nn})}const Ye=new X.H0(Nn);for(const Qe of Ne.values())Ye.addComponent(Qe);const Fe=new qn(vn,Hn,Ye);return Ue.set(Nn,Fe),Fe}function cr(nn=We){const jt=Ue.get(nn);if(!jt&&nn===We)return hn();if(!jt)throw tr.create("no-app",{appName:nn});return jt}function Mr(){return Array.from(Ue.values())}function Ln(nn){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(nn){const jt=nn.name;Ue.has(jt)&&(Ue.delete(jt),yield Promise.all(nn.container.getProviders().map(vn=>vn.delete())),nn.isDeleted=!0)})).apply(this,arguments)}function Wt(nn,jt,vn){var Hn;let Nn=null!==(Hn=$e[nn])&&void 0!==Hn?Hn:nn;vn&&(Nn+=`-${vn}`);const Vn=Nn.match(/\s|\//),Ye=jt.match(/\s|\//);if(Vn||Ye){const Fe=[`Unable to register library "${Nn}" with version "${jt}":`];return Vn&&Fe.push(`library name "${Nn}" contains illegal characters (whitespace or "/")`),Vn&&Ye&&Fe.push("and"),Ye&&Fe.push(`version name "${jt}" contains illegal characters (whitespace or "/")`),void Ce.warn(Fe.join(" "))}Kt(new X.wA(`${Nn}-version`,()=>({library:Nn,version:jt}),"VERSION"))}function Qt(nn,jt){if(null!==nn&&"function"!=typeof nn)throw tr.create("invalid-log-argument");(0,W.Am)(nn,jt)}function ii(nn){(0,W.Ub)(nn)}const Kr="firebase-heartbeat-store";let Dr=null;function xn(){return Dr||(Dr=(0,Ae.X3)("firebase-heartbeat-database",1,{upgrade:(nn,jt)=>{0===jt&&nn.createObjectStore(Kr)}}).catch(nn=>{throw tr.create("idb-open",{originalErrorMessage:nn.message})})),Dr}function Bn(){return(Bn=(0,c.Z)(function*(nn){var jt;try{return(yield xn()).transaction(Kr).objectStore(Kr).get(Er(nn))}catch(vn){if(vn instanceof Oe.ZR)Ce.warn(vn.message);else{const Hn=tr.create("idb-get",{originalErrorMessage:null===(jt=vn)||void 0===jt?void 0:jt.message});Ce.warn(Hn.message)}}})).apply(this,arguments)}function yi(nn,jt){return _r.apply(this,arguments)}function _r(){return(_r=(0,c.Z)(function*(nn,jt){var vn;try{const Nn=(yield xn()).transaction(Kr,"readwrite");return yield Nn.objectStore(Kr).put(jt,Er(nn)),Nn.done}catch(Hn){if(Hn instanceof Oe.ZR)Ce.warn(Hn.message);else{const Nn=tr.create("idb-set",{originalErrorMessage:null===(vn=Hn)||void 0===vn?void 0:vn.message});Ce.warn(Nn.message)}}})).apply(this,arguments)}function Er(nn){return`${nn.name}!${nn.options.appId}`}class ki{constructor(jt){this.container=jt,this._heartbeatsCache=null;const vn=this.container.getProvider("app").getImmediate();this._storage=new dr(vn),this._heartbeatsCachePromise=this._storage.read().then(Hn=>(this._heartbeatsCache=Hn,Hn))}triggerHeartbeat(){var jt=this;return(0,c.Z)(function*(){const Hn=jt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nn=wr();if(null===jt._heartbeatsCache&&(jt._heartbeatsCache=yield jt._heartbeatsCachePromise),jt._heartbeatsCache.lastSentHeartbeatDate!==Nn&&!jt._heartbeatsCache.heartbeats.some(Vn=>Vn.date===Nn))return jt._heartbeatsCache.heartbeats.push({date:Nn,agent:Hn}),jt._heartbeatsCache.heartbeats=jt._heartbeatsCache.heartbeats.filter(Vn=>{const Ye=new Date(Vn.date).valueOf();return Date.now()-Ye<=2592e6}),jt._storage.overwrite(jt._heartbeatsCache)})()}getHeartbeatsHeader(){var jt=this;return(0,c.Z)(function*(){if(null===jt._heartbeatsCache&&(yield jt._heartbeatsCachePromise),null===jt._heartbeatsCache||0===jt._heartbeatsCache.heartbeats.length)return"";const vn=wr(),{heartbeatsToSend:Hn,unsentEntries:Nn}=function bi(nn,jt=1024){const vn=[];let Hn=nn.slice();for(const Nn of nn){const Vn=vn.find(Ye=>Ye.agent===Nn.agent);if(Vn){if(Vn.dates.push(Nn.date),Wn(vn)>jt){Vn.dates.pop();break}}else if(vn.push({agent:Nn.agent,dates:[Nn.date]}),Wn(vn)>jt){vn.pop();break}Hn=Hn.slice(1)}return{heartbeatsToSend:vn,unsentEntries:Hn}}(jt._heartbeatsCache.heartbeats),Vn=(0,Oe.L)(JSON.stringify({version:2,heartbeats:Hn}));return jt._heartbeatsCache.lastSentHeartbeatDate=vn,Nn.length>0?(jt._heartbeatsCache.heartbeats=Nn,yield jt._storage.overwrite(jt._heartbeatsCache)):(jt._heartbeatsCache.heartbeats=[],jt._storage.overwrite(jt._heartbeatsCache)),Vn})()}}function wr(){return(new Date).toISOString().substring(0,10)}class dr{constructor(jt){this.app=jt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,Oe.hl)()&&(0,Oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var jt=this;return(0,c.Z)(function*(){return(yield jt._canUseIndexedDBPromise)&&(yield function Sn(nn){return Bn.apply(this,arguments)}(jt.app))||{heartbeats:[]}})()}overwrite(jt){var vn=this;return(0,c.Z)(function*(){var Hn;if(yield vn._canUseIndexedDBPromise){const Vn=yield vn.read();return yi(vn.app,{lastSentHeartbeatDate:null!==(Hn=jt.lastSentHeartbeatDate)&&void 0!==Hn?Hn:Vn.lastSentHeartbeatDate,heartbeats:jt.heartbeats})}})()}add(jt){var vn=this;return(0,c.Z)(function*(){var Hn;if(yield vn._canUseIndexedDBPromise){const Vn=yield vn.read();return yi(vn.app,{lastSentHeartbeatDate:null!==(Hn=jt.lastSentHeartbeatDate)&&void 0!==Hn?Hn:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...jt.heartbeats]})}})()}}function Wn(nn){return(0,Oe.L)(JSON.stringify({version:2,heartbeats:nn})).length}!function Ar(nn){Kt(new X.wA("platform-logger",jt=>new Se(jt),"PRIVATE")),Kt(new X.wA("heartbeat",jt=>new ki(jt),"PRIVATE")),Wt(Le,"0.8.4",nn),Wt(Le,"0.8.4","esm2017"),Wt("fire-js","")}("")},4859:(on,pt,V)=>{"use strict";V.d(pt,{H0:()=>Le,wA:()=>W,zt:()=>Ae});var c=V(5861),X=V(2090);class W{constructor(Ce,we,be){this.name=Ce,this.instanceFactory=we,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const Oe="[DEFAULT]";class Ae{constructor(Ce,we){this.name=Ce,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const we=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(we)){const be=new X.BH;if(this.instancesDeferred.set(we,be),this.isInitialized(we)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:we});qe&&be.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(we).promise}getImmediate(Ce){var we;const be=this.normalizeInstanceIdentifier(null==Ce?void 0:Ce.identifier),qe=null!==(we=null==Ce?void 0:Ce.optional)&&void 0!==we&&we;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(Ge){if(qe)return null;throw Ge}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function me(Ke){return"EAGER"===Ke.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:Oe})}catch(we){}for(const[we,be]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(we);try{const Ge=this.getOrInitializeService({instanceIdentifier:qe});be.resolve(Ge)}catch(Ge){}}}}clearInstance(Ce=Oe){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,c.Z)(function*(){const we=Array.from(Ce.instances.values());yield Promise.all([...we.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...we.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=Oe){return this.instances.has(Ce)}getOptions(Ce=Oe){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:we={}}=Ce,be=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:be,options:we});for(const[Ge,ot]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(Ge)&&ot.resolve(qe);return qe}onInit(Ce,we){var be;const qe=this.normalizeInstanceIdentifier(we),Ge=null!==(be=this.onInitCallbacks.get(qe))&&void 0!==be?be:new Set;Ge.add(Ce),this.onInitCallbacks.set(qe,Ge);const ot=this.instances.get(qe);return ot&&Ce(ot,qe),()=>{Ge.delete(Ce)}}invokeOnInitCallbacks(Ce,we){const be=this.onInitCallbacks.get(we);if(be)for(const qe of be)try{qe(Ce,we)}catch(Ge){}}getOrInitializeService({instanceIdentifier:Ce,options:we={}}){let be=this.instances.get(Ce);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(Ke=Ce,Ke===Oe?void 0:Ke),options:we}),this.instances.set(Ce,be),this.instancesOptions.set(Ce,we),this.invokeOnInitCallbacks(be,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,be)}catch(qe){}var Ke;return be||null}normalizeInstanceIdentifier(Ce=Oe){return this.component?this.component.multipleInstances?Ce:Oe:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const we=this.getProvider(Ce.name);if(we.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);we.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const we=new Ae(Ce,this);return this.providers.set(Ce,we),we}getProviders(){return Array.from(this.providers.values())}}},1877:(on,pt,V)=>{"use strict";V.d(pt,{Am:()=>Ke,Ub:()=>Le,Yd:()=>me,in:()=>X});const c=[];var X=(()=>{return(Ce=X||(X={}))[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",X;var Ce})();const W={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},Oe=X.INFO,Ae={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Se=(Ce,we,...be)=>{if(we<Ce.logLevel)return;const qe=(new Date).toISOString(),Ge=Ae[we];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${we})`);console[Ge](`[${qe}]  ${Ce.name}:`,...be)};class me{constructor(we){this.name=we,this._logLevel=Oe,this._logHandler=Se,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(we){if(!(we in X))throw new TypeError(`Invalid value "${we}" assigned to \`logLevel\``);this._logLevel=we}setLogLevel(we){this._logLevel="string"==typeof we?W[we]:we}get logHandler(){return this._logHandler}set logHandler(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we}get userLogHandler(){return this._userLogHandler}set userLogHandler(we){this._userLogHandler=we}debug(...we){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...we),this._logHandler(this,X.DEBUG,...we)}log(...we){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...we),this._logHandler(this,X.VERBOSE,...we)}info(...we){this._userLogHandler&&this._userLogHandler(this,X.INFO,...we),this._logHandler(this,X.INFO,...we)}warn(...we){this._userLogHandler&&this._userLogHandler(this,X.WARN,...we),this._logHandler(this,X.WARN,...we)}error(...we){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...we),this._logHandler(this,X.ERROR,...we)}}function Le(Ce){c.forEach(we=>{we.setLogLevel(Ce)})}function Ke(Ce,we){for(const be of c){let qe=null;we&&we.level&&(qe=W[we.level]),be.userLogHandler=null===Ce?null:(Ge,ot,...It)=>{const ke=It.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(fe){return null}}).filter(De=>De).join(" ");ot>=(null!=qe?qe:Ge.logLevel)&&Ce({level:X[ot].toLowerCase(),message:ke,args:It,type:Ge.name})}}}},8766:(on,pt,V)=>{"use strict";V.d(pt,{Lj:()=>ut,X3:()=>q});var c=V(5861);let W,Oe;const me=new WeakMap,Le=new WeakMap,Ke=new WeakMap,Ce=new WeakMap,we=new WeakMap;let Ge={get(re,Ze,ce){if(re instanceof IDBTransaction){if("done"===Ze)return Le.get(re);if("objectStoreNames"===Ze)return re.objectStoreNames||Ke.get(re);if("store"===Ze)return ce.objectStoreNames[1]?void 0:ce.objectStore(ce.objectStoreNames[0])}return De(re[Ze])},set:(re,Ze,ce)=>(re[Ze]=ce,!0),has:(re,Ze)=>re instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in re};function ke(re){return"function"==typeof re?function It(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return Oe||(Oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...Ze){return re.apply(fe(this),Ze),De(me.get(this))}:function(...Ze){return De(re.apply(fe(this),Ze))}:function(Ze,...ce){const ge=re.call(fe(this),Ze,...ce);return Ke.set(ge,Ze.sort?Ze.sort():[Ze]),De(ge)}}(re):(re instanceof IDBTransaction&&function qe(re){if(Le.has(re))return;const Ze=new Promise((ce,ge)=>{const ve=()=>{re.removeEventListener("complete",ie),re.removeEventListener("error",Pe),re.removeEventListener("abort",Pe)},ie=()=>{ce(),ve()},Pe=()=>{ge(re.error||new DOMException("AbortError","AbortError")),ve()};re.addEventListener("complete",ie),re.addEventListener("error",Pe),re.addEventListener("abort",Pe)});Le.set(re,Ze)}(re),((re,Ze)=>Ze.some(ce=>re instanceof ce))(re,function Ae(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,Ge):re)}function De(re){if(re instanceof IDBRequest)return function be(re){const Ze=new Promise((ce,ge)=>{const ve=()=>{re.removeEventListener("success",ie),re.removeEventListener("error",Pe)},ie=()=>{ce(De(re.result)),ve()},Pe=()=>{ge(re.error),ve()};re.addEventListener("success",ie),re.addEventListener("error",Pe)});return Ze.then(ce=>{ce instanceof IDBCursor&&me.set(ce,re)}).catch(()=>{}),we.set(Ze,re),Ze}(re);if(Ce.has(re))return Ce.get(re);const Ze=ke(re);return Ze!==re&&(Ce.set(re,Ze),we.set(Ze,re)),Ze}const fe=re=>we.get(re);function q(re,Ze,{blocked:ce,upgrade:ge,blocking:ve,terminated:ie}={}){const Pe=indexedDB.open(re,Ze),Ie=De(Pe);return ge&&Pe.addEventListener("upgradeneeded",et=>{ge(De(Pe.result),et.oldVersion,et.newVersion,De(Pe.transaction))}),ce&&Pe.addEventListener("blocked",()=>ce()),Ie.then(et=>{ie&&et.addEventListener("close",()=>ie()),ve&&et.addEventListener("versionchange",()=>ve())}).catch(()=>{}),Ie}function ut(re,{blocked:Ze}={}){const ce=indexedDB.deleteDatabase(re);return Ze&&ce.addEventListener("blocked",()=>Ze()),De(ce).then(()=>{})}const st=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],He=new Map;function ze(re,Ze){if(!(re instanceof IDBDatabase)||Ze in re||"string"!=typeof Ze)return;if(He.get(Ze))return He.get(Ze);const ce=Ze.replace(/FromIndex$/,""),ge=Ze!==ce,ve=it.includes(ce);if(!(ce in(ge?IDBIndex:IDBObjectStore).prototype)||!ve&&!st.includes(ce))return;const ie=function(){var Pe=(0,c.Z)(function*(Ie,...et){const Ve=this.transaction(Ie,ve?"readwrite":"readonly");let We=Ve.store;return ge&&(We=We.index(et.shift())),(yield Promise.all([We[ce](...et),ve&&Ve.done]))[0]});return function(et){return Pe.apply(this,arguments)}}();return He.set(Ze,ie),ie}!function ot(re){Ge=re(Ge)}(re=>({...re,get:(Ze,ce,ge)=>ze(Ze,ce)||re.get(Ze,ce,ge),has:(Ze,ce)=>!!ze(Ze,ce)||re.has(Ze,ce)}))},5861:(on,pt,V)=>{"use strict";function c(W,Oe,Ae,Se,me,Le,Ke){try{var Ce=W[Le](Ke),we=Ce.value}catch(be){return void Ae(be)}Ce.done?Oe(we):Promise.resolve(we).then(Se,me)}function X(W){return function(){var Oe=this,Ae=arguments;return new Promise(function(Se,me){var Le=W.apply(Oe,Ae);function Ke(we){c(Le,Se,me,Ke,Ce,"next",we)}function Ce(we){c(Le,Se,me,Ke,Ce,"throw",we)}Ke(void 0)})}}V.d(pt,{Z:()=>X})}},on=>{on(on.s=3292)}]);